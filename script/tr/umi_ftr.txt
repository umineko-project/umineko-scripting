;Episode ends
;***********************************************
*ep1_end
	notif %UMINEKOEND < 11 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 11 mov %UMINEKOEND,11 : mov %UMINEKOEND_FLG,11 : mov %UMINEKOEND_MUSIC_FLG,1 : mov %UMINEKOEND_CG_FLG,1
return

*ep2_end
	notif %UMINEKOEND < 21 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 21 mov %UMINEKOEND,21 : mov %UMINEKOEND_FLG,21
return

*ep3_end
	notif %UMINEKOEND < 31 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 31 mov %UMINEKOEND,31 : mov %UMINEKOEND_FLG,31
return

*ep4_end
	notif %UMINEKOEND < 41 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 41 mov %UMINEKOEND,41 : mov %UMINEKOEND_FLG,41
return

*ep5_end
	notif %UMINEKOEND < 51 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 51 mov %UMINEKOEND,51 : mov %UMINEKOEND_FLG,51
return

*ep6_end
	notif %UMINEKOEND < 61 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 61 mov %UMINEKOEND,61 : mov %UMINEKOEND_FLG,61
return

*ep7_end
	notif %UMINEKOEND < 71 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 71 mov %UMINEKOEND,71 : mov %UMINEKOEND_FLG,71
return

*ep8_end
	notif %UMINEKOEND < 81 jumpf
		seplay 1,22,70
		lbg s0_5,"text004"
		flush 22
		wait2 10000
		csp_slot s0_5
		flush 22
	~
	if %UMINEKOEND < 81 mov %UMINEKOEND,81 : mov %UMINEKOEND_FLG,81
return

;Teatime ends
;***********************************************
*teatime_ep1_end
	notif %UMINEKOEND < 12 jumpf
	seplay 1,22,70
	lbg s0_3,"text005"
	flush 22
	wait2 10000
	csp_slot s0_3
	flush 22
	~
	if %UMINEKOEND < 12 mov %UMINEKOEND,12 : mov %UMINEKOEND_FLG,12
return

*teatime_ep2_end
	notif %UMINEKOEND < 22 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 22 mov %UMINEKOEND,22 : mov %UMINEKOEND_FLG,22
return

*teatime_ep3_end
	notif %UMINEKOEND < 32 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 32 mov %UMINEKOEND,32 : mov %UMINEKOEND_FLG,32
return

*teatime_ep4_end
	notif %UMINEKOEND < 42 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 42 mov %UMINEKOEND,42 : mov %UMINEKOEND_FLG,42
return

*teatime_ep5_end
	notif %UMINEKOEND < 52 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 52 mov %UMINEKOEND,52 : mov %UMINEKOEND_FLG,52
return

*teatime_ep6_end
	notif %UMINEKOEND < 62 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 62 mov %UMINEKOEND,62 : mov %UMINEKOEND_FLG,62
return

*teatime_ep7_end
	notif %UMINEKOEND < 72 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 72 mov %UMINEKOEND,72 : mov %UMINEKOEND_FLG,72
return

*teatime_ep8_end
	notif %UMINEKOEND < 82 jumpf
		seplay 1,22,70
		lbg s0_3,"text005"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 82 mov %UMINEKOEND,82 : mov %UMINEKOEND_FLG,82
return

;URA Teatime ends
;***********************************************
*teatime_ep1b_end
	notif %UMINEKOEND < 20 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 20 mov %UMINEKOEND,20 : mov %UMINEKOEND_FLG,20 : mov %UMINEKOEND_TIPS_FLG,1 : mov %UMINEKOEND_TIPS_CHA_FLG,1
return

*teatime_ep2b_end
	notif %UMINEKOEND < 30 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 30 mov %UMINEKOEND,30 : mov %UMINEKOEND_FLG,30 : mov %UMINEKOEND_TIPS_FLG,2 : mov %UMINEKOEND_TIPS_CHA_FLG,2
return

*teatime_ep3b_end
	notif %UMINEKOEND < 40 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 40 mov %UMINEKOEND,40 : mov %UMINEKOEND_FLG,40 : mov %UMINEKOEND_TIPS_FLG,3 : mov %UMINEKOEND_TIPS_CHA_FLG,3
return

*teatime_ep4b_end
	notif %UMINEKOEND < 50 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 50 mov %UMINEKOEND,50 : mov %UMINEKOEND_FLG,50 : mov %UMINEKOEND_TIPS_FLG,4 : mov %UMINEKOEND_TIPS_CHA_FLG,4
return

*teatime_ep5b_end
	notif %UMINEKOEND < 60 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 60 mov %UMINEKOEND,60 : mov %UMINEKOEND_FLG,60 : mov %UMINEKOEND_TIPS_FLG,5 : mov %UMINEKOEND_TIPS_CHA_FLG,5
return

*teatime_ep6b_end
	notif %UMINEKOEND < 70 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 70 mov %UMINEKOEND,70 : mov %UMINEKOEND_FLG,70 : mov %UMINEKOEND_TIPS_FLG,6 : mov %UMINEKOEND_TIPS_CHA_FLG,6
return

*teatime_ep7b_end
	notif %UMINEKOEND < 80 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 80 mov %UMINEKOEND,80 : mov %UMINEKOEND_FLG,80 : mov %UMINEKOEND_TIPS_FLG,7 : mov %UMINEKOEND_TIPS_CHA_FLG,7
return

*teatime_ep8b_end
	notif %UMINEKOEND < 90 jumpf
		seplay 1,22,70
		lbg s0_3,"text006"
		flush 22
		wait2 10000
		csp_slot s0_3
		flush 22
	~
	if %UMINEKOEND < 90 mov %UMINEKOEND,90 : mov %UMINEKOEND_FLG,90 : mov %UMINEKOEND_TIPS_FLG,8 : mov %UMINEKOEND_TIPS_CHA_FLG,8
return

;Our credits
;***********************************************
*credits_base
	border_pad_push 0
	E_A
	textoff

	skip_off

#locale_import "credits.txt"

	;stopwatch "credits_render_start"
	lbsp2 s0_5,$Free1,0,0
	;stopwatch "credits_render_end"
	getspsize2 s0_5,%Free1,%Free2
	aspt2 xpos,s0_5,%Free1/2
	aspt2 ypos,s0_5,%Free2/2 + 1200
	print 1

return

*credits_end
	sptwait2 ypos,s0_5
	vol_bgm -1,3000
	wait2 3000
	lsp s0_5,":s;#FFFFFF`{p:20:{a:c:2011-2020, Umineko Project}{n}}",0,990
	print 2
	wait2 6000
	csp_slot s0_5
	print 2
	border_pad_pop
	skip_on
return

*credits_ep4
	gosub *credits_base
	bgmplay 8,100,1
	spt2 ypos,s0_5,-%Free2-1200,94000
	gosub *credits_end
return

*credits_ep8
	gosub *credits_base
	bgmplay 8,100,1
	spt2 ypos,s0_5,-%Free2-1200,95000
	gosub *credits_end
return

*chiru_ending
	ch_done flag_scenario_8_16
return

;Endings
*end_game

;For various credits
csp_slot s0_3
csp_slot s0_4
csp_slot s0_5
csp_slot s0_6
csp_slot s0_7

bg black,0

if %CHIRU_MODE = 1 jumpf

if $name_chapter_save == "1_17" && $flag_scenario_1_17 == "●" trophy_open 22 : trophy_open 2 : trophy_open 3
if $name_chapter_save == "2_18" && $flag_scenario_2_18 == "●" trophy_open 23 : trophy_open 4 : trophy_open 5
if $name_chapter_save == "3_18" && $flag_scenario_3_18 == "●" trophy_open 24 : trophy_open 6 : trophy_open 7
if $name_chapter_save == "4_19" && $flag_scenario_4_19 == "●" trophy_open 25 : trophy_open 8 : trophy_open 9

if $name_chapter_save == "1_tea" && $flag_scenario_1_tea == "●" trophy_open 11
if $name_chapter_save == "2_tea" && $flag_scenario_2_tea == "●" trophy_open 13
if $name_chapter_save == "3_tea" && $flag_scenario_3_tea == "●" trophy_open 15
if $name_chapter_save == "4_tea" && $flag_scenario_4_tea == "●" trophy_open 17

if $name_chapter_save == "1_ura" && $flag_scenario_1_ura == "●" trophy_open 12
if $name_chapter_save == "2_ura" && $flag_scenario_2_ura == "●" trophy_open 14
if $name_chapter_save == "3_ura" && $flag_scenario_3_ura == "●" trophy_open 16
if $name_chapter_save == "4_ura" && $flag_scenario_4_ura == "●" trophy_open 18

if $name_chapter_save == "1_17" gosub *ep1_end
if $name_chapter_save == "2_18" gosub *ep2_end
if $name_chapter_save == "3_18" gosub *ep3_end
if $name_chapter_save == "4_19" gosub *ep4_end

if $name_chapter_save == "1_tea" gosub *teatime_ep1_end
if $name_chapter_save == "2_tea" gosub *teatime_ep2_end
if $name_chapter_save == "3_tea" gosub *teatime_ep3_end
if $name_chapter_save == "4_tea" gosub *teatime_ep4_end

if $name_chapter_save == "1_ura" gosub *teatime_ep1b_end
if $name_chapter_save == "2_ura" gosub *teatime_ep2b_end
if $name_chapter_save == "3_ura" gosub *teatime_ep3b_end
if $name_chapter_save == "4_ura" gosub *teatime_ep4b_end : gosub *credits_ep4

~

if %CHIRU_MODE = 0 jumpf

;chiru
if $name_chapter_save == "5_15" && $flag_scenario_5_15 == "●" trophy_open 40 : trophy_open 2 : trophy_open 3
if $name_chapter_save == "6_18" && $flag_scenario_6_18 == "●" trophy_open 41 : trophy_open 4 : trophy_open 5
if $name_chapter_save == "7_18" && $flag_scenario_7_18 == "●" trophy_open 42 : trophy_open 6 : trophy_open 7
if $name_chapter_save == "8_16" && $flag_scenario_8_16 == "●" && %chosen_ending == 2 trophy_open 43 ; trick
if $name_chapter_save == "8_16" && $flag_scenario_8_16 == "●" && %chosen_ending == 1 trophy_open 8 ; magic


if $name_chapter_save == "5_tea" && $flag_scenario_5_tea == "●" trophy_open 30
if $name_chapter_save == "6_tea" && $flag_scenario_6_tea == "●" trophy_open 32
if $name_chapter_save == "7_tea" && $flag_scenario_7_tea == "●" trophy_open 34
if $name_chapter_save == "8_tea" && $flag_scenario_8_tea == "●" trophy_open 36

if $name_chapter_save == "5_ura" && $flag_scenario_5_ura == "●" trophy_open 31
if $name_chapter_save == "6_ura" && $flag_scenario_6_ura == "●" trophy_open 33
if $name_chapter_save == "7_ura" && $flag_scenario_7_ura == "●" trophy_open 35 : mov $lbg_name,"portrait_ep7" : gosub *open_cg
;Ending 2
if $name_chapter_save == "8_ura" && $flag_scenario_8_ura == "●" trophy_open 37 : trophy_open 44 : mov $lbg_name,"portrait_ep8" : gosub *open_cg

if $name_chapter_save == "5_15" gosub *ep5_end
if $name_chapter_save == "6_18" gosub *ep6_end
if $name_chapter_save == "7_18" gosub *ep7_end
if $name_chapter_save == "8_16" && %chosen_ending == 1 gosub *ep8_end ; magic

if $name_chapter_save == "5_tea" gosub *teatime_ep5_end
if $name_chapter_save == "6_tea" gosub *teatime_ep6_end
if $name_chapter_save == "7_tea" gosub *teatime_ep7_end
if $name_chapter_save == "8_tea" gosub *teatime_ep8_end

if $name_chapter_save == "5_ura" gosub *teatime_ep5b_end
if $name_chapter_save == "6_ura" gosub *teatime_ep6b_end
if $name_chapter_save == "7_ura" gosub *teatime_ep7b_end
if $name_chapter_save == "8_ura" gosub *teatime_ep8b_end : gosub *credits_ep8
;end

~

goto *quick_reload

;*************************************************
; Omakes
;*************************************************

*o1
bg black,0
log_reset
skip_on
mov %r_mode_flg,1
goto *o1_0

*o2
bg black,0
log_reset
skip_on
mov %r_mode_flg,1
goto *o2_0

*o3
bg black,0
log_reset
skip_on
mov %r_mode_flg,1
;mov %no_cache_atm,on ;disable voice caching
goto *o3_start

*o4
bg black,0
log_reset
skip_on
mov %r_mode_flg,1
;mov %no_cache_atm,on ;disable voice caching
goto *o4_0

*o5
*o6
*o7
*o8
*o_chiru
bg black,0
log_reset
skip_on
mov %r_mode_flg,1
goto *o_chiru_start

*o1_end
*o2_end
*o3_end
*o4_end
if %omake_level >= 2 mov $omake_return,"omake"
*o_chiru_end
skip_off
textoff
csp -10
flush2 10,5000
fede 0,5000
E_A
mov %r_mode_flg,0
skip_on
goto *quick_reload

mov %title_skip,1
definereset

;Below goes an unfortunate and ugly hack we have to add due to changing omake labels.
*o1e_0
*o1e_1
*o1e_2
*o1e_3
*o1e_4
*o1e_5
*o1e_6
*o1e_7
*o1e_8
*o1e_9
*o1e_10
*o1e_11
*o1e_12
*o1e_13
*o1e_14
*o1e_15
*o1e_16
*o1e_17
*o1e_18
*o1e_19
*o1e_20
*o1e_21
*o1e_22
*o1e_23
*o1e_24
*o1e_25
*o1e_26
*o1e_27
*o1e_28
*o1e_29
*o1e_30
*o1e_31
*o1e_32
*o1r_0
*o1r_1
*o1r_2
*o1r_3
*o1r_4
*o1r_5
*o1r_6
*o1r_7
*o1r_8
*o1r_9
*o1r_10
*o1r_11
*o1r_12
*o1r_13
*o1r_14
*o1r_15
*o1r_16
*o1r_17
*o1r_18
*o1r_19
*o1r_20
*o1r_21
*o1r_22
*o1r_23
*o1r_24
*o1r_25
*o1r_26
*o1r_27
*o1r_28
*o1r_29
*o1r_30
*o1r_31
*o1r_32
*o1p_0
*o1p_1
*o1p_2
*o1p_3
*o1p_4
*o1p_5
*o1p_6
*o1p_7
*o1p_8
*o1p_9
*o1p_10
*o1p_11
*o1p_12
*o1p_13
*o1p_14
*o1p_15
*o1p_16
*o1p_17
*o1p_18
*o1p_19
*o1p_20
*o1p_21
*o1p_22
*o1p_23
*o1p_24
*o1p_25
*o1p_26
*o1p_27
*o1p_28
*o1p_29
*o1p_30
*o1p_31
*o1p_32
*o2e_0
*o2e_1
*o2e_2
*o2e_3
*o2e_4
*o2e_5
*o2e_6
*o2e_7
*o2e_8
*o2e_9
*o2e_10
*o2e_11
*o2e_12
*o2e_13
*o2e_14
*o2e_15
*o2e_16
*o2e_17
*o2e_18
*o2e_19
*o2e_20
*o2e_21
*o2e_22
*o2e_23
*o2e_24
*o2e_25
*o2e_26
*o2e_27
*o2e_28
*o2e_29
*o2e_30
*o2e_31
*o2e_32
*o2e_33
*o2e_34
*o2e_35
*o2e_36
*o2e_37
*o2r_0
*o2r_1
*o2r_2
*o2r_3
*o2r_4
*o2r_5
*o2r_6
*o2r_7
*o2r_8
*o2r_9
*o2r_10
*o2r_11
*o2r_12
*o2r_13
*o2r_14
*o2r_15
*o2r_16
*o2r_17
*o2r_18
*o2r_19
*o2r_20
*o2r_21
*o2r_22
*o2r_23
*o2r_24
*o2r_25
*o2r_26
*o2r_27
*o2r_28
*o2r_29
*o2r_30
*o2r_31
*o2r_32
*o2r_33
*o2r_34
*o2r_35
*o2r_36
*o2r_37
*o3r_wal_1
*o3e_wal_1
*o3r_bea_1
*o3e_bea_1
*o3r_bea_2
*o3e_bea_2
*o3r_ev2_1
*o3e_ev2_1
*o3r_ev2_2
*o3e_ev2_2
*o3r_ev2_3
*o3e_ev2_3
*o3e_rud
*o3r_rud
*o3e_kir
*o3r_kir
*o3e_cla
*o3r_cla
*o3e_nat
*o3r_nat
*o3e_hid
*o3r_hid
*o3e_ros
*o3r_ros
*o4e_0
*o4e_1
*o4e_2
*o4e_3
*o4e_4
*o4e_5
*o4e_6
*o4e_7
*o4e_8
*o4e_9
*o4e_10
*o4e_11
*o4e_12
*o4e_13
*o4e_14
*o4e_15
*o4e_16
*o4e_17
*o4e_18
*o4e_19
*o4e_20
*o4e_21
*o4e_22
*o4e_23
*o4e_24
*o4e_25
*o4e_26
*o4e_27
*o4e_28
*o4e_29
*o4e_30
*o4e_31
*o4e_32
*o4e_33
*o4e_34
*o4e_35
*o4e_36
*o4e_37
*o4e_38
*o4e_39
*o4e_40
*o4e_41
*o4e_42
*o4e_43
*o4e_44
*o4e_45
*o4e_46
*o4e_47
*o4e_48
*o4e_49
*o4e_50
*o4e_51
*o4e_52
*o4e_53
*o4e_54
*o4e_55
*o4e_56
*o4e_57
*o4e_58
*o4e_59
*o4r_0
*o4r_1
*o4r_2
*o4r_3
*o4r_4
*o4r_5
*o4r_6
*o4r_7
*o4r_8
*o4r_9
*o4r_10
*o4r_11
*o4r_12
*o4r_13
*o4r_14
*o4r_15
*o4r_16
*o4r_17
*o4r_18
*o4r_19
*o4r_20
*o4r_21
*o4r_22
*o4r_23
*o4r_24
*o4r_25
*o4r_26
*o4r_27
*o4r_28
*o4r_29
*o4r_30
*o4r_31
*o4r_32
*o4r_33
*o4r_34
*o4r_35
*o4r_36
*o4r_37
*o4r_38
*o4r_39
*o4r_40
*o4r_41
*o4r_42
*o4r_43
*o4r_44
*o4r_45
*o4r_46
*o4r_47
*o4r_48
*o4r_49
*o4r_50
*o4r_51
*o4r_52
*o4r_53
*o4r_54
*o4r_55
*o4r_56
*o4r_57
*o4r_58
*o4r_59
goto *o1_end

*bt_def

stralias white,":c;graphics\colour\white.png"
stralias black,":c;graphics\colour\black.png"
stralias red,":c;graphics\colour\red.png"
stralias red2,":c;graphics\colour\red2.png"
stralias red_b,":c;graphics\colour\red_b.png"
stralias blue,":c;graphics\colour\blue.png"
stralias blue2,":c;graphics\colour\blue2.png"
stralias white_waku,":a;graphics\colour\white_waku.png"

;Clock images
stralias clock,":a;graphics\system\clock\clock.png"  	;Clock
stralias clock_h,":a;graphics\system\clock\clock_h.png"	;hour hand
stralias clock_m,":a;graphics\system\clock\clock_m.png" ;minute hand
stralias clock_c,":a;graphics\system\clock\clock_c.png" ;Clock center

;Black and white effect
stralias r_black,":c;graphics\colour\black.png"
stralias r_white,":c;graphics\colour\white.png"

getram %Free1
if %Free1 <= 2048 jumpf
	stralias end_8a_current,"end_8a"
	numalias end_8a_scaley,100 
~

if %Free1 > 2048 jumpf
	stralias end_8a_current,"end_8a_small"
	numalias end_8a_scaley,200
~

;----------------------------------

;----------------------------------
;Tips and grimoire stralias

#locale_import "menu.txt"

;Submenu stuff
;1min=6 1h=30
;ep1
stralias clock_scenario_1_op,"E610,0"
stralias clock_scenario_1_1,"R602,120,1R603,0,1E610,1"
stralias clock_scenario_1_2,"R602,45,1R603,180,1E610,2"
stralias clock_scenario_1_3,"R602,0,1R603,0,1E610,3"
stralias clock_scenario_1_4,"R602,315,1R603,180,1E610,4"
stralias clock_scenario_1_5,"R602,315,1R603,180,1E610,5"
stralias clock_scenario_1_6,"R602,270,1R603,0,1E610,6"
stralias clock_scenario_1_7,"R602,180,1R603,0,1E610,7"
stralias clock_scenario_1_8,"R602,60,1R603,0,1E610,8"
stralias clock_scenario_1_9,"E610,9"
stralias clock_scenario_1_10,"R602,180,1R603,0,1E610,10"
stralias clock_scenario_1_11,"R602,97,1R603,90,1E610,11"
stralias clock_scenario_1_12,"R602,330,1R603,0,1E610,12"
stralias clock_scenario_1_13,"R602,150,1R603,0,1E610,13"
stralias clock_scenario_1_14,"E610,14"
stralias clock_scenario_1_15,"R602,120,1R603,0,1E610,15"
stralias clock_scenario_1_16,"R602,15,1R603,180,1E610,16"
stralias clock_scenario_1_17,"E610,17"
;ep2
stralias clock_scenario_2_op,"E610,0"
stralias clock_scenario_2_1,"E610,1"
stralias clock_scenario_2_2,"E610,2"
stralias clock_scenario_2_3,"E610,3"
stralias clock_scenario_2_4,"E610,4"
stralias clock_scenario_2_5,"R602,43,1R603,90,1E610,5"
stralias clock_scenario_2_6,"R602,330,1R603,0,1E610,6"
stralias clock_scenario_2_7,"R602,180,1R603,0,1E610,7"
stralias clock_scenario_2_8,"R602,60,1R603,0,1E610,8"
stralias clock_scenario_2_9,"R602,180,1R603,0,1E610,9"
stralias clock_scenario_2_10,"R602,163,1R603,102,1E610,10"
stralias clock_scenario_2_11,"R602,162,1R603,60,1E610,11"
stralias clock_scenario_2_12,"R602,135,1R603,180,1E610,12"
stralias clock_scenario_2_13,"R602,330,1R603,0,1E610,13"
stralias clock_scenario_2_14,"R602,323,1R603,258,1E610,14"
stralias clock_scenario_2_15,"R602,180,1R603,0,1E610,15"
stralias clock_scenario_2_16,"R602,90,1R603,0,1E610,16"
stralias clock_scenario_2_17,"R602,15,1R603,180,1E610,17"
stralias clock_scenario_2_18,"R602,6,1R603,6,1E610,18"
;ep3
stralias clock_scenario_3_op,"E610,0"
stralias clock_scenario_3_1,"E610,1"
stralias clock_scenario_3_2,"R602,300,1R603,0,1E610,2"
stralias clock_scenario_3_3,"R602,120,1R603,0,1E610,3"
stralias clock_scenario_3_4,"R602,90,1R603,0,1E610,4"
stralias clock_scenario_3_5,"E610,5"
stralias clock_scenario_3_6,"R602,0,1R603,0,1E610,6"
stralias clock_scenario_3_7,"R602,350,1R603,234,1E610,7"
stralias clock_scenario_3_8,"R602,180,1R603,0,1E610,8"
stralias clock_scenario_3_9,"R602,150,1R603,0,1E610,9"
stralias clock_scenario_3_10,"R602,90,1R603,0,1E610,10"
stralias clock_scenario_3_11,"R602,60,1R603,0,1E610,11"
stralias clock_scenario_3_12,"R602,45,1R603,180,1E610,12"
stralias clock_scenario_3_13,"R602,30,1R603,0,1E610,13"
stralias clock_scenario_3_14,"R602,330,1R603,0,1E610,14"
stralias clock_scenario_3_15,"R602,315,1R603,180,1E610,15"
stralias clock_scenario_3_16,"R602,187,1R603,96,1E610,16"
stralias clock_scenario_3_17,"R602,179,1R603,342,1E610,17"
stralias clock_scenario_3_18,"E610,18"
;ep4
stralias clock_scenario_4_op,"E610,0"
stralias clock_scenario_4_1,"E610,1"
stralias clock_scenario_4_2,"E610,2"
stralias clock_scenario_4_3,"E610,3"
stralias clock_scenario_4_4,"R602,275,1R603,54,1E610,4"
stralias clock_scenario_4_5,"R602,176,1R603,318,1E610,5"
stralias clock_scenario_4_6,"E610,6"
stralias clock_scenario_4_7,"E610,7"
stralias clock_scenario_4_8,"E610,8"
stralias clock_scenario_4_9,"E610,9"
stralias clock_scenario_4_10,"E610,10"
stralias clock_scenario_4_11,"R602,66,1R603,72,1E610,11"
stralias clock_scenario_4_12,"E610,12"
stralias clock_scenario_4_13,"R602,41,1R603,138,1E610,13"
stralias clock_scenario_4_14,"E610,14"
stralias clock_scenario_4_15,"R602,30,1R603,0,1E610,15"
stralias clock_scenario_4_16,"R602,25,1R603,294,1E610,16"
stralias clock_scenario_4_17,"R602,7,1R603,78,1E610,17"
stralias clock_scenario_4_18,"E610,18"
stralias clock_scenario_4_19,"E610,19"
;ep5
stralias clock_scenario_5_op,"E610,0"
stralias clock_scenario_5_1,"E610,1"
stralias clock_scenario_5_2,"E610,2"
stralias clock_scenario_5_3,"E610,3"
stralias clock_scenario_5_4,"R602,30,1R603,0,1E610,4"
stralias clock_scenario_5_5,"R602,150,1R603,0,1E610,5"
stralias clock_scenario_5_6,"R602,60,1R603,0,1E610,6"
stralias clock_scenario_5_7,"R602,36,1R603,78,1E610,7"
stralias clock_scenario_5_8,"R602,5,1R603,66,1E610,8"
stralias clock_scenario_5_9,"E610,9"
stralias clock_scenario_5_10,"R602,150,1R603,0,1E610,10"
stralias clock_scenario_5_11,"R602,118,1R603,336,1E610,11"
stralias clock_scenario_5_12,"R602,30,1R603,0,1E610,12"
stralias clock_scenario_5_13,"R602,343,1R603,162,1E610,13"
stralias clock_scenario_5_14,"R602,0,1R603,0,1E610,14"
stralias clock_scenario_5_15,"E610,15"
;ep6
stralias clock_scenario_6_op,"E610,0"
stralias clock_scenario_6_1,"E610,1"
stralias clock_scenario_6_2,"E610,2"
stralias clock_scenario_6_3,"E610,3"
stralias clock_scenario_6_4,"E610,4"
stralias clock_scenario_6_5,"E610,5"
stralias clock_scenario_6_6,"R602,58,1R603,342,1E610,6"
stralias clock_scenario_6_7,"R602,30,1R603,6,1E610,7"
stralias clock_scenario_6_8,"E610,8"
stralias clock_scenario_6_9,"E610,9"
stralias clock_scenario_6_10"R602,356,1R603,318,1E610,10"
stralias clock_scenario_6_11"R602,354,1R603,288,1E610,11"
stralias clock_scenario_6_12"R602,324,1R603,294,1E610,12"
stralias clock_scenario_6_13"E610,13"
stralias clock_scenario_6_14"R602,289,1R603,228,1E610,14"
stralias clock_scenario_6_15"R602,283,1R603,156,1E610,15"
stralias clock_scenario_6_16,"E610,16"
stralias clock_scenario_6_17,"E610,17"
stralias clock_scenario_6_18,"E610,18"
;ep7
stralias clock_scenario_7_op,"E610,0"
stralias clock_scenario_7_1,"E610,1"
stralias clock_scenario_7_2,"E610,2"
stralias clock_scenario_7_3,"E610,3"
stralias clock_scenario_7_4,"E610,4"
stralias clock_scenario_7_5,"E610,5"
stralias clock_scenario_7_6,"E610,6"
stralias clock_scenario_7_7,"E610,7"
stralias clock_scenario_7_8,"E610,8"
stralias clock_scenario_7_9,"E610,9"
stralias clock_scenario_7_10,"E610,10"
stralias clock_scenario_7_11,"E610,11"
stralias clock_scenario_7_12,"E610,12"
stralias clock_scenario_7_13,"E610,13"
stralias clock_scenario_7_14,"E610,14"
stralias clock_scenario_7_15,"E610,15"
stralias clock_scenario_7_16,"E610,16"
stralias clock_scenario_7_17,"E610,17"
stralias clock_scenario_7_18,"E610,18"
;ep8
stralias clock_scenario_8_op,"E610,0"
stralias clock_scenario_8_1,"E610,1"
stralias clock_scenario_8_2,"E610,2"
stralias clock_scenario_8_3,"E610,3"
stralias clock_scenario_8_4,"E610,4"
stralias clock_scenario_8_5,"E610,5"
stralias clock_scenario_8_6,"E610,6"
stralias clock_scenario_8_7,"E610,7"
stralias clock_scenario_8_8,"E610,8"
stralias clock_scenario_8_9,"E610,9"
stralias clock_scenario_8_10,"E610,10"
stralias clock_scenario_8_11,"E610,11"
stralias clock_scenario_8_12,"E610,12"
stralias clock_scenario_8_13,"E610,13"
stralias clock_scenario_8_14,"E610,14"
stralias clock_scenario_8_15,"E610,15"
stralias clock_scenario_8_16,"E610,16"

;Backgrounds
stralias r_hana,":a;graphics\menu\chars\chars_hana.png" 	 ;Flower in the lower right corner
stralias r_hana_witch,":a;graphics\menu\chars\chars_hana_witch.png"		;Flower in the lower right corner Witchers
stralias r_hana_ange,":a;graphics\menu\chars\chars_hana_ange.png"		;Flower in the lower right corner Ange
stralias r_tips1_back,":c;graphics\menu\tips\tips1_back.png" ;Tips bg
;----------------------------------

;----------------------------------
;Tips initialization
numalias tips,60	;Tips array number
dim ?tips[10][5]	;Tips array declaration
mov %0,0
numalias tips_page_max,%0 : inc %0
numalias tips_flg,%0 : inc %0
;Grimoire initialization
numalias grim,62	;Grimoire array number
dim ?grim[15][5]	;Grimoire array declaration
mov %0,0
numalias grim_page_max,%0 : inc %0
numalias grim_flg,%0 : inc %0
;Tips and Grimoire sprites
mov %0,100
numalias title_back_yes_lsp,%0 : inc %0
numalias title_back_no_lsp,%0 : inc %0
numalias title_back_bg_lsp,%0 : inc %0

numalias tips1_lsp,%0 : inc %0
numalias tips2_lsp,%0 : inc %0
numalias tips3_lsp,%0 : inc %0
numalias tips4_lsp,%0 : inc %0
numalias tips5_lsp,%0 : inc %0
numalias tips6_lsp,%0 : inc %0
numalias tips7_lsp,%0 : inc %0

numalias tips8_lsp,%0 : inc %0
numalias tips9_lsp,%0 : inc %0
numalias tips10_lsp,%0 : inc %0
numalias tips11_lsp,%0 : inc %0
numalias tips12_lsp,%0 : inc %0
numalias tips13_lsp,%0 : inc %0
numalias tips14_lsp,%0 : inc %0
numalias tips15_lsp,%0 : inc %0
numalias tips16_lsp,%0 : inc %0
numalias tips17_lsp,%0 : inc %0
numalias tips18_lsp,%0 : inc %0
numalias tips19_lsp,%0 : inc %0
numalias tips20_lsp,%0 : inc %0
numalias tips21_lsp,%0 : inc %0
numalias tips22_lsp,%0 : inc %0
numalias tips23_lsp,%0 : inc %0

numalias grim1_lsp,%0 : inc %0
numalias grim2_lsp,%0 : inc %0
numalias grim3_lsp,%0 : inc %0
numalias grim4_lsp,%0 : inc %0
numalias grim5_lsp,%0 : inc %0
numalias grim6_lsp,%0 : inc %0
numalias grim7_lsp,%0 : inc %0
numalias grim8_lsp,%0 : inc %0
numalias grim9_lsp,%0 : inc %0
numalias grim10_lsp,%0 : inc %0
numalias grim11_lsp,%0 : inc %0
numalias grim12_lsp,%0 : inc %0
numalias grim13_lsp,%0 : inc %0
numalias grim14_lsp,%0 : inc %0

numalias grim_next_lsp,%0 : inc %0
numalias grim_back_lsp,%0 : inc %0

numalias tips_next_lsp,%0 : inc %0
numalias tips_back_lsp,%0 : inc %0

numalias cha_page_mode,%0 : inc %0
numalias cha_text_page,%0 : inc %0
numalias cha_next_lsp,%0 : inc %0
numalias cha_back_lsp,%0 : inc %0
numalias cha_page_flg,%0 : inc %0

numalias r_char_lsp,%0 : inc %0
numalias r_tips_lsp,%0 : inc %0
numalias r_grim_lsp,%0 : inc %0
numalias r_blog_lsp,%0 : inc %0
numalias r_exec_lsp,%0 : inc %0
numalias r_resu_lsp,%0 : inc %0
numalias r_title_lsp,%0 : inc %0
numalias r_exit_lsp,%0 : inc %0

numalias r_next_lsp,%0 : inc %0
numalias r_change_lsp,%0 : inc %0
numalias r_ep1_lsp,%0 : inc %0
numalias r_ep2_lsp,%0 : inc %0
numalias r_ep3_lsp,%0 : inc %0
numalias r_ep4_lsp,%0 : inc %0

numalias r_people_lsp,%0 : inc %0
numalias r_witches_lsp,%0 : inc %0
numalias r_ange_lsp,%0 : inc %0

;The pages for the sprites have separate sections; use same sprite ranges
mov %tmp10,%0
if %CHIRU_MODE != 0 jumpf
	numalias kin_btn_lsp,%0 : inc %0
	numalias kla_btn_lsp,%0 : inc %0
	numalias nat_btn_lsp,%0 : inc %0
	numalias jes_btn_lsp,%0 : inc %0
	numalias eva_btn_lsp,%0 : inc %0
	numalias hid_btn_lsp,%0 : inc %0
	numalias geo_btn_lsp,%0 : inc %0
	numalias rud_btn_lsp,%0 : inc %0
	numalias kir_btn_lsp,%0 : inc %0
	numalias but_btn_lsp,%0 : inc %0
	numalias ros_btn_lsp,%0 : inc %0
	numalias mar_btn_lsp,%0 : inc %0
	numalias nan_btn_lsp,%0 : inc %0
	numalias gen_btn_lsp,%0 : inc %0
	numalias kum_btn_lsp,%0 : inc %0
	numalias goh_btn_lsp,%0 : inc %0
	numalias sha_btn_lsp,%0 : inc %0
	numalias kan_btn_lsp,%0 : inc %0
	numalias bea_btn_lsp,%0 : inc %0
	numalias ber_btn_lsp,%0 : inc %0
	numalias lam_btn_lsp,%0 : inc %0
	numalias enj_btn_lsp,%0 : inc %0
~
if %CHIRU_MODE != 1 jumpf
	numalias kin_btn_lsp,%0 : inc %0
	numalias kla_btn_lsp,%0 : inc %0
	numalias nat_btn_lsp,%0 : inc %0
	numalias jes_btn_lsp,%0 : inc %0
	numalias eva_btn_lsp,%0 : inc %0
	numalias hid_btn_lsp,%0 : inc %0
	numalias geo_btn_lsp,%0 : inc %0
	numalias rud_btn_lsp,%0 : inc %0
	numalias kir_btn_lsp,%0 : inc %0
	numalias but_btn_lsp,%0 : inc %0
	numalias ros_btn_lsp,%0 : inc %0
	numalias mar_btn_lsp,%0 : inc %0
	numalias nan_btn_lsp,%0 : inc %0
	numalias gen_btn_lsp,%0 : inc %0
	numalias kum_btn_lsp,%0 : inc %0
	numalias goh_btn_lsp,%0 : inc %0
	numalias sha_btn_lsp,%0 : inc %0
	numalias kan_btn_lsp,%0 : inc %0
	numalias eri_btn_lsp,%0 : inc %0
	numalias rio_btn_lsp,%0 : inc %0
	numalias bea_btn_lsp,%0 : inc %0
	numalias en2_btn_lsp,%0 : inc %0
	numalias si_btn_lsp,%0 : inc %0
~
mov %tmp11,%0 ;Max possible value to continue later

mov %0,%tmp10
numalias ma_bea_btn_lsp,%0 : inc %0
numalias ma_ber_btn_lsp,%0 : inc %0
numalias ma_lam_btn_lsp,%0 : inc %0
numalias ma_rg_btn_lsp,%0  : inc %0
numalias ma_kin_btn_lsp,%0 : inc %0
numalias ma_gen_btn_lsp,%0 : inc %0
numalias ma_sha_btn_lsp,%0 : inc %0
numalias ma_kan_btn_lsp,%0 : inc %0
numalias ma_mar_btn_lsp,%0 : inc %0
numalias ma_but_btn_lsp,%0 : inc %0
numalias ma_rg_1_btn_lsp,%0 : inc %0
numalias ma_rg_2_btn_lsp,%0 : inc %0
numalias ma_rg_3_btn_lsp,%0 : inc %0
numalias ma_rg_4_btn_lsp,%0 : inc %0
numalias ma_rg_5_btn_lsp,%0 : inc %0
numalias ma_rg_6_btn_lsp,%0 : inc %0

mov %0,%tmp10
numalias ma3_bea_btn_lsp,%0 : inc %0
numalias ma3_ber_btn_lsp,%0 : inc %0
numalias ma3_lam_btn_lsp,%0 : inc %0
numalias ma3_rg_btn_lsp,%0  : inc %0
numalias ma3_goa_btn_lsp,%0 : inc %0
numalias ma3_wal_btn_lsp,%0 : inc %0
numalias ma3_ron_btn_lsp,%0 : inc %0
numalias ma3_ev2_btn_lsp,%0 : inc %0
numalias ma3_enj_btn_lsp,%0 : inc %0
;numalias ma3_s_btn_lsp,%0   : inc %0
numalias ma3_s_1_btn_lsp,%0 : inc %0
numalias ma3_s_2_btn_lsp,%0 : inc %0
numalias ma3_rg_1_btn_lsp,%0 : inc %0
numalias ma3_rg_2_btn_lsp,%0 : inc %0
numalias ma3_rg_3_btn_lsp,%0 : inc %0
numalias ma3_rg_4_btn_lsp,%0 : inc %0
numalias ma3_rg_5_btn_lsp,%0 : inc %0
numalias ma3_rg_6_btn_lsp,%0 : inc %0

mov %0,%tmp10
numalias ma4_lam_btn_lsp,%0 : inc %0
numalias ma4_ber_btn_lsp,%0 : inc %0
numalias ma4_bea_btn_lsp,%0 : inc %0
numalias ma4_mar_btn_lsp,%0 : inc %0
numalias ma4_enj_btn_lsp,%0 : inc %0
numalias ma4_kin_btn_lsp,%0 : inc %0
numalias ma4_sak_btn_lsp,%0 : inc %0
numalias ma4_wal_btn_lsp,%0 : inc %0
numalias ma4_ron_btn_lsp,%0 : inc %0
numalias ma4_gap_btn_lsp,%0 : inc %0
;numalias ma4_s_btn_lsp,%0   : inc %0
numalias ma4_rg_btn_lsp,%0  : inc %0
numalias ma4_goa_btn_lsp,%0 : inc %0
numalias ma4_s00_btn_lsp,%0 : inc %0
numalias ma4_s410_btn_lsp,%0 : inc %0
numalias ma4_s45_btn_lsp,%0 : inc %0
numalias ma4_s556_btn_lsp,%0 : inc %0
numalias ma4_rg_1_btn_lsp,%0 : inc %0
numalias ma4_rg_2_btn_lsp,%0 : inc %0
numalias ma4_rg_3_btn_lsp,%0 : inc %0
numalias ma4_rg_4_btn_lsp,%0 : inc %0
numalias ma4_rg_5_btn_lsp,%0 : inc %0
numalias ma4_rg_6_btn_lsp,%0 : inc %0

mov %0,%tmp10
numalias enj_eva_btn_lsp,%0 : inc %0
numalias enj_oko_btn_lsp,%0 : inc %0
numalias enj_kas_btn_lsp,%0 : inc %0
numalias enj_enj_btn_lsp,%0 : inc %0
numalias enj_ama_btn_lsp,%0 : inc %0
numalias enj_sak_btn_lsp,%0 : inc %0
numalias enj_mar_btn_lsp,%0 : inc %0
numalias enj_rg_btn_lsp,%0  : inc %0
numalias enj_pro_btn_lsp,%0 : inc %0
numalias enj_mas_btn_lsp,%0 : inc %0
numalias enj_sab_btn_lsp,%0 : inc %0
numalias enj_kwa_btn_lsp,%0 : inc %0
numalias enj_ber_btn_lsp,%0 : inc %0
numalias enj_rg_1_btn_lsp,%0 : inc %0
numalias enj_rg_2_btn_lsp,%0 : inc %0
numalias enj_rg_3_btn_lsp,%0 : inc %0
numalias enj_rg_4_btn_lsp,%0 : inc %0
numalias enj_rg_5_btn_lsp,%0 : inc %0
numalias enj_rg_6_btn_lsp,%0 : inc %0

;chiru
mov %0,%tmp10
numalias ma5_lam_btn_lsp,%0 : inc %0
numalias ma5_ber_btn_lsp,%0 : inc %0
numalias ma5_bea_btn_lsp,%0 : inc %0
numalias ma5_be2_btn_lsp,%0 : inc %0
numalias ma5_eri_btn_lsp,%0 : inc %0
numalias ma5_wal_btn_lsp,%0 : inc %0
numalias ma5_ron_btn_lsp,%0 : inc %0
numalias ma5_gap_btn_lsp,%0 : inc %0
;numalias ma5_w_btn_lsp,%0 : inc %0
numalias ma5_dla_btn_lsp,%0 : inc %0
numalias ma5_rg_btn_lsp,%0 : inc %0
numalias ma5_but_btn_lsp,%0 : inc %0
numalias ma5_goa_btn_lsp,%0 : inc %0
;numalias ma5_k_btn_lsp,%0 : inc %0
numalias ma5_ger_btn_lsp,%0 : inc %0
numalias ma5_cor_btn_lsp,%0 : inc %0
;numalias ma5_zf_btn_lsp,%0 : inc %0
numalias ma5_ZEP_btn_lsp,%0 : inc %0
numalias ma5_FUR_btn_lsp,%0 : inc %0
numalias ma5_FEA_btn_lsp,%0 : inc %0
numalias ma5_AMA_btn_lsp,%0 : inc %0
numalias ma5_mar_btn_lsp,%0 : inc %0
numalias ma5_WIL_btn_lsp,%0 : inc %0
numalias ma5_CUR_btn_lsp,%0 : inc %0
numalias ma5_EN2_btn_lsp,%0 : inc %0
numalias ma5_wr_btn_lsp,%0 : inc %0
numalias ma5_bb_btn_lsp,%0 : inc %0
numalias ma5_ev2_btn_lsp,%0 : inc %0
numalias ma5_enj_btn_lsp,%0 : inc %0
numalias ma5_s00_btn_lsp,%0 : inc %0
numalias ma5_s410_btn_lsp,%0 : inc %0
numalias ma5_s45_btn_lsp,%0 : inc %0
numalias ma5_s556_btn_lsp,%0 : inc %0
numalias ma5_rg_1_btn_lsp,%0 : inc %0
numalias ma5_rg_2_btn_lsp,%0 : inc %0
numalias ma5_rg_3_btn_lsp,%0 : inc %0
numalias ma5_rg_4_btn_lsp,%0 : inc %0
numalias ma5_rg_5_btn_lsp,%0 : inc %0
numalias ma5_rg_6_btn_lsp,%0 : inc %0

mov %0,%tmp11

;ma5 превышает диапазон от tmp11 до tmp10
if %CHIRU_MODE = 1 add %0,16

numalias r_cha_txt_lsp,%0 : inc %0 ;Character text
numalias cha_lsp,%0 	  : inc %0 ;Character sprite

numalias r_black_lsp,%0 : inc %0 ;Black buttons

;Background decoration
numalias r_tips_txt_lsp,%0 : inc %0
numalias r_grim_txt_lsp,%0 : inc %0
numalias r_hana_lsp,%0 	   : inc %0
numalias r_txt_lsp,%0	   : inc %0
numalias r_cha_back_lsp,%0 : inc %0
numalias r_cha_back,%0	   : inc %0
numalias r_tips1_back_lsp,%0 : inc %0

;Right click menu buttons
numalias r_load_lsp,%0   : inc %0 ;Go to the Bookmark (Load)
numalias r_save_lsp,%0   : inc %0 ;Go to the Bookmark (Save)
numalias r_chars_lsp,%0  : inc %0 ;Go to the Characters menu
numalias r_tips_lsp2,%0  : inc %0 ;Go to the Tips menu (Grimoire too)
numalias r_volume_lsp,%0 : inc %0 ;Go to the Config menu
numalias r_logs_lsp2,%0  : inc %0 ;Go to the Message Browser
numalias r_clear_lsp,%0  : inc %0 ;Show the background
numalias r_system_lsp,%0 : inc %0 ;Go to the title screen
numalias r_info_lsp,%0   : inc %0 ;Info text
numalias r_bg_lsp,%0     : inc %0
numalias r_used_lsp,%0			  ;Cleaner (last lsp from 100 to r_used_lsp)

;Character state array initialization
numalias r,61
numalias r_cha_text,63
dim ?r_cha_text[8][50][5]
if %CHIRU_MODE == 0 dim ?r[30][15]
if %CHIRU_MODE == 1 dim ?r[8][50][15]
;Character state elements
mov %1,6 					 			;Variables for states (1 ~ 5)
numalias tati_x,%1			: inc %1	;Big sprite x coordinate
numalias itiran_x,%1		: inc %1	;Icon sprite x coordinate
numalias itiran_y,%1		: inc %1	;Icon sprite y coordinate
numalias condition,%1		: inc %1	;State of the character
numalias condition_end,%1 	: inc %1	;State of the character, following fraction part
numalias r_ishou,%1 		: inc %1	;Character clothes (1 ~ ...)

;----------------------------------
;Right-click related system variables
mov %0,2300

numalias r_for_title,%0 : inc %0 ;Title menu flag
numalias r_display,%0 	: inc %0 ;Tips menu flag (0 - characters, 1 - tips, 2 - grimoire)
numalias r_tea_bea,%0 	: inc %0 ;Tea parties list flag (bea appeared?)
numalias r_u_tea_flg,%0 : inc %0 ;Ura parties list flag
numalias r_ber_flg,%0 	: inc %0 ;Ura tea Bernkastel appearance flag

numalias r_display_cha,%0 	 : inc %0 ;Indication character with a character number
numalias r_display_cha_ma,%0  : inc %0 ;Indication character with a character number (witch side)
numalias r_display_cha_enj,%0 : inc %0 ;Indication character with a character number (human side)

numalias r_display_grim,%0 	 : inc %0
numalias r_grim_txt_path,%0  : inc %0 ;Grimoire sprite path 
numalias r_display_tips,%0 	 : inc %0 ;Tip number?

numalias r_txt_path,%0 		 : inc %0 ;Text sprite path
numalias r_tips_txt_path,%0  : inc %0 ;Tips sprite path

numalias r_cha_tati_path,%0  : inc %0 ;Character image
numalias r_bg_path,%0 		 : inc %0 ;Background image

;Additional variables, Episode 2 
numalias play_scene,%0 		: inc %0	;R-menu changer according to the scene number

numalias r_side,%0 			: inc %0	;Indication side (0 - human, 1 - witch)
numalias r_side_change,%0 	: inc %0	;The sides are changing (refresh)
numalias r_display_side,%0 	: inc %0	;Maintenance of the indication side (0 - human, 1 - witch, 2 - demon??)

numalias grim_scene,%0 		: inc %0	;stores the scene number for the grimoire
numalias r_display_arrow,%0 : inc %0

numalias r_s556_flg,%0		: inc %0	;Chiester 556, state flag (ep4+)
numalias r_s_hyouji,%0		: inc %0	;Chiru-specific Chiester flag, TODO: remove?

numalias load_for_title,%0	: inc %0	;Checks if entered from the title menu

mov %play_scene,0
mov %r_side_change,0
mov %r_display_side,0
mov %grim_scene,0
mov %r_s556_flg,0
mov %load_for_title,0

numalias r_top_y,60				;Right-click system, y top (org - 30)
numalias black_toukaritu,150 	;black opacity

;Number of characters 
numalias char_max,20
numalias char_max_ep2,21
numalias char_max_ep3,22
numalias char_max_ep4,22
numalias char_max_ep5,20
numalias char_max_ep6,30

;--------------------
;EP2 Witch Side
mov %1,1
numalias ma_bea,%1 	: inc %1
numalias ma_ber,%1 	: inc %1
numalias ma_lam,%1 	: inc %1
numalias ma_rg,%1  	: inc %1
numalias ma_kin,%1 	: inc %1
numalias ma_gen,%1 	: inc %1
numalias ma_sha,%1 	: inc %1
numalias ma_kan,%1 	: inc %1
numalias ma_mar,%1 	: inc %1
numalias ma_but,%1 	: inc %1
numalias ma_rg_1,%1 : inc %1
numalias ma_rg_2,%1 : inc %1
numalias ma_rg_3,%1 : inc %1
numalias ma_rg_4,%1 : inc %1
numalias ma_rg_5,%1 : inc %1
numalias ma_rg_6,%1

numalias char_max_ep2_2,%1 ;10 - old, 16 - new (don't break such parts any more by rg addings)

;--------------------
;EP3 Witch Side
mov %1,1
numalias ma3_bea,%1 : inc %1
numalias ma3_ber,%1 : inc %1
numalias ma3_lam,%1 : inc %1
numalias ma3_rg,%1  : inc %1
numalias ma3_goa,%1 : inc %1
numalias ma3_wal,%1 : inc %1
numalias ma3_ron,%1 : inc %1
numalias ma3_ev2,%1 : inc %1
numalias ma3_enj,%1 : inc %1
;numalias ma3_s,%1 : inc %1
numalias ma3_s_1,%1 : inc %1
numalias ma3_s_2,%1 : inc %1
numalias ma3_rg_1,%1 : inc %1
numalias ma3_rg_2,%1 : inc %1
numalias ma3_rg_3,%1 : inc %1
numalias ma3_rg_4,%1 : inc %1
numalias ma3_rg_5,%1 : inc %1
numalias ma3_rg_6,%1

numalias char_max_ep3_2,%1

;--------------------
;EP4 Witch Side
mov %1,1
numalias ma4_lam,%1 : inc %1
numalias ma4_ber,%1 : inc %1
numalias ma4_bea,%1 : inc %1
numalias ma4_mar,%1 : inc %1
numalias ma4_enj,%1 : inc %1
numalias ma4_kin,%1 : inc %1
numalias ma4_sak,%1 : inc %1
numalias ma4_wal,%1 : inc %1
numalias ma4_ron,%1 : inc %1
numalias ma4_gap,%1 : inc %1
;numalias ma4_s,%1 : inc %1
numalias ma4_rg,%1 : inc %1
numalias ma4_goa,%1 : inc %1
numalias ma4_s00,%1 : inc %1
numalias ma4_s410,%1 : inc %1
numalias ma4_s45,%1 : inc %1
numalias ma4_s556,%1 : inc %1
numalias ma4_rg_1,%1 : inc %1
numalias ma4_rg_2,%1 : inc %1
numalias ma4_rg_3,%1 : inc %1
numalias ma4_rg_4,%1 : inc %1
numalias ma4_rg_5,%1 : inc %1
numalias ma4_rg_6,%1

numalias char_max_ep4_2,%1

;--------------------
;EP4 Ange Side
mov %1,1
numalias enj_eva,%1 : inc %1
numalias enj_oko,%1 : inc %1
numalias enj_kas,%1 : inc %1
numalias enj_enj,%1 : inc %1
numalias enj_ama,%1 : inc %1
numalias enj_sak,%1 : inc %1
numalias enj_mar,%1 : inc %1
numalias enj_rg,%1  : inc %1
numalias enj_pro,%1 : inc %1
numalias enj_mas,%1 : inc %1
numalias enj_sab,%1 : inc %1
numalias enj_kwa,%1 : inc %1
numalias enj_ber,%1 : inc %1
numalias enj_rg_1,%1 : inc %1
numalias enj_rg_2,%1 : inc %1
numalias enj_rg_3,%1 : inc %1
numalias enj_rg_4,%1 : inc %1
numalias enj_rg_5,%1 : inc %1
numalias enj_rg_6,%1

numalias char_max_ep4_3,%1

;--------------------
;EP5 Witch Side
mov %1,1
numalias ma5_lam,%1 : inc %1
numalias ma5_ber,%1 : inc %1
numalias ma5_bea,%1 : inc %1
numalias ma5_be2,%1 : inc %1
numalias ma5_eri,%1 : inc %1
numalias ma5_wal,%1 : inc %1
numalias ma5_ron,%1 : inc %1
numalias ma5_gap,%1 : inc %1
;numalias ma5_w,%1 : inc %1
numalias ma5_dla,%1 : inc %1
numalias ma5_rg,%1 : inc %1
numalias ma5_but,%1 : inc %1
numalias ma5_goa,%1 : inc %1
;numalias ma5_k,%1 : inc %1
numalias ma5_ger,%1 : inc %1
numalias ma5_cor,%1 : inc %1
;numalias ma5_zf,%1 : inc %1
numalias ma5_zep,%1 : inc %1
numalias ma5_fur,%1 : inc %1
numalias ma5_fea,%1 : inc %1
numalias ma5_ama,%1 : inc %1
numalias ma5_mar,%1 : inc %1
numalias ma5_wil,%1 : inc %1
numalias ma5_cur,%1 : inc %1
numalias ma5_en2,%1 : inc %1
numalias ma5_wr,%1 : inc %1
numalias ma5_bb,%1 : inc %1
numalias ma5_ev2,%1 : inc %1
numalias ma5_enj,%1 : inc %1
numalias ma5_s00,%1 : inc %1
numalias ma5_s410,%1 : inc %1
numalias ma5_s45,%1 : inc %1
numalias ma5_s556,%1 : inc %1
numalias ma5_rg_1,%1 : inc %1
numalias ma5_rg_2,%1 : inc %1
numalias ma5_rg_3,%1 : inc %1
numalias ma5_rg_4,%1 : inc %1
numalias ma5_rg_5,%1 : inc %1
numalias ma5_rg_6,%1

numalias char_max_ep5_2,%1

;----------------------------------------
;Sprite numbers in the title screen
	
mov %0,110
numalias t_warning_lsp,%0		: dec %0 ;110
numalias t_btn_omake_end_lsp,%0	: dec %0 ;109
numalias t_btn_omake_lsp,%0		: dec %0 ;108
numalias t_trophy_lsp,%0		: dec %0 ;107
numalias t_cg_lsp,%0 			: dec %0 ;106
numalias t_txt_cg_lsp,%0 		: dec %0 ;105
numalias t_chars_lsp,%0 		: dec %0 ;104
numalias t_txt_chars_lsp,%0 	: dec %0 ;103
numalias t_config_lsp,%0 		: dec %0 ;102
numalias t_txt_config_lsp,%0 	: dec %0 ;101
numalias t_bg_lsp,%0 			: dec %0 ;100
numalias t_hane_lsp,%0 			: dec %0 ;99
numalias t_logo_lsp,%0 			: dec %0 ;98
numalias t_btn_start_lsp,%0 	: dec %0 ;97
numalias t_btn_web_lsp,%0 		: dec %0 ;96
numalias t_btn_exit_lsp,%0 		: dec %0 ;95
numalias t_btn_tea_lsp,%0 		: dec %0 ;94
numalias t_btn_tips_lsp,%0 		: dec %0 ;93
numalias t_btn_music_lsp,%0 	: dec %0 ;92
numalias t_btn_ura_tea_lsp,%0 	: dec %0 ;91
numalias t_btn_load_lsp,%0 		: dec %0 ;90

numalias t_txt_bg_lsp,%0 		: dec %0 ;89
numalias t_txt_load_lsp,%0 		: dec %0 ;88
numalias t_txt_web_lsp,%0		: dec %0 ;87
numalias t_txt_tea_lsp,%0		: dec %0 ;86
numalias t_txt_tips_lsp,%0		: dec %0 ;85
numalias t_txt_music_lsp,%0 	: dec %0 ;84

numalias t_txt_start_lsp,%0 	: dec %0 ;83
numalias t_txt_exit_lsp,%0 		: dec %0 ;82
numalias t_txt_ura_tea_lsp,%0 	: dec %0 ;81

numalias t_txt_lock_lsp,%0 		: dec %0 ;80
numalias t_txt_unlock_lsp,%0 	: dec %0 ;79

numalias CHIRU_MODE_button,%0 	: dec %0 ;78

mov %0,77
numalias t_txt_ep5_lsp,%0 		: dec %0 ;77
numalias t_txt_ep6_lsp,%0 		: dec %0 ;76
numalias t_txt_ep7_lsp,%0 		: dec %0 ;75
numalias t_txt_ep8_lsp,%0 		: dec %0 ;74
numalias t_txt_ep1_4_lsp,%0 	: dec %0 ;73
numalias t_txt_ep5_8_lsp,%0 	: dec %0 ;72

mov %0,70
numalias t_btn_ep1_lsp,%0 		: dec %0 ;70
numalias t_btn_ep2_lsp,%0 		: dec %0 ;69
numalias t_btn_ep3_lsp,%0 		: dec %0 ;68
numalias t_btn_ep4_lsp,%0 		: dec %0 ;67
numalias t_btn_ep5_8_lsp,%0 	: dec %0 ;66

mov %0,65
numalias t_txt_ep1_lsp,%0 		: dec %0 ;65
numalias t_txt_ep2_lsp,%0 		: dec %0 ;64
numalias t_txt_ep3_lsp,%0 		: dec %0 ;63
numalias t_txt_ep4_lsp,%0 		: dec %0 ;62

mov %0,60
numalias t_btn_ep1_lock_lsp,%0 	: dec %0 ;60
numalias t_btn_ep2_lock_lsp,%0 	: dec %0 ;59
numalias t_btn_ep3_lock_lsp,%0 	: dec %0 ;58
numalias t_btn_ep4_lock_lsp,%0 	: dec %0 ;57

mov %0,55
numalias t_btn_ep1_unlock_lsp,%0 : dec %0 ;55
numalias t_btn_ep2_unlock_lsp,%0 : dec %0 ;54
numalias t_btn_ep3_unlock_lsp,%0 : dec %0 ;53
numalias t_btn_ep4_unlock_lsp,%0 : dec %0 ;52
numalias t_btn_ep5_8_unlock_lsp,%0 : dec %0 ;51

mov %0,50
numalias t_btn_ep1_tea_lsp,%0 : dec %0	;50
numalias t_btn_ep2_tea_lsp,%0 : dec %0	;49
numalias t_btn_ep3_tea_lsp,%0 : dec %0	;48
numalias t_btn_ep4_tea_lsp,%0 : dec %0	;47

mov %0,45
numalias t_txt_ep1_tea_lsp,%0 : dec %0	;65
numalias t_txt_ep2_tea_lsp,%0 : dec %0	;64
numalias t_txt_ep3_tea_lsp,%0 : dec %0	;63
numalias t_txt_ep4_tea_lsp,%0 : dec %0	;62

mov %0,40
numalias t_btn_ep1_tips_lsp,%0 : dec %0	;60
numalias t_btn_ep2_tips_lsp,%0 : dec %0	;59
numalias t_btn_ep3_tips_lsp,%0 : dec %0	;58
numalias t_btn_ep4_tips_lsp,%0 : dec %0	;58

mov %0,35
numalias t_txt_ep1_tips_lsp,%0 : dec %0	;60
numalias t_txt_ep2_tips_lsp,%0 : dec %0	;59
numalias t_txt_ep3_tips_lsp,%0 : dec %0	;59
numalias t_txt_ep4_tips_lsp,%0 : dec %0	;59

mov %0,30
numalias t_btn_ep1_ura_tea_lsp,%0 : dec %0	;60
numalias t_btn_ep2_ura_tea_lsp,%0 : dec %0	;59
numalias t_btn_ep3_ura_tea_lsp,%0 : dec %0	;59
numalias t_btn_ep4_ura_tea_lsp,%0 : dec %0	;59

mov %0,25
numalias t_txt_ep1_ura_tea_lsp,%0 : dec %0	;60
numalias t_txt_ep2_ura_tea_lsp,%0 : dec %0	;59
numalias t_txt_ep3_ura_tea_lsp,%0 : dec %0	;59
numalias t_txt_ep4_ura_tea_lsp,%0 : dec %0	;59

mov %0,10
numalias unlock_bg_lsp,%0 : dec %0	;10
numalias unlock_yes_lsp,%0 : dec %0	;9
numalias unlock_no_lsp,%0 : dec %0	;8

;----------------------------------------
;Numalias for lsp2
;----------------------------------------

mov %0,450
numalias config_main_lsp2,%0 : inc %0

;----------------------------------------

;Parsing startup default variables
;8010 flag
;8015 - 8013 vol
;8056 - 720p/1080p
;8057 - Enable elephants and 'buffers' (yes, let's enable)
;msgwnd_type (8058) - msgwnd
;8060 - moving lips
;8061 - animated rain

if %init_done = 1 jumpf 
	mov %bgm_vol,100 
	mov %sfx_vol,100
	mov %dlg_vol,100 
	mov %textspeed,5
	mov %textspeed2,5
	mov %automodespeed,-20
	getram %Free1 ; default to 720p on low memory devices (like iOS)
	if %Free1 <= 2048 mov %video_res,1
	if %Free1 >  2048 mov %video_res,0
	mov %video_res,0
	mov %old_wording,1
	mov %msgwnd_type,1
	mov %animated_lips,1
	;mov %animated_rain,1
	mov %enable_cache,1
	mov %init_done,1
	mov %bgm_title_language,1

	mov %op_ed_song_subtitles,5
	mov %rumble_strength,50
	mov %bgm_chapter_display,1
	mov %sskip_turbo,0

	for %Free1 = flag_scenario_1_op to flag_scenario_8_ura
		mov $%Free1,"○" ;●
	next

#locale_import "prefs.txt"

~

;Compatibility code for our old users
if %automodespeed = 0 mov %automodespeed,-20

;Compatibility code for our testers
;Unlocks already read chapters
if %did_unlock = 1 jumpf
	gosub *do_unlock
	mov %did_unlock,1
~

return

;*************************************************


;*************************************************
;Initialization for ep1 variable
;*************************************************

*bt_ep1_def

;Type the number in the array, type the path to a variable number of characters
mov %tmp10,2400

for %tmp11 = 1 to char_max
	for %tmp12 = 0 to 5
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

;(Enter a few minutes for each change of state of character), type the path to the array

mov ?r[kin][condition_end],3 ;4 so that virtually 0 to 3.
mov $?r[kin][0],":a/1,0,3;graphics\chars\chars_non.png"
mov $?r[kin][1],":a/1,0,3;graphics\chars\chars_kin0.png"
mov $?r[kin][2],":a/1,0,3;graphics\chars\chars_kin1.png"
mov $?r[kin][3],":a/1,0,3;graphics\chars\chars_kin2.png"

mov ?r[kla][condition_end],2
mov $?r[kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"
mov $?r[kla][2],":c/1,0,3;graphics\chars\chars_kla_d.png"

mov ?r[nat][condition_end],2
mov $?r[nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"
mov $?r[nat][2],":c/1,0,3;graphics\chars\chars_nat_d.png"

mov ?r[jes][condition_end],2
mov $?r[jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"
mov $?r[jes][2],":c/1,0,3;graphics\chars\chars_jes_d.png"

mov ?r[eva][condition_end],2
mov $?r[eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"
mov $?r[eva][2],":c/1,0,3;graphics\chars\chars_eva_d.png"

mov ?r[hid][condition_end],2
mov $?r[hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"
mov $?r[hid][2],":c/1,0,3;graphics\chars\chars_hid_d.png"

mov ?r[geo][condition_end],2
mov $?r[geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"
mov $?r[geo][2],":c/1,0,3;graphics\chars\chars_geo_d.png"

mov ?r[rud][condition_end],2
mov $?r[rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"
mov $?r[rud][2],":c/1,0,3;graphics\chars\chars_rud_d.png"

mov ?r[kir][condition_end],2
mov $?r[kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"
mov $?r[kir][2],":c/1,0,3;graphics\chars\chars_kir_d.png"

mov ?r[but][condition_end],2
mov $?r[but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[but][1],":c/1,0,3;graphics\chars\chars_but0.png"
mov $?r[but][2],":c/1,0,3;graphics\chars\chars_but_d.png"

mov ?r[ros][condition_end],2
mov $?r[ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"
mov $?r[ros][2],":c/1,0,3;graphics\chars\chars_ros_d.png"

mov ?r[mar][condition_end],2
mov $?r[mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"
mov $?r[mar][2],":c/1,0,3;graphics\chars\chars_mar_d.png"

mov ?r[nan][condition_end],2
mov $?r[nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"
mov $?r[nan][2],":c/1,0,3;graphics\chars\chars_nan_d.png"

mov ?r[gen][condition_end],2
mov $?r[gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"
mov $?r[gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"

mov ?r[kum][condition_end],2
mov $?r[kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"
mov $?r[kum][2],":c/1,0,3;graphics\chars\chars_kum_d.png"

mov ?r[goh][condition_end],2
mov $?r[goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"
mov $?r[goh][2],":c/1,0,3;graphics\chars\chars_goh_d.png"

mov ?r[sha][condition_end],2
mov $?r[sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"
mov $?r[sha][2],":c/1,0,3;graphics\chars\chars_sha_d.png"

mov ?r[kan][condition_end],2
mov $?r[kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"
mov $?r[kan][2],":c/1,0,3;graphics\chars\chars_kan_d.png"

mov ?r[bea][condition_end],2
;mov $?r[bea][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[bea][1],":c/1,0,3;graphics\chars\chars_bea0.png"
mov $?r[bea][2],":c/1,0,3;graphics\chars\chars_bea_d.png"

mov ?r[ber][condition_end],2
mov $?r[ber][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"
mov $?r[ber][2],":c/1,0,3;graphics\chars\chars_ber_d.png"

;x - x2+330-14; y - x2
;Enter the coordinates of the display list
;numalias itiran_x,%tmp11 : inc %tmp11	 ;List icon position, the X coordinate
;numalias itiran_y,%tmp11 : inc %tmp11	 ;List icon position, the Y coordinate
mov ?r[kin][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[kin][itiran_y],190 ;x+130
mov ?r[kla][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[kla][itiran_y],190
mov ?r[nat][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[nat][itiran_y],190
mov ?r[jes][itiran_x],590 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[jes][itiran_y],190

mov ?r[eva][itiran_x],330 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[eva][itiran_y],340
mov ?r[hid][itiran_x],460 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[hid][itiran_y],340
mov ?r[geo][itiran_x],590 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[geo][itiran_y],340

mov ?r[rud][itiran_x],330 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[rud][itiran_y],490
mov ?r[kir][itiran_x],460 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[kir][itiran_y],490
mov ?r[but][itiran_x],590 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[but][itiran_y],490

mov ?r[nan][itiran_x],200 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[nan][itiran_y],640
mov ?r[ros][itiran_x],330 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[ros][itiran_y],640
mov ?r[mar][itiran_x],590 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640

mov ?r[gen][itiran_x],200 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[gen][itiran_y],790
mov ?r[sha][itiran_x],330 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[sha][itiran_y],790
mov ?r[kan][itiran_x],460 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[kan][itiran_y],790
mov ?r[goh][itiran_x],590 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[goh][itiran_y],790
mov ?r[kum][itiran_x],720 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[kum][itiran_y],790

mov ?r[bea][itiran_x],200 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[bea][itiran_y],490
mov ?r[ber][itiran_x],460 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[ber][itiran_y],490

return

;*************************************************



;*************************************************
;initialization for ep2 variable
;*************************************************
*bt_ep2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep2
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[kin][condition_end],2
mov $?r[kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"
mov $?r[kin][2],":c/1,0,3;graphics\chars\chars_kin2.png"

mov ?r[kla][condition_end],2
mov $?r[kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"
mov $?r[kla][2],":c/1,0,3;graphics\chars\chars_kla_d.png"

mov ?r[nat][condition_end],2
mov $?r[nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"
mov $?r[nat][2],":c/1,0,3;graphics\chars\chars_nat_d.png"

mov ?r[jes][condition_end],2
mov $?r[jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"
mov $?r[jes][2],":c/1,0,3;graphics\chars\chars_jes_d.png"

mov ?r[eva][condition_end],2
mov $?r[eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"
mov $?r[eva][2],":c/1,0,3;graphics\chars\chars_eva_d.png"

mov ?r[hid][condition_end],2
mov $?r[hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"
mov $?r[hid][2],":c/1,0,3;graphics\chars\chars_hid_d.png"

mov ?r[geo][condition_end],2
mov $?r[geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"
mov $?r[geo][2],":c/1,0,3;graphics\chars\chars_geo_d.png"

mov ?r[rud][condition_end],2
mov $?r[rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"
mov $?r[rud][2],":c/1,0,3;graphics\chars\chars_rud_d.png"

mov ?r[kir][condition_end],2
mov $?r[kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"
mov $?r[kir][2],":c/1,0,3;graphics\chars\chars_kir_d.png"

mov ?r[but][condition_end],2
mov $?r[but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[but][1],":c/1,0,3;graphics\chars\chars_but0.png"
mov $?r[but][2],":c/1,0,3;graphics\chars\chars_but_d.png"

mov ?r[ros][condition_end],2
mov $?r[ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"
mov $?r[ros][2],":c/1,0,3;graphics\chars\chars_ros_d.png"

mov ?r[mar][condition_end],2
mov $?r[mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"
mov $?r[mar][2],":c/1,0,3;graphics\chars\chars_mar_d.png"

mov ?r[nan][condition_end],3
mov $?r[nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"
mov $?r[nan][2],":c/1,0,3;graphics\chars\chars_nan_d.png"
mov $?r[nan][3],":c/1,0,3;graphics\chars\chars_nan_d.png"

mov ?r[gen][condition_end],2
mov $?r[gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"
mov $?r[gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"

mov ?r[kum][condition_end],3
mov $?r[kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"
mov $?r[kum][2],":c/1,0,3;graphics\chars\chars_kum_d.png"
mov $?r[kum][3],":c/1,0,3;graphics\chars\chars_kum_d.png"


mov ?r[goh][condition_end],2
mov $?r[goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"
mov $?r[goh][2],":c/1,0,3;graphics\chars\chars_goh_d.png"

mov ?r[sha][condition_end],2
mov $?r[sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"
mov $?r[sha][2],":c/1,0,3;graphics\chars\chars_sha_d.png"

mov ?r[kan][condition_end],3
mov $?r[kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"
mov $?r[kan][2],":c/1,0,3;graphics\chars\chars_kan_m.png"
mov $?r[kan][3],":c/1,0,3;graphics\chars\chars_kan_d.png"

mov ?r[bea][condition_end],3
if %play_scene = 1010 mov $?r[bea][0],":c/1,0,3;graphics\chars\chars_non.png"
notif %play_scene = 1010 mov $?r[bea][0],""
mov $?r[bea][1],":c/1,0,3;graphics\chars\chars_bea0.png"
mov $?r[bea][2],":c/1,0,3;graphics\chars\chars_bea1.png"
mov $?r[bea][3],":c/1,0,3;graphics\chars\chars_bea_d.png"

mov ?r[ber][condition_end],2
mov $?r[ber][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"
mov $?r[ber][2],":c/1,0,3;graphics\chars\chars_ber_d.png"

mov ?r[lam][condition_end],1
mov $?r[lam][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[lam][1],":c/1,0,3;graphics\chars\chars_lam0.png"
mov $?r[lam][2],":c/1,0,3;graphics\chars\chars_lam_d.png"


;numalias itiran_x,%tmp11 : inc %tmp11
;numalias itiran_y,%tmp11 : inc %tmp11
mov ?r[kin][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[kin][itiran_y],190 ;x+130
mov ?r[kla][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[kla][itiran_y],190
mov ?r[nat][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[nat][itiran_y],190
mov ?r[jes][itiran_x],590 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[jes][itiran_y],190

mov ?r[eva][itiran_x],330 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[eva][itiran_y],340
mov ?r[hid][itiran_x],460 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[hid][itiran_y],340
mov ?r[geo][itiran_x],590 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[geo][itiran_y],340

mov ?r[rud][itiran_x],330 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[rud][itiran_y],490
mov ?r[kir][itiran_x],460 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[kir][itiran_y],490
mov ?r[but][itiran_x],590 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[but][itiran_y],490

mov ?r[nan][itiran_x],200 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[nan][itiran_y],640
mov ?r[ros][itiran_x],330 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[ros][itiran_y],640
mov ?r[mar][itiran_x],590 : mov %tmp,280 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640

mov ?r[gen][itiran_x],200 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[gen][itiran_y],790
mov ?r[sha][itiran_x],330 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[sha][itiran_y],790
mov ?r[kan][itiran_x],460 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[kan][itiran_y],790
mov ?r[goh][itiran_x],590 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[goh][itiran_y],790
mov ?r[kum][itiran_x],720 : mov %tmp,368 : add %tmp,r_top_y : mov ?r[kum][itiran_y],790

;mov ?r[ber][itiran_x],106 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ber][itiran_y],%tmp
mov ?r[bea][itiran_x],200 : mov %tmp,104 : add %tmp,r_top_y : mov ?r[bea][itiran_y],340

return

;*************************************************


;*************************************************
;Initialization for ep2_2 variable
;*************************************************
*bt_ep2_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep2_2
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[ma_kin][condition_end],1
mov $?r[ma_kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"

mov ?r[ma_but][condition_end],1
mov $?r[ma_but][1],":c/1,0,3;graphics\chars\chars_but0.png"

mov ?r[ma_mar][condition_end],1
mov $?r[ma_mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"

mov ?r[ma_gen][condition_end],1
mov $?r[ma_gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"

mov ?r[ma_sha][condition_end],1
mov $?r[ma_sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"

mov ?r[ma_kan][condition_end],1
mov $?r[ma_kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"

mov ?r[ma_bea][condition_end],1
mov $?r[ma_bea][1],":c/1,0,3;graphics\chars\chars_bea0.png"

mov ?r[ma_ber][condition_end],1
mov $?r[ma_ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"

mov ?r[ma_lam][condition_end],1
mov $?r[ma_lam][1],":c/1,0,3;graphics\chars\chars_lam0.png"

mov ?r[ma_rg][condition_end],1
mov $?r[ma_rg][1],":c/1,0,3;graphics\chars\chars_rgk0.png"

mov ?r[ma_rg_1][condition_end],1
mov $?r[ma_rg_1][1],":c/1,0,3;graphics\chars\chars_rgk1.png"

mov ?r[ma_rg_2][condition_end],1
mov $?r[ma_rg_2][1],":c/1,0,3;graphics\chars\chars_rgk2.png"

mov ?r[ma_rg_3][condition_end],1
mov $?r[ma_rg_3][1],":c/1,0,3;graphics\chars\chars_rgk3.png"

mov ?r[ma_rg_4][condition_end],1
mov $?r[ma_rg_4][1],":c/1,0,3;graphics\chars\chars_rgk4.png"

mov ?r[ma_rg_5][condition_end],1
mov $?r[ma_rg_5][1],":c/1,0,3;graphics\chars\chars_rgk5.png"

mov ?r[ma_rg_6][condition_end],1
mov $?r[ma_rg_6][1],":c/1,0,3;graphics\chars\chars_rgk6.png"


;numalias itiran_x,%tmp11 : inc %tmp11
;numalias itiran_y,%tmp11 : inc %tmp11
mov ?r[ma_bea][itiran_x],120 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_bea][itiran_y],265
mov ?r[ma_ber][itiran_x],240 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_ber][itiran_y],265
mov ?r[ma_lam][itiran_x],360 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_lam][itiran_y],265

mov ?r[ma_rg][itiran_x],120 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma_rg][itiran_y],415
mov ?r[ma_rg_1][itiran_x],215 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_rg_1][itiran_y],415 ;new rg
mov ?r[ma_rg_2][itiran_x],310 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_rg_2][itiran_y],415 ;new rg
mov ?r[ma_rg_3][itiran_x],405 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_rg_3][itiran_y],415 ;new rg
mov ?r[ma_rg_4][itiran_x],120 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_rg_4][itiran_y],522 ;new rg
mov ?r[ma_rg_5][itiran_x],215 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_rg_5][itiran_y],522 ;new rg
mov ?r[ma_rg_6][itiran_x],310 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma_rg_6][itiran_y],522 ;new rg

mov ?r[ma_kin][itiran_x],520 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[ma_kin][itiran_y],265
mov ?r[ma_but][itiran_x],630 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[ma_but][itiran_y],265
mov ?r[ma_mar][itiran_x],740 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[ma_mar][itiran_y],265

mov ?r[ma_gen][itiran_x],520 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma_gen][itiran_y],415

mov ?r[ma_sha][itiran_x],520 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma_sha][itiran_y],565

mov ?r[ma_kan][itiran_x],520 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[ma_kan][itiran_y],715

return

;*************************************************
;Initialization for ep3 variable
;*************************************************
*bt_ep3_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep3
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[kin][condition_end],2
mov $?r[kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"
mov $?r[kin][2],":c/1,0,3;graphics\chars\chars_kin2.png"

mov ?r[kla][condition_end],2
mov $?r[kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"
mov $?r[kla][2],":c/1,0,3;graphics\chars\chars_kla_d.png"

mov ?r[nat][condition_end],2
mov $?r[nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"
mov $?r[nat][2],":c/1,0,3;graphics\chars\chars_nat_d.png"

mov ?r[jes][condition_end],2
mov $?r[jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"
mov $?r[jes][2],":c/1,0,3;graphics\chars\chars_jes_d.png"

mov ?r[eva][condition_end],1
mov $?r[eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"
mov $?r[eva][2],":c/1,0,3;graphics\chars\chars_eva_d.png"

mov ?r[hid][condition_end],2
mov $?r[hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"
mov $?r[hid][2],":c/1,0,3;graphics\chars\chars_hid_d.png"

mov ?r[geo][condition_end],2
mov $?r[geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"
mov $?r[geo][2],":c/1,0,3;graphics\chars\chars_geo_d.png"

mov ?r[rud][condition_end],2
mov $?r[rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"
mov $?r[rud][2],":c/1,0,3;graphics\chars\chars_rud_d.png"

mov ?r[kir][condition_end],2
mov $?r[kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"
mov $?r[kir][2],":c/1,0,3;graphics\chars\chars_kir_d.png"

mov ?r[but][condition_end],2
mov $?r[but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[but][1],":c/1,0,3;graphics\chars\chars_but0.png"
mov $?r[but][2],":c/1,0,3;graphics\chars\chars_but_d.png"

mov ?r[ros][condition_end],2
mov $?r[ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"
mov $?r[ros][2],":c/1,0,3;graphics\chars\chars_ros_d.png"

mov ?r[mar][condition_end],2
mov $?r[mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"
mov $?r[mar][2],":c/1,0,3;graphics\chars\chars_mar_d.png"

mov ?r[nan][condition_end],2
mov $?r[nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"
mov $?r[nan][2],":c/1,0,3;graphics\chars\chars_nan_d.png"

mov ?r[gen][condition_end],2
mov $?r[gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"
mov $?r[gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"

mov ?r[kum][condition_end],2
mov $?r[kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"
mov $?r[kum][2],":c/1,0,3;graphics\chars\chars_kum_d.png"

mov ?r[goh][condition_end],2
mov $?r[goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"
mov $?r[goh][2],":c/1,0,3;graphics\chars\chars_goh_d.png"

mov ?r[sha][condition_end],2
mov $?r[sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"
mov $?r[sha][2],":c/1,0,3;graphics\chars\chars_sha_d.png"

mov ?r[kan][condition_end],2
mov $?r[kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"
mov $?r[kan][2],":c/1,0,3;graphics\chars\chars_kan_d.png"

mov ?r[bea][condition_end],2
;mov $?r[bea][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[bea][1],":c/1,0,3;graphics\chars\chars_bea0.png"
mov $?r[bea][2],":c/1,0,3;graphics\chars\chars_bea_d.png"

mov ?r[ber][condition_end],2
mov $?r[ber][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"
mov $?r[ber][2],":c/1,0,3;graphics\chars\chars_ber_d.png"

mov ?r[lam][condition_end],1
mov $?r[lam][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[lam][1],":c/1,0,3;graphics\chars\chars_lam0.png"

mov ?r[enj][condition_end],1
mov $?r[enj][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[enj][1],":c/1,0,3;graphics\chars\chars_enj0.png"


;numalias itiran_x,%tmp11 : inc %tmp11
;numalias itiran_y,%tmp11 : inc %tmp11
mov ?r[kin][itiran_x],200 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[kin][itiran_y],190
mov ?r[kla][itiran_x],330 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[kla][itiran_y],190
mov ?r[nat][itiran_x],460 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[nat][itiran_y],190
mov ?r[jes][itiran_x],590 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[jes][itiran_y],190

mov ?r[bea][itiran_x],200 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[bea][itiran_y],340
mov ?r[eva][itiran_x],330 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[eva][itiran_y],340
mov ?r[hid][itiran_x],460 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[hid][itiran_y],340
mov ?r[geo][itiran_x],590 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[geo][itiran_y],340

mov ?r[rud][itiran_x],330 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[rud][itiran_y],490
mov ?r[kir][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[kir][itiran_y],490
mov ?r[but][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[but][itiran_y],490
mov ?r[enj][itiran_x],720 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj][itiran_y],490

mov ?r[nan][itiran_x],200 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[nan][itiran_y],640
mov ?r[ros][itiran_x],330 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ros][itiran_y],640
mov ?r[mar][itiran_x],590 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640

mov ?r[gen][itiran_x],200 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[gen][itiran_y],790
mov ?r[sha][itiran_x],330 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[sha][itiran_y],790
mov ?r[kan][itiran_x],460 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[kan][itiran_y],790
mov ?r[goh][itiran_x],590 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[goh][itiran_y],790
mov ?r[kum][itiran_x],720 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[kum][itiran_y],790

;mov ?r[ber][itiran_x],106 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ber][itiran_y],%tmp

return

;*************************************************

;*************************************************
;Initialization for ep3_2 variable
;*************************************************
*bt_ep3_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep3_2
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[ma3_bea][condition_end],1
mov $?r[ma3_bea][1],":c/1,0,3;graphics\chars\chars_bea0.png"

mov ?r[ma3_ber][condition_end],1
mov $?r[ma3_ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"

mov ?r[ma3_lam][condition_end],1
mov $?r[ma3_lam][1],":c/1,0,3;graphics\chars\chars_lam0.png"

mov ?r[ma3_rg][condition_end],1
mov $?r[ma3_rg][1],":c/1,0,3;graphics\chars\chars_rgk0.png"

mov ?r[ma3_rg_1][condition_end],1
mov $?r[ma3_rg_1][1],":c/1,0,3;graphics\chars\chars_rgk1.png"

mov ?r[ma3_rg_2][condition_end],1
mov $?r[ma3_rg_2][1],":c/1,0,3;graphics\chars\chars_rgk2.png"

mov ?r[ma3_rg_3][condition_end],1
mov $?r[ma3_rg_3][1],":c/1,0,3;graphics\chars\chars_rgk3.png"

mov ?r[ma3_rg_4][condition_end],1
mov $?r[ma3_rg_4][1],":c/1,0,3;graphics\chars\chars_rgk4.png"

mov ?r[ma3_rg_5][condition_end],1
mov $?r[ma3_rg_5][1],":c/1,0,3;graphics\chars\chars_rgk5.png"

mov ?r[ma3_rg_6][condition_end],1
mov $?r[ma3_rg_6][1],":c/1,0,3;graphics\chars\chars_rgk6.png"

mov ?r[ma3_goa][condition_end],1
mov $?r[ma3_goa][1],":c/1,0,3;graphics\chars\chars_goa0.png"

mov ?r[ma3_wal][condition_end],1
mov $?r[ma3_wal][1],":c/1,0,3;graphics\chars\chars_wal0.png"

mov ?r[ma3_ron][condition_end],1
mov $?r[ma3_ron][1],":c/1,0,3;graphics\chars\chars_ron0.png"

mov ?r[ma3_ev2][condition_end],1
mov $?r[ma3_ev2][1],":c/1,0,3;graphics\chars\chars_evb0.png"

mov ?r[ma3_enj][condition_end],1
mov $?r[ma3_enj][1],":c/1,0,3;graphics\chars\chars_enj0.png"

mov ?r[ma3_s_1][condition_end],1
mov $?r[ma3_s_1][1],":c/1,0,3;graphics\chars\chars_sie1.png"

mov ?r[ma3_s_2][condition_end],1
mov $?r[ma3_s_2][1],":c/1,0,3;graphics\chars\chars_sie2.png"


mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],190
mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],190
mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],190
mov ?r[ma3_enj][itiran_x],720 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_enj][itiran_y],190

mov ?r[ma3_ron][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],340
mov ?r[ma3_s_2][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],340
mov ?r[ma3_s_1][itiran_x],685 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],340

mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],520
mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],520
mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],520 ;new rg
mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],520 ;new rg
mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],520 ;new rg
mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],627 ;new rg
mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],627 ;new rg
mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],627 ;new rg

mov ?r[ma3_ber][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ber][itiran_y],790
mov ?r[ma3_lam][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_lam][itiran_y],790

return

;*************************************************


;*************************************************
;Initialization for ep4 variable
;*************************************************
*bt_ep4_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep4
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[kin][condition_end],2
mov $?r[kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"
mov $?r[kin][2],":c/1,0,3;graphics\chars\chars_kin2.png"

mov ?r[kla][condition_end],2
mov $?r[kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"
mov $?r[kla][2],":c/1,0,3;graphics\chars\chars_kla_d.png"

mov ?r[nat][condition_end],2
mov $?r[nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"
mov $?r[nat][2],":c/1,0,3;graphics\chars\chars_nat_d.png"

mov ?r[jes][condition_end],2
mov $?r[jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"
mov $?r[jes][2],":c/1,0,3;graphics\chars\chars_jes_d.png"

mov ?r[eva][condition_end],2
mov $?r[eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"
mov $?r[eva][2],":c/1,0,3;graphics\chars\chars_eva_d.png"

mov ?r[hid][condition_end],2
mov $?r[hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"
mov $?r[hid][2],":c/1,0,3;graphics\chars\chars_hid_d.png"

mov ?r[geo][condition_end],2
mov $?r[geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"
mov $?r[geo][2],":c/1,0,3;graphics\chars\chars_geo_d.png"

mov ?r[rud][condition_end],2
mov $?r[rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"
mov $?r[rud][2],":c/1,0,3;graphics\chars\chars_rud_d.png"

mov ?r[kir][condition_end],2
mov $?r[kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"
mov $?r[kir][2],":c/1,0,3;graphics\chars\chars_kir_d.png"

mov ?r[but][condition_end],2
mov $?r[but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[but][1],":c/1,0,3;graphics\chars\chars_but0.png"
mov $?r[but][2],":c/1,0,3;graphics\chars\chars_but_d.png"

mov ?r[ros][condition_end],2
mov $?r[ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"
mov $?r[ros][2],":c/1,0,3;graphics\chars\chars_ros_d.png"

mov ?r[mar][condition_end],2
mov $?r[mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"
mov $?r[mar][2],":c/1,0,3;graphics\chars\chars_mar_d.png"

mov ?r[nan][condition_end],2
mov $?r[nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"
mov $?r[nan][2],":c/1,0,3;graphics\chars\chars_nan_d.png"

mov ?r[gen][condition_end],2
mov $?r[gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"
mov $?r[gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"

mov ?r[kum][condition_end],2
mov $?r[kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"
mov $?r[kum][2],":c/1,0,3;graphics\chars\chars_kum_d.png"

mov ?r[goh][condition_end],2
mov $?r[goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"
mov $?r[goh][2],":c/1,0,3;graphics\chars\chars_goh_d.png"

mov ?r[sha][condition_end],2
mov $?r[sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"
mov $?r[sha][2],":c/1,0,3;graphics\chars\chars_sha_d.png"

mov ?r[kan][condition_end],2
mov $?r[kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"
mov $?r[kan][2],":c/1,0,3;graphics\chars\chars_kan_d.png"

mov ?r[bea][condition_end],2
;mov $?r[bea][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[bea][1],":c/1,0,3;graphics\chars\chars_bea0.png"
mov $?r[bea][2],":c/1,0,3;graphics\chars\chars_bea_d.png"

mov ?r[ber][condition_end],2
mov $?r[ber][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"
mov $?r[ber][2],":c/1,0,3;graphics\chars\chars_ber_d.png"

mov ?r[lam][condition_end],1
mov $?r[lam][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[lam][1],":c/1,0,3;graphics\chars\chars_lam0.png"

mov ?r[enj][condition_end],1
mov $?r[enj][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[enj][1],":c/1,0,3;graphics\chars\chars_enj0.png"


;numalias itiran_x,%tmp11 : inc %tmp11
;numalias itiran_y,%tmp11 : inc %tmp11
mov ?r[kin][itiran_x],200 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[kin][itiran_y],190
mov ?r[kla][itiran_x],330 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[kla][itiran_y],190
mov ?r[nat][itiran_x],460 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[nat][itiran_y],190
mov ?r[jes][itiran_x],590 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[jes][itiran_y],190

mov ?r[bea][itiran_x],200 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[bea][itiran_y],340
mov ?r[eva][itiran_x],330 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[eva][itiran_y],340
mov ?r[hid][itiran_x],460 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[hid][itiran_y],340
mov ?r[geo][itiran_x],590 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[geo][itiran_y],340

mov ?r[rud][itiran_x],330 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[rud][itiran_y],490
mov ?r[kir][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[kir][itiran_y],490
mov ?r[but][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[but][itiran_y],490
mov ?r[enj][itiran_x],720 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj][itiran_y],490

mov ?r[nan][itiran_x],200 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[nan][itiran_y],640
mov ?r[ros][itiran_x],330 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ros][itiran_y],640
mov ?r[mar][itiran_x],590 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640

mov ?r[gen][itiran_x],200 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[gen][itiran_y],790
mov ?r[sha][itiran_x],330 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[sha][itiran_y],790
mov ?r[kan][itiran_x],460 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[kan][itiran_y],790
mov ?r[goh][itiran_x],590 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[goh][itiran_y],790
mov ?r[kum][itiran_x],720 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[kum][itiran_y],790

mov ?r[ber][itiran_x],-200 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ber][itiran_y],%tmp
mov ?r[enj][itiran_x],-200 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[enj][itiran_y],%tmp

return

;*************************************************



;*************************************************
;Initialization for ep4_2 variable
;*************************************************
*bt_ep4_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep4_2
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[ma4_lam][condition_end],1
mov $?r[ma4_lam][1],":c/1,0,3;graphics\chars\chars_lam0_s.png"

mov ?r[ma4_ber][condition_end],1
mov $?r[ma4_ber][1],":c/1,0,3;graphics\chars\chars_ber0_s.png"

mov ?r[ma4_bea][condition_end],2
mov $?r[ma4_bea][1],":c/1,0,3;graphics\chars\chars_bea0_s.png"
mov $?r[ma4_bea][2],":c/1,0,3;graphics\chars\chars_bea0_s.png"

mov ?r[ma4_mar][condition_end],2
mov $?r[ma4_mar][1],":c/1,0,3;graphics\chars\chars_mar0_s.png"
mov $?r[ma4_mar][2],":c/1,0,3;graphics\chars\chars_mar1_s.png"

mov ?r[ma4_enj][condition_end],1
mov $?r[ma4_enj][1],":c/1,0,3;graphics\chars\chars_enj0_s.png"

mov ?r[ma4_kin][condition_end],1
mov $?r[ma4_kin][1],":c/1,0,3;graphics\chars\chars_kin0_s.png"

mov ?r[ma4_sak][condition_end],2
mov $?r[ma4_sak][1],":c/1,0,3;graphics\chars\chars_sak0_s.png"
mov $?r[ma4_sak][2],":c/1,0,3;graphics\chars\chars_sak1_s.png"

mov ?r[ma4_wal][condition_end],1
mov $?r[ma4_wal][1],":c/1,0,3;graphics\chars\chars_wal0_s.png"

mov ?r[ma4_ron][condition_end],1
mov $?r[ma4_ron][1],":c/1,0,3;graphics\chars\chars_ron0_s.png"

mov ?r[ma4_gap][condition_end],1
mov $?r[ma4_gap][1],":c/1,0,3;graphics\chars\chars_gap0_s.png"

mov ?r[ma4_s00][condition_end],1
mov $?r[ma4_s00][1],":c/1,0,3;graphics\chars\chars_sie0_s.png"

mov ?r[ma4_s410][condition_end],1
mov $?r[ma4_s410][1],":c/1,0,3;graphics\chars\chars_sie1_s.png"

mov ?r[ma4_s45][condition_end],1
mov $?r[ma4_s45][1],":c/1,0,3;graphics\chars\chars_sie2_s.png"

mov ?r[ma4_s556][condition_end],2
mov $?r[ma4_s556][1],":c/1,0,3;graphics\chars\chars_sie3_s.png"
mov $?r[ma4_s556][2],":c/1,0,3;graphics\chars\chars_sie3_d_s.png"

mov ?r[ma4_rg][condition_end],1
mov $?r[ma4_rg][1],":c/1,0,3;graphics\chars\chars_rgk0_s.png"

mov ?r[ma4_rg_1][condition_end],1
mov $?r[ma4_rg_1][1],":c/1,0,3;graphics\chars\chars_rgk1_s.png"

mov ?r[ma4_rg_2][condition_end],1
mov $?r[ma4_rg_2][1],":c/1,0,3;graphics\chars\chars_rgk2_s.png"

mov ?r[ma4_rg_3][condition_end],1
mov $?r[ma4_rg_3][1],":c/1,0,3;graphics\chars\chars_rgk3_s.png"

mov ?r[ma4_rg_4][condition_end],1
mov $?r[ma4_rg_4][1],":c/1,0,3;graphics\chars\chars_rgk4_s.png"

mov ?r[ma4_rg_5][condition_end],1
mov $?r[ma4_rg_5][1],":c/1,0,3;graphics\chars\chars_rgk5_s.png"

mov ?r[ma4_rg_6][condition_end],1
mov $?r[ma4_rg_6][1],":c/1,0,3;graphics\chars\chars_rgk6_s.png"

mov ?r[ma4_goa][condition_end],1
mov $?r[ma4_goa][1],":c/1,0,3;graphics\chars\chars_goa0_s.png"

mov ?r[ma4_lam][itiran_x],342 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],213
mov ?r[ma4_ber][itiran_x],602 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],213

mov ?r[ma4_bea][itiran_x],342 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],350
mov ?r[ma4_mar][itiran_x],472 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],350
mov ?r[ma4_enj][itiran_x],602 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],350

mov ?r[ma4_kin][itiran_x],342 : mov %tmp,91 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],487
mov ?r[ma4_sak][itiran_x],472 : mov %tmp,91 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],487

mov ?r[ma4_wal][itiran_x],112 : mov %tmp,138 : add %tmp,r_top_y : mov ?r[ma4_wal][itiran_y],640
mov ?r[ma4_ron][itiran_x],225 : mov %tmp,138 : add %tmp,r_top_y : mov ?r[ma4_ron][itiran_y],640
mov ?r[ma4_gap][itiran_x],342 : mov %tmp,138 : add %tmp,r_top_y : mov ?r[ma4_gap][itiran_y],640
mov ?r[ma4_s45][itiran_x],472 : mov %tmp,472 : add %tmp,90 : mov ?r[ma4_s45][itiran_y],640
mov ?r[ma4_s410][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_s410][itiran_y],640
mov ?r[ma4_s00][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_s00][itiran_y],640
mov ?r[ma4_s556][itiran_x],%tmp : mov ?r[ma4_s556][itiran_y],640

mov ?r[ma4_goa][itiran_x],112 : mov %tmp,185 : add %tmp,r_top_y : mov ?r[ma4_goa][itiran_y],793
mov ?r[ma4_rg][itiran_x],215 : mov %tmp,215 : add %tmp,90 : mov ?r[ma4_rg][itiran_y],793
mov ?r[ma4_rg_1][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_rg_1][itiran_y],793 ;new rg +95
mov ?r[ma4_rg_2][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_rg_2][itiran_y],793 ;new rg
mov ?r[ma4_rg_3][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_rg_3][itiran_y],793 ;new rg
mov ?r[ma4_rg_4][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_rg_4][itiran_y],793 ;new rg
mov ?r[ma4_rg_5][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_rg_5][itiran_y],793 ;new rg
mov ?r[ma4_rg_6][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_rg_6][itiran_y],793 ;new rg

return

;*************************************************



;*************************************************
;Initialization for ep4_3 variable
;*************************************************
*bt_ep4_3_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep4_3
	for %tmp12 = 0 to 6
		mov ?r[%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[enj_eva][condition_end],1
mov $?r[enj_eva][1],":c/1,0,3;graphics\chars\chars_eva_d.png"

mov ?r[enj_oko][condition_end],1
mov $?r[enj_oko][1],":c/1,0,3;graphics\chars\chars_oko0.png"

mov ?r[enj_kas][condition_end],1
mov $?r[enj_kas][1],":c/1,0,3;graphics\chars\chars_kas0.png"

mov ?r[enj_enj][condition_end],1
mov $?r[enj_enj][1],":c/1,0,3;graphics\chars\chars_enj0.png"

mov ?r[enj_ama][condition_end],1
mov $?r[enj_ama][1],":c/1,0,3;graphics\chars\chars_ama0.png"

mov ?r[enj_sak][condition_end],1
mov $?r[enj_sak][1],":c/1,0,3;graphics\chars\chars_sak0.png"

mov ?r[enj_mar][condition_end],1
mov $?r[enj_mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"

mov ?r[enj_rg][condition_end],1
mov $?r[enj_rg][1],":c/1,0,3;graphics\chars\chars_rgk0.png"

mov ?r[enj_rg_1][condition_end],1
mov $?r[enj_rg_1][1],":c/1,0,3;graphics\chars\chars_rgk1.png"

mov ?r[enj_rg_2][condition_end],1
mov $?r[enj_rg_2][1],":c/1,0,3;graphics\chars\chars_rgk2.png"

mov ?r[enj_rg_3][condition_end],1
mov $?r[enj_rg_3][1],":c/1,0,3;graphics\chars\chars_rgk3.png"

mov ?r[enj_rg_4][condition_end],1
mov $?r[enj_rg_4][1],":c/1,0,3;graphics\chars\chars_rgk4.png"

mov ?r[enj_rg_5][condition_end],1
mov $?r[enj_rg_5][1],":c/1,0,3;graphics\chars\chars_rgk5.png"

mov ?r[enj_rg_6][condition_end],1
mov $?r[enj_rg_6][1],":c/1,0,3;graphics\chars\chars_rgk6.png"

mov ?r[enj_pro][condition_end],1
mov $?r[enj_pro][1],":c/1,0,3;graphics\chars\chars_pro0.png"

mov ?r[enj_mas][condition_end],1
mov $?r[enj_mas][1],":c/1,0,3;graphics\chars\chars_mas0.png"

mov ?r[enj_sab][condition_end],1
mov $?r[enj_sab][1],":c/1,0,3;graphics\chars\chars_sab0.png"

mov ?r[enj_kwa][condition_end],1
mov $?r[enj_kwa][1],":c/1,0,3;graphics\chars\chars_kwa0.png"

mov ?r[enj_ber][condition_end],1
mov $?r[enj_ber][1],":c/1,0,3;graphics\chars\chars_ber0.png"

mov ?r[enj_ber][itiran_x],150 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_ber][itiran_y],190

mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],190
mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],190

mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],350
mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],350
mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],350

mov ?r[enj_mar][itiran_x],150 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_mar][itiran_y],510
mov ?r[enj_sak][itiran_x],280 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_sak][itiran_y],510
mov ?r[enj_rg][itiran_x],410 : mov %tmp,410 : add %tmp,90 : mov ?r[enj_rg][itiran_y],510
mov ?r[enj_rg_1][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_1][itiran_y],510 ;new rg +95
mov ?r[enj_rg_2][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_2][itiran_y],510 ;new rg
mov ?r[enj_rg_3][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_3][itiran_y],510 ;new rg
mov ?r[enj_rg_4][itiran_x],410 : mov %tmp,410 : add %tmp,90 : mov ?r[enj_rg_4][itiran_y],617 ;new rg
mov ?r[enj_rg_5][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_5][itiran_y],617 ;new rg
mov ?r[enj_rg_6][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_6][itiran_y],617 ;new rg

mov ?r[enj_pro][itiran_x],150 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[enj_pro][itiran_y],777
mov ?r[enj_mas][itiran_x],280 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[enj_mas][itiran_y],777
mov ?r[enj_sab][itiran_x],410 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[enj_sab][itiran_y],777
mov ?r[enj_kwa][itiran_x],540 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[enj_kwa][itiran_y],777

return

;***************************************************************

;*************************************************
;Initialization for ep5 variable
;*************************************************
*bt_ep5_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5
	for %tmp12 = 0 to 6
		mov ?r[5][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[5][kin][condition_end],1
mov $?r[5][kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"

mov ?r[5][kla][condition_end],3
mov $?r[5][kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"
mov $?r[5][kla][2],":c/1,0,3;graphics\chars\chiru\chars_kla_m.png" 
mov $?r[5][kla][3],":c/1,0,3;graphics\chars\chars_kla_d.png"

mov ?r[5][nat][condition_end],1
mov $?r[5][nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"

mov ?r[5][jes][condition_end],2
mov $?r[5][jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"
mov $?r[5][jes][2],":c/1,0,3;graphics\chars\chars_jes_d.png"

mov ?r[5][eva][condition_end],1
mov $?r[5][eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"

mov ?r[5][hid][condition_end],2
mov $?r[5][hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"
mov $?r[5][hid][2],":c/1,0,3;graphics\chars\chars_hid_d.png"

mov ?r[5][geo][condition_end],2
mov $?r[5][geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"
mov $?r[5][geo][2],":c/1,0,3;graphics\chars\chars_geo_d.png"

mov ?r[5][rud][condition_end],1
mov $?r[5][rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"

mov ?r[5][kir][condition_end],1
mov $?r[5][kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"

mov ?r[5][but][condition_end],1
mov $?r[5][but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][but][1],":c/1,0,3;graphics\chars\chars_but0.png"

mov ?r[5][ros][condition_end],2
mov $?r[5][ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"
mov $?r[5][ros][2],":c/1,0,3;graphics\chars\chars_ros_d.png"

mov ?r[5][mar][condition_end],2
mov $?r[5][mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"
mov $?r[5][mar][2],":c/1,0,3;graphics\chars\chars_mar_d.png"

mov ?r[5][nan][condition_end],1
mov $?r[5][nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"

mov ?r[5][gen][condition_end],2
mov $?r[5][gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"
mov $?r[5][gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"

mov ?r[5][kum][condition_end],1
mov $?r[5][kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"

mov ?r[5][goh][condition_end],1
mov $?r[5][goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"

mov ?r[5][sha][condition_end],1
mov $?r[5][sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"

mov ?r[5][kan][condition_end],1
mov $?r[5][kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[5][kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"

mov ?r[5][eri][condition_end],1
mov $?r[5][eri][0],":c/1,0,3;graphics\chars\chiru\chars_non.png"
mov $?r[5][eri][1],":c/1,0,3;graphics\chars\chiru\chars_eri0.png"

mov ?r[5][kin][itiran_x],200 : mov ?r[5][kin][itiran_y],190
mov ?r[5][kla][itiran_x],330 : mov ?r[5][kla][itiran_y],190
mov ?r[5][nat][itiran_x],460 : mov ?r[5][nat][itiran_y],190
mov ?r[5][jes][itiran_x],590 : mov ?r[5][jes][itiran_y],190

mov ?r[5][eri][itiran_x],200 : mov ?r[5][eri][itiran_y],340
mov ?r[5][eva][itiran_x],330 : mov ?r[5][eva][itiran_y],340
mov ?r[5][hid][itiran_x],460 : mov ?r[5][hid][itiran_y],340
mov ?r[5][geo][itiran_x],590 : mov ?r[5][geo][itiran_y],340

mov ?r[5][rud][itiran_x],330 : mov ?r[5][rud][itiran_y],490
mov ?r[5][kir][itiran_x],460 : mov ?r[5][kir][itiran_y],490
mov ?r[5][but][itiran_x],590 : mov ?r[5][but][itiran_y],490

mov ?r[5][nan][itiran_x],200 : mov ?r[5][nan][itiran_y],640
mov ?r[5][ros][itiran_x],330 : mov ?r[5][ros][itiran_y],640
mov ?r[5][mar][itiran_x],590 : mov ?r[5][mar][itiran_y],640

mov ?r[5][gen][itiran_x],200 : mov ?r[5][gen][itiran_y],790
mov ?r[5][sha][itiran_x],330 : mov ?r[5][sha][itiran_y],790
mov ?r[5][kan][itiran_x],460 : mov ?r[5][kan][itiran_y],790
mov ?r[5][goh][itiran_x],590 : mov ?r[5][goh][itiran_y],790
mov ?r[5][kum][itiran_x],720 : mov ?r[5][kum][itiran_y],790

return


;***************************************************************

;*************************************************
;Initialization for ep5_2 variable
;*************************************************
*bt_ep5_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5_2
	for %tmp12 = 0 to 6
		mov ?r[5][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[5][ma5_lam][condition_end],1
mov $?r[5][ma5_lam][1],":c/1,0,3;graphics\chars\chars_lam0_s.png"

mov ?r[5][ma5_ber][condition_end],1
mov $?r[5][ma5_ber][1],":c/1,0,3;graphics\chars\chars_ber0_s.png"

mov ?r[5][ma5_bea][condition_end],2
mov $?r[5][ma5_bea][1],":c/1,0,3;graphics\chars\chars_bea0_s.png"
mov $?r[5][ma5_bea][2],":c/1,0,3;graphics\chars\chiru\chars_bea3_s.png"

mov ?r[5][ma5_wal][condition_end],1
mov $?r[5][ma5_wal][1],":c/1,0,3;graphics\chars\chars_wal0_s.png"

mov ?r[5][ma5_ron][condition_end],1
mov $?r[5][ma5_ron][1],":c/1,0,3;graphics\chars\chars_ron0_s.png"

mov ?r[5][ma5_gap][condition_end],1
mov $?r[5][ma5_gap][1],":c/1,0,3;graphics\chars\chars_gap0_s.png"

mov ?r[5][ma5_but][condition_end],1
mov $?r[5][ma5_but][1],":c/1,0,3;graphics\chars\chars_but0_s.png"

mov ?r[5][ma5_eri][condition_end],1
mov $?r[5][ma5_eri][1],":c/1,0,3;graphics\chars\chiru\chars_eri0_s.png"

mov ?r[5][ma5_dla][condition_end],1
mov $?r[5][ma5_dla][1],":c/1,0,3;graphics\chars\chiru\chars_dla0_s.png"

mov ?r[5][ma5_s00][condition_end],1
mov $?r[5][ma5_s00][1],":c/1,0,3;graphics\chars\chars_sie0_s.png"

mov ?r[5][ma5_s410][condition_end],1
mov $?r[5][ma5_s410][1],":c/1,0,3;graphics\chars\chars_sie1_s.png"

mov ?r[5][ma5_s45][condition_end],1
mov $?r[5][ma5_s45][1],":c/1,0,3;graphics\chars\chars_sie2_s.png"

mov ?r[5][ma5_s556][condition_end],2
mov $?r[5][ma5_s556][1],":c/1,0,3;graphics\chars\chars_sie3_s.png"
mov $?r[5][ma5_s556][2],":c/1,0,3;graphics\chars\chars_sie3_d_s.png"

mov ?r[5][ma5_rg][condition_end],1
mov $?r[5][ma5_rg][1],":c/1,0,3;graphics\chars\chiru\chars_rg0_s.png"

mov ?r[5][ma5_rg_1][condition_end],1
mov $?r[5][ma5_rg_1][1],":c/1,0,3;graphics\chars\chiru\chars_rg1_s.png"

mov ?r[5][ma5_rg_2][condition_end],1
mov $?r[5][ma5_rg_2][1],":c/1,0,3;graphics\chars\chiru\chars_rg2_s.png"

mov ?r[5][ma5_rg_3][condition_end],1
mov $?r[5][ma5_rg_3][1],":c/1,0,3;graphics\chars\chiru\chars_rg3_s.png"

mov ?r[5][ma5_rg_4][condition_end],1
mov $?r[5][ma5_rg_4][1],":c/1,0,3;graphics\chars\chiru\chars_rg4_s.png"

mov ?r[5][ma5_rg_5][condition_end],1
mov $?r[5][ma5_rg_5][1],":c/1,0,3;graphics\chars\chiru\chars_rg5_s.png"

mov ?r[5][ma5_rg_6][condition_end],1
mov $?r[5][ma5_rg_6][1],":c/1,0,3;graphics\chars\chiru\chars_rg6_s.png"

mov ?r[5][ma5_ger][condition_end],1
mov $?r[5][ma5_ger][1],":c/1,0,3;graphics\chars\chiru\chars_gur0_s.png"

mov ?r[5][ma5_cor][condition_end],1
mov $?r[5][ma5_cor][1],":c/1,0,3;graphics\chars\chiru\chars_cor0_s.png"

mov ?r[5][ma5_bea][itiran_x],197 	: mov ?r[5][ma5_bea][itiran_y],229
mov ?r[5][ma5_wal][itiran_x],107 	: mov ?r[5][ma5_wal][itiran_y],375
mov ?r[5][ma5_ron][itiran_x],197 	: mov ?r[5][ma5_ron][itiran_y],375
mov ?r[5][ma5_gap][itiran_x],287 	: mov ?r[5][ma5_gap][itiran_y],375
mov %tmp,107
mov ?r[5][ma5_rg][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg][itiran_y],522
mov ?r[5][ma5_rg_1][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg_1][itiran_y],522
mov ?r[5][ma5_rg_2][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg_2][itiran_y],522
mov ?r[5][ma5_rg_3][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg_3][itiran_y],522
mov ?r[5][ma5_rg_4][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg_4][itiran_y],522
mov ?r[5][ma5_rg_5][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg_5][itiran_y],522
mov ?r[5][ma5_rg_6][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_rg_6][itiran_y],522

mov ?r[5][ma5_but][itiran_x],460 	: mov ?r[5][ma5_but][itiran_y],375

mov ?r[5][ma5_lam][itiran_x],576 	: mov ?r[5][ma5_lam][itiran_y],375

mov ?r[5][ma5_ber][itiran_x],749 	: mov ?r[5][ma5_ber][itiran_y],229
mov ?r[5][ma5_eri][itiran_x],749 	: mov ?r[5][ma5_eri][itiran_y],375
mov ?r[5][ma5_dla][itiran_x],749 	: mov ?r[5][ma5_dla][itiran_y],522
mov ?r[5][ma5_ger][itiran_x],659 	: mov ?r[5][ma5_ger][itiran_y],679
mov ?r[5][ma5_cor][itiran_x],749 	: mov ?r[5][ma5_cor][itiran_y],679

mov %tmp,287
mov ?r[5][ma5_s45][itiran_x],287 	: add %tmp,90 : mov ?r[5][ma5_s45][itiran_y],679
mov ?r[5][ma5_s410][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_s410][itiran_y],679
mov ?r[5][ma5_s00][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_s00][itiran_y],679
mov ?r[5][ma5_s556][itiran_x],%tmp 	: 				mov ?r[5][ma5_s556][itiran_y],679

return

;***************************************************************

;*************************************************
;Initialization for ep6 variable
;*************************************************
*bt_ep6_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep6
	for %tmp12 = 0 to 6
		mov ?r[6][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[6][kin][condition_end],1
mov $?r[6][kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][kin][1],":c/1,0,3;graphics\chars\chars_kin1.png"

mov ?r[6][kla][condition_end],1
mov $?r[6][kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"

mov ?r[6][nat][condition_end],3
mov $?r[6][nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"
mov $?r[6][nat][2],":c/1,0,3;graphics\chars\chiru\chars_nat_d1.png"
mov $?r[6][nat][3],":c/1,0,3;graphics\chars\chars_nat_d.png"


mov ?r[6][jes][condition_end],1
mov $?r[6][jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"

mov ?r[6][eva][condition_end],3
mov $?r[6][eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"
mov $?r[6][eva][2],":c/1,0,3;graphics\chars\chiru\chars_eva_d1.png"
mov $?r[6][eva][3],":c/1,0,3;graphics\chars\chars_eva_d.png"

mov ?r[6][hid][condition_end],1
mov $?r[6][hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"

mov ?r[6][geo][condition_end],1
mov $?r[6][geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"

mov ?r[6][rud][condition_end],1
mov $?r[6][rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"

mov ?r[6][kir][condition_end],3
mov $?r[6][kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"
mov $?r[6][kir][2],":c/1,0,3;graphics\chars\chiru\chars_kir_d1.png"
mov $?r[6][kir][3],":c/1,0,3;graphics\chars\chars_kir_d.png"

mov ?r[6][but][condition_end],2
mov $?r[6][but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][but][1],":c/1,0,3;graphics\chars\chars_but0.png"
mov $?r[6][but][2],":c/1,0,3;graphics\chars\chiru\chars_but_d1.png"
mov $?r[6][but][3],":c/1,0,3;graphics\chars\chars_but_d.png"

mov ?r[6][ros][condition_end],3
mov $?r[6][ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"
mov $?r[6][ros][2],":c/1,0,3;graphics\chars\chiru\chars_ros_d1.png"
mov $?r[6][ros][3],":c/1,0,3;graphics\chars\chars_ros_d.png"

mov ?r[6][mar][condition_end],3
mov $?r[6][mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"
mov $?r[6][mar][2],":c/1,0,3;graphics\chars\chiru\chars_mar_d1.png"
mov $?r[6][mar][3],":c/1,0,3;graphics\chars\chars_mar_d.png"

mov ?r[6][nan][condition_end],1
mov $?r[6][nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"

mov ?r[6][gen][condition_end],1
mov $?r[6][gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"
;mov $?r[6][gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"

mov ?r[6][kum][condition_end],1
mov $?r[6][kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"

mov ?r[6][goh][condition_end],1
mov $?r[6][goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"

mov ?r[6][sha][condition_end],1
mov $?r[6][sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"

mov ?r[6][kan][condition_end],1
mov $?r[6][kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"

mov ?r[6][eri][condition_end],2
mov $?r[6][eri][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[6][eri][1],":c/1,0,3;graphics\chars\chiru\chars_eri0.png"
mov $?r[6][eri][2],":c/1,0,3;graphics\chars\chiru\chars_eri0_d.png"
;mov $?r[6][Lig][1],":c/1,0,3;graphics\chars\chars_eri0.png"

mov ?r[6][kin][itiran_x],200 : mov ?r[6][kin][itiran_y],190
mov ?r[6][kla][itiran_x],330 : mov ?r[6][kla][itiran_y],190
mov ?r[6][nat][itiran_x],460 : mov ?r[6][nat][itiran_y],190
mov ?r[6][jes][itiran_x],590 : mov ?r[6][jes][itiran_y],190

mov ?r[6][eri][itiran_x],200 : mov ?r[6][eri][itiran_y],340
mov ?r[6][eva][itiran_x],330 : mov ?r[6][eva][itiran_y],340
mov ?r[6][hid][itiran_x],460 : mov ?r[6][hid][itiran_y],340
mov ?r[6][geo][itiran_x],590 : mov ?r[6][geo][itiran_y],340

mov ?r[6][rud][itiran_x],330 : mov ?r[6][rud][itiran_y],490
mov ?r[6][kir][itiran_x],460 : mov ?r[6][kir][itiran_y],490
mov ?r[6][but][itiran_x],590 : mov ?r[6][but][itiran_y],490

mov ?r[6][nan][itiran_x],200 : mov ?r[6][nan][itiran_y],640
mov ?r[6][ros][itiran_x],330 : mov ?r[6][ros][itiran_y],640
mov ?r[6][mar][itiran_x],590 : mov ?r[6][mar][itiran_y],640

mov ?r[6][gen][itiran_x],200 : mov ?r[6][gen][itiran_y],790
mov ?r[6][sha][itiran_x],330 : mov ?r[6][sha][itiran_y],790
mov ?r[6][kan][itiran_x],460 : mov ?r[6][kan][itiran_y],790
mov ?r[6][goh][itiran_x],590 : mov ?r[6][goh][itiran_y],790
mov ?r[6][kum][itiran_x],720 : mov ?r[6][kum][itiran_y],790


return

;***************************************************************

;*************************************************
;Initialization for ep6_2 variable
;*************************************************
*bt_ep6_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5_2
	for %tmp12 = 0 to 6
		mov ?r[6][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[6][ma5_lam][condition_end],1
mov $?r[6][ma5_lam][1],":c/1,0,3;graphics\chars\chars_lam0_s.png"

mov ?r[6][ma5_ber][condition_end],1
mov $?r[6][ma5_ber][1],":c/1,0,3;graphics\chars\chars_ber0_s.png"

mov ?r[6][ma5_be2][condition_end],1
mov $?r[6][ma5_be2][1],":c/1,0,3;graphics\chars\chiru\chars_bea2_s.png"

mov ?r[6][ma5_bea][condition_end],1
mov $?r[6][ma5_bea][1],":c/1,0,3;graphics\chars\chars_bea0_s.png"

mov ?r[6][ma5_wal][condition_end],1
mov $?r[6][ma5_wal][1],":c/1,0,3;graphics\chars\chars_wal0_s.png"

mov ?r[6][ma5_ron][condition_end],1
mov $?r[6][ma5_ron][1],":c/1,0,3;graphics\chars\chars_ron0_s.png"

mov ?r[6][ma5_gap][condition_end],1
mov $?r[6][ma5_gap][1],":c/1,0,3;graphics\chars\chars_gap0_s.png"

mov ?r[6][ma5_but][condition_end],1
mov $?r[6][ma5_but][1],":c/1,0,3;graphics\chars\chiru\chars_but1_s.png"

mov ?r[6][ma5_eri][condition_end],2
mov $?r[6][ma5_eri][1],":c/1,0,3;graphics\chars\chiru\chars_eri0_s.png"
mov $?r[6][ma5_eri][2],":c/1,0,3;graphics\chars\chars_non.png"

mov ?r[6][ma5_dla][condition_end],1
mov $?r[6][ma5_dla][1],":c/1,0,3;graphics\chars\chiru\chars_dla0_s.png"

mov ?r[6][ma5_s00][condition_end],1
mov $?r[6][ma5_s00][1],":c/1,0,3;graphics\chars\chars_sie0_s.png"

mov ?r[6][ma5_s410][condition_end],1
mov $?r[6][ma5_s410][1],":c/1,0,3;graphics\chars\chars_sie1_s.png"

mov ?r[6][ma5_s45][condition_end],1
mov $?r[6][ma5_s45][1],":c/1,0,3;graphics\chars\chars_sie2_s.png"

mov ?r[6][ma5_s556][condition_end],2
mov $?r[6][ma5_s556][1],":c/1,0,3;graphics\chars\chars_sie3_s.png"
mov $?r[6][ma5_s556][2],":c/1,0,3;graphics\chars\chars_sie3_d_s.png"


mov ?r[6][ma5_rg][condition_end],1
mov $?r[6][ma5_rg][1],":c/1,0,3;graphics\chars\chiru\chars_rg0_s.png"

mov ?r[6][ma5_rg_1][condition_end],1
mov $?r[6][ma5_rg_1][1],":c/1,0,3;graphics\chars\chiru\chars_rg1_s.png"

mov ?r[6][ma5_rg_2][condition_end],1
mov $?r[6][ma5_rg_2][1],":c/1,0,3;graphics\chars\chiru\chars_rg2_s.png"

mov ?r[6][ma5_rg_3][condition_end],1
mov $?r[6][ma5_rg_3][1],":c/1,0,3;graphics\chars\chiru\chars_rg3_s.png"

mov ?r[6][ma5_rg_4][condition_end],1
mov $?r[6][ma5_rg_4][1],":c/1,0,3;graphics\chars\chiru\chars_rg4_s.png"

mov ?r[6][ma5_rg_5][condition_end],1
mov $?r[6][ma5_rg_5][1],":c/1,0,3;graphics\chars\chiru\chars_rg5_s.png"

mov ?r[6][ma5_rg_6][condition_end],1
mov $?r[6][ma5_rg_6][1],":c/1,0,3;graphics\chars\chiru\chars_rg6_s.png"

mov ?r[6][ma5_ger][condition_end],1
mov $?r[6][ma5_ger][1],":c/1,0,3;graphics\chars\chiru\chars_gur0_s.png"

mov ?r[6][ma5_cor][condition_end],1
mov $?r[6][ma5_cor][1],":c/1,0,3;graphics\chars\chiru\chars_cor0_s.png"

;mov ?r[6][ma5_k][condition_end],1
;mov $?r[6][ma5_k][1],":c/1,0,3;graphics\chars\chars_k_l.png"

mov ?r[6][ma5_ZEP][condition_end],1
mov $?r[6][ma5_ZEP][1],":c/1,0,3;graphics\chars\chiru\chars_zep0_s.png"

mov ?r[6][ma5_FUR][condition_end],1
mov $?r[6][ma5_FUR][1],":c/1,0,3;graphics\chars\chiru\chars_ful0_s.png"

;mov ?r[6][ma5_zf][condition_end],1
;mov $?r[6][ma5_zf][1],":c/1,0,3;graphics\chars\chars_zf_l.png"

mov ?r[6][ma5_GOA][condition_end],1
mov $?r[6][ma5_GOA][1],":c/1,0,3;graphics\chars\chars_goa0_s.png"

;mov ?r[6][ma5_LIG][condition_end],2
;mov $?r[6][ma5_LIG][1],":c/1,0,3;graphics\chars\chars_LIG_l.png"
;mov $?r[6][ma5_LIG][2],":c/1,0,3;graphics\chars\chars_LIG2_l.png"


;mov ?r[6][ma5_zf][itiran_x],17		: mov ?r[6][ma5_zf][itiran_y],%tmp
mov ?r[6][ma5_be2][itiran_x],358	: mov ?r[6][ma5_be2][itiran_y],169
mov ?r[6][ma5_bea][itiran_x],358 	: mov ?r[6][ma5_bea][itiran_y],320
;mov ?r[6][ma5_w][itiran_x],17 		: mov ?r[6][ma5_w][itiran_y],%tmp

mov %tmp,150
mov ?r[6][ma5_rg][itiran_x],%tmp 	: add %tmp,90 : mov ?r[6][ma5_rg][itiran_y],620
mov ?r[6][ma5_rg_1][itiran_x],%tmp	: add %tmp,90 : mov ?r[6][ma5_rg_1][itiran_y],620
mov ?r[6][ma5_rg_2][itiran_x],%tmp	: add %tmp,90 : mov ?r[6][ma5_rg_2][itiran_y],620
mov ?r[6][ma5_rg_3][itiran_x],%tmp 	: add %tmp,90 : mov ?r[6][ma5_rg_3][itiran_y],620
mov ?r[6][ma5_rg_4][itiran_x],%tmp 	: add %tmp,90 : mov ?r[6][ma5_rg_4][itiran_y],620
mov ?r[6][ma5_rg_5][itiran_x],%tmp 	: add %tmp,90 : mov ?r[6][ma5_rg_5][itiran_y],620
mov ?r[6][ma5_rg_6][itiran_x],%tmp 	: add %tmp,90 : mov ?r[6][ma5_rg_6][itiran_y],620


mov ?r[6][ma5_but][itiran_x],475 	: mov ?r[6][ma5_but][itiran_y],320

mov ?r[6][ma5_GOA][itiran_x],150 	: mov ?r[6][ma5_GOA][itiran_y],770


mov ?r[6][ma5_ber][itiran_x],590	: mov ?r[6][ma5_ber][itiran_y],169
mov ?r[6][ma5_lam][itiran_x],707 	: mov ?r[6][ma5_lam][itiran_y],169

mov ?r[6][ma5_eri][itiran_x],590 	: mov ?r[6][ma5_eri][itiran_y],320

mov ?r[6][ma5_dla][itiran_x],707 	: mov ?r[6][ma5_dla][itiran_y],320
mov ?r[6][ma5_s00][itiran_x],437 	: add %tmp,90 : mov ?r[6][ma5_s00][itiran_y],770
mov ?r[6][ma5_s45][itiran_x],527 	: mov %tmp,287 : add %tmp,90 : mov ?r[6][ma5_s45][itiran_y],770
mov ?r[6][ma5_s410][itiran_x],617 	: add %tmp,90 : mov ?r[6][ma5_s410][itiran_y],770
mov ?r[6][ma5_s556][itiran_x],707 	: mov ?r[6][ma5_s556][itiran_y],770

;mov ?r[6][ma5_LIG][itiran_x],62 	: mov ?r[6][ma5_LIG][itiran_y],%tmp

mov ?r[6][ma5_zep][itiran_x],150 	: mov ?r[6][ma5_zep][itiran_y],169
mov ?r[6][ma5_fur][itiran_x],240 	: mov ?r[6][ma5_fur][itiran_y],169
mov ?r[6][ma5_wal][itiran_x],268 	: mov ?r[6][ma5_wal][itiran_y],470
mov ?r[6][ma5_ron][itiran_x],358 	: mov ?r[6][ma5_ron][itiran_y],470
mov ?r[6][ma5_gap][itiran_x],448 	: mov ?r[6][ma5_gap][itiran_y],470
mov ?r[6][ma5_ger][itiran_x],617 	: mov ?r[6][ma5_ger][itiran_y],470
mov ?r[6][ma5_cor][itiran_x],707 	: mov ?r[6][ma5_cor][itiran_y],470

return

;***************************************************************

;*************************************************
;Initialization for ep6_3 variable
;*************************************************
*bt_ep6_3_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5_2
	for %tmp12 = 0 to 6
		mov ?r[6][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[6][ma5_AMA][condition_end],1
mov $?r[6][ma5_AMA][1],":c/1,0,3;graphics\chars\chars_ama0.png"

mov ?r[6][ma5_FEA][condition_end],1
mov $?r[6][ma5_FEA][1],":c/1,0,3;graphics\chars\chiru\chars_fea0.png"
mov $?r[6][ma5_FEA][2],":c/1,0,3;graphics\chars\chiru\chars_fea1.png"

mov ?r[6][ma5_enj][condition_end],1
mov $?r[6][ma5_enj][1],":c/1,0,3;graphics\chars\chars_enj0.png"
mov $?r[6][ma5_enj][2],":c/1,0,3;graphics\chars\chars_enj0.png"

mov ?r[6][ma5_FEA][itiran_x],335 : mov ?r[6][ma5_FEA][itiran_y],388

mov ?r[6][ma5_enj][itiran_x],485 : mov ?r[6][ma5_enj][itiran_y],388
mov ?r[6][ma5_AMA][itiran_x],485 : mov ?r[6][ma5_AMA][itiran_y],538

return

;***************************************************************

;*************************************************
;Initialization for ep7 variable
;*************************************************
*bt_ep7_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep6
	for %tmp12 = 0 to 6
		mov ?r[7][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[7][kin][condition_end],2
mov $?r[7][kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"
mov $?r[7][kin][2],":c/1,0,3;graphics\chars\chiru\chars_kin1.png"

mov ?r[7][kla][condition_end],1
mov $?r[7][kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"

mov ?r[7][nat][condition_end],1
mov $?r[7][nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"


mov ?r[7][jes][condition_end],1
mov $?r[7][jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"

mov ?r[7][eva][condition_end],1
mov $?r[7][eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"

mov ?r[7][hid][condition_end],1
mov $?r[7][hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"

mov ?r[7][geo][condition_end],1
mov $?r[7][geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"

mov ?r[7][rud][condition_end],1
mov $?r[7][rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"

mov ?r[7][kir][condition_end],1
mov $?r[7][kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"

mov ?r[7][but][condition_end],1
mov $?r[7][but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][but][1],":c/1,0,3;graphics\chars\chars_but0.png"

mov ?r[7][ros][condition_end],1
mov $?r[7][ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"

mov ?r[7][mar][condition_end],1
mov $?r[7][mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"

mov ?r[7][nan][condition_end],1
mov $?r[7][nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"

mov ?r[7][gen][condition_end],1
mov $?r[7][gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"

mov ?r[7][kum][condition_end],1
mov $?r[7][kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"

mov ?r[7][goh][condition_end],1
mov $?r[7][goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"

mov ?r[7][sha][condition_end],1
mov $?r[7][sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"

mov ?r[7][kan][condition_end],1
mov $?r[7][kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"

mov ?r[7][RIO][condition_end],1
mov $?r[7][RIO][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[7][RIO][1],":c/1,0,3;graphics\chars\chiru\chars_rio0.png"

mov ?r[7][kin][itiran_x],200 : mov ?r[7][kin][itiran_y],190
mov ?r[7][kla][itiran_x],330 : mov ?r[7][kla][itiran_y],190
mov ?r[7][nat][itiran_x],460 : mov ?r[7][nat][itiran_y],190
mov ?r[7][rio][itiran_x],590 : mov ?r[7][rio][itiran_y],190
mov ?r[7][jes][itiran_x],720 : mov ?r[7][jes][itiran_y],190

mov ?r[7][eva][itiran_x],330 : mov ?r[7][eva][itiran_y],340
mov ?r[7][hid][itiran_x],460 : mov ?r[7][hid][itiran_y],340
mov ?r[7][geo][itiran_x],590 : mov ?r[7][geo][itiran_y],340

mov ?r[7][rud][itiran_x],330 : mov ?r[7][rud][itiran_y],490
mov ?r[7][kir][itiran_x],460 : mov ?r[7][kir][itiran_y],490
mov ?r[7][but][itiran_x],590 : mov ?r[7][but][itiran_y],490

mov ?r[7][nan][itiran_x],200 : mov ?r[7][nan][itiran_y],640
mov ?r[7][ros][itiran_x],330 : mov ?r[7][ros][itiran_y],640
mov ?r[7][mar][itiran_x],590 : mov ?r[7][mar][itiran_y],640

mov ?r[7][gen][itiran_x],200 : mov ?r[7][gen][itiran_y],790
mov ?r[7][sha][itiran_x],330 : mov ?r[7][sha][itiran_y],790
mov ?r[7][kan][itiran_x],460 : mov ?r[7][kan][itiran_y],790
mov ?r[7][goh][itiran_x],590 : mov ?r[7][goh][itiran_y],790
mov ?r[7][kum][itiran_x],720 : mov ?r[7][kum][itiran_y],790

return
;***************************************************************

;*************************************************
;Initialization for ep7_2 variable
;*************************************************
*bt_ep7_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5_2
	for %tmp12 = 0 to 6
		mov ?r[7][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[7][ma5_ber][condition_end],1
mov $?r[7][ma5_ber][1],":c/1,0,3;graphics\chars\chars_ber0_s.png"

mov ?r[7][ma5_bea][condition_end],2
mov $?r[7][ma5_bea][1],":c/1,0,3;graphics\chars\chars_bea0_s.png"
mov $?r[7][ma5_bea][2],":c/1,0,3;graphics\chars\chiru\chars_bea4_s.png"
;mov $?r[7][ma5_bea][3],":c/1,0,3;graphics\chars\chars_bea03.png"

mov ?r[7][ma5_wal][condition_end],1
mov $?r[7][ma5_wal][1],":c/1,0,3;graphics\chars\chars_wal0_s.png"

mov ?r[7][ma5_mar][condition_end],1
mov $?r[7][ma5_mar][1],":c/1,0,3;graphics\chars\chars_mar0_s.png"

mov ?r[7][ma5_ron][condition_end],1
mov $?r[7][ma5_ron][1],":c/1,0,3;graphics\chars\chars_ron0_s.png"

mov ?r[7][ma5_gap][condition_end],1
mov $?r[7][ma5_gap][1],":c/1,0,3;graphics\chars\chars_gap0_s.png"

mov ?r[7][ma5_s00][condition_end],1
mov $?r[7][ma5_s00][1],":c/1,0,3;graphics\chars\chars_sie0_s.png"

mov ?r[7][ma5_s410][condition_end],1
mov $?r[7][ma5_s410][1],":c/1,0,3;graphics\chars\chars_sie1_s.png"

mov ?r[7][ma5_s45][condition_end],1
mov $?r[7][ma5_s45][1],":c/1,0,3;graphics\chars\chars_sie2_s.png"

mov ?r[7][ma5_s556][condition_end],2
mov $?r[7][ma5_s556][1],":c/1,0,3;graphics\chars\chars_sie3_s.png"
mov $?r[7][ma5_s556][2],":c/1,0,3;graphics\chars\chars_sie3_d_s.png"

mov ?r[7][ma5_rg][condition_end],1
mov $?r[7][ma5_rg][1],":c/1,0,3;graphics\chars\chiru\chars_rg0_s.png"

mov ?r[7][ma5_rg_1][condition_end],1
mov $?r[7][ma5_rg_1][1],":c/1,0,3;graphics\chars\chiru\chars_rg1_s.png"

mov ?r[7][ma5_rg_2][condition_end],1
mov $?r[7][ma5_rg_2][1],":c/1,0,3;graphics\chars\chiru\chars_rg2_s.png"

mov ?r[7][ma5_rg_3][condition_end],1
mov $?r[7][ma5_rg_3][1],":c/1,0,3;graphics\chars\chiru\chars_rg3_s.png"

mov ?r[7][ma5_rg_4][condition_end],1
mov $?r[7][ma5_rg_4][1],":c/1,0,3;graphics\chars\chiru\chars_rg4_s.png"

mov ?r[7][ma5_rg_5][condition_end],1
mov $?r[7][ma5_rg_5][1],":c/1,0,3;graphics\chars\chiru\chars_rg5_s.png"

mov ?r[7][ma5_rg_6][condition_end],1
mov $?r[7][ma5_rg_6][1],":c/1,0,3;graphics\chars\chiru\chars_rg6_s.png"

mov ?r[7][ma5_ZEP][condition_end],1
mov $?r[7][ma5_ZEP][1],":c/1,0,3;graphics\chars\chiru\chars_zep0_s.png"

mov ?r[7][ma5_FUR][condition_end],1
mov $?r[7][ma5_FUR][1],":c/1,0,3;graphics\chars\chiru\chars_ful0_s.png"

mov ?r[7][ma5_GOA][condition_end],1
mov $?r[7][ma5_GOA][1],":c/1,0,3;graphics\chars\chars_goa0_s.png"

mov ?r[7][ma5_WIL][condition_end],1
mov $?r[7][ma5_WIL][1],":c/1,0,3;graphics\chars\chiru\chars_wil0_s.png"

mov ?r[7][ma5_CUR][condition_end],1
mov $?r[7][ma5_CUR][1],":c/1,0,3;graphics\chars\chiru\chars_cur0_s.png"

mov ?r[7][ma5_ber][itiran_x],159 	: mov ?r[7][ma5_ber][itiran_y],190
mov ?r[7][ma5_CUR][itiran_x],699 	: mov ?r[7][ma5_CUR][itiran_y],190

mov ?r[7][ma5_WIL][itiran_x],159 	: mov ?r[7][ma5_WIL][itiran_y],340
mov ?r[7][ma5_mar][itiran_x],295 	: mov ?r[7][ma5_mar][itiran_y],340
mov ?r[7][ma5_bea][itiran_x],429 	: mov ?r[7][ma5_bea][itiran_y],340
mov ?r[7][ma5_wal][itiran_x],339 	: mov ?r[7][ma5_wal][itiran_y],490
mov ?r[7][ma5_ron][itiran_x],429 	: mov ?r[7][ma5_ron][itiran_y],490
mov ?r[7][ma5_gap][itiran_x],519 	: mov ?r[7][ma5_gap][itiran_y],490

mov %tmp,159
mov ?r[7][ma5_rg][itiran_x],%tmp 	: add %tmp,90 : mov ?r[7][ma5_rg][itiran_y],640
mov ?r[7][ma5_rg_1][itiran_x],%tmp	: add %tmp,90 : mov ?r[7][ma5_rg_1][itiran_y],640
mov ?r[7][ma5_rg_2][itiran_x],%tmp	: add %tmp,90 : mov ?r[7][ma5_rg_2][itiran_y],640
mov ?r[7][ma5_rg_3][itiran_x],%tmp 	: add %tmp,90 : mov ?r[7][ma5_rg_3][itiran_y],640
mov ?r[7][ma5_rg_4][itiran_x],%tmp 	: add %tmp,90 : mov ?r[7][ma5_rg_4][itiran_y],640
mov ?r[7][ma5_rg_5][itiran_x],%tmp	: add %tmp,90 : mov ?r[7][ma5_rg_5][itiran_y],640
mov ?r[7][ma5_rg_6][itiran_x],%tmp	: add %tmp,90 : mov ?r[7][ma5_rg_6][itiran_y],640

mov ?r[7][ma5_zep][itiran_x],159 	: mov ?r[7][ma5_zep][itiran_y],790
mov ?r[7][ma5_fur][itiran_x],249 	: mov ?r[7][ma5_fur][itiran_y],790

;mov ?r[7][ma5_GOA][itiran_x],106 	: mov ?r[7][ma5_GOA][itiran_y],%tmp
;mov %tmp,287
;mov ?r[7][ma5_s45][itiran_x],%tmp 	: add %tmp,90 : mov ?r[5][ma5_s45][itiran_y],679
;mov ?r[7][ma5_s410][itiran_x],%tmp : add %tmp,90 : mov ?r[7][ma5_s410][itiran_y],679
;mov ?r[7][ma5_s00][itiran_x],%tmp 	: add %tmp,90 : mov ?r[7][ma5_s00][itiran_y],679
;mov ?r[7][ma5_s556][itiran_x],%tmp				  : mov ?r[7][ma5_s556][itiran_y],679

return
;***************************************************************

;*************************************************
;Initialization for ep8 variable
;*************************************************
*bt_ep8_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep6
	for %tmp12 = 0 to 6
		mov ?r[8][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

;	for %tmp12 = 0 to 6
;		mov ?r[8][RIO][%tmp12],%tmp10 : inc %tmp10
;	next

;	for %tmp12 = 0 to 6
;		mov ?r[8][ERI][%tmp12],%tmp10 : inc %tmp10
;	next

	for %tmp12 = 0 to 6
		mov ?r[8][EN2][%tmp12],%tmp10 : inc %tmp10
	next

	for %tmp12 = 0 to 6
		mov ?r[8][BEA][%tmp12],%tmp10 : inc %tmp10
	next

mov ?r[8][kin][condition_end],2
mov $?r[8][kin][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][kin][1],":c/1,0,3;graphics\chars\chars_kin0.png"
mov $?r[8][kin][2],":c/1,0,3;graphics\chars\chiru\chars_kin1.png"

mov ?r[8][kla][condition_end],1
mov $?r[8][kla][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][kla][1],":c/1,0,3;graphics\chars\chars_kla0.png"

mov ?r[8][nat][condition_end],1
mov $?r[8][nat][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][nat][1],":c/1,0,3;graphics\chars\chars_nat0.png"

mov ?r[8][jes][condition_end],1
mov $?r[8][jes][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][jes][1],":c/1,0,3;graphics\chars\chars_jes0.png"

mov ?r[8][eva][condition_end],1
mov $?r[8][eva][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][eva][1],":c/1,0,3;graphics\chars\chars_eva0.png"

mov ?r[8][hid][condition_end],1
mov $?r[8][hid][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][hid][1],":c/1,0,3;graphics\chars\chars_hid0.png"

mov ?r[8][geo][condition_end],1
mov $?r[8][geo][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][geo][1],":c/1,0,3;graphics\chars\chars_geo0.png"

mov ?r[8][rud][condition_end],1
mov $?r[8][rud][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][rud][1],":c/1,0,3;graphics\chars\chars_rud0.png"

mov ?r[8][kir][condition_end],1
mov $?r[8][kir][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][kir][1],":c/1,0,3;graphics\chars\chars_kir0.png"

mov ?r[8][but][condition_end],1
mov $?r[8][but][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][but][1],":c/1,0,3;graphics\chars\chars_but0.png"

mov ?r[8][ros][condition_end],1
mov $?r[8][ros][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][ros][1],":c/1,0,3;graphics\chars\chars_ros0.png"

mov ?r[8][mar][condition_end],1
mov $?r[8][mar][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][mar][1],":c/1,0,3;graphics\chars\chars_mar0.png"

mov ?r[8][nan][condition_end],1
mov $?r[8][nan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][nan][1],":c/1,0,3;graphics\chars\chars_nan0.png"

mov ?r[8][gen][condition_end],1
mov $?r[8][gen][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][gen][1],":c/1,0,3;graphics\chars\chars_gen0.png"

mov ?r[8][kum][condition_end],1
mov $?r[8][kum][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][kum][1],":c/1,0,3;graphics\chars\chars_kum0.png"

mov ?r[8][goh][condition_end],1
mov $?r[8][goh][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][goh][1],":c/1,0,3;graphics\chars\chars_goh0.png"

mov ?r[8][sha][condition_end],1
mov $?r[8][sha][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][sha][1],":c/1,0,3;graphics\chars\chars_sha0.png"

mov ?r[8][kan][condition_end],1
mov $?r[8][kan][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][kan][1],":c/1,0,3;graphics\chars\chars_kan0.png"

;mov ?r[8][RIO][condition_end],1
;mov $?r[8][RIO][0],":c/1,0,3;graphics\chars\chars_non.png"
;mov $?r[8][RIO][1],":c/1,0,3;graphics\chars\chars_RIO0.png"

mov ?r[8][EN2][condition_end],1
mov $?r[8][EN2][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][EN2][1],":c/1,0,3;graphics\chars\chiru\chars_enj2.png"

mov ?r[8][bea][condition_end],1
mov $?r[8][bea][0],":c/1,0,3;graphics\chars\chars_non.png"
mov $?r[8][bea][1],":c/1,0,3;graphics\chars\chiru\chars_bea2.png"

;mov ?r[8][si][condition_end],1
;mov $?r[8][si][0],":c/1,0,3;graphics\chars\chars_non.png"
;mov $?r[8][si][1],":c/1,0,3;bmp\r_click\cha_btn\ep8\si0.png"

;mov ?r[8][eri][condition_end],1
;mov $?r[8][eri][0],":c/1,0,3;graphics\chars\chars_non.png"
;mov $?r[8][eri][1],":c/1,0,3;graphics\chars\chars_eri0.png"

;mov ?r[8][ep8][itiran_x],17 : mov ?r[8][ep8][itiran_y],%tmp

mov ?r[8][kin][itiran_x],200 : mov ?r[8][kin][itiran_y],190
mov ?r[8][kla][itiran_x],330 : mov ?r[8][kla][itiran_y],190
mov ?r[8][nat][itiran_x],460 : mov ?r[8][nat][itiran_y],190
mov ?r[8][jes][itiran_x],590 : mov ?r[8][jes][itiran_y],190

;mov ?r[8][rio][itiran_x],17 : mov ?r[8][rio][itiran_y],%tmp

mov ?r[8][bea][itiran_x],200 : mov ?r[8][bea][itiran_y],340
mov ?r[8][eva][itiran_x],330 : mov ?r[8][eva][itiran_y],340
mov ?r[8][hid][itiran_x],460 : mov ?r[8][hid][itiran_y],340
mov ?r[8][geo][itiran_x],590 : mov ?r[8][geo][itiran_y],340


mov ?r[8][rud][itiran_x],330 : mov ?r[8][rud][itiran_y],490
mov ?r[8][kir][itiran_x],460 : mov ?r[8][kir][itiran_y],490
mov ?r[8][but][itiran_x],590 : mov ?r[8][but][itiran_y],490
mov ?r[8][EN2][itiran_x],720 : mov ?r[8][en2][itiran_y],490


;mov ?r[8][eri][itiran_x],17 : mov ?r[8][eri][itiran_y],%tmp

mov ?r[8][nan][itiran_x],200 : mov ?r[8][nan][itiran_y],640
mov ?r[8][ros][itiran_x],330 : mov ?r[8][ros][itiran_y],640
mov ?r[8][mar][itiran_x],590 : mov ?r[8][mar][itiran_y],640

;mov ?r[8][si][itiran_x],17  : mov ?r[8][si][itiran_y],%tmp

mov ?r[8][gen][itiran_x],200 : mov ?r[8][gen][itiran_y],790
mov ?r[8][sha][itiran_x],330 : mov ?r[8][sha][itiran_y],790
mov ?r[8][kan][itiran_x],460 : mov ?r[8][kan][itiran_y],790
mov ?r[8][goh][itiran_x],590 : mov ?r[8][goh][itiran_y],790
mov ?r[8][kum][itiran_x],720 : mov ?r[8][kum][itiran_y],790

;mov ?r[8][nan][itiran_x],1700 : mov ?r[8][nan][itiran_y],%tmp
;mov ?r[8][gen][itiran_x],1700 : mov ?r[8][gen][itiran_y],%tmp
;mov ?r[8][goh][itiran_x],1060 : mov ?r[8][goh][itiran_y],%tmp
;mov ?r[8][kum][itiran_x],1500 : mov ?r[8][kum][itiran_y],%tmp
;mov ?r[8][sha][itiran_x],1500 : mov ?r[8][sha][itiran_y],%tmp
;mov ?r[8][kan][itiran_x],1500 : mov ?r[8][kan][itiran_y],%tmp

;;mov ?r[8][si][itiran_x],1700 : mov ?r[8][si][itiran_y],%tmp

;mov ?r[8][en2][itiran_x],1700 : mov ?r[8][en2][itiran_y],%tmp

return

;***************************************************************

;*************************************************
;Initialization for ep8_2 variable
;*************************************************
*bt_ep8_2_def

mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5_2
	for %tmp12 = 0 to 6
		mov ?r[8][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next

mov ?r[8][ma5_lam][condition_end],1
mov $?r[8][ma5_lam][1],":c/1,0,3;graphics\chars\chars_lam0_s.png"

mov ?r[8][ma5_ber][condition_end],1
mov $?r[8][ma5_ber][1],":c/1,0,3;graphics\chars\chars_ber0_s.png"

;mov ?r[8][ma5_be2][condition_end],1
;mov $?r[8][ma5_be2][1],":c/1,0,3;graphics\chars\chars_be20_s.png"

mov ?r[8][ma5_bea][condition_end],1
mov $?r[8][ma5_bea][1],":c/1,0,3;graphics\chars\chars_bea0_s.png"
mov $?r[8][ma5_bea][2],":c/1,0,3;graphics\chars\chars_bea0_s.png"
;mov $?r[8][ma5_bea][3],":c/1,0,3;graphics\chars\chars_bea03_s.png"

mov ?r[8][ma5_wal][condition_end],1
mov $?r[8][ma5_wal][1],":c/1,0,3;graphics\chars\chars_wal0_s.png"

;mov ?r[8][ma5_mar][condition_end],1
;mov $?r[8][ma5_mar][1],":c/1,0,3;graphics\chars\chars_mar0_s.png"

mov ?r[8][ma5_ron][condition_end],1
mov $?r[8][ma5_ron][1],":c/1,0,3;graphics\chars\chars_ron0_s.png"

mov ?r[8][ma5_gap][condition_end],1
mov $?r[8][ma5_gap][1],":c/1,0,3;graphics\chars\chars_gap0_s.png"

mov ?r[8][ma5_but][condition_end],1
mov $?r[8][ma5_but][1],":c/1,0,3;graphics\chars\chars_but0_s.png"

mov ?r[8][ma5_s00][condition_end],1
mov $?r[8][ma5_s00][1],":c/1,0,3;graphics\chars\chars_sie0_s.png"

mov ?r[8][ma5_s410][condition_end],1
mov $?r[8][ma5_s410][1],":c/1,0,3;graphics\chars\chars_sie1_s.png"

mov ?r[8][ma5_s45][condition_end],1
mov $?r[8][ma5_s45][1],":c/1,0,3;graphics\chars\chars_sie2_s.png"

mov ?r[8][ma5_s556][condition_end],2
mov $?r[8][ma5_s556][1],":c/1,0,3;graphics\chars\chars_sie3_s.png"
mov $?r[8][ma5_s556][2],":c/1,0,3;graphics\chars\chars_sie3_d_s.png"

mov ?r[8][ma5_rg][condition_end],1
mov $?r[8][ma5_rg][1],":c/1,0,3;graphics\chars\chiru\chars_rg0_s.png"
;mov $?r[8][ma5_rg][2],":c/1,0,3;graphics\chars\chiru\chars_rg0_s.png"

mov ?r[8][ma5_rg_1][condition_end],1
mov $?r[8][ma5_rg_1][1],":c/1,0,3;graphics\chars\chiru\chars_rg1_s.png"

mov ?r[8][ma5_rg_2][condition_end],1
mov $?r[8][ma5_rg_2][1],":c/1,0,3;graphics\chars\chiru\chars_rg2_s.png"

mov ?r[8][ma5_rg_3][condition_end],1
mov $?r[8][ma5_rg_3][1],":c/1,0,3;graphics\chars\chiru\chars_rg3_s.png"

mov ?r[8][ma5_rg_4][condition_end],1
mov $?r[8][ma5_rg_4][1],":c/1,0,3;graphics\chars\chiru\chars_rg4_s.png"

mov ?r[8][ma5_rg_5][condition_end],1
mov $?r[8][ma5_rg_5][1],":c/1,0,3;graphics\chars\chiru\chars_rg5_s.png"

mov ?r[8][ma5_rg_6][condition_end],1
mov $?r[8][ma5_rg_6][1],":c/1,0,3;graphics\chars\chiru\chars_rg6_s.png"

mov ?r[8][ma5_ZEP][condition_end],1
mov $?r[8][ma5_ZEP][1],":c/1,0,3;graphics\chars\chiru\chars_zep0_s.png"

mov ?r[8][ma5_FUR][condition_end],1
mov $?r[8][ma5_FUR][1],":c/1,0,3;graphics\chars\chiru\chars_ful0_s.png"

;mov ?r[8][ma5_zf][condition_end],1
;mov $?r[8][ma5_zf][1],":c/1,0,3;graphics\chars\chiru\chars_zf0_s.png"

mov ?r[8][ma5_GOA][condition_end],1
mov $?r[8][ma5_GOA][1],":c/1,0,3;graphics\chars\chars_GOA0_s.png"

mov ?r[8][ma5_WIL][condition_end],1
mov $?r[8][ma5_WIL][1],":c/1,0,3;graphics\chars\chiru\chars_WIL0_s.png"

;mov ?r[8][ma5_CUR][condition_end],1
;mov $?r[8][ma5_CUR][1],":c/1,0,3;graphics\chars\chars_CUR0_s.png"

mov ?r[8][ma5_en2][condition_end],1
mov $?r[8][ma5_en2][1],":c/1,0,3;graphics\chars\chiru\chars_enj1_s.png"

mov ?r[8][ma5_eri][condition_end],1
mov $?r[8][ma5_eri][1],":c/1,0,3;graphics\chars\chiru\chars_eri0_s.png"
;mov $?r[8][ma5_eri][2],":c/1,0,3;graphics\chars\chars_eri_d_s.png"

mov ?r[8][ma5_dla][condition_end],1
mov $?r[8][ma5_dla][1],":c/1,0,3;graphics\chars\chiru\chars_dla0_s.png"

mov ?r[8][ma5_ger][condition_end],1
mov $?r[8][ma5_ger][1],":c/1,0,3;graphics\chars\chiru\chars_gur0_s.png"

mov ?r[8][ma5_cor][condition_end],1
mov $?r[8][ma5_cor][1],":c/1,0,3;graphics\chars\chiru\chars_cor0_s.png"

mov ?r[8][ma5_wr][condition_end],1
mov $?r[8][ma5_wr][1],":c/1,0,3;graphics\chars\chiru\chars_wr_0_s.png"

mov ?r[8][ma5_bb][condition_end],1
mov $?r[8][ma5_bb][1],":c/1,0,3;graphics\chars\chiru\chars_bb_0_s.png"

mov ?r[8][ma5_ev2][condition_end],1
mov $?r[8][ma5_ev2][1],":c/1,0,3;graphics\chars\chars_evb0_s.png"

mov ?r[8][ma5_fea][condition_end],1
mov $?r[8][ma5_fea][1],":c/1,0,3;graphics\chars\chiru\chars_fea1_s.png"

mov ?r[8][ma5_lam][itiran_x],371 	: mov ?r[8][ma5_lam][itiran_y],169
mov ?r[8][ma5_ber][itiran_x],487 	: mov ?r[8][ma5_ber][itiran_y],169

mov ?r[8][ma5_wr][itiran_x],127 	: mov ?r[8][ma5_wr][itiran_y],320
mov ?r[8][ma5_fea][itiran_x],249 	: mov ?r[8][ma5_fea][itiran_y],320
mov ?r[8][ma5_bb][itiran_x],371 	: mov ?r[8][ma5_bb][itiran_y],320
mov ?r[8][ma5_en2][itiran_x],487 	: mov ?r[8][ma5_en2][itiran_y],320
mov ?r[8][ma5_eri][itiran_x],609 	: mov ?r[8][ma5_eri][itiran_y],320
mov ?r[8][ma5_ev2][itiran_x],731 	: mov ?r[8][ma5_ev2][itiran_y],320

mov ?r[8][ma5_wal][itiran_x],191 	: mov ?r[8][ma5_wal][itiran_y],470
mov ?r[8][ma5_ron][itiran_x],281 	: mov ?r[8][ma5_ron][itiran_y],470
mov ?r[8][ma5_gap][itiran_x],371 	: mov ?r[8][ma5_gap][itiran_y],470
mov ?r[8][ma5_dla][itiran_x],487 	: mov ?r[8][ma5_dla][itiran_y],470
mov ?r[8][ma5_ger][itiran_x],577 	: mov ?r[8][ma5_ger][itiran_y],470
mov ?r[8][ma5_cor][itiran_x],667 	: mov ?r[8][ma5_cor][itiran_y],470

mov %tmp,159
mov ?r[8][ma5_rg][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg][itiran_y],620
mov ?r[8][ma5_rg_1][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg_1][itiran_y],620
mov ?r[8][ma5_rg_2][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg_2][itiran_y],620
mov ?r[8][ma5_rg_3][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg_3][itiran_y],620
mov ?r[8][ma5_rg_4][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg_4][itiran_y],620
mov ?r[8][ma5_rg_5][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg_5][itiran_y],620
mov ?r[8][ma5_rg_6][itiran_x],%tmp 	: add %tmp,90 : mov ?r[8][ma5_rg_6][itiran_y],620

mov ?r[8][ma5_s00][itiran_x],127	: mov ?r[8][ma5_s00][itiran_y],770
mov ?r[8][ma5_s410][itiran_x],217 	: mov ?r[8][ma5_s410][itiran_y],770
mov ?r[8][ma5_s45][itiran_x],307 	: mov ?r[8][ma5_s45][itiran_y],770
mov ?r[8][ma5_s556][itiran_x],397 	: mov ?r[8][ma5_s556][itiran_y],770
mov ?r[8][ma5_zep][itiran_x],519 	: mov ?r[8][ma5_zep][itiran_y],770
mov ?r[8][ma5_fur][itiran_x],609 	: mov ?r[8][ma5_fur][itiran_y],770
mov ?r[8][ma5_GOA][itiran_x],731 	: mov ?r[8][ma5_GOA][itiran_y],770

;mov ?r[8][ma5_w][itiran_x],17 		: mov ?r[8][ma5_w][itiran_y],%tmp
;mov ?r[8][ma5_s][itiran_x],17 		: mov ?r[8][ma5_s][itiran_y],%tmp
;mov ?r[8][ma5_k][itiran_x],62 		: mov ?r[8][ma5_k][itiran_y],%tmp
;mov ?r[8][ma5_zf][itiran_x],106 	: mov ?r[8][ma5_zf][itiran_y],%tmp

mov ?r[8][ma5_but][itiran_x],1500 	: mov ?r[8][ma5_but][itiran_y],500
mov ?r[8][ma5_bea][itiran_x],1500 	: mov ?r[8][ma5_bea][itiran_y],600
mov ?r[8][ma5_wil][itiran_x],1500 	: mov ?r[8][ma5_wil][itiran_y],700

return

;***************************************************************

;*************************************************
;Initialization for ep8_3 variable
;*************************************************
*bt_ep8_3_def

;配列に数字を入力、数字の文字変数にパスを入力
mov %tmp10,2400

for %tmp11 = 1 to char_max_ep5_2
	for %tmp12 = 0 to 6
		mov ?r[8][%tmp11][%tmp12],%tmp10 : inc %tmp10
	next
next


;配列にパスを入力（キャラごとの状態変化数分入力）

mov ?r[8][ma5_AMA][condition_end],1
mov $?r[8][ma5_AMA][1],":c/1,0,3;graphics\chars\chars_AMA_l.png"

mov ?r[8][ma5_FEA][condition_end],1
mov $?r[8][ma5_FEA][1],":c/1,0,3;graphics\chars\chars_fea_l.png"
mov $?r[8][ma5_FEA][2],":c/1,0,3;graphics\chars\chars_fea_l2.png"

mov ?r[8][ma5_enj][condition_end],1
mov $?r[8][ma5_enj][1],":c/1,0,3;graphics\chars\chars_enj_l.png"
mov $?r[8][ma5_enj][2],":c/1,0,3;graphics\chars\chars_enj_l.png"

;一覧表示の座標を入力



mov ?r[8][ma5_FEA][itiran_x],62 : mov ?r[8][ma5_FEA][itiran_y],%tmp

mov ?r[8][ma5_enj][itiran_x],106 : mov ?r[8][ma5_enj][itiran_y],%tmp
mov ?r[8][ma5_AMA][itiran_x],106 : mov ?r[8][ma5_AMA][itiran_y],%tmp


return

;---------------------------------------

;*********************************************************
; Right click custom system
; Function by right-clicking the first occurrence of
; June 20, 2007 version created BT
;*********************************************************


;----------------------------------------
;Preliminary menu system before entering the right-click

*rmenu_custom     ;Right-click the screen display
	mov %r_for_title,0

	blur 2000

	btndef ""

	;lsp r_black_lsp,":c;graphics\colour\black.png",0,0,black_toukaritu ;0
	lsp 451,":c;graphics\colour\black.png",0,0,black_toukaritu ;0
	lsp r_load_lsp,r_click_buttons_load,50,50	;1
	lsp r_save_lsp,r_click_buttons_save,50,130	;2
	lsp r_chars_lsp,r_click_buttons_chars,50,210	;3
	if %scenario_Number = 8 && $name_chapter_save = "8_op" lsp r_chars_lsp,r_click_buttons_chars,50,210,100
	lsp r_tips_lsp2,r_click_buttons_tips,50,290	;4
	if %scenario_Number = 4 && %grim_scene = 500 lsp r_tips_lsp2,r_click_buttons_tips,50,290,100
	;if %scenario_Number = 8 lsp r_tips_lsp2,r_click_buttons_tips,50,290,100
	lsp r_volume_lsp,r_click_buttons_config,50,370	;5
	lsp r_logs_lsp2,r_click_buttons_logs,50,450	;6
	lsp r_clear_lsp,r_click_buttons_clear,50,530	;7
	lsp r_system_lsp,r_click_buttons_system,50,610	;8
	lsp name_chapter_r_click,$name_chapter_r_click,0,0

	gosub *rmenu_draw_time 
	print 1
	
	gosub *menu_rain_pause
	
	; Flag abuse to prevent time displaying in "Clear" mode
	if %skip_flg == on skip_off : mov %skip_flg_bak,on

	*rmenu_btlp
		btndef ""
		;save/load
		spbtn r_load_lsp,r_load_lsp
		spbtn r_save_lsp,r_save_lsp
		;other
		spbtn r_chars_lsp,r_chars_lsp
		spbtn r_tips_lsp2,r_tips_lsp2
		
		;bgm volume	
		spbtn r_volume_lsp,r_volume_lsp
		
		spbtn r_logs_lsp2,r_logs_lsp2
		
		spbtn r_clear_lsp,r_clear_lsp
		spbtn r_system_lsp,r_system_lsp

	*rmenu_btlp2
		if %skip_flg == off gosub *rmenu_draw_time 
		print 1
		getzxc
		btnasync 1
		btnwait2 %BtnRes

		if %BtnRes = r_clear_lsp seplay 9,1001,100 : gosub *menu_rain_unpause : gosub *r_exit3 : goto *rmenu_btlp
		if %BtnRes = r_system_lsp seplay 9,1001,100 : gosub *rmenu_title_back : goto *rmenu_btlp ; We must set up the menu again since rmenu_title_back destroyed it.
		if %BtnRes = r_volume_lsp seplay 9,1001,100 : gosub *r_image_cleanup : gosub *settings : gosub *menu_rain_unpause : goto *r_exit2
		if %BtnRes = r_save_lsp seplay 9,1001,100 : gosub *r_image_cleanup : gosub *savemode : gosub *menu_rain_unpause : goto *r_exit2
		if %BtnRes = r_load_lsp seplay 9,1001,100 : gosub *r_image_cleanup : gosub *loadmode : gosub *menu_rain_unpause : goto *r_exit2
		if %BtnRes = r_chars_lsp && %scenario_Number = 8 && $name_chapter_save = "8_op" seplay 9,32,100 : goto *rmenu_btlp
		if %BtnRes = r_chars_lsp seplay 9,1001,100 : gosub *r_image_cleanup : mov %r_display,0 : gosub *rmenu_main : goto *r_exit2
		if %BtnRes = r_tips_lsp2 && %scenario_Number = 4 && %grim_scene = 500 seplay 9,32,100 : goto *rmenu_btlp
		if %BtnRes = r_tips_lsp2 && %scenario_Number = 8 seplay 9,1001,100 : gosub *r_image_cleanup : mov %r_display,2 : gosub *rmenu_main : goto *r_exit2
		if %BtnRes = r_tips_lsp2 seplay 9,1001,100 : gosub *r_image_cleanup : mov %r_display,1 : gosub *rmenu_main : goto *r_exit2
		if %BtnRes = r_logs_lsp2 seplay 9,1001,100 : gosub *r_image_cleanup : mov %r_display,3 : gosub *rmenu_lookback : mov %r_display,0 : goto *rmenu_btlp_exit
		; Right click
		if %BtnRes = -1 gosub *menu_rain_unpause : goto *rmenu_btlp_exit
		; Esc key (if useescspc) -- which doesn't seem to be set?
		if %BtnRes = -10 gosub *menu_rain_unpause : goto *rmenu_btlp_exit
		; Z key (if getzxc)
		if %BtnRes = -51 gosub *menu_rain_unpause : goto *rmenu_btlp_exit
		goto *rmenu_btlp2

	*rmenu_btlp_exit
		gosub *r_exit
		return

	*rmenu_draw_time
		border_pad_push 3
		
		mov $ts_session,":s;#FFFFFF`{p:7:" + sess_total_clicks + ": "
		itoa $savecountClick,%savecountClick
		add $ts_session,$savecountClick

		gosub *trophy_session_reset
		add $ts_session,"{n}" + sess_total_time + ": "
		itoa $savecountTime,%savecountTime / 3600
		add $ts_session,$savecountTime + ":"
		itoa $savecountTime,%savecountTime mod 3600 / 60
		if %savecountTime mod 3600 < 600 add $ts_session,"0"
		add $ts_session,$savecountTime + ":"
		itoa $savecountTime,%savecountTime mod 60
		if %savecountTime mod 60 < 10 add $ts_session,"0"
		add $ts_session,$savecountTime

		add $ts_session,"{n}" + sess_real_world + ": "
		time %Hour,%Minute,%SaveTime
		date %Year,%Month,%Day
		if %Day < 10 add $ts_session,"0"
		itoa $savecountTime,%Day
		add $ts_session,$savecountTime + "/"
		if %Month < 10 add $ts_session,"0"
		itoa $savecountTime,%Month
		add $ts_session,$savecountTime + "/20"
		if %Year < 10 add $ts_session,"0"
		itoa $savecountTime,%Year
		add $ts_session,$savecountTime + " "
		if %Hour < 10 add $ts_session,"0"
		itoa $savecountTime,%Hour
		add $ts_session,$savecountTime + ":"
		if %Minute < 10 add $ts_session,"0"
		itoa $savecountTime,%Minute
		add $ts_session,$savecountTime + ":"
		if %SaveTime < 10 add $ts_session,"0"
		itoa $savecountTime,%SaveTime
		add $ts_session,$savecountTime
		
		add $ts_session,"{n}" + sess_current_track + ": "
		if %bgm_current_id != 0 add $ts_session,$BGM_Title + "}`"
		if %bgm_current_id == 0 add $ts_session,"}`"

		border_pad_pop
		
		lsp r_info_lsp,$ts_session,35,840
		return

		;%r_display values:
		;0 - chars
		;1 - tips
		;2 - grim
		;3 - log

*rmenu_lookback
lsp 2,":c;graphics\colour\black.png",0,0
print 10,500
_csp 2
goto *text_cw_lookback

;----------------------------------------
;Click right system, the main menu

*rmenu_main
	btndef ""

	goto *rmenu_main_new

;********************************************************************************
; Image cleanup routine
*r_image_cleanup
	_csp 97,r_used_lsp
	_csp r_bg_lsp
	_csp r_black_lsp
	_csp name_chapter_r_click
	_csp 451
return
;********************************************************************************


;********************************************************************************
; Right-click exit processing system
*r_exit
	btndef ""
	gosub *r_image_cleanup
	if %monoflg = 1 mono 1
	if %monoflg = 2 mono 2
	if %monoflg = 3 mono 3
	blur 0
	seplay 9,1005,100
	print 1
	texton
	if %skip_flg_bak == on skip_on
return ;Right-click exit the system

;-------------------------------------
; Right-click exit processing system (no sound)
*r_exit2
	btndef ""
	gosub *r_image_cleanup
	if %monoflg = 1 mono 1
	if %monoflg = 2 mono 2
	if %monoflg = 3 mono 3
	blur 0
	print 1
	texton
	if %skip_flg_bak == on skip_on
return ;Right-click exit the system

;-------------------------------------
; Right-click exit processing system (for bg-view)
*r_exit3
	btndef ""
	gosub *r_image_cleanup
	if %monoflg = 1 mono 1
	if %monoflg = 2 mono 2
	if %monoflg = 3 mono 3
	blur 0
	print 1
	if %skip_flg_bak == on skip_on
return ;Right-click exit the system

;********************************************************************************


;********************************************************************************
;Viewing Tips, Tips fly to display processing of each


;********************************************************************************

;********************************************************************************
;View of Grimoire, fly to display processing of each Grimoire


;********************************************************************************



;********************************************************************************
;Standing picture display of the character, the text, every character of each processing
*r_cha_display
	
	;if %r_display_cha = 0 return ;ep1,2,2_2,3,4
	if %r_side = 0 if %r_display_cha = 0 return
	if %scenario_Number = 4 && %r_display_side = 0 if %r_display_cha = 0 return
	if %scenario_Number = 3 && %r_side = 1 if %r_display_cha_ma = 0 return ;ep3_2,	
	if %scenario_Number = 4 && %r_display_side = 1 if %r_display_cha_ma = 0 return  ;ep4_2
	if %scenario_Number = 4 && %r_display_side = 2 if %r_display_cha_enj = 0 return ;ep4_3
	
	mov %r_display,0
	;_csp r_tips_txt_lsp
	;_csp r_grim_txt_lsp
	;vsp r_hana_lsp,1
	;_csp r_change_lsp
	
	if %scenario_Number = 1 goto *r_cha_display_ep1
	if %scenario_Number = 2 && %r_side = 0 goto *r_cha_display_ep2
	if %scenario_Number = 2 && %r_side = 1 goto *r_cha_display_ep2_2
	if %scenario_Number = 3 && %r_side = 0 goto *r_cha_display_ep3
	if %scenario_Number = 3 && %r_side = 1 goto *r_cha_display_ep3_2
	if %scenario_Number = 4 && %r_display_side = 0 goto *r_cha_display_ep4
	if %scenario_Number = 4 && %r_display_side = 1 goto *r_cha_display_ep4_2
	if %scenario_Number = 4 && %r_display_side = 2 goto *r_cha_display_ep4_3	
	if %scenario_Number = 5 && %r_side = 0 goto *r_cha_display_ep5
	if %scenario_Number = 5 && %r_side = 1 goto *r_cha_display_ep5_2
	if %scenario_Number = 6 && %r_side = 0 goto *r_cha_display_ep6
	if %scenario_Number = 6 && %r_side = 1 goto *r_cha_display_ep6_2
	if %scenario_Number = 6 && %r_side = 2 goto *r_cha_display_ep6_3
	if %scenario_Number = 7 && %r_side = 0 goto *r_cha_display_ep7
	if %scenario_Number = 7 && %r_side = 1 goto *r_cha_display_ep7_2
	if %scenario_Number = 8 && %r_side = 0 goto *r_cha_display_ep8
	if %scenario_Number = 8 && %r_side = 1 goto *r_cha_display_ep8_2
	if %scenario_Number = 8 && %r_side = 2 goto *r_cha_display_ep8_3

;If the character icon is pressed, you jump to each character
*r_cha_display_ep1
	if %r_display_cha = kin : gosub *r_cha_kin
	if %r_display_cha = kla : gosub *r_cha_kla
	if %r_display_cha = nat : gosub *r_cha_nat
	if %r_display_cha = jes : gosub *r_cha_jes
	if %r_display_cha = hid : gosub *r_cha_hid
	if %r_display_cha = eva : gosub *r_cha_eva
	if %r_display_cha = geo : gosub *r_cha_geo
	if %r_display_cha = rud : gosub *r_cha_rud
	if %r_display_cha = kir : gosub *r_cha_kir
	if %r_display_cha = but : gosub *r_cha_but
	if %r_display_cha = ros : gosub *r_cha_ros
	if %r_display_cha = mar : gosub *r_cha_mar
	if %r_display_cha = nan : gosub *r_cha_nan
 	if %r_display_cha = gen : gosub *r_cha_gen
	if %r_display_cha = kum : gosub *r_cha_kum
	if %r_display_cha = goh : gosub *r_cha_goh
	if %r_display_cha = sha : gosub *r_cha_sha
	if %r_display_cha = kan : gosub *r_cha_kan
	if %r_display_cha = bea : gosub *r_cha_bea
	if %r_display_cha = ber : gosub *r_cha_ber
	
goto *r_cha_display_end
	
*r_cha_display_ep2
	if %r_display_cha = kin : gosub *r_cha_kin_ep2
	if %r_display_cha = kla : gosub *r_cha_kla_ep2
	if %r_display_cha = nat : gosub *r_cha_nat_ep2
	if %r_display_cha = jes : gosub *r_cha_jes_ep2
	if %r_display_cha = hid : gosub *r_cha_hid_ep2
	if %r_display_cha = eva : gosub *r_cha_eva_ep2
	if %r_display_cha = geo : gosub *r_cha_geo_ep2
	if %r_display_cha = rud : gosub *r_cha_rud_ep2
	if %r_display_cha = kir : gosub *r_cha_kir_ep2
	if %r_display_cha = but : gosub *r_cha_but_ep2
	if %r_display_cha = ros : gosub *r_cha_ros_ep2
	if %r_display_cha = mar : gosub *r_cha_mar_ep2
	if %r_display_cha = nan : gosub *r_cha_nan_ep2
	if %r_display_cha = gen : gosub *r_cha_gen_ep2
	if %r_display_cha = kum : gosub *r_cha_kum_ep2
	if %r_display_cha = goh : gosub *r_cha_goh_ep2
	if %r_display_cha = sha : gosub *r_cha_sha_ep2
	if %r_display_cha = kan : gosub *r_cha_kan_ep2
	if %r_display_cha = bea : gosub *r_cha_bea_ep2
	if %r_display_cha = ber : error "Insane code"
	
goto *r_cha_display_end

*r_cha_display_ep2_2
	if %r_display_cha = ma_kin : gosub *r_cha_kin_ep2_2
	if %r_display_cha = ma_but : gosub *r_cha_but_ep2_2
	if %r_display_cha = ma_mar : gosub *r_cha_mar_ep2_2
 	if %r_display_cha = ma_gen : gosub *r_cha_gen_ep2_2
	if %r_display_cha = ma_sha : gosub *r_cha_sha_ep2_2 
	if %r_display_cha = ma_kan : gosub *r_cha_kan_ep2_2
	if %r_display_cha = ma_bea : gosub *r_cha_bea_ep2_2
	if %r_display_cha = ma_ber : gosub *r_cha_ber_ep2_2
	if %r_display_cha = ma_lam : gosub *r_cha_lam_ep2_2
	if %r_display_cha = ma_rg : gosub *r_cha_rg_ep2_2
	if %r_display_cha = ma_rg_1 : gosub *r_cha_rg_1_ep2_2
	if %r_display_cha = ma_rg_2 : gosub *r_cha_rg_2_ep2_2
	if %r_display_cha = ma_rg_3 : gosub *r_cha_rg_3_ep2_2
	if %r_display_cha = ma_rg_4 : gosub *r_cha_rg_4_ep2_2
	if %r_display_cha = ma_rg_5 : gosub *r_cha_rg_5_ep2_2
	if %r_display_cha = ma_rg_6 : gosub *r_cha_rg_6_ep2_2
	
goto *r_cha_display_end
	
*r_cha_display_ep3
	if %r_display_cha = kin : gosub *r_cha_kin_ep3
	if %r_display_cha = kla : gosub *r_cha_kla_ep3
	if %r_display_cha = nat : gosub *r_cha_nat_ep3
	if %r_display_cha = jes : gosub *r_cha_jes_ep3
	if %r_display_cha = hid : gosub *r_cha_hid_ep3
	if %r_display_cha = eva : gosub *r_cha_eva_ep3
	if %r_display_cha = geo : gosub *r_cha_geo_ep3
	if %r_display_cha = rud : gosub *r_cha_rud_ep3
	if %r_display_cha = kir : gosub *r_cha_kir_ep3
	if %r_display_cha = but : gosub *r_cha_but_ep3
	if %r_display_cha = ros : gosub *r_cha_ros_ep3
	if %r_display_cha = mar : gosub *r_cha_mar_ep3
	if %r_display_cha = nan : gosub *r_cha_nan_ep3
 	if %r_display_cha = gen : gosub *r_cha_gen_ep3
	if %r_display_cha = kum : gosub *r_cha_kum_ep3
	if %r_display_cha = goh : gosub *r_cha_goh_ep3
	if %r_display_cha = sha : gosub *r_cha_sha_ep3
	if %r_display_cha = kan : gosub *r_cha_kan_ep3
	if %r_display_cha = bea : gosub *r_cha_bea_ep3
	if %r_display_cha = ber : error "Insane ber3"
	if %r_display_cha = enj : gosub *r_cha_enj_ep3
	
goto *r_cha_display_end
	
*r_cha_display_ep3_2
	if %r_display_cha_ma = ma3_bea : gosub *r_cha_bea_ep3_2
	if %r_display_cha_ma = ma3_ber : gosub *r_cha_ber_ep3_2
	if %r_display_cha_ma = ma3_lam : gosub *r_cha_lam_ep3_2
 	if %r_display_cha_ma = ma3_goa : gosub *r_cha_goa_ep3_2
	if %r_display_cha_ma = ma3_wal : gosub *r_cha_wal_ep3_2
	if %r_display_cha_ma = ma3_ron : gosub *r_cha_ron_ep3_2
	if %r_display_cha_ma = ma3_ev2 : gosub *r_cha_ev2_ep3_2
	if %r_display_cha_ma = ma3_enj : gosub *r_cha_enj_ep3_2
	if %r_display_cha_ma = ma3_s : gosub *r_cha_s_ep3_2
	if %r_display_cha_ma = ma3_rg : gosub *r_cha_rg_ep3_2
	if %r_display_cha_ma = ma3_rg_1 : gosub *r_cha_rg_1_ep3_2
	if %r_display_cha_ma = ma3_rg_2 : gosub *r_cha_rg_2_ep3_2
	if %r_display_cha_ma = ma3_rg_3 : gosub *r_cha_rg_3_ep3_2
	if %r_display_cha_ma = ma3_rg_4 : gosub *r_cha_rg_4_ep3_2
	if %r_display_cha_ma = ma3_rg_5 : gosub *r_cha_rg_5_ep3_2
	if %r_display_cha_ma = ma3_rg_6 : gosub *r_cha_rg_6_ep3_2
	if %r_display_cha_ma = ma3_s_2 : gosub *r_cha_s_2_ep3_2
	if %r_display_cha_ma = ma3_s_1 : gosub *r_cha_s_1_ep3_2
	
goto *r_cha_display_end
	
*r_cha_display_ep4
	if %r_display_cha = kin : gosub *r_cha_kin_ep4
	if %r_display_cha = kla : gosub *r_cha_kla_ep4
	if %r_display_cha = nat : gosub *r_cha_nat_ep4
	if %r_display_cha = jes : gosub *r_cha_jes_ep4
	if %r_display_cha = hid : gosub *r_cha_hid_ep4
	if %r_display_cha = eva : gosub *r_cha_eva_ep4
	if %r_display_cha = geo : gosub *r_cha_geo_ep4
	if %r_display_cha = rud : gosub *r_cha_rud_ep4
	if %r_display_cha = kir : gosub *r_cha_kir_ep4
	if %r_display_cha = but : gosub *r_cha_but_ep4
	if %r_display_cha = ros : gosub *r_cha_ros_ep4
	if %r_display_cha = mar : gosub *r_cha_mar_ep4
	if %r_display_cha = nan : gosub *r_cha_nan_ep4
 	if %r_display_cha = gen : gosub *r_cha_gen_ep4
	if %r_display_cha = kum : gosub *r_cha_kum_ep4
	if %r_display_cha = goh : gosub *r_cha_goh_ep4
	if %r_display_cha = sha : gosub *r_cha_sha_ep4
	if %r_display_cha = kan : gosub *r_cha_kan_ep4
	if %r_display_cha = bea : gosub *r_cha_bea_ep4
	if %r_display_cha = ber : gosub *r_cha_ber_ep4
	if %r_display_cha = enj : gosub *r_cha_enj_ep4
	
goto *r_cha_display_end
	
*r_cha_display_ep4_2
	if %r_display_cha_ma = ma4_lam : gosub *r_cha_lam_ep4_2
	if %r_display_cha_ma = ma4_ber : gosub *r_cha_ber_ep4_2
	if %r_display_cha_ma = ma4_bea : gosub *r_cha_bea_ep4_2
	if %r_display_cha_ma = ma4_mar : gosub *r_cha_mar_ep4_2
	if %r_display_cha_ma = ma4_enj : gosub *r_cha_enj_ep4_2
	if %r_display_cha_ma = ma4_kin : gosub *r_cha_kin_ep4_2
	if %r_display_cha_ma = ma4_sak : gosub *r_cha_sak_ep4_2
	if %r_display_cha_ma = ma4_wal : gosub *r_cha_wal_ep4_2
	if %r_display_cha_ma = ma4_ron : gosub *r_cha_ron_ep4_2
	if %r_display_cha_ma = ma4_gap : gosub *r_cha_gap_ep4_2
	if %r_display_cha_ma = ma4_s45 : gosub *r_cha_s45_ep4_2
	if %r_display_cha_ma = ma4_s410 : gosub *r_cha_s410_ep4_2
	if %r_display_cha_ma = ma4_s00 : gosub *r_cha_s00_ep4_2
	if %r_display_cha_ma = ma4_s556 : gosub *r_cha_s556_ep4_2
	if %r_display_cha_ma = ma4_rg : gosub *r_cha_rg_ep4_2
	if %r_display_cha_ma = ma4_rg_1 : gosub *r_cha_rg_1_ep4_2
	if %r_display_cha_ma = ma4_rg_2 : gosub *r_cha_rg_2_ep4_2
	if %r_display_cha_ma = ma4_rg_3 : gosub *r_cha_rg_3_ep4_2
	if %r_display_cha_ma = ma4_rg_4 : gosub *r_cha_rg_4_ep4_2
	if %r_display_cha_ma = ma4_rg_5 : gosub *r_cha_rg_5_ep4_2
	if %r_display_cha_ma = ma4_rg_6 : gosub *r_cha_rg_6_ep4_2
	if %r_display_cha_ma = ma4_goa : gosub *r_cha_goa_ep4_2

goto *r_cha_display_end
	
*r_cha_display_ep4_3
	if %r_display_cha_enj = enj_eva : gosub *r_cha_eva_ep4_3
	if %r_display_cha_enj = enj_oko : gosub *r_cha_oko_ep4_3 
	if %r_display_cha_enj = enj_kas : gosub *r_cha_kas_ep4_3
	if %r_display_cha_enj = enj_enj : gosub *r_cha_enj_ep4_3
	if %r_display_cha_enj = enj_ama : gosub *r_cha_ama_ep4_3
	if %r_display_cha_enj = enj_sak : gosub *r_cha_sak_ep4_3
	if %r_display_cha_enj = enj_mar : gosub *r_cha_mar_ep4_3
	if %r_display_cha_enj = enj_rg : gosub *r_cha_rg_ep4_3
	if %r_display_cha_enj = enj_pro : gosub *r_cha_pro_ep4_3
	if %r_display_cha_enj = enj_mas : gosub *r_cha_mas_ep4_3
	if %r_display_cha_enj = enj_sab : gosub *r_cha_sab_ep4_3
	if %r_display_cha_enj = enj_kwa : gosub *r_cha_kwa_ep4_3
	if %r_display_cha_enj = enj_ber : gosub *r_cha_ber_ep4_3
	if %r_display_cha_enj = enj_rg : gosub *r_cha_rg_ep4_3
 	if %r_display_cha_enj = enj_rg_1 : gosub *r_cha_rg_1_ep4_3 
	if %r_display_cha_enj = enj_rg_2 : gosub *r_cha_rg_2_ep4_3 
	if %r_display_cha_enj = enj_rg_3 : gosub *r_cha_rg_3_ep4_3
	if %r_display_cha_enj = enj_rg_4 : gosub *r_cha_rg_4_ep4_3 
	if %r_display_cha_enj = enj_rg_5 : gosub *r_cha_rg_5_ep4_3
	if %r_display_cha_enj = enj_rg_6 : gosub *r_cha_rg_6_ep4_3
	
goto *r_cha_display_end

*r_cha_display_ep5
	if %r_display_cha = kin : gosub *r_cha_kin_ep5
	if %r_display_cha = kla : gosub *r_cha_kla_ep5
	if %r_display_cha = nat : gosub *r_cha_nat_ep5
	if %r_display_cha = jes : gosub *r_cha_jes_ep5
	if %r_display_cha = hid : gosub *r_cha_hid_ep5
	if %r_display_cha = eva : gosub *r_cha_eva_ep5
	if %r_display_cha = geo : gosub *r_cha_geo_ep5
	if %r_display_cha = rud : gosub *r_cha_rud_ep5
	if %r_display_cha = kir : gosub *r_cha_kir_ep5
	if %r_display_cha = but : gosub *r_cha_but_ep5
	if %r_display_cha = ros : gosub *r_cha_ros_ep5
	if %r_display_cha = mar : gosub *r_cha_mar_ep5
	if %r_display_cha = nan : gosub *r_cha_nan_ep5
 	if %r_display_cha = gen : gosub *r_cha_gen_ep5
	if %r_display_cha = kum : gosub *r_cha_kum_ep5
	if %r_display_cha = goh : gosub *r_cha_goh_ep5
	if %r_display_cha = sha : gosub *r_cha_sha_ep5
	if %r_display_cha = kan : gosub *r_cha_kan_ep5
	if %r_display_cha = eri : gosub *r_cha_eri_ep5

goto *r_cha_display_end

*r_cha_display_ep5_2
	if %r_display_cha_ma = ma5_lam : gosub *r_cha_lam_ep5_2
	if %r_display_cha_ma = ma5_ber : gosub *r_cha_ber_ep5_2
	if %r_display_cha_ma = ma5_bea : gosub *r_cha_bea_ep5_2
	if %r_display_cha_ma = ma5_wal : gosub *r_cha_wal_ep5_2
	if %r_display_cha_ma = ma5_ron : gosub *r_cha_ron_ep5_2
	if %r_display_cha_ma = ma5_gap : gosub *r_cha_gap_ep5_2
	if %r_display_cha_ma = ma5_s45 : gosub *r_cha_s45_ep5_2
	if %r_display_cha_ma = ma5_s410 : gosub *r_cha_s410_ep5_2
	if %r_display_cha_ma = ma5_s00 : gosub *r_cha_s00_ep5_2
	if %r_display_cha_ma = ma5_s556 : gosub *r_cha_s556_ep5_2
	if %r_display_cha_ma = ma5_rg : gosub *r_cha_rg_ep5_2
	if %r_display_cha_ma = ma5_rg_1 : gosub *r_cha_rg_1_ep5_2
	if %r_display_cha_ma = ma5_rg_2 : gosub *r_cha_rg_2_ep5_2
	if %r_display_cha_ma = ma5_rg_3 : gosub *r_cha_rg_3_ep5_2
	if %r_display_cha_ma = ma5_rg_4 : gosub *r_cha_rg_4_ep5_2
	if %r_display_cha_ma = ma5_rg_5 : gosub *r_cha_rg_5_ep5_2
	if %r_display_cha_ma = ma5_rg_6 : gosub *r_cha_rg_6_ep5_2
	if %r_display_cha_ma = ma5_eri : gosub *r_cha_eri_ep5_2
	if %r_display_cha_ma = ma5_dla : gosub *r_cha_dla_ep5_2
	if %r_display_cha_ma = ma5_ger : gosub *r_cha_ger_ep5_2
	if %r_display_cha_ma = ma5_cor : gosub *r_cha_cor_ep5_2
	if %r_display_cha_ma = ma5_but : gosub *r_cha_but_ep5_2
	
goto *r_cha_display_end

*r_cha_display_ep6
	if %r_display_cha = kin : gosub *r_cha_kin_ep6
	if %r_display_cha = kla : gosub *r_cha_kla_ep6
	if %r_display_cha = nat : gosub *r_cha_nat_ep6
	if %r_display_cha = jes : gosub *r_cha_jes_ep6
	if %r_display_cha = hid : gosub *r_cha_hid_ep6
	if %r_display_cha = eva : gosub *r_cha_eva_ep6
	if %r_display_cha = geo : gosub *r_cha_geo_ep6
	if %r_display_cha = rud : gosub *r_cha_rud_ep6
	if %r_display_cha = kir : gosub *r_cha_kir_ep6
	if %r_display_cha = but : gosub *r_cha_but_ep6
	if %r_display_cha = ros : gosub *r_cha_ros_ep6
	if %r_display_cha = mar : gosub *r_cha_mar_ep6
	if %r_display_cha = nan : gosub *r_cha_nan_ep6
 	if %r_display_cha = gen : gosub *r_cha_gen_ep6
	if %r_display_cha = kum : gosub *r_cha_kum_ep6
	if %r_display_cha = goh : gosub *r_cha_goh_ep6
	if %r_display_cha = sha : gosub *r_cha_sha_ep6
	if %r_display_cha = kan : gosub *r_cha_kan_ep6
	if %r_display_cha = eri : gosub *r_cha_eri_ep6

goto *r_cha_display_end

*r_cha_display_ep6_2
	if %r_display_cha_ma = ma5_lam : gosub *r_cha_lam_ep6_2
	if %r_display_cha_ma = ma5_ber : gosub *r_cha_ber_ep6_2
	if %r_display_cha_ma = ma5_be2 : gosub *r_cha_be2_ep6_2
	if %r_display_cha_ma = ma5_bea : gosub *r_cha_bea_ep6_2
	if %r_display_cha_ma = ma5_wal : gosub *r_cha_wal_ep6_2
	if %r_display_cha_ma = ma5_ron : gosub *r_cha_ron_ep6_2
	if %r_display_cha_ma = ma5_gap : gosub *r_cha_gap_ep6_2
	if %r_display_cha_ma = ma5_s45 : gosub *r_cha_s45_ep6_2
	if %r_display_cha_ma = ma5_s410 : gosub *r_cha_s410_ep6_2
	if %r_display_cha_ma = ma5_s00 : gosub *r_cha_s00_ep6_2
	if %r_display_cha_ma = ma5_s556 : gosub *r_cha_s556_ep6_2
	if %r_display_cha_ma = ma5_rg : gosub *r_cha_rg_ep6_2
	if %r_display_cha_ma = ma5_rg_1 : gosub *r_cha_rg_1_ep6_2
	if %r_display_cha_ma = ma5_rg_2 : gosub *r_cha_rg_2_ep6_2
	if %r_display_cha_ma = ma5_rg_3 : gosub *r_cha_rg_3_ep6_2
	if %r_display_cha_ma = ma5_rg_4 : gosub *r_cha_rg_4_ep6_2
	if %r_display_cha_ma = ma5_rg_5 : gosub *r_cha_rg_5_ep6_2
	if %r_display_cha_ma = ma5_rg_6 : gosub *r_cha_rg_6_ep6_2
	if %r_display_cha_ma = ma5_eri : gosub *r_cha_eri_ep6_2
	if %r_display_cha_ma = ma5_dla : gosub *r_cha_dla_ep6_2
	if %r_display_cha_ma = ma5_ger : gosub *r_cha_ger_ep6_2
	if %r_display_cha_ma = ma5_cor : gosub *r_cha_cor_ep6_2
	if %r_display_cha_ma = ma5_but : gosub *r_cha_but_ep6_2
	if %r_display_cha_ma = ma5_zep : gosub *r_cha_zep_ep6_2
	if %r_display_cha_ma = ma5_fur : gosub *r_cha_fur_ep6_2
	if %r_display_cha_ma = ma5_goa : gosub *r_cha_goa_ep6_2

goto *r_cha_display_end
	
*r_cha_display_ep6_3
	;notif %r_display_side = 2 jumpf
	if %r_display_cha_enj = ma5_enj : gosub *r_cha_enj_ep6_3
	if %r_display_cha_enj = ma5_ama : gosub *r_cha_ama_ep6_3
	if %r_display_cha_enj = ma5_fea : gosub *r_cha_fea_ep6_3
	
goto *r_cha_display_end

*r_cha_display_ep7
	if %r_display_cha = kin : gosub *r_cha_kin_ep7
	if %r_display_cha = kla : gosub *r_cha_kla_ep7
	if %r_display_cha = nat : gosub *r_cha_nat_ep7
	if %r_display_cha = jes : gosub *r_cha_jes_ep7
	if %r_display_cha = hid : gosub *r_cha_hid_ep7
	if %r_display_cha = eva : gosub *r_cha_eva_ep7
	if %r_display_cha = geo : gosub *r_cha_geo_ep7
	if %r_display_cha = rud : gosub *r_cha_rud_ep7
	if %r_display_cha = kir : gosub *r_cha_kir_ep7
	if %r_display_cha = but : gosub *r_cha_but_ep7
	if %r_display_cha = ros : gosub *r_cha_ros_ep7
	if %r_display_cha = mar : gosub *r_cha_mar_ep7
	if %r_display_cha = nan : gosub *r_cha_nan_ep7
 	if %r_display_cha = gen : gosub *r_cha_gen_ep7
	if %r_display_cha = kum : gosub *r_cha_kum_ep7
	if %r_display_cha = goh : gosub *r_cha_goh_ep7
	if %r_display_cha = sha : gosub *r_cha_sha_ep7
	if %r_display_cha = kan : gosub *r_cha_kan_ep7
	if %r_display_cha = rio : gosub *r_cha_rio_ep7

goto *r_cha_display_end

*r_cha_display_ep7_2
	if %r_display_cha_ma = ma5_ber : gosub *r_cha_ber_ep7_2
	if %r_display_cha_ma = ma5_bea : gosub *r_cha_bea_ep7_2
	if %r_display_cha_ma = ma5_wal : gosub *r_cha_wal_ep7_2
	if %r_display_cha_ma = ma5_ron : gosub *r_cha_ron_ep7_2
	if %r_display_cha_ma = ma5_gap : gosub *r_cha_gap_ep7_2
	if %r_display_cha_ma = ma5_rg : gosub *r_cha_rg_ep7_2
	if %r_display_cha_ma = ma5_rg_1 : gosub *r_cha_rg_1_ep7_2
	if %r_display_cha_ma = ma5_rg_2 : gosub *r_cha_rg_2_ep7_2
	if %r_display_cha_ma = ma5_rg_3 : gosub *r_cha_rg_3_ep7_2
	if %r_display_cha_ma = ma5_rg_4 : gosub *r_cha_rg_4_ep7_2
	if %r_display_cha_ma = ma5_rg_5 : gosub *r_cha_rg_5_ep7_2
	if %r_display_cha_ma = ma5_rg_6 : gosub *r_cha_rg_6_ep7_2
	if %r_display_cha_ma = ma5_mar : gosub *r_cha_mar_ep7_2
	if %r_display_cha_ma = ma5_ZEP : gosub *r_cha_ZEP_ep7_2
	if %r_display_cha_ma = ma5_FUR : gosub *r_cha_FUR_ep7_2
	if %r_display_cha_ma = ma5_WIL : gosub *r_cha_WIL_ep7_2
	if %r_display_cha_ma = ma5_CUR : gosub *r_cha_CUR_ep7_2
	
goto *r_cha_display_end

*r_cha_display_ep8
	if %r_display_cha = kin : gosub *r_cha_kin_ep8
	if %r_display_cha = kla : gosub *r_cha_kla_ep8
	if %r_display_cha = nat : gosub *r_cha_nat_ep8
	if %r_display_cha = jes : gosub *r_cha_jes_ep8
	if %r_display_cha = hid : gosub *r_cha_hid_ep8
	if %r_display_cha = eva : gosub *r_cha_eva_ep8
	if %r_display_cha = geo : gosub *r_cha_geo_ep8
	if %r_display_cha = rud : gosub *r_cha_rud_ep8
	if %r_display_cha = kir : gosub *r_cha_kir_ep8
	if %r_display_cha = but : gosub *r_cha_but_ep8
	if %r_display_cha = ros : gosub *r_cha_ros_ep8
	if %r_display_cha = mar : gosub *r_cha_mar_ep8
	if %r_display_cha = nan : gosub *r_cha_nan_ep8
 	if %r_display_cha = gen : gosub *r_cha_gen_ep8
	if %r_display_cha = kum : gosub *r_cha_kum_ep8
	if %r_display_cha = goh : gosub *r_cha_goh_ep8
	if %r_display_cha = sha : gosub *r_cha_sha_ep8
	if %r_display_cha = kan : gosub *r_cha_kan_ep8
	;if %r_display_cha = rio : gosub *r_cha_rio_ep8
	if %r_display_cha = EN2 : gosub *r_cha_EN2_ep8
	;if %r_display_cha = si : gosub *r_cha_si_ep8
	;if %r_display_cha = eri : gosub *r_cha_eri_ep8
	if %r_display_cha = bea : gosub *r_cha_bea_ep8

goto *r_cha_display_end

*r_cha_display_ep8_2
	if %r_display_cha_ma = ma5_lam : gosub *r_cha_lam_ep8_2
	if %r_display_cha_ma = ma5_ber : gosub *r_cha_ber_ep8_2
	if %r_display_cha_ma = ma5_bea : gosub *r_cha_bea_ep8_2
	if %r_display_cha_ma = ma5_wal : gosub *r_cha_wal_ep8_2
	if %r_display_cha_ma = ma5_ron : gosub *r_cha_ron_ep8_2
	if %r_display_cha_ma = ma5_gap : gosub *r_cha_gap_ep8_2
	if %r_display_cha_ma = ma5_s45 : gosub *r_cha_s45_ep8_2
	if %r_display_cha_ma = ma5_s410 : gosub *r_cha_s410_ep8_2
	if %r_display_cha_ma = ma5_s00 : gosub *r_cha_s00_ep8_2
	if %r_display_cha_ma = ma5_s556 : gosub *r_cha_s556_ep8_2
	if %r_display_cha_ma = ma5_rg : gosub *r_cha_rg_ep8_2
	if %r_display_cha_ma = ma5_rg_1 : gosub *r_cha_rg_1_ep8_2
	if %r_display_cha_ma = ma5_rg_2 : gosub *r_cha_rg_2_ep8_2
	if %r_display_cha_ma = ma5_rg_3 : gosub *r_cha_rg_3_ep8_2
	if %r_display_cha_ma = ma5_rg_4 : gosub *r_cha_rg_4_ep8_2
	if %r_display_cha_ma = ma5_rg_5 : gosub *r_cha_rg_5_ep8_2
	if %r_display_cha_ma = ma5_rg_6 : gosub *r_cha_rg_6_ep8_2
	if %r_display_cha_ma = ma5_eri : gosub *r_cha_eri_ep8_2
	if %r_display_cha_ma = ma5_dla : gosub *r_cha_dla_ep8_2
	if %r_display_cha_ma = ma5_ger : gosub *r_cha_ger_ep8_2
	if %r_display_cha_ma = ma5_cor : gosub *r_cha_cor_ep8_2
	if %r_display_cha_ma = ma5_but : gosub *r_cha_but_ep8_2
	if %r_display_cha_ma = ma5_zep : gosub *r_cha_ZEP_ep8_2
	if %r_display_cha_ma = ma5_fur : gosub *r_cha_FUR_ep8_2
	if %r_display_cha_ma = ma5_goa : gosub *r_cha_GOA_ep8_2
	if %r_display_cha_ma = ma5_wil : gosub *r_cha_WIL_ep8_2
	if %r_display_cha_ma = ma5_en2 : gosub *r_cha_EN2_ep8_2
	if %r_display_cha_ma = ma5_bb : gosub *r_cha_bb_ep8_2
	if %r_display_cha_ma = ma5_wr : gosub *r_cha_wr_ep8_2
	if %r_display_cha_ma = ma5_ev2 : gosub *r_cha_ev2_ep8_2
	if %r_display_cha_ma = ma5_fea : gosub *r_cha_fea_ep8_2
	
goto *r_cha_display_end

*r_cha_display_ep8_3
	if %r_display_cha_ma = ma5_ENJ : gosub *r_cha_enj_ep8_3
	if %r_display_cha_ma = ma5_AMA : gosub *r_cha_AMA_ep8_3
	if %r_display_cha_ma = ma5_FEA : gosub *r_cha_FEA_ep8_3
	
goto *r_cha_display_end
	
*r_cha_display_end
gosub *r_cha_display_right_left
return

*r_cha_display_right_left
	sptwait xpos,cha_lsp
	sptwait alpha,cha_lsp
	lsp cha_lsp,$r_cha_tati_path,1750,0,0
	lsp r_cha_txt_lsp,$r_txt_path,930,170
	aspt scroll_h,r_cha_txt_lsp,728 ;scroll text
	vsp 99,0 : vsp 98,0 : mov %r_display_arrow,0 ;disable the arrows
	scroll_exceeds %r_display_arrow,r_cha_txt_lsp
	if %r_display_arrow = 1 vsp 99,1 : vsp 98,1 : mov %r_display_arrow,r_cha_txt_lsp
	aspt alpha,cha_lsp,255,500
	spt xpos,cha_lsp,-500,500 ;1750->1250
return

;*******************************************************
; Character information display
;
; Picture Chara Standing
; (Do not change such as name, age, difficult part) 1 comment
; (Where you change the current situation, etc., in some situations) 2 comments
; Button switching character < >
;
;*******************************************************

;******************************************
; Standing picture display of the characters
; Move to the routine details of every character.
;******************************************
;-----EP1------
;------------------------------
*r_cha_kin
;State, change the comment by progression
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kin_EP1_1_kin.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kin_m_EP1_1_kin_m.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kin_d_EP1_1_kin_d.png"
;(Show text sentence according to the state)
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_kin_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_kin_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_1_kin_3
return
;------------------------------
*r_cha_kla
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kla_EP1_1_kla.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kla_d_EP1_1_kla_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kla_EP1_1_kla.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_kla_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_kla_2
return
;------------------------------
*r_cha_nat
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_nat_EP1_1_nat.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_nat_d_EP1_1_nat_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_nat_EP1_1_nat.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_nat_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_nat_2
return
;------------------------------
*r_cha_jes
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_jes_EP1_1_jes.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_jes_d_EP1_1_jes_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_jes_EP1_1_jes.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_jes_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_jes_2
return
;------------------------------
*r_cha_eva
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_eva_EP1_1_eva.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_eva_d_EP1_1_eva_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_eva_EP1_1_eva.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_eva_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_eva_2
return
;------------------------------
*r_cha_hid
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_hid_EP1_1_hid.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_hid_d_EP1_1_hid_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_hid_EP1_1_hid.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_hid_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_hid_2
return
;------------------------------
*r_cha_geo
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_geo_EP1_1_geo.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_geo_d_EP1_1_geo_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_geo_EP1_1_geo.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_geo_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_geo_2
return
;------------------------------
*r_cha_rud
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_rud_EP1_1_rud.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_rud_d_EP1_1_rud_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_rud_EP1_1_rud.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_rud_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_rud_2
return
;------------------------------
*r_cha_kir
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kir_EP1_1_kir.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kir_d_EP1_1_kir_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kir_EP1_1_kir.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_kir_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_kir_2
return
;------------------------------
*r_cha_but
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_but_EP1_1_but.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_but_d_EP1_1_but_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_but_EP1_1_but.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_but_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_but_2
return
;------------------------------
*r_cha_gen
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_gen_EP1_1_gen.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_gen_d_EP1_1_gen_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_gen_EP1_1_gen.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_gen_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_gen_2
return
;------------------------------
*r_cha_ros
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_ros_EP1_1_ros.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_ros_d_EP1_1_ros_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_ros_EP1_1_ros.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_ros_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_ros_2
return
;------------------------------
*r_cha_mar
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_mar_EP1_1_mar.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_mar_d_EP1_1_mar_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_mar_EP1_1_mar.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_mar_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_mar_2
return
;------------------------------
*r_cha_nan
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_nan_EP1_1_nan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_nan_d_EP1_1_nan_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_nan_EP1_1_nan.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_nan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_nan_2
return
;------------------------------
*r_cha_sha
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_sha_EP1_1_sha.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_sha_d_EP1_1_sha_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_sha_EP1_1_sha.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_sha_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_sha_2
return
;------------------------------
*r_cha_kan
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kan_EP1_1_kan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kan_d_EP1_1_kan_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kan_EP1_1_kan.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_kan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_kan_2
return
;------------------------------
*r_cha_goh
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_goh_EP1_1_goh.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_goh_d_EP1_1_goh_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_goh_EP1_1_goh.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_goh_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_goh_2
return
;------------------------------
*r_cha_kum
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kum_EP1_1_kum.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kum_d_EP1_1_kum_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_kum_EP1_1_kum.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_kum_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_kum_2
return
;------------------------------
*r_cha_bea
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_bea_EP1_1_bea.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_bea_d_EP1_1_bea_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_bea_d_EP1_1_bea_d.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_bea_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_bea_2
return
;------------------------------
*r_cha_ber
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_ber_EP1_1_ber.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_ber_d_EP1_1_ber_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep1_1_ber_d_EP1_1_ber_d.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_1_ber_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_1_ber_2
return
;------------------------------
;-----EP2------
*r_cha_kin_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kin_EP2_1_kin.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kin_d_EP2_1_kin_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_kin_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_kin_2
return
;------------------------------
*r_cha_kla_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kla_EP2_1_kla.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kla_d_EP2_1_kla_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_kla_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_kla_2
return
;------------------------------
*r_cha_nat_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_nat_EP2_1_nat.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_nat_d_EP2_1_nat_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_nat_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_nat_2
return
;------------------------------
*r_cha_jes_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_jes_EP2_1_jes.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_jes_d_EP2_1_jes_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_jes_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_jes_2
return
;------------------------------
*r_cha_eva_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_eva_EP2_1_eva.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_eva_d_EP2_1_eva_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_eva_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_eva_2
return
;------------------------------
*r_cha_hid_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_hid_EP2_1_hid.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_hid_d_EP2_1_hid_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_hid_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_hid_2
return
;------------------------------
*r_cha_geo_ep2
;Pics
mov ?r[%r_display_cha][tati_x],435
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_geo_EP2_1_geo.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_geo_d_EP2_1_geo_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_geo_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_geo_2
lsp geo_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_geo2_EP2_1_geo2.png" : mov ?r[geo][tati_x],353 : lsp geo_btn_lsp,":c/1,0,3;graphics\chars\chars_geo1.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_rud_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_rud_EP2_1_rud.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_rud_d_EP2_1_rud_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_rud_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_rud_2
return
;------------------------------
*r_cha_kir_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kir_EP2_1_kir.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kir_d_EP2_1_kir_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_kir_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_kir_2
return
;------------------------------
*r_cha_but_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_but_EP2_1_but.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_but_d_EP2_1_but_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_but_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_but_2
return
;------------------------------
*r_cha_gen_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_gen_EP2_1_gen.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_gen_d_EP2_1_gen_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_gen_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_gen_2
return
;------------------------------
*r_cha_ros_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_ros_EP2_1_ros.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_ros_d_EP2_1_ros_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_ros_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_ros_2
return
;------------------------------
*r_cha_mar_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_mar_EP2_1_mar.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_mar_d_EP2_1_mar_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_mar_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_mar_2
return
;------------------------------
*r_cha_nan_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_nan_EP2_1_nan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_nan_d_EP2_1_nan_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_nan_d2_EP2_1_nan_d2.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_nan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_nan_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_2_nan_3
return
;------------------------------
*r_cha_sha_ep2
;Pics
mov ?r[%r_display_cha][tati_x],430
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_sha_EP2_1_sha.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_sha_d_EP2_1_sha_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_sha_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_sha_2
lsp sha_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_sha2_EP2_1_sha2.png" : mov ?r[%r_display_cha][tati_x],430 : lsp sha_btn_lsp,":c/1,0,3;graphics\chars\chars_sha1.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_kan_ep2
;Pics
mov ?r[%r_display_cha][tati_x],460
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kan_EP2_1_kan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kan_m_EP2_1_kan_m.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kan_d_EP2_1_kan_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_kan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_kan_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_2_kan_3
	lsp kan_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kan2_EP2_1_kan2.png" : mov ?r[%r_display_cha][tati_x],440 : lsp kan_btn_lsp,":c/1,0,3;graphics\chars\chars_kan1.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_goh_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_goh_EP2_1_goh.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_goh_d_EP2_1_goh_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_goh_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_goh_2
return
;------------------------------
*r_cha_kum_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kum_EP2_1_kum.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kum_d_EP2_1_kum_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_kum_d2_EP2_1_kum_d2.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_kum_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_kum_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_2_kum_3
return
;------------------------------
*r_cha_bea_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_bea_EP2_1_bea.png" : mov ?r[bea][tati_x],380
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_bea2_EP2_1_bea2.png" : mov ?r[bea][tati_x],435
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_1_bea_d_EP2_1_bea_d.png" : mov ?r[bea][tati_x],380
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_bea_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_2_bea_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_2_bea_3
return
;------------------------------
*r_cha_lam_ep2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\lam.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_ber_1
return
;------------------------------
;-----EP2_2------
;------------------------------
*r_cha_kin_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_kin_EP2_2_kin.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_kin_1
return
;------------------------------
*r_cha_but_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_but_EP2_2_but.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_but_1
return
;------------------------------
*r_cha_gen_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_gen_EP2_2_gen.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_gen_1
return
;------------------------------
*r_cha_mar_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_mar_EP2_2_mar.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_mar_1
return
;------------------------------
*r_cha_sha_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_sha_EP2_2_sha.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_sha_1
return
;------------------------------
*r_cha_kan_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_kan_EP2_2_kan.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_kan_1
return
;------------------------------
*r_cha_bea_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_bea_EP2_2_bea.png" : mov ?r[bea][tati_x],380
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_bea_1
return
;------------------------------
*r_cha_ber_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_ber_EP2_2_ber.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_ber_1
return
;------------------------------
*r_cha_lam_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_lam_EP2_2_lam.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_lam_1
return
;------------------------------
*r_cha_rg_ep2_2
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg1_EP2_2_rg1.png"
rnd2 %ran,1,7
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep2_2
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg2_EP2_2_rg2.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep2_2
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg3_EP2_2_rg3.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep2_2
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg4_EP2_2_rg4.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep2_2
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg5_EP2_2_rg5.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg5_1
return
;------------------------------
*r_cha_rg_5_ep2_2
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg6_EP2_2_rg6.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep2_2
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep2_2_rg7_EP2_2_rg7.png"
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_2_2_rg7_1
return
;------------------------------
;-----EP3-------
;------------------------------
*r_cha_kin_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kin_EP3_1_kin.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kin_d_EP3_1_kin_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_kin_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_kin_2
return
;------------------------------
*r_cha_kla_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kla_EP3_1_kla.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kla_d_EP3_1_kla_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_kla_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_kla_2
return
;------------------------------
*r_cha_nat_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_nat_EP3_1_nat.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_nat_d_EP3_1_nat_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_nat_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_nat_2
return
;------------------------------
*r_cha_jes_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_jes_EP3_1_jes.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_jes_d_EP3_1_jes_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_jes_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_jes_2
return
;------------------------------
*r_cha_eva_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_eva_EP3_1_eva.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_eva_d_EP3_1_eva_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_eva_1
return
;------------------------------
*r_cha_hid_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_hid_EP3_1_hid.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_hid_d_EP3_1_hid_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_hid_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_hid_2
return
;------------------------------
*r_cha_geo_ep3
;Pics
mov ?r[%r_display_cha][tati_x],435
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_geo_EP3_1_geo.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_geo_d_EP3_1_geo_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_geo_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_geo_2
lsp geo_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_geo2_EP3_1_geo2.png" : mov ?r[geo][tati_x],435 : lsp geo_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep3\geo_l2.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_rud_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_rud_EP3_1_rud.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_rud_d_EP3_1_rud_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_rud_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_rud_2
return
;------------------------------
*r_cha_kir_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kir_EP3_1_kir.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kir_d_EP3_1_kir_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_kir_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_kir_2
return
;------------------------------
*r_cha_but_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_but_EP3_1_but.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_but_d_EP3_1_but_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_but_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_but_2
return
;------------------------------
*r_cha_gen_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_gen_EP3_1_gen.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_gen_d_EP3_1_gen_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_gen_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_gen_2
return
;------------------------------
*r_cha_ros_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_ros_EP3_1_ros.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_ros_d_EP3_1_ros_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_ros_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_ros_2
return
;------------------------------
*r_cha_mar_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_mar_EP3_1_mar.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_mar_d_EP3_1_mar_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_mar_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_mar_2
return
;------------------------------
*r_cha_nan_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_nan_EP3_1_nan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_nan_d_EP3_1_nan_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_nan_d2_EP3_1_nan_d2.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_nan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_nan_2
return
;------------------------------
*r_cha_sha_ep3
;Pics
mov ?r[%r_display_cha][tati_x],430
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_sha_EP3_1_sha.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_sha_d_EP3_1_sha_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_sha_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_sha_2
lsp sha_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_sha2_EP3_1_sha2.png" : mov ?r[%r_display_cha][tati_x],430 : lsp sha_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep3\sha_l2.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_kan_ep3
;Pics
mov ?r[%r_display_cha][tati_x],460
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kan_EP3_1_kan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kan_d_EP3_1_kan_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_kan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_kan_2
lsp kan_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kan2_EP3_1_kan2.png" : mov ?r[%r_display_cha][tati_x],440 : lsp kan_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep3\kan_l2.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_goh_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_goh_EP3_1_goh.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_goh_d_EP3_1_goh_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_goh_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_goh_2
return
;------------------------------
*r_cha_kum_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kum_EP3_1_kum.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kum_d_EP3_1_kum_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_kum_d2.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_kum_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_kum_2
return
;------------------------------
*r_cha_bea_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_bea_EP3_1_bea.png" : mov ?r[bea][tati_x],380
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_bea_d_EP3_1_bea_d.png" : mov ?r[bea][tati_x],380
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_bea_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_3_bea_2
return
;------------------------------
*r_cha_enj_ep3
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_1_enj_EP3_1_enj.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;bmp\r_click\text\txt_def2.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_3_enj_1
return
;------------------------------
;----EP3_2--------
;------------------------------
*r_cha_bea_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_bea_EP3_2_bea.png" : mov ?r[bea][tati_x],380
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_bea_1
return
;------------------------------
*r_cha_ber_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_ber_EP3_2_ber.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_ber_1
return
;------------------------------
*r_cha_lam_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_lam_EP3_2_lam.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_lam_1
return
;------------------------------
*r_cha_goa_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_goa_EP3_2_goa.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_goa_1
return
;------------------------------
*r_cha_wal_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_wal_EP3_2_wal.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_wal_1
return
;------------------------------
*r_cha_ron_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_ron_EP3_2_ron.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_ron_1
return
;------------------------------
*r_cha_ev2_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_ev2_EP3_2_ev2.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_ev2_1
lsp ma3_ev2_btn_lsp,":c/1,0,3;graphics\chars\chars_evb1.png",?r[%r_display_cha_ma][itiran_x],?r[%r_display_cha_ma][itiran_y]
	if ?r[%r_display_cha_ma][r_ishou] = 1 && ?r[%r_display_cha_ma][condition] = 1 lsp ma3_ev2_btn_lsp,":c/1,0,3;graphics\chars\chars_evb0.png",?r[%r_display_cha_ma][itiran_x],?r[%r_display_cha_ma][itiran_y]
	if ?r[%r_display_cha_ma][r_ishou] = 2 && ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_ev2_2_EP3_2_ev2_2.png" : lsp ma3_ev2_btn_lsp,":c/1,0,3;graphics\chars\chars_evb1.png",?r[%r_display_cha_ma][itiran_x],?r[%r_display_cha_ma][itiran_y]
return
;------------------------------
*r_cha_enj_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_enj_EP3_2_enj.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_enj_1
return
;------------------------------
*r_cha_s_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\s45.bmp"
rnd2 %ran,1,2
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,":a;bmp\r_click\text\cha\ep3_2\s45_1.png"
return
;------------------------------
*r_cha_s_1_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_s41_EP3_2_s41.png"
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_s_1
return
;------------------------------
*r_cha_s_2_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_s45_EP3_2_s45.png"
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_s_2
return
;------------------------------
*r_cha_rg_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg1_EP3_2_rg1.png"
rnd2 %ran,1,7
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg2_EP3_2_rg2.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg3_EP3_2_rg3.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg4_EP3_2_rg4.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg5_EP3_2_rg5.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg5_1

return

;------------------------------
*r_cha_rg_5_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg6_EP3_2_rg6.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep3_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep3_2_rg7_EP3_2_rg7.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_3_2_rg7_1
return
;------------------------------
;---EP4-----
;------------------------------
*r_cha_kin_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kin_EP4_1_kin.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kin_d_EP4_1_kin_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_kin_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_kin_2
return
;------------------------------
*r_cha_kla_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kla_EP4_1_kla.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kla_d_EP4_1_kla_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_kla_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_kla_2
return
;------------------------------
*r_cha_nat_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_nat_EP4_1_nat.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_nat_d_EP4_1_nat_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_nat_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_nat_2
return
;------------------------------
*r_cha_jes_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_jes_EP4_1_jes.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_jes_d_EP4_1_jes_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_jes_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_jes_2
return
;------------------------------
*r_cha_eva_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_eva_EP4_1_eva.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_eva_d_EP4_1_eva_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_eva_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_eva_2
return
;------------------------------
*r_cha_hid_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_hid_EP4_1_hid.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_hid_d_EP4_1_hid_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_hid_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_hid_2
return
;------------------------------
*r_cha_geo_ep4
;Pics
mov ?r[%r_display_cha][tati_x],435
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_geo_EP4_1_geo.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_geo_d_EP4_1_geo_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_geo_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_geo_2
lsp geo_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_geo_d_EP4_1_geo_d.png" : mov ?r[geo][tati_x],435 : lsp geo_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep4\geo_l2.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_rud_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_rud_EP4_1_rud.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_rud_d_EP4_1_rud_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_rud_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_rud_2
return
;------------------------------
*r_cha_kir_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kir_EP4_1_kir.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kir_d_EP4_1_kir_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_kir_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_kir_2
return
;------------------------------
*r_cha_but_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_but_EP4_1_but.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_but_d_EP4_1_but_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_but_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_but_2
return
;------------------------------
*r_cha_gen_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_gen_EP4_1_gen.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_gen_d_EP4_1_gen_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_gen_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_gen_2
return
;------------------------------
*r_cha_ros_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_ros_EP4_1_ros.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_ros_d_EP4_1_ros_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_ros_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_ros_2
return
;------------------------------
*r_cha_mar_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_mar_EP4_1_mar.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_mar_d_EP4_1_mar_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_mar_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_mar_2
return
;------------------------------
*r_cha_nan_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_nan_EP4_1_nan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_nan_d_EP4_1_nan_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_nan_d2_EP4_1_nan_d2.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_nan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_nan_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_4_nan_3
return
;------------------------------
*r_cha_sha_ep4
;Pics
mov ?r[%r_display_cha][tati_x],430
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_sha_EP4_1_sha.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_sha_d_EP4_1_sha_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_sha_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_sha_2
lsp sha_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_sha2.png" : mov ?r[%r_display_cha][tati_x],430 : lsp sha_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep4\sha_l2.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_kan_ep4
;Pics
mov ?r[%r_display_cha][tati_x],460
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kan_EP4_1_kan.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kan_d_EP4_1_kan_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_kan_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_kan_2
lsp kan_btn_lsp,$?r[%r_display_cha][?r[%r_display_cha][condition]],?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kan_m_EP4_1_kan_m.png" : mov ?r[%r_display_cha][tati_x],440 : lsp kan_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep4\kan_l2.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
*r_cha_goh_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_goh_EP4_1_goh.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_goh_d_EP4_1_goh_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_goh_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_goh_2
return
;------------------------------
*r_cha_kum_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kum_EP4_1_kum.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kum_d_EP4_1_kum_d.png"
	if ?r[%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_kum_d_EP4_1_kum_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_kum_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_kum_2
	if ?r[%r_display_cha][condition] = 3 mov $r_txt_path,chars_4_kum_3
return
;------------------------------
*r_cha_bea_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_bea_EP4_1_bea.png" : mov ?r[bea][tati_x],380
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_bea_d_EP4_1_bea_d.png" : mov ?r[bea][tati_x],380
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_bea_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_bea_2
return
;------------------------------
*r_cha_ber_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_ber_EP4_1_ber.png"
	if ?r[%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_ber_d_EP4_1_ber_d.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_ber_1
	if ?r[%r_display_cha][condition] = 2 mov $r_txt_path,chars_4_ber_2
return
;------------------------------
*r_cha_lam_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_lam_EP4_2_lam.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_lam_1
return
;------------------------------
*r_cha_enj_ep4
;Pics
	if ?r[%r_display_cha][condition] = 0 return
	if ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_enj_EP4_1_enj.png"
;Text
	if ?r[%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha][condition] = 1 mov $r_txt_path,chars_4_enj_1
	if ?r[%r_display_cha][r_ishou] = 2 && ?r[%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_1_enj_2_EP4_1_enj_2.png" : mov ?r[%r_display_cha][tati_x],440 : lsp enj_btn_lsp,":c/1,0,3;graphics\chars\chars_enj0.png",?r[%r_display_cha][itiran_x],?r[%r_display_cha][itiran_y]
return
;------------------------------
;---EP4_2----
;------------------------------
*r_cha_lam_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_lam_EP4_2_lam.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_lam_1
return
;------------------------------
*r_cha_ber_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_ber_EP4_2_ber.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_ber_1
return
;------------------------------
*r_cha_bea_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_bea_EP4_2_bea.png"
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_bea_EP4_2_bea.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_bea_1
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_4_2_bea_2
return
;------------------------------
*r_cha_mar_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_mar_EP4_2_mar.png" : mov ?r[ma4_mar][tati_x],380
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_mar_2_EP4_2_mar_2.png" : mov ?r[ma4_mar][tati_x],410
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_mar_1
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_4_2_mar_2
return
;------------------------------
*r_cha_enj_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_enj_EP4_2_enj.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_enj_1
return
;------------------------------
*r_cha_kin_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_kin_EP4_2_kin.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_kin_1
return
;------------------------------
*r_cha_sak_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_sak_EP4_2_sak.png"
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_sak_d_EP4_2_sak_d.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_sak_1
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_4_2_sak_2
return
;------------------------------
*r_cha_wal_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_wal_EP4_2_wal.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_wal_1
return
;------------------------------
*r_cha_ron_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_ron_EP4_2_ron.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_ron_1
return
;------------------------------
*r_cha_gap_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_gap_EP4_2_gap.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_gap_1
return
;------------------------------
*r_cha_s45_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s45_EP4_2_s45.png"
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_s45_1
return
;------------------------------
*r_cha_s410_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s41_EP4_2_s41.png"
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_s41_1
return
;------------------------------
*r_cha_s00_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s00_EP4_2_s00.png"
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_s00_1
return
;------------------------------
*r_cha_s556_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s55_EP4_2_s55.png"
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s55_d_EP4_2_s55_d.png"
;if %r_s556_flg = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s55_d_EP4_2_s55_d.png" : mov %r_s556_flg,0 : return
;if %r_s556_flg = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s55_EP4_2_s55.png" : mov %r_s556_flg,0 : return
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_s55_1
	if ?r[%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_4_2_s55_2
;if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,":a;bmp\r_click\text\cha\ep4_2\s55_2.png" : mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_s55_d_EP4_2_s55_d.png"
return
;------------------------------
*r_cha_rg_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg1_EP4_2_rg1.png"
rnd2 %ran,1,7
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg2_EP4_2_rg2.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg3_EP4_2_rg3.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg4_EP4_2_rg4.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg5_EP4_2_rg5.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg5_1
return
;------------------------------
*r_cha_rg_5_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg6_EP4_2_rg6.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_rg7_EP4_2_rg7.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_rg7_1
return
;------------------------------
*r_cha_goa_ep4_2
;Pics
	if ?r[%r_display_cha_ma][condition] = 0 return
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_goa_EP4_2_goa.png"
;Text
	if ?r[%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_4_2_goa_1
return
;------------------------------
;----EP4_3-----
;------------------------------
*r_cha_eva_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_eva_EP4_3_eva.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_eva_1
return
;------------------------------
*r_cha_oko_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_oko_EP4_3_oko.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_oko_1
return
;------------------------------
*r_cha_kas_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_kas_EP4_3_kas.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_kas_1
return
;------------------------------
*r_cha_enj_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_enj_EP4_3_enj.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_enj_1
	mov ?r[%r_display_cha_enj][tati_x],440
	if ?r[%r_display_cha_enj][r_ishou] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_enj_EP4_3_enj.png" : mov ?r[%r_display_cha_enj][tati_x],440 : lsp enj_enj_btn_lsp,":c/1,0,3;graphics\chars\chars_enj0.png",?r[%r_display_cha_enj][itiran_x],?r[%r_display_cha_enj][itiran_y]
	if ?r[%r_display_cha_enj][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_enj_2_EP4_3_enj_2.png" : mov ?r[%r_display_cha_enj][tati_x],415 : lsp enj_enj_btn_lsp,":c/1,0,3;graphics\chars\chars_enj1.png",?r[%r_display_cha_enj][itiran_x],?r[%r_display_cha_enj][itiran_y]
return
;------------------------------
*r_cha_ama_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_ama_EP4_3_ama.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_ama_1
return
;------------------------------
*r_cha_sak_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_sak_EP4_3_sak.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_sak_1
return
;------------------------------
*r_cha_mar_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_mar_EP4_3_mar.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_mar_1
return
;------------------------------
*r_cha_rg_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg1_EP4_3_rg1.png"
rnd2 %ran,1,7
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg1_1
return
;------------------------------
*r_cha_rg_1_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg2_EP4_3_rg2.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg2_1
return
;------------------------------
*r_cha_rg_2_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg3_EP4_3_rg3.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg3_1
return
;------------------------------
*r_cha_rg_3_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg4_EP4_3_rg4.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg4_1
return
;------------------------------
*r_cha_rg_4_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg5_EP4_3_rg5.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg5_1
return
;------------------------------
*r_cha_rg_5_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg6_EP4_3_rg6.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg6_1
return
;------------------------------
*r_cha_rg_6_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_rg7_EP4_3_rg7.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_rg7_1
return
;------------------------------
*r_cha_pro_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_pro_EP4_3_pro.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_pro_1
return
;------------------------------
*r_cha_mas_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_mas_EP4_3_mas.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_mas_1
return
;------------------------------
*r_cha_sab_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_sab_EP4_3_sab.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_sab_1
return
;------------------------------
*r_cha_kwa_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_kwa_EP4_3_kwa.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_kwa_1
return
;------------------------------
*r_cha_ber_ep4_3
;Pics
	if ?r[%r_display_cha_enj][condition] = 0 return
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_3_ber_EP4_3_ber.png"
;Text
	if ?r[%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_4_3_ber_1
return
;------------------------------
;----EP5----
;------------------------------
*r_cha_kin_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kin_EP5_1_kin.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_kin_1
return
;------------------------------
*r_cha_kla_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_EP5_1_kla.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_m_EP5_1_kla_m.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_d_EP5_1_kla_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_kla_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_kla_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_5_kla_3
return
;------------------------------
*r_cha_nat_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nat_EP5_1_nat.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_nat_1
return
;------------------------------
*r_cha_jes_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_EP5_1_jes.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_d_EP5_1_jes_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_jes_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_jes_2
return
;------------------------------
*r_cha_eva_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eva_EP5_1_eva.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_eva_1
return
;------------------------------
*r_cha_hid_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_hid_EP5_1_hid.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_hid_d_EP5_1_hid_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_hid_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_hid_2
return
;------------------------------
*r_cha_geo_ep5
;mov ?r[%scenario_Number][%r_display_cha][tati_x],435
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_EP5_1_geo.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_d_EP5_1_geo_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_geo_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_geo_2
return
;------------------------------
*r_cha_rud_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_rud_EP5_1_rud.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_rud_1
return
;------------------------------
*r_cha_kir_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kir_EP5_1_kir.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_kir_1
return
;------------------------------
*r_cha_but_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_but_EP5_1_but.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_but_1
return
;------------------------------
*r_cha_gen_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_gen_EP5_1_gen.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_gen_d_EP5_1_gen_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_gen_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_gen_2
return
;------------------------------
*r_cha_ros_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ros_EP5_1_ros.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ros_d_EP5_1_ros_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_ros_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_ros_2
return
;------------------------------
*r_cha_mar_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_mar_EP5_1_mar.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_mar_d_EP5_1_mar_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_mar_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_5_mar_2
return
;------------------------------
*r_cha_nan_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nan_EP5_1_nan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_nan_1
return
;------------------------------
*r_cha_sha_ep5
;mov ?r[%scenario_Number][%r_display_cha][tati_x],430
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_sha_EP5_1_sha.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_sha_1
return
;------------------------------
*r_cha_kan_ep5
;mov ?r[%scenario_Number][%r_display_cha][tati_x],460
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kan_EP5_1_kan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_kan_1
return
;------------------------------
*r_cha_goh_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_goh_EP5_1_goh.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_goh_1
return
;------------------------------
*r_cha_kum_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kum_EP5_1_kum.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_kum_1
return
;------------------------------
*r_cha_eri_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eri_EP5_1_eri.png"
;if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eri_d_EP5_1_eri_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_eri_1
return
;------------------------------
*r_cha_dla_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_dla_EP5_1_dla.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_dla_1
return
;------------------------------
*r_cha_ger_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ger_EP5_1_ger.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_ger_1
return
;------------------------------
*r_cha_cor_ep5
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_cor_EP5_1_cor.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_5_cor_1
return
;------------------------------
;----EP5_2-----
;------------------------------
*r_cha_lam_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_lam_EP5_2_lam.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_lam_1
return
;------------------------------
*r_cha_ber_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ber_EP5_2_ber.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_ber_1
return
;------------------------------
*r_cha_bea_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_bea_EP5_2_bea.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_bea_d_EP5_2_bea_d.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_bea_11
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_5_2_bea_12
return
;------------------------------
*r_cha_wal_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_wal_EP5_2_wal.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_wal_1
return
;------------------------------
*r_cha_ron_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ron_EP5_2_ron.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_ron_1
return
;------------------------------
*r_cha_gap_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_gap_EP5_2_gap.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_gap_1
return
;------------------------------
*r_cha_s45_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s45_EP5_2_s45.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_s45_1
return
;------------------------------
*r_cha_s410_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s41_EP5_2_s41.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_s41_1
return
;------------------------------
*r_cha_s00_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s00_EP5_2_s00.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_s00_1
return
;------------------------------
*r_cha_s556_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s55_EP5_2_s55.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s55_d_EP5_2_s55_d.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_s55_1
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_5_2_s55_2
return
;------------------------------
*r_cha_rg_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg1_EP5_2_rg1.png"
rnd2 %ran,1,7
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg2_EP5_2_rg2.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg3_EP5_2_rg3.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg4_EP5_2_rg4.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg5_EP5_2_rg5.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg5_1
return
;------------------------------
*r_cha_rg_5_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg6_EP5_2_rg6.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep5_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg7_EP5_2_rg7.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_rg7_1
return
;------------------------------
*r_cha_eri_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_eri_EP5_2_eri.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_eri_1
return
;------------------------------
*r_cha_dla_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_dla_EP5_2_dla.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_dla_1

lsp ma5_dla_btn_lsp,$?r[%scenario_Number][%r_display_cha_ma][?r[%scenario_Number][%r_display_cha_ma][condition]],?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]
if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_dla_megane_EP5_2_dla_megane.png" : mov ?r[%scenario_Number][%r_display_cha_ma][tati_x],440 : lsp ma5_dla_btn_lsp,":c/1,0,3;graphics\chars\chiru\chars_dla1_s.png",?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]
return
;------------------------------
*r_cha_ger_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ger_EP5_2_ger.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_ger_1
return
;------------------------------
*r_cha_cor_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_cor_EP5_2_cor.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_cor_1
return
;------------------------------
*r_cha_but_ep5_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_but_EP5_2_but.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_but_1
return
;------------------------------
;EP6
;------------------------------
*r_cha_kin_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_kin_d_EP6_1_kin_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_kin_1
return
;------------------------------
*r_cha_kla_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_EP5_1_kla.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_m_EP5_1_kla_m.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_d_EP5_1_kla_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_kla_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_kla_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_6_kla_3
return
;------------------------------
*r_cha_nat_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nat_EP5_1_nat.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_nat_d1_EP6_1_nat_d1.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_nat_d2_EP6_1_nat_d2.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_nat_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_nat_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_6_nat_3
return
;------------------------------
*r_cha_jes_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_EP5_1_jes.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_d_EP5_1_jes_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_jes_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_jes_2
return
;------------------------------
*r_cha_eva_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eva_EP5_1_eva.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_eva_d1_EP6_1_eva_d1.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_eva_d2_EP6_1_eva_d2.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_eva_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_eva_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_6_eva_3
return
;------------------------------
*r_cha_hid_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_hid_EP5_1_hid.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_hid_d_EP5_1_hid_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_hid_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_hid_2
return
;------------------------------
*r_cha_geo_ep6
;mov ?r[%scenario_Number][%r_display_cha][tati_x],435
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_EP5_1_geo.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_d_EP5_1_geo_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_geo_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_geo_2
return
;------------------------------
*r_cha_rud_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_rud_EP5_1_rud.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_rud_1
return
;------------------------------
*r_cha_kir_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kir_EP5_1_kir.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_kir_d1_EP6_1_kir_d1.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_kir_d2_EP6_1_kir_d2.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_kir_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_kir_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_6_kir_3
return
;------------------------------
*r_cha_but_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_but_EP5_1_but.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_but_d1_EP6_1_but_d1.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_but_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_but_2
return
;------------------------------
*r_cha_gen_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_gen_EP5_1_gen.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_gen_d_EP5_1_gen_d.png"


if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_gen_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_gen_2
return
;------------------------------
*r_cha_ros_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ros_EP5_1_ros.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_ros_d1_EP6_1_ros_d1.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_ros_d2_EP6_1_ros_d2.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_ros_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_ros_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_6_ros_3
return
;------------------------------
*r_cha_mar_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_mar_EP5_1_mar.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_mar_d1_EP6_1_mar_d1.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_mar_d2_EP6_1_mar_d2.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_mar_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_mar_2
if ?r[%scenario_Number][%r_display_cha][condition] = 3 mov $r_txt_path,chars_6_mar_3
return
;------------------------------
*r_cha_nan_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nan_EP5_1_nan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_nan_1
return
;------------------------------
*r_cha_sha_ep6
;mov ?r[%scenario_Number][%r_display_cha][tati_x],430
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_sha_EP5_1_sha.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_sha_1
return
;------------------------------
*r_cha_kan_ep6
;mov ?r[%scenario_Number][%r_display_cha][tati_x],460
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kan_EP5_1_kan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_kan_1
return
;------------------------------
*r_cha_goh_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_goh_EP5_1_goh.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_goh_1
return
;------------------------------
*r_cha_kum_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kum_EP5_1_kum.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_kum_1
return
;------------------------------
*r_cha_eri_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eri_EP5_1_eri.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_1_eri_d_EP6_1_eri_d.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_eri_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_6_eri_2
return
;------------------------------
*r_cha_dla_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_dla_EP5_1_dla.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_dla_1
return
;------------------------------
*r_cha_ger_ep6

if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ger_EP5_1_ger.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_ger_1
return
;------------------------------
*r_cha_cor_ep6
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_cor_EP5_1_cor.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_6_cor_1
return
;------------------------------
*r_cha_lam_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_lam_EP5_2_lam.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_lam_1
return
;------------------------------
*r_cha_ber_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ber_EP5_2_ber.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_ber_1
return
;------------------------------
*r_cha_bea_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_bea_EP6_2_bea.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_bea_1
return
;------------------------------
*r_cha_be2_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_be2_1_EP6_2_be2_1.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_be2_1_EP6_2_be2_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_be2_1
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_6_2_be2_2
return
;------------------------------
*r_cha_enj_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_enj_EP5_2_enj.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_enj_1
return
;------------------------------
*r_cha_kin_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_kin_EP5_2_kin.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_5_2_kin_1
return
;------------------------------
*r_cha_wal_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_wal_EP5_2_wal.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_wal_1
return
;------------------------------
*r_cha_ron_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ron_EP5_2_ron.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_ron_1
return
;------------------------------
*r_cha_gap_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_gap_EP5_2_gap.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_gap_1
return
;------------------------------
*r_cha_s45_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s45_EP5_2_s45.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_s45_1
return
;------------------------------
*r_cha_s410_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s41_EP5_2_s41.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_s41_1
return
;------------------------------
*r_cha_s00_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s00_EP5_2_s00.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_s00_1
return
;------------------------------
*r_cha_s556_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s55_EP5_2_s55.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s55_d_EP5_2_s55_d.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_s55_1
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_6_2_s55_2
return
;------------------------------
*r_cha_rg_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg1_EP5_2_rg1.png"
rnd2 %ran,1,7
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg2_EP5_2_rg2.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg3_EP5_2_rg3.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg4_EP5_2_rg4.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg5_EP5_2_rg5.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg5_1
return
;------------------------------
*r_cha_rg_5_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg6_EP5_2_rg6.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep6_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg7_EP5_2_rg7.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_rg7_1
return
;------------------------------
*r_cha_goa_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_goa_1_EP6_2_goa_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_goa_1
return
;------------------------------
*r_cha_eri_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
mov %ran,0
rnd2 %ran,1,16
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_eri_EP5_2_eri.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_eri_1d_EP6_2_eri_1d.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_eri_1
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_6_2_eri_2

if ?r[6][%r_display_cha_ma][r_ishou] = 2 && ?r[6][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_eri_1_EP6_2_eri_1.png"
if %ran = 15 && ?r[6][%r_display_cha_ma][r_ishou] = 2 && ?r[6][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_eri_2_EP6_2_eri_2.png"
return
;------------------------------
*r_cha_dla_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
mov %ran,0
rnd2 %ran,1,16
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_dla_EP5_2_dla.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 && %ran = 15 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_dla_megane_EP5_2_dla_megane.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_dla_1
return
;------------------------------
*r_cha_ger_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ger_EP5_2_ger.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_ger_1
return
;------------------------------
*r_cha_cor_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_cor_EP5_2_cor.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_cor_1
return
;------------------------------
*r_cha_but_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_but_EP6_2_but.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_but_1
return
;------------------------------
*r_cha_zep_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_zep_1_EP6_2_zep_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_zep_1
return
;------------------------------
*r_cha_fur_ep6_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_ful_1_EP6_2_ful_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_6_2_fur_1
return
;------------------------------
*r_cha_ENJ_ep6_3
notif ?r[%scenario_Number][%r_display_cha_enj][r_ishou] = 1 jumpf
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_enj_1_EP6_3_enj_1.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_enj_2_EP6_3_enj_2.png"

	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_6_3_enj_1
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_txt_path,chars_6_3_enj_2
return
~

notif ?r[%scenario_Number][%r_display_cha_enj][r_ishou] = 2 jumpf

	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_enj_2_EP6_3_enj_2.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_enj_2_EP6_3_enj_2.png"

	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_6_3_enj_2
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_txt_path,chars_6_3_enj_2
return
~
;------------------------------
*r_cha_FEA_ep6_3
notif ?r[%scenario_Number][%r_display_cha_enj][r_ishou] = 1 jumpf
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_fea_1_EP6_3_fea_1.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_fea_2_EP6_3_fea_2.png"

	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_6_3_fea_1
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_txt_path,chars_6_3_fea_2
return
~

notif ?r[%scenario_Number][%r_display_cha_enj][r_ishou] = 2 jumpf
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_fea_2_EP6_3_fea_2.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_fea_2_EP6_3_fea_2.png"

	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_6_3_fea_2
	if ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 mov $r_txt_path,chars_6_3_fea_2
return
~
;------------------------------
*r_cha_AMA_ep6_3
if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_3_ama_1_EP6_3_ama_1.png"

if ?r[%scenario_Number][%r_display_cha_enj][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 mov $r_txt_path,chars_6_3_ama_1
return
;------------------------------
;------------------------------
;EP7
;------------------------------
*r_cha_kin_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kin_EP5_1_kin.png" ;: mov ?r[7][kin][tati_x],380
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_1_ki2_EP7_1_ki2.png" ;: mov ?r[7][kin][tati_x],450

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_kin_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_7_kin_2
return
;------------------------------
*r_cha_kla_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_EP5_1_kla.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_kla_1
return
;------------------------------
*r_cha_nat_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nat_EP5_1_nat.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_nat_1
return
;------------------------------
*r_cha_jes_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_EP5_1_jes.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_jes_1
return
;------------------------------
*r_cha_eva_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eva_EP5_1_eva.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_eva_1
return
;------------------------------
*r_cha_hid_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_hid_EP5_1_hid.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_hid_1
return
;------------------------------
*r_cha_geo_ep7
;mov ?r[%scenario_Number][%r_display_cha][tati_x],435
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_EP5_1_geo.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_geo_1
return
;------------------------------
*r_cha_rud_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_rud_EP5_1_rud.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_rud_1
return
;------------------------------
*r_cha_kir_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kir_EP5_1_kir.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_kir_1
return
;------------------------------
*r_cha_but_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_but_EP5_1_but.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_but_1
return
;------------------------------
*r_cha_gen_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_gen_EP5_1_gen.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_gen_1
return
;------------------------------
*r_cha_ros_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ros_EP5_1_ros.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_ros_1
return
;------------------------------
*r_cha_mar_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_mar_EP5_1_mar.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_mar_1
return
;------------------------------
*r_cha_nan_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nan_EP5_1_nan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_nan_1
return
;------------------------------
*r_cha_sha_ep7
;mov ?r[%scenario_Number][%r_display_cha][tati_x],430
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_sha_EP5_1_sha.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_sha_1
return
;------------------------------
*r_cha_kan_ep7
mov ?r[%scenario_Number][%r_display_cha][tati_x],460
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kan_EP5_1_kan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_kan_1
return
;------------------------------
*r_cha_goh_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_goh_EP5_1_goh.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_goh_1
return
;------------------------------
*r_cha_kum_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kum_EP5_1_kum.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_kum_1
return
;------------------------------
*r_cha_rio_ep7
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_1_rio_EP7_1_rio.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_7_rio_1
return
;------------------------------
*r_cha_ber_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
mov %ran,0
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ber_EP5_2_ber.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_ber_1
return
;------------------------------
*r_cha_bea_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_bea_EP5_2_bea.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_bea_1_EP7_2_bea_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_bea_1
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_7_2_bea_2
return
;------------------------------
*r_cha_mar_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep4_2_mar_2_EP4_2_mar_2.png" : mov ?r[%scenario_Number][ma5_mar][tati_x],380

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_mar_1
return
;------------------------------
*r_cha_wal_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_wal_EP5_2_wal.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_wal_1
return
;------------------------------
*r_cha_ron_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ron_EP5_2_ron.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_ron_1
return
;------------------------------
*r_cha_gap_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_gap_EP5_2_gap.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_gap_1
return
;------------------------------
*r_cha_rg_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg1_EP5_2_rg1.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg1_EP7_2_rg1.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg1_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg2_EP5_2_rg2.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg2_EP7_2_rg2.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg2_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg3_EP5_2_rg3.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg3_EP7_2_rg3.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg3_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg4_EP5_2_rg4.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg4_EP7_2_rg4.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg4_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg5_EP5_2_rg5.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg5_EP7_2_rg5.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg5_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg5_1
return
;------------------------------
*r_cha_rg_5_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg6_EP5_2_rg6.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg6_EP7_2_rg6.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg6_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep7_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg7_EP5_2_rg7.png"
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_rg7_EP7_2_rg7.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_rg7_1
	if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov $r_txt_path,chars_7_2_rg7_1
return
;------------------------------
*r_cha_zep_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_zep_1_EP6_2_zep_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_zep_1
return
;------------------------------
*r_cha_fur_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_ful_1_EP6_2_ful_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_fur_1
return
;------------------------------
*r_cha_WIL_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_WIL_1_EP7_2_WIL_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_WIL_1
return
;------------------------------
*r_cha_CUR_ep7_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_2_CUR_1_EP7_2_CUR_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_7_2_CUR_1
return
;------------------------------
;------------------------------
;EP8
;------------------------------
*r_cha_bea_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_1_bea2_EP8_1_bea2.png" : mov ?r[8][kin][tati_x],380

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_bea_1
return
;------------------------------
*r_cha_kin_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kin_EP5_1_kin.png" ;: mov ?r[8][kin][tati_x],380
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep7_1_ki2_EP7_1_ki2.png" ;: mov ?r[8][kin][tati_x],450

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_kin_1
if ?r[%scenario_Number][%r_display_cha][condition] = 2 mov $r_txt_path,chars_8_kin_2
return
;------------------------------
*r_cha_kla_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_EP5_1_kla.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_kla_1
return
;------------------------------
*r_cha_nat_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nat_EP5_1_nat.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_nat_1
return
;------------------------------
*r_cha_jes_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_EP5_1_jes.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_jes_1
return
;------------------------------
*r_cha_eva_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_eva_EP5_1_eva.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_eva_1
return
;------------------------------
*r_cha_hid_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_hid_EP5_1_hid.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_hid_1
return
;------------------------------
*r_cha_geo_ep8
;mov ?r[%scenario_Number][%r_display_cha][tati_x],435
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_EP5_1_geo.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_geo_1
return
;------------------------------
*r_cha_rud_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_rud_EP5_1_rud.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_rud_1
return
;------------------------------
*r_cha_kir_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kir_EP5_1_kir.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_kir_1
return
;------------------------------
*r_cha_but_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_but_EP5_1_but.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_but_1
return
;------------------------------
*r_cha_gen_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_gen_EP5_1_gen.png"


if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_gen_1
return
;------------------------------
*r_cha_ros_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_ros_EP5_1_ros.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_ros_1
return
;------------------------------
*r_cha_mar_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_mar_EP5_1_mar.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_mar_1
return
;------------------------------
*r_cha_nan_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nan_EP5_1_nan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_nan_1
return
;------------------------------
*r_cha_sha_ep8
mov ?r[%scenario_Number][%r_display_cha][tati_x],430
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_sha_EP5_1_sha.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_sha_1
return
;------------------------------
*r_cha_kan_ep8
mov ?r[%scenario_Number][%r_display_cha][tati_x],460
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kan_EP5_1_kan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_kan_1
return
;------------------------------
*r_cha_goh_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_goh_EP5_1_goh.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_goh_1
return
;------------------------------
*r_cha_kum_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kum_EP5_1_kum.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_kum_1
return
;------------------------------
*r_cha_EN2_ep8
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_1_EN2_1_EP8_1_EN2_1.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_8_en2_1
return
;------------------------------
;EP8 Witch
;------------------------------
*r_cha_lam_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_lam_EP5_2_lam.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_lam_1
return
;------------------------------
*r_cha_ber_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ber_EP5_2_ber.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_ber_1
return
;------------------------------
*r_cha_wal_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_wal_EP5_2_wal.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_wal_1
return
;------------------------------
*r_cha_ron_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ron_EP5_2_ron.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_ron_1
return
;------------------------------
*r_cha_gap_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_gap_EP5_2_gap.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_gap_1
return
;------------------------------
*r_cha_s45_ep8_2
;Pics
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s45_EP5_2_s45.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_s45_1
return
;------------------------------
*r_cha_s410_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s41_EP5_2_s41.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_s41_1
return
;------------------------------
*r_cha_s00_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s00_EP5_2_s00.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_s00_1
return
;------------------------------
*r_cha_s556_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s55_EP5_2_s55.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_s55_d_EP5_2_s55_d.png"
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_s55_1
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_8_2_s55_2
return
;------------------------------
*r_cha_rg_ep8_2
;Pics
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg1_EP5_2_rg1.png"
rnd2 %ran,1,7
;Text
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg1_1
return
;------------------------------
*r_cha_rg_1_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg2_EP5_2_rg2.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg2_1
return
;------------------------------
*r_cha_rg_2_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg3_EP5_2_rg3.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg3_1
return
;------------------------------
*r_cha_rg_3_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg4_EP5_2_rg4.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg4_1
return
;------------------------------
*r_cha_rg_4_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg5_EP5_2_rg5.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg5_1
return
;------------------------------
*r_cha_rg_5_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg6_EP5_2_rg6.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg6_1
return
;------------------------------
*r_cha_rg_6_ep8_2
;Pics
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_rg7_EP5_2_rg7.png"
;Text
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_rg7_1
return
;------------------------------
*r_cha_goa_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_goa_1_EP6_2_goa_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_goa_1
return
;------------------------------
*r_cha_eri_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_eri_EP5_2_eri.png"
lsp ma5_eri_btn_lsp,$?r[%scenario_Number][%r_display_cha_ma][?r[%scenario_Number][%r_display_cha_ma][condition]],?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]
if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_eri_1_EP8_2_eri_1.png" : mov ?r[%scenario_Number][%r_display_cha_ma][tati_x],440 : lsp ma5_eri_btn_lsp,":c/1,0,3;graphics\chars\chiru\chars_eri3_s.png",?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_eri_1
return
;------------------------------
*r_cha_dla_ep8_2

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_dla_EP5_2_dla.png"
lsp ma5_dla_btn_lsp,$?r[%scenario_Number][%r_display_cha_ma][?r[%scenario_Number][%r_display_cha_ma][condition]],?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]
if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_dla_megane_EP5_2_dla_megane.png" : mov ?r[%scenario_Number][%r_display_cha_ma][tati_x],440 : lsp ma5_dla_btn_lsp,":c/1,0,3;graphics\chars\chiru\chars_dla1_s.png",?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_dla_1
return
;------------------------------
*r_cha_ger_ep8_2
mov %r_display_cha_ma,ma5_ger
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_ger_EP5_2_ger.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_ger_1
return
;------------------------------
*r_cha_cor_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_2_cor_EP5_2_cor.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_cor_1
return
;------------------------------
*r_cha_zep_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_zep_1_EP6_2_zep_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_zep_1
return
;------------------------------
*r_cha_fur_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep6_2_ful_1_EP6_2_ful_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_fur_1
return
;------------------------------
*r_cha_en2_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_en2_2_EP8_2_en2_2.png"
lsp ma5_en2_btn_lsp,$?r[%scenario_Number][%r_display_cha_ma][?r[%scenario_Number][%r_display_cha_ma][condition]],?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]
if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_en2_1_EP8_2_en2_1.png" : mov ?r[%scenario_Number][%r_display_cha_ma][tati_x],440 : lsp ma5_en2_btn_lsp,":c/1,0,3;graphics\chars\chars_enj0_s.png",?r[%scenario_Number][%r_display_cha_ma][itiran_x],?r[%scenario_Number][%r_display_cha_ma][itiran_y]

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][r_ishou]   = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_en2_1_EP8_2_en2_1.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_en2_1
return
;------------------------------
*r_cha_wr_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_wr_1_EP8_2_wr_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_wr_1
return
;------------------------------
*r_cha_bb_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_bb_1_EP8_2_bb_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_bb_1
return
;------------------------------
*r_cha_ev2_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_ev2_1_EP8_2_ev2_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_ev2_1
return
;------------------------------
*r_cha_fea_ep8_2
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_2_fea_2_EP8_2_fea_2.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_2_fea_2
return
;------------------------------
;EP8_3
;------------------------------
*r_cha_ENJ_ep8_3

notif ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 1 jumpf
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_enj_1_EP8_3_enj_1.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_enj_2_EP8_3_enj_2.png"

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_3_enj_1
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_8_3_enj_2

return

~

notif ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 jumpf

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_enj_2_EP8_3_enj_2.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_enj_2_EP8_3_enj_2.png"

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_3_enj_2
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_8_3_enj_2

return

~
mov %free1, ?r[%scenario_Number][%r_display_cha_ma][r_ishou]
itoa $Free1,%Free1
add$Free1,","
mov %free1, ?r[%scenario_Number][%r_display_cha_ma][condition]
itoa $Free2,%Free1
add $Free1,$Free2
caption $Free1
click
end
;------------------------------
*r_cha_FEA_ep8_3


notif ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 1 jumpf

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_fea_1_EP8_3_fea_1.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_fea_2_EP8_3_fea_2.png"

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_3_fea_1
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_8_3_fea_2

return

~

notif ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 jumpf

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_fea_2_EP8_3_fea_2.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_fea_2_EP8_3_fea_2.png"

	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_3_fea_2
	if ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 mov $r_txt_path,chars_8_3_fea_2

return
;------------------------------
*r_cha_AMA_ep8_3

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep8_3_AMA_1_EP8_3_AMA_1.png"

if ?r[%scenario_Number][%r_display_cha_ma][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 mov $r_txt_path,chars_8_3_AMA_1

return

;------------------------------


;------------------------------
;EP8
;------------------------------
;------------------------------
*r_cha_kla_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kla_EP5_1_kla.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_kla_1
return
;------------------------------
*r_cha_nat_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nat_EP5_1_nat.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_nat_1
return
;------------------------------
*r_cha_jes_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_jes_EP5_1_jes.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_jes_1
return
;------------------------------
*r_cha_geo_bernquiz
;mov ?r[%scenario_Number][%r_display_cha][tati_x],435
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_geo_EP5_1_geo.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_geo_1
return
;------------------------------
*r_cha_but_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_but_EP5_1_but.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_but_1
return
;------------------------------
*r_cha_mar_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_mar_EP5_1_mar.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_mar_1
return
;------------------------------
*r_cha_nan_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_nan_EP5_1_nan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_nan_1
return
;------------------------------
*r_cha_sha_bernquiz
mov ?r[%scenario_Number][%r_display_cha][tati_x],430
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_sha_EP5_1_sha.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_sha_1
return
;------------------------------
*r_cha_kan_bernquiz
mov ?r[%scenario_Number][%r_display_cha][tati_x],460
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kan_EP5_1_kan.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_kan_1
return
;------------------------------
*r_cha_goh_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_goh_EP5_1_goh.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_goh_1
return
;------------------------------
*r_cha_kum_bernquiz
if ?r[%scenario_Number][%r_display_cha][condition] = 0 return
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_cha_tati_path,":a;graphics\big_chars\ep5_1_kum_EP5_1_kum.png"

if ?r[%scenario_Number][%r_display_cha][condition] = 0 mov $r_txt_path,":a;graphics\menu\chars\chars_right.png"
if ?r[%scenario_Number][%r_display_cha][condition] = 1 mov $r_txt_path,chars_bernquiz_kum_1
return
;------------------------------

;**************************************************************
; Right-click feature back title
; Out a confirmation message, do the processing.
;**************************************************************
*rmenu_title_back
	;x: x2+330, y: x2
	;Display of the confirmation message
	lsp title_back_bg_lsp,title_back_bg,716,342,230
	lsp title_back_yes_lsp,title_back_yes,762,432
	lsp title_back_no_lsp,title_back_no,762,508
	print 1

	btndef ""
	
	spbtn title_back_yes_lsp,title_back_yes_lsp
	spbtn title_back_no_lsp,title_back_no_lsp
	
	*rmenu_title_back_btn_lp

	btnwait2 %tmp
	
	notif %tmp = title_back_yes_lsp jumpf
		seplay 9,1001,100
		resettimer
		btndef ""
		csp_grst
		E_A
		waittimer 250
		seplay 9,18,100
		bg black,18,3000,msk_kanon_r
		delay 500
		goto *quick_reload
	~

	if %tmp = title_back_no_lsp seplay 9,1001,100 : _csp title_back_bg_lsp : _csp title_back_yes_lsp : _csp title_back_no_lsp : return
	if %tmp = -1 _csp title_back_bg_lsp : _csp title_back_yes_lsp : _csp title_back_no_lsp : return ;Exit by right-clicking
	if %tmp = -10 _csp title_back_bg_lsp : _csp title_back_yes_lsp : _csp title_back_no_lsp : return ;Exit by ESC
	
	
	goto *rmenu_title_back_btn_lp

;**************************************************************


;*********************************************************
; Version EP2 right-click menu
; Created 17 Nov 2007
;*********************************************************

;----------------------------------------
; Click right system, the main menu




;*********************************************************
;Version EP4 right-click menu
;2008/06/05
;*********************************************************

;----------------------------------------
; Click right system, the main menu

;*********************************************************
;EP5
;*********************************************************


;******************************************************************
;display relevant data from menu
;******************************************************************
;---------------------------------

;Scene 0 (start game)
*rmenu_main_ep4_3_scene_40000
	mov ?r[enj_eva][condition],1
	mov ?r[enj_enj][condition],1
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return
;---------------------------------
*rmenu_main_ep4_2_scene_40001
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_ber][condition],1

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_enj][itiran_x],353 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],490
	mov ?r[ma4_ber][itiran_x],511 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],490
return
;---------------------------------
*rmenu_main_ep4_2_scene_40005
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_4.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],400
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],400

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],537
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],537
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],537
return
;---------------------------------
*rmenu_main_ep4_3_scene_40030
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_5.png"
	
	mov ?r[enj_eva][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_enj][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550
	
return
;---------------------------------
*rmenu_main_ep4_3_scene_40040
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_6.png"
	
	mov ?r[enj_eva][itiran_x],401 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_oko][itiran_x],531 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],390
	mov ?r[enj_enj][itiran_x],401 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550

return
;---------------------------------
*rmenu_main_ep4_3_scene_40050
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_7.png"
	
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],390
	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],550
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550
	
return
;---------------------------------
*rmenu_main_ep4_3_scene_40060
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_8.png"
	
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],390
	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],550
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550
	mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],550
	
return
;---------------------------------
*rmenu_main_ep4_3_scene_40070
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1
	mov ?r[enj_ber][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_8.png"
	
	mov ?r[enj_ber][itiran_x],220 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_ber][itiran_y],390
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],390
	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],550
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550
	mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],550
	
return
;---------------------------------
*rmenu_main_ep4_3_scene_40080
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_8.png"
	
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],390
	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],550
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550
	mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],550
	
return
;---------------------------------
*rmenu_main_ep4_2_scene_40090
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_9.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],400
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],400

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],537
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],537
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],537
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],674

return
;---------------------------------
*rmenu_main_ep4_2_scene_40100
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_10.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],400
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],400

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],537
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],537
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],537
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],674
	mov ?r[ma4_sak][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],674
	
return
;---------------------------------
*rmenu_main_ep4_2_scene_40110
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],1
	mov ?r[ma4_mar][condition],2
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_10.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],400
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],400

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],537
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],537
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],537
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],674
	mov ?r[ma4_sak][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],674
return
;---------------------------------
*rmenu_main_ep4_3_scene_40120
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1
	mov ?r[enj_pro][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_8.png"
	
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],390
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],390
	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],550
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],550
	mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],550
	mov ?r[enj_pro][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_pro][itiran_y],710
	
return
;---------------------------------
*rmenu_main_ep4_3_scene_40130
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1
	mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_11.png"
	
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],290
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],290

	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],450
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],450
	mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],450

	mov ?r[enj_mar][itiran_x],472 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_mar][itiran_y],610
	
	mov ?r[enj_pro][itiran_x],220 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[enj_pro][itiran_y],777
	
return
;---------------------------------
*rmenu_main_ep4_3_scene_40140
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1
	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1
	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1
	mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1
	mov ?r[enj_rg][condition],1
	mov ?r[enj_rg_1][condition],1
	mov ?r[enj_rg_2][condition],1
	mov ?r[enj_rg_3][condition],1
	mov ?r[enj_rg_4][condition],1
	mov ?r[enj_rg_5][condition],1
	mov ?r[enj_rg_6][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_12.png"
	
	mov ?r[enj_eva][itiran_x],472 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_eva][itiran_y],190
	mov ?r[enj_oko][itiran_x],602 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[enj_oko][itiran_y],190

	mov ?r[enj_kas][itiran_x],220 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_kas][itiran_y],350
	mov ?r[enj_enj][itiran_x],472 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_enj][itiran_y],350
	mov ?r[enj_ama][itiran_x],602 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[enj_ama][itiran_y],350

	mov ?r[enj_mar][itiran_x],280 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_mar][itiran_y],510
	;mov ?r[enj_sak][itiran_x],280 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj_sak][itiran_y],510
	mov ?r[enj_rg][itiran_x],410 : mov %tmp,410 : add %tmp,90 : mov ?r[enj_rg][itiran_y],510
	mov ?r[enj_rg_1][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_1][itiran_y],510 ;new rg +95
	mov ?r[enj_rg_2][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_2][itiran_y],510 ;new rg
	mov ?r[enj_rg_3][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_3][itiran_y],510 ;new rg
	mov ?r[enj_rg_4][itiran_x],410 : mov %tmp,410 : add %tmp,90 : mov ?r[enj_rg_4][itiran_y],617 ;new rg
	mov ?r[enj_rg_5][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_5][itiran_y],617 ;new rg
	mov ?r[enj_rg_6][itiran_x],%tmp : add %tmp,90 : mov ?r[enj_rg_6][itiran_y],617 ;new rg

	mov ?r[enj_pro][itiran_x],220 : mov %tmp,184 : add %tmp,r_top_y : mov ?r[enj_pro][itiran_y],777
return
;---------------------------------
*rmenu_main_ep4_2_scene_40150

	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_lam][itiran_x],353 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],490
	mov ?r[ma4_enj][itiran_x],511 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],490
return
;---------------------------------
*rmenu_main_ep4_2_scene_40160
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],1
	mov ?r[ma4_mar][condition],2
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_10.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],400
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],400

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],537
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],537
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],537
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],674
	mov ?r[ma4_sak][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],674
	
return
;---------------------------------
*rmenu_main_ep4_2_scene_40170
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],2
	mov ?r[ma4_mar][condition],2
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_10.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],400
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],400

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],537
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],537
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],537
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],674
	mov ?r[ma4_sak][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],674
return
;---------------------------------
*rmenu_main_ep4_3_scene_40175
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1 : 	mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1 : 	mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1 : 	mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1 : 	mov ?r[enj_rg][condition],1
	mov ?r[enj_sak][condition],1
	mov ?r[enj_rg_1][condition],1
	mov ?r[enj_rg_2][condition],1
	mov ?r[enj_rg_3][condition],1
	mov ?r[enj_rg_4][condition],1
	mov ?r[enj_rg_5][condition],1
	mov ?r[enj_rg_6][condition],1
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"
	
return
;---------------------------------
*rmenu_main_ep4_2_scene_40180
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],2
	mov ?r[ma4_mar][condition],2
	;mov ?r[ma4_s][condition],1
	mov ?r[ma4_s00][condition],1
	mov ?r[ma4_s45][condition],1
	mov ?r[ma4_s410][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_13.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],300
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],300

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],437
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],437
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],437
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],574
	mov ?r[ma4_sak][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],574
	
	mov ?r[ma4_s45][itiran_x],212 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_s45][itiran_y],711
	mov ?r[ma4_s410][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_s410][itiran_y],711
	mov ?r[ma4_s00][itiran_x],392 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_s00][itiran_y],711

return
;---------------------------------
*rmenu_main_ep4_scene_40190
return
;---------------------------------
*rmenu_main_ep4_2_scene_40200
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],2
	mov ?r[ma4_mar][condition],2
	;mov ?r[ma4_s][condition],1	
	mov ?r[ma4_ron][condition],1
	mov ?r[ma4_s00][condition],1
	mov ?r[ma4_s45][condition],1
	mov ?r[ma4_s410][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_14.png"
	
	mov ?r[ma4_lam][itiran_x],302 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],300
	mov ?r[ma4_ber][itiran_x],562 : mov %tmp,5 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],300

	mov ?r[ma4_bea][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],437
	mov ?r[ma4_mar][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],437
	mov ?r[ma4_enj][itiran_x],562 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],437
	
	mov ?r[ma4_kin][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_kin][itiran_y],574
	mov ?r[ma4_sak][itiran_x],432 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],574
	
	mov ?r[ma4_ron][itiran_x],302 : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_ron][itiran_y],711
	
	mov ?r[ma4_s45][itiran_x],432 : mov %tmp,432 : add %tmp,90 : mov ?r[ma4_s45][itiran_y],711
	mov ?r[ma4_s410][itiran_x],%tmp : add %tmp,90 : mov ?r[ma4_s410][itiran_y],711
	mov ?r[ma4_s00][itiran_x],%tmp : mov %tmp,48 : add %tmp,r_top_y : mov ?r[ma4_s00][itiran_y],711
return
;---------------------------------
*rmenu_main_ep4_2_scene_40210
	mov ?r[ma4_ber][condition],1
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],2
	mov ?r[ma4_mar][condition],2
	;mov ?r[ma4_s][condition],1	
	mov ?r[ma4_s00][condition],1
	mov ?r[ma4_s45][condition],1
	mov ?r[ma4_s410][condition],1
	mov ?r[ma4_ron][condition],1
	mov ?r[ma4_wal][condition],1
	mov ?r[ma4_goa][condition],1
	mov ?r[ma4_rg][condition],1
	mov ?r[ma4_rg_1][condition],1
	mov ?r[ma4_rg_2][condition],1
	mov ?r[ma4_rg_3][condition],1
	mov ?r[ma4_rg_4][condition],1
	mov ?r[ma4_rg_5][condition],1
	mov ?r[ma4_rg_6][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_15.png"
	
	mov ?r[ma4_wal][itiran_x],225 : mov %tmp,138 : add %tmp,r_top_y : mov ?r[ma4_wal][itiran_y],640
	mov ?r[ma4_ron][itiran_x],342 : mov %tmp,138 : add %tmp,r_top_y : mov ?r[ma4_ron][itiran_y],640

	
return
;---------------------------------
*rmenu_main_ep4_2_scene_40220
	mov ?r[ma4_ber][condition],1 : 	mov ?r[ma4_lam][condition],1 : mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1 : 	mov ?r[ma4_bea][condition],1 : mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],2 : 	mov ?r[ma4_mar][condition],2 : mov ?r[ma4_s00][condition],1	
	mov ?r[ma4_ron][condition],1 : 	mov ?r[ma4_wal][condition],1 : mov ?r[ma4_goa][condition],1
	mov ?r[ma4_s45][condition],1
	mov ?r[ma4_s410][condition],1
	mov ?r[ma4_rg][condition],1
	mov ?r[ma4_rg_1][condition],1
	mov ?r[ma4_rg_2][condition],1
	mov ?r[ma4_rg_3][condition],1
	mov ?r[ma4_rg_4][condition],1
	mov ?r[ma4_rg_5][condition],1
	mov ?r[ma4_rg_6][condition],1
	mov ?r[ma4_gap][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_2.png"
return
;---------------------------------
*rmenu_main_ep4_3_scene_40230
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1 : mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1 : mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1 : mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1 : mov ?r[enj_rg][condition],1
	mov ?r[enj_sak][condition],1 : mov ?r[enj_mas][condition],1
	mov ?r[enj_rg_1][condition],1
	mov ?r[enj_rg_2][condition],1
	mov ?r[enj_rg_3][condition],1
	mov ?r[enj_rg_4][condition],1
	mov ?r[enj_rg_5][condition],1
	mov ?r[enj_rg_6][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"
return
;---------------------------------
*rmenu_main_ep4_3_scene_40240
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1 : mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1 : mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1 : mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1 : mov ?r[enj_rg][condition],1
	mov ?r[enj_sak][condition],1 : mov ?r[enj_mas][condition],1
	mov ?r[enj_sab][condition],1
	mov ?r[enj_rg_1][condition],1
	mov ?r[enj_rg_2][condition],1
	mov ?r[enj_rg_3][condition],1
	mov ?r[enj_rg_4][condition],1
	mov ?r[enj_rg_5][condition],1
	mov ?r[enj_rg_6][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"
return
;---------------------------------
*rmenu_main_ep4_3_scene_40250
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1 : mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1 : mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1 : mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1 : mov ?r[enj_rg][condition],1
	mov ?r[enj_sak][condition],1 : mov ?r[enj_mas][condition],1
	mov ?r[enj_sab][condition],1 : mov ?r[enj_kwa][condition],1
	mov ?r[enj_rg_1][condition],1
	mov ?r[enj_rg_2][condition],1
	mov ?r[enj_rg_3][condition],1
	mov ?r[enj_rg_4][condition],1
	mov ?r[enj_rg_5][condition],1
	mov ?r[enj_rg_6][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"
return
;---------------------------------
*rmenu_main_ep4_scene_40260
	mov ?r[geo][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40270
	mov ?r[geo][condition],2
	mov ?r[but][condition],-1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_16.png"
return
;---------------------------------
*rmenu_main_ep4_2_scene_40280

	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_mar][condition],2

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_mar][itiran_x],353 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],490
	mov ?r[ma4_bea][itiran_x],511 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],490
return
;---------------------------------
*rmenu_main_ep4_3_scene_40290
	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	mov ?r[enj_enj][condition],1 : mov ?r[enj_eva][condition],1
	mov ?r[enj_oko][condition],1 : mov ?r[enj_kas][condition],1
	mov ?r[enj_ama][condition],1 : mov ?r[enj_pro][condition],1
	mov ?r[enj_mar][condition],1 : mov ?r[enj_rg][condition],1
	mov ?r[enj_sak][condition],1 : mov ?r[enj_mas][condition],1
	mov ?r[enj_sab][condition],1 : mov ?r[enj_kwa][condition],1
	mov ?r[enj_ber][condition],1
	mov ?r[enj_rg_1][condition],1
	mov ?r[enj_rg_2][condition],1
	mov ?r[enj_rg_3][condition],1
	mov ?r[enj_rg_4][condition],1
	mov ?r[enj_rg_5][condition],1
	mov ?r[enj_rg_6][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"
return
;---------------------------------
*rmenu_main_ep4_2_scene_40300

	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_mar][condition],2

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_enj][itiran_x],253 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],490
	mov ?r[ma4_mar][itiran_x],503 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],490
	mov ?r[ma4_bea][itiran_x],621 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],490
return
;---------------------------------
*rmenu_main_ep4_2_scene_40310
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_sak][condition],1
	mov ?r[ma4_bea][condition],1
	mov ?r[ma4_mar][condition],2

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_enj][itiran_x],253 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],520
	mov ?r[ma4_sak][itiran_x],371 : mov %tmp,55 : add %tmp,r_top_y : mov ?r[ma4_sak][itiran_y],383
	mov ?r[ma4_mar][itiran_x],371 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_mar][itiran_y],520
	mov ?r[ma4_bea][itiran_x],621 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],520
return
;---------------------------------
*rmenu_main_ep4_2_scene_40320
	mov ?r[ma4_enj][condition],1
	mov ?r[ma4_bea][condition],1

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_enj][itiran_x],353 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_enj][itiran_y],490
	mov ?r[ma4_bea][itiran_x],511 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_bea][itiran_y],490
return
;---------------------------------
*rmenu_main_ep4_2_scene_40330
	mov ?r[ma4_ber][condition],1 : 	mov ?r[ma4_lam][condition],1 : mov ?r[ma4_enj][condition],1
	mov ?r[ma4_mar][condition],1 : 	mov ?r[ma4_bea][condition],1 : mov ?r[ma4_kin][condition],1
	mov ?r[ma4_sak][condition],1 : 	mov ?r[ma4_mar][condition],2 : mov ?r[ma4_s00][condition],1	
	mov ?r[ma4_ron][condition],1 : 	mov ?r[ma4_wal][condition],1 : mov ?r[ma4_goa][condition],1
	mov ?r[ma4_s45][condition],1
	mov ?r[ma4_s410][condition],1
	mov ?r[ma4_rg][condition],1
	mov ?r[ma4_rg_1][condition],1
	mov ?r[ma4_rg_2][condition],1
	mov ?r[ma4_rg_3][condition],1
	mov ?r[ma4_rg_4][condition],1
	mov ?r[ma4_rg_5][condition],1
	mov ?r[ma4_rg_6][condition],1
	mov ?r[ma4_gap][condition],1
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_2.png"
return
;---------------------------------
*rmenu_main_ep4_scene_40350
	mov ?r[geo][condition],2
	mov ?r[eva][condition],2
	mov ?r[rud][condition],2
	mov ?r[ros][condition],2
	mov ?r[nat][condition],2
	mov ?r[hid][condition],2
	mov ?r[gen][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40360
	mov ?r[geo][condition],2
	mov ?r[eva][condition],2
	mov ?r[rud][condition],2
	mov ?r[ros][condition],2
	mov ?r[nat][condition],2
	mov ?r[hid][condition],2
	mov ?r[gen][condition],2
	mov ?r[mar][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40370
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40380
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40390
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
	mov ?r[kla][condition],2 
return
;---------------------------------
*rmenu_main_ep4_scene_40400
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
	mov ?r[kla][condition],2
	mov ?r[nan][condition],2 : mov ?r[sha][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40410
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
	mov ?r[kla][condition],2 : mov ?r[sha][condition],2
	mov ?r[nan][condition],2 : mov ?r[kin][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40420
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
	mov ?r[kla][condition],2 : mov ?r[sha][condition],2
	mov ?r[nan][condition],2 : mov ?r[kin][condition],2
	mov ?r[goh][condition],2 : mov ?r[kum][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40430
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
	mov ?r[kla][condition],2 : mov ?r[sha][condition],2
	mov ?r[nan][condition],2 : mov ?r[kin][condition],2
	mov ?r[goh][condition],2 : mov ?r[kum][condition],2
	mov ?r[kan][condition],2
return
;---------------------------------
*rmenu_main_ep4_scene_40440
	mov ?r[geo][condition],2 : mov ?r[eva][condition],2
	mov ?r[rud][condition],2 : mov ?r[ros][condition],2
	mov ?r[nat][condition],2 : mov ?r[hid][condition],2
	mov ?r[gen][condition],2 : mov ?r[mar][condition],2
	mov ?r[jes][condition],2 : mov ?r[kir][condition],2
	mov ?r[kla][condition],2 : mov ?r[sha][condition],2
	mov ?r[nan][condition],2 : mov ?r[kin][condition],2
	mov ?r[goh][condition],2 : mov ?r[kum][condition],2
	mov ?r[kan][condition],2
	mov ?r[but][condition],1
	mov ?r[bea][condition],1
	
	mov ?r[bea][itiran_x],200 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[bea][itiran_y],340

	;background lines
	;mov $r_cha_back,":c;bmp\r_click\cha_btn\cha_back3.bmp"
return
;---------------------------------
*rmenu_main_ep4_2_scene_40450
	mov ?r[ma4_lam][condition],1
	mov ?r[ma4_ber][condition],1

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

	mov ?r[ma4_lam][itiran_x],353 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_lam][itiran_y],490
	mov ?r[ma4_ber][itiran_x],511: mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma4_ber][itiran_y],490
return
;---------------------------------
;******************************************************************
; EP3
;******************************************************************

;Scene 10
*rmenu_main_ep3_scene_30000
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],-1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	;background lines
	;mov $r_cha_back,":c;bmp\r_click\cha_btn\cha_back3.bmp"

	;Tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

return

*rmenu_main_ep3_2_scene_30000
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	;background lines
	;mov $r_cha_back,":c;bmp\r_click\cha_btn\cha_back3.bmp"

	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

return
;---------------------------------
*rmenu_main_ep3_scene_30010
*rmenu_main_ep3_scene_30020
*rmenu_main_ep3_scene_30030
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 19 to 22 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return

*rmenu_main_ep3_2_scene_30010
*rmenu_main_ep3_2_scene_30020
*rmenu_main_ep3_2_scene_30030
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_3.png"

	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1
return
;---------------------------------
*rmenu_main_ep3_scene_30021
*rmenu_main_ep3_scene_30031
	;chars
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 19 to 22 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1
return

*rmenu_main_ep3_2_scene_30021
*rmenu_main_ep3_2_scene_30031
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30022
*rmenu_main_ep3_scene_30032
	;chars
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 19 to 22 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return

*rmenu_main_ep3_2_scene_30022
*rmenu_main_ep3_2_scene_30032
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30035
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	mov ?tips[1][tips_flg],1

return

*rmenu_main_ep3_2_scene_30035
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30040
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	mov ?tips[1][tips_flg],1

return

*rmenu_main_ep3_2_scene_30040
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return


;---------------------------------
*rmenu_main_ep3_scene_30050
*rmenu_main_ep3_scene_30060
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return

*rmenu_main_ep3_scene_30051
*rmenu_main_ep3_scene_30061
	gosub *rmenu_main_ep3_scene_30050
	mov ?grim[1][grim_flg],1

return


*rmenu_main_ep3_2_scene_30050
*rmenu_main_ep3_2_scene_30060
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_4.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

return

*rmenu_main_ep3_2_scene_30051
*rmenu_main_ep3_2_scene_30061
	gosub *rmenu_main_ep3_2_scene_30050
	mov ?grim[1][grim_flg],1

return

;---------------------------------
*rmenu_main_ep3_scene_30070
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1
	mov ?grim[1][grim_flg],1

return


*rmenu_main_ep3_2_scene_30070
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1

	mov ?r[ma3_wal][itiran_x],300 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_5.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30071
	goto *rmenu_main_ep3_scene_30070


*rmenu_main_ep3_2_scene_30071
	goto *rmenu_main_ep3_2_scene_30070

;---------------------------------
*rmenu_main_ep3_scene_30080
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1

return


*rmenu_main_ep3_2_scene_30080
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1

	mov ?r[ma3_wal][itiran_x],300 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_5.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1

return

;---------------------------------
*rmenu_main_ep3_scene_30090
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1

return


*rmenu_main_ep3_2_scene_30090
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1

	mov ?r[ma3_wal][itiran_x],300 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_5.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1

return

;---------------------------------
*rmenu_main_ep3_scene_30100
*rmenu_main_ep3_scene_30110
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1

return


*rmenu_main_ep3_scene_30101
	gosub *rmenu_main_ep3_scene_30100
	mov ?grim[2][grim_flg],1
return

*rmenu_main_ep3_2_scene_30100
*rmenu_main_ep3_2_scene_30110
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1

	mov ?r[ma3_wal][itiran_x],300 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230

	mov ?r[ma3_bea][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_5.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return

*rmenu_main_ep3_2_scene_30101
	gosub *rmenu_main_ep3_2_scene_30100
	mov ?grim[2][grim_flg],1

return

;---------------------------------
*rmenu_main_ep3_scene_30120
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30120
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_6.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30130
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30130
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_lam][condition],1

	mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],190
	mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],190
	mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],190

	mov ?r[ma3_ron][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],340
	
	mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],520
	mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],520
	mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],520 ;new rg
	mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],520 ;new rg
	mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],520 ;new rg
	mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],627 ;new rg
	mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],627 ;new rg
	mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],627 ;new rg

	mov ?r[ma3_lam][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_lam][itiran_y],790
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_7.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30140
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30140
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_lam][condition],1
	mov ?r[ma3_ber][condition],1

	mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],190
	mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],190
	mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],190

	mov ?r[ma3_ron][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],340
	
	mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],520
	mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],520
	mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],520 ;new rg
	mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],520 ;new rg
	mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],520 ;new rg
	mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],627 ;new rg
	mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],627 ;new rg
	mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],627 ;new rg

	mov ?r[ma3_ber][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ber][itiran_y],790
	mov ?r[ma3_lam][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_lam][itiran_y],790
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_7.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30150
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30150
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_6.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30160
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30160
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_6.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30170

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30170
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_6.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30180

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30180
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1	
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_6.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30181
	goto *rmenu_main_ep3_scene_30180


*rmenu_main_ep3_2_scene_30181
	goto *rmenu_main_ep3_2_scene_30181

;---------------------------------
*rmenu_main_ep3_scene_30190

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30190
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30200

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30200
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30210

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30210
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30220

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30220
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30230

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30230
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30240

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30240
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30250

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30250
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30260

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30260
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30270

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return


*rmenu_main_ep3_2_scene_30270
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30280

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
return


*rmenu_main_ep3_2_scene_30280
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],159 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],230
	mov ?r[ma3_bea][itiran_x],300 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],230
	mov ?r[ma3_ev2][itiran_x],441 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],230
	
	mov ?r[ma3_ron][itiran_x],441 : mov %tmp,7 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],390
	mov ?r[ma3_s_2][itiran_x],571 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],390
	mov ?r[ma3_s_1][itiran_x],666 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],390
	
	mov ?r[ma3_goa][itiran_x],201 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],550
	mov ?r[ma3_rg][itiran_x],346 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],550
	mov ?r[ma3_rg_1][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],550 ;new rg
	mov ?r[ma3_rg_2][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],550 ;new rg
	mov ?r[ma3_rg_3][itiran_x],631 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],550 ;new rg
	mov ?r[ma3_rg_4][itiran_x],346 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],657 ;new rg +107
	mov ?r[ma3_rg_5][itiran_x],441 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],657 ;new rg
	mov ?r[ma3_rg_6][itiran_x],536 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],657 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_8.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_30281
	gosub *rmenu_main_ep3_scene_30280
	mov ?grim[3][grim_flg],1
return


*rmenu_main_ep3_2_scene_30281
	gosub *rmenu_main_ep3_2_scene_30280
	mov ?grim[3][grim_flg],1
return
;---------------------------------
*rmenu_main_ep3_scene_30282
	gosub *rmenu_main_ep3_scene_30281
	mov ?grim[4][grim_flg],1
return


*rmenu_main_ep3_2_scene_30282
	gosub *rmenu_main_ep3_2_scene_30281
	mov ?grim[4][grim_flg],1
return
;---------------------------------
*rmenu_main_ep3_scene_30283
	goto *rmenu_main_ep3_scene_30282

*rmenu_main_ep3_2_scene_30283
	goto *rmenu_main_ep3_2_scene_30282
;---------------------------------
;************************************

*rmenu_main_ep3_scene_31010

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2
	mov ?r[jes][condition],2

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return


*rmenu_main_ep3_2_scene_31010
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next

	
	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_ber][condition],1
	mov ?r[ma3_lam][condition],1

	
	mov ?r[ma3_bea][itiran_x],241 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],490 ;координаты Ura_tea3_chars
	mov ?r[ma3_ber][itiran_x],441 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma3_ber][itiran_y],490 ;координаты Ura_tea3_chars
	mov ?r[ma3_lam][itiran_x],641 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma3_lam][itiran_y],490 ;координаты Ura_tea3_chars

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return
;************************************

*rmenu_main_ep3_scene_31011
	goto *rmenu_main_ep3_scene_31010

*rmenu_main_ep3_2_scene_31011
	goto *rmenu_main_ep3_2_scene_31010

;---------------------------------
*rmenu_main_ep3_scene_31020

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2
	mov ?r[jes][condition],2

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return


*rmenu_main_ep3_2_scene_31020
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next

	
	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_lam][condition],1

	
	mov ?r[ma3_bea][itiran_x],353 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],490 ;координаты Ura_tea3_chars
	mov ?r[ma3_lam][itiran_x],511 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma3_lam][itiran_y],490 ;координаты Ura_tea3_chars

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_32010

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[bea][condition],-1
	mov ?r[eva][condition],1
	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2
	mov ?r[jes][condition],2


	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return


*rmenu_main_ep3_2_scene_32010
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next

	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	;mov ?r[ma3_s][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1


	mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],290
	mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],290
	mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],290

	;mov ?r[ma3_s][itiran_x],62 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s][itiran_y],%tmp

	mov ?r[ma3_ron][itiran_x],460 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],440
	mov ?r[ma3_s_2][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],440
    mov ?r[ma3_s_1][itiran_x],685 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],440
	
	mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],620
	mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],620
	mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],620 ;new rg
	mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],620 ;new rg
	mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],620 ;new rg
	mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],727 ;new rg
	mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],727 ;new rg
	mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],727 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_2_u.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_32020

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[bea][condition],-1
	mov ?r[eva][condition],1
	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2
	mov ?r[jes][condition],2
	mov ?r[enj][condition],1

	mov ?r[enj][itiran_x],720 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[enj][itiran_y],490
	mov ?r[mar][itiran_x],590 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return


*rmenu_main_ep3_2_scene_32020
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next

	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	;mov ?r[ma3_s][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1

	mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],290
	mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],290
	mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],290

	;mov ?r[ma3_s][itiran_x],62 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s][itiran_y],%tmp

	mov ?r[ma3_ron][itiran_x],460 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],440
	mov ?r[ma3_s_2][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],440
    mov ?r[ma3_s_1][itiran_x],685 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],440
	
	mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],620
	mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],620
	mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],620 ;new rg
	mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],620 ;new rg
	mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],620 ;new rg
	mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],727 ;new rg
	mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],727 ;new rg
	mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],727 ;new rg
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_2_u.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_32030

	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[bea][condition],-1
	mov ?r[eva][condition],1
	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2
	mov ?r[jes][condition],2
	mov ?r[enj][condition],1

	mov ?r[enj][itiran_x],720 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[enj][itiran_y],490
	mov ?r[mar][itiran_x],590 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return


*rmenu_main_ep3_2_scene_32030
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next

	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	;mov ?r[ma3_s][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1
	mov ?r[ma3_ber][condition],1


	mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],190
	mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],190
	mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],190

	mov ?r[ma3_ron][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],340
	mov ?r[ma3_s_2][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],340
	mov ?r[ma3_s_1][itiran_x],685 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],340

	mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],520
	mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],520
	mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],520 ;new rg
	mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],520 ;new rg
	mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],520 ;new rg
	mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],627 ;new rg
	mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],627 ;new rg
	mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],627 ;new rg
	
	mov ?r[ma3_ber][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ber][itiran_y],790
	
	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_2_u2.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return
;---------------------------------
*rmenu_main_ep3_scene_32040
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep3 : mov ?r[%tmp][condition],-1 : next

	mov ?r[bea][condition],-1
	mov ?r[eva][condition],1
	mov ?r[kin][condition],2
	mov ?r[gen][condition],2
	mov ?r[sha][condition],2
	mov ?r[kan][condition],2
	mov ?r[goh][condition],2
	mov ?r[kum][condition],2
	mov ?r[ros][condition],2
	mov ?r[mar][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[hid][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[geo][condition],2
	mov ?r[nan][condition],2
	mov ?r[but][condition],2
	mov ?r[jes][condition],2
	mov ?r[enj][condition],1

	mov ?r[enj][itiran_x],720 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[enj][itiran_y],490
	mov ?r[mar][itiran_x],590 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return


*rmenu_main_ep3_2_scene_32040
	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next

	;chars
	for %tmp = 1 to char_max_ep3_2 : mov ?r[%tmp][condition],-1 : next
	;mov ?r[enj][condition],-1

	mov ?r[ma3_bea][condition],1
	mov ?r[ma3_rg][condition],1
	mov ?r[ma3_rg_1][condition],1
	mov ?r[ma3_rg_2][condition],1
	mov ?r[ma3_rg_3][condition],1
	mov ?r[ma3_rg_4][condition],1
	mov ?r[ma3_rg_5][condition],1
	mov ?r[ma3_rg_6][condition],1
	mov ?r[ma3_goa][condition],1
	mov ?r[ma3_ron][condition],1
	mov ?r[ma3_wal][condition],1
	mov ?r[ma3_ev2][condition],1
	;mov ?r[ma3_s][condition],1
	mov ?r[ma3_s_1][condition],1
	mov ?r[ma3_s_2][condition],1
	mov ?r[ma3_ber][condition],1
	mov ?r[ma3_enj][condition],1

	mov ?r[ma3_wal][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_wal][itiran_y],190
	mov ?r[ma3_bea][itiran_x],330 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_bea][itiran_y],190
	mov ?r[ma3_ev2][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ev2][itiran_y],190
	mov ?r[ma3_enj][itiran_x],720 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_enj][itiran_y],190

	mov ?r[ma3_ron][itiran_x],460 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_ron][itiran_y],340
	mov ?r[ma3_s_2][itiran_x],590 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_2][itiran_y],340
	mov ?r[ma3_s_1][itiran_x],685 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[ma3_s_1][itiran_y],340

	mov ?r[ma3_goa][itiran_x],220 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_goa][itiran_y],520
	mov ?r[ma3_rg][itiran_x],365 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[ma3_rg][itiran_y],520
	mov ?r[ma3_rg_1][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_1][itiran_y],520 ;new rg
	mov ?r[ma3_rg_2][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_2][itiran_y],520 ;new rg
	mov ?r[ma3_rg_3][itiran_x],650 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_3][itiran_y],520 ;new rg
	mov ?r[ma3_rg_4][itiran_x],365 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_4][itiran_y],627 ;new rg
	mov ?r[ma3_rg_5][itiran_x],460 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_5][itiran_y],627 ;new rg
	mov ?r[ma3_rg_6][itiran_x],555 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_rg_6][itiran_y],627 ;new rg

	mov ?r[ma3_ber][itiran_x],200 : mov %tmp,14 : add %tmp,r_top_y : mov ?r[ma3_ber][itiran_y],790

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_2.png"

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

return

;******************************************************************
;EP2
;******************************************************************

;---------------------------------

*rmenu_main_ep2_scene_10
	;chars
	for %tmp = 1 to char_max_ep2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	
	mov ?r[geo][condition],1
	mov ?r[sha][condition],1

	
	mov ?tips[1][tips_flg],1

	mov ?r[geo][r_ishou],2
	mov ?r[sha][r_ishou],2

	mov ?r[geo][itiran_x],353 : mov %tmp,590 : add %tmp,r_top_y : mov ?r[geo][itiran_y],490 ;*umi2_op 
	mov ?r[sha][itiran_x],511 : mov %tmp,330 : add %tmp,r_top_y : mov ?r[sha][itiran_y],490 ;*umi2_op 
	mov %r_display_cha,sha

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return


*rmenu_main_ep2_scene_20
	;chars
	;for %tmp = 1 to char_max_ep2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	;for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next

	;mov ?r[sha][condition],1
	
	;mov ?tips[1][tips_flg],1
	
	;mov ?r[sha][itiran_x],80 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[sha][itiran_y],%tmp
	;mov %r_display_cha,sha

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	;chars
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 19 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?tips[1][tips_flg],1

return


*rmenu_main_ep2_scene_30
	;chars
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 19 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?tips[1][tips_flg],1
return

*rmenu_main_ep2_scene_31
	gosub *rmenu_main_ep2_scene_30

	mov ?grim[1][grim_flg],1
return

*rmenu_main_ep2_scene_40
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?r[bea][condition],1

	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1

return

*rmenu_main_ep2_scene_41
	gosub *rmenu_main_ep2_scene_40

	mov ?grim[2][grim_flg],1
return

*rmenu_main_ep2_scene_42
	gosub *rmenu_main_ep2_scene_41

	mov ?grim[3][grim_flg],1
return

*rmenu_main_ep2_scene_45
	;chars
	for %tmp = 1 to char_max_ep2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?r[jes][condition],1
	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	
	mov ?r[jes][itiran_x],441 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[jes][itiran_y],490 ;*umi2_3
	mov %r_display_cha,jes

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return

*rmenu_main_ep2_scene_46
	;chars
	for %tmp = 1 to char_max_ep2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?r[jes][condition],1
	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	
	mov ?r[jes][itiran_x],441 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[jes][itiran_y],490 ;*umi2_3
	mov %r_display_cha,jes

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return


*rmenu_main_ep2_scene_50
*rmenu_main_ep2_scene_51
	;chars
	for %tmp = 1 to char_max_ep2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?r[jes][condition],1
	mov ?r[kan][condition],1

	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1

	mov ?r[jes][r_ishou],2
	mov ?r[kan][r_ishou],2
	
	mov ?r[jes][itiran_x],353 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[jes][itiran_y],490 ;*umi2_3
	mov ?r[kan][itiran_x],511 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[kan][itiran_y],490 ;*umi2_3
	mov %r_display_cha,jes

	;background lines
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return

*rmenu_main_ep2_scene_52
	gosub *rmenu_main_ep2_scene_50
return


*rmenu_main_ep2_scene_60
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1

return


*rmenu_main_ep2_scene_70
*rmenu_main_ep2_scene_71
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	

	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	
	mov ?r[bea][condition],2
return


*rmenu_main_ep2_scene_80
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov ?tips[1][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	
	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
return


*rmenu_main_ep2_scene_90
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	
	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
return


*rmenu_main_ep2_scene_100
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1

	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
return

*rmenu_main_ep2_scene_101
	gosub *rmenu_main_ep2_scene_100

	mov ?grim[4][grim_flg],1
return

*rmenu_main_ep2_scene_102
	gosub *rmenu_main_ep2_scene_100

	mov ?grim[4][grim_flg],1
return


*rmenu_main_ep2_scene_110
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grimЃi–‚Џ—‚М”и•¶‚М‚Э•\Ћ¦Ѓj
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	
	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
return


*rmenu_main_ep2_scene_120
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grimЃi–‚Џ—‚М”и•¶‚М‚Э•\Ћ¦Ѓj
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],2
return


*rmenu_main_ep2_scene_130
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],3
return


*rmenu_main_ep2_scene_140
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grimЃi–‚Џ—‚М”и•¶‚М‚Э•\Ћ¦Ѓj
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1


	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],3
	mov ?r[nan][condition],2
	mov ?r[kum][condition],2
return


*rmenu_main_ep2_scene_150
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],3
	mov ?r[nan][condition],2
	mov ?r[kum][condition],2
return


*rmenu_main_ep2_scene_160
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	
	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],3
	mov ?r[nan][condition],3
	mov ?r[kum][condition],3
return


*rmenu_main_ep2_scene_170
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	
	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],3
	mov ?r[nan][condition],3
	mov ?r[kum][condition],3
	mov ?r[geo][condition],2
	mov ?r[sha][condition],2
	mov ?r[goh][condition],2
return


*rmenu_main_ep2_scene_180
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1
	mov ?tips[5][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[bea][condition],2
	mov ?r[kla][condition],2
	mov ?r[nat][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[jes][condition],2
	mov ?r[kan][condition],3
	mov ?r[nan][condition],3
	mov ?r[kum][condition],3
	mov ?r[geo][condition],2
	mov ?r[sha][condition],2
	mov ?r[goh][condition],2
return

;*************teatime_2***************

*rmenu_main_ep2_scene_1010
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],2 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1
	mov ?tips[5][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[bea][condition],0
	mov ?r[but][condition],0
	mov ?r[kan][condition],3
	mov ?r[nan][condition],3
	mov ?r[kum][condition],3
return


*rmenu_main_ep2_scene_1020
	;chars
	for %tmp = 1 to 19 : mov ?r[%tmp][condition],2 : next
	for %tmp = 20 to 21 : mov ?r[%tmp][condition],-1 : next

	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1
	mov ?tips[5][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[bea][condition],1
	mov ?r[but][condition],0
	mov ?r[kan][condition],3
	mov ?r[nan][condition],3
	mov ?r[kum][condition],3
return



;*************ura_teatime_2***************

;(Show only Bern and Beato ura_teatime_2) Scene 2010
*rmenu_main_ep2_scene_2010

	;chars
	for %tmp = 1 to char_max_ep2_2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1
	mov ?tips[5][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	
	mov ?r[ma_bea][condition],1
	mov ?r[ma_ber][condition],1

	mov ?r[ma_bea][itiran_x],353 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[ma_bea][itiran_y],490 ;координаты Ura_tea2_chars
	mov ?r[ma_ber][itiran_x],511 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[ma_ber][itiran_y],490 ;координаты Ura_tea2_chars
	;mov ?r[ma_bea][itiran_x],62 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma_bea][itiran_y],900 ;ura2
	;mov ?r[ma_ber][itiran_x],106 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma_ber][itiran_y],900 ;ura2
	mov %r_display_cha,ma_bea
	;mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return


;Scene 2020 (Tea Party back, appeared )
*rmenu_main_ep2_scene_2020

	;chars
	for %tmp = 1 to char_max_ep2_2 : mov ?r[%tmp][condition],-1 : next
	
	;tips, grim
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next


	
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1
	mov ?tips[5][tips_flg],1

	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	
	mov ?r[ma_bea][condition],1
	mov ?r[ma_ber][condition],1
	mov ?r[ma_lam][condition],1

	
	mov ?r[ma_bea][itiran_x],241 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[ma_bea][itiran_y],490 ;координаты Ura_tea2_chars
	mov ?r[ma_ber][itiran_x],441 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[ma_ber][itiran_y],490 ;координаты Ura_tea2_chars
	mov ?r[ma_lam][itiran_x],641 : mov %tmp,192 : add %tmp,r_top_y : mov ?r[ma_lam][itiran_y],490 ;координаты Ura_tea2_chars
	;mov ?r[ma_bea][itiran_x],38 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma_bea][itiran_y],%tmp
	;mov ?r[ma_ber][itiran_x],84 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma_ber][itiran_y],%tmp
	;mov ?r[ma_lam][itiran_x],130 : mov %tmp,72 : add %tmp,r_top_y : mov ?r[ma_lam][itiran_y],%tmp
	mov %r_display_cha,ma_lam
	;mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
return

;chiru
;******************************************************************
; EP5
;******************************************************************
*rmenu_main_ep5_scene_50000

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------

*rmenu_main_ep5_2_scene_50000

	mov ?r[5][ma5_but][condition],1
	mov ?r[5][ma5_WAL][condition],1
	mov ?r[5][ma5_BEA][condition],1
	mov ?r[5][ma5_RON][condition],1
	mov ?r[5][ma5_GAP][condition],1
	mov ?r[5][ma5_LAM][condition],1
	mov ?r[5][ma5_BER][condition],1
	mov ?r[5][ma5_rg][condition],1
	mov ?r[5][ma5_rg_1][condition],1
	mov ?r[5][ma5_rg_2][condition],1
	mov ?r[5][ma5_rg_3][condition],1
	mov ?r[5][ma5_rg_4][condition],1
	mov ?r[5][ma5_rg_5][condition],1
	mov ?r[5][ma5_rg_6][condition],1
	
	mov ?r[5][ma5_bea][itiran_y],229+72
	mov ?r[5][ma5_wal][itiran_y],375+72
	mov ?r[5][ma5_ron][itiran_y],375+72
	mov ?r[5][ma5_gap][itiran_y],375+72
	mov ?r[5][ma5_rg][itiran_y],522+72
	mov ?r[5][ma5_rg_1][itiran_y],522+72
	mov ?r[5][ma5_rg_2][itiran_y],522+72
	mov ?r[5][ma5_rg_3][itiran_y],522+72
	mov ?r[5][ma5_rg_4][itiran_y],522+72
	mov ?r[5][ma5_rg_5][itiran_y],522+72
	mov ?r[5][ma5_rg_6][itiran_y],522+72
	mov ?r[5][ma5_but][itiran_y],375+72
	mov ?r[5][ma5_lam][itiran_y],375+72
	mov ?r[5][ma5_ber][itiran_y],229+72
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep5_2_50000.png"

return

;---------------------------------
*rmenu_main_ep5_scene_50005

	mov ?r[5][hid][condition],2
	mov ?r[5][ros][condition],2
	mov ?r[5][jes][condition],2
	mov ?r[5][geo][condition],2
	mov ?r[5][mar][condition],2
	mov ?r[5][gen][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep5_2_scene_50005

	gosub *rmenu_main_ep5_2_scene_50000

return


;---------------------------------
*rmenu_main_ep5_scene_50010

	mov ?r[5][hid][condition],1
	mov ?r[5][ros][condition],1
	mov ?r[5][jes][condition],1
	mov ?r[5][geo][condition],1
	mov ?r[5][mar][condition],1
	mov ?r[5][gen][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep5_2_scene_50010

	gosub *rmenu_main_ep5_2_scene_50000

return

;---------------------------------
*rmenu_main_ep5_scene_50015

	mov ?r[5][eri][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------

*rmenu_main_ep5_2_scene_50015

	mov ?r[5][ma5_eri][condition],1
	
	mov ?r[5][ma5_eri][itiran_y],375+72
	
	gosub *rmenu_main_ep5_2_scene_50000

return

;---------------------------------
*rmenu_main_ep5_scene_50020

	gosub *rmenu_main_ep5_scene_50015

return

;---------------------------------

*rmenu_main_ep5_2_scene_50020

	gosub *rmenu_main_ep5_2_scene_50015
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep5_2_50020.png"

return
;---------------------------------
*rmenu_main_ep5_scene_50030

	mov ?r[5][ros][condition],2
	mov ?r[5][jes][condition],2
	mov ?r[5][geo][condition],2
	mov ?r[5][mar][condition],2
	mov ?r[5][eri][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"	;cha_back17

return

;---------------------------------

*rmenu_main_ep5_2_scene_50030

	gosub *rmenu_main_ep5_2_scene_50020

return

;---------------------------------
*rmenu_main_ep5_scene_50031

	gosub *rmenu_main_ep5_scene_50030
	mov ?r[5][gen][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep5_2_scene_50031

	gosub *rmenu_main_ep5_2_scene_50020

return

;---------------------------------
*rmenu_main_ep5_scene_50032

	gosub *rmenu_main_ep5_scene_50031
	mov ?r[5][kla][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep5_2_scene_50032

	gosub *rmenu_main_ep5_2_scene_50020

return

;---------------------------------
*rmenu_main_ep5_scene_50035

	gosub *rmenu_main_ep5_scene_50032

return

;---------------------------------
*rmenu_main_ep5_2_scene_50035

	gosub *rmenu_main_ep5_2_scene_50015
	mov ?r[5][ma5_dla][condition],1
	
	mov ?r[5][ma5_dla][itiran_y],522+72
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep5_2_50035.png"

return

;---------------------------------
*rmenu_main_ep5_scene_50036

	gosub *rmenu_main_ep5_scene_50032
	
	mov ?tips[1][tips_flg],1

return

;---------------------------------
*rmenu_main_ep5_2_scene_50036

	gosub *rmenu_main_ep5_2_scene_50035
	
	mov ?tips[1][tips_flg],1

return

;---------------------------------
*rmenu_main_ep5_scene_50040

	gosub *rmenu_main_ep5_scene_50036

return

;---------------------------------
*rmenu_main_ep5_2_scene_50040

	mov ?r[5][ma5_but][condition],1
	mov ?r[5][ma5_WAL][condition],1
	mov ?r[5][ma5_BEA][condition],1
	mov ?r[5][ma5_RON][condition],1
	mov ?r[5][ma5_GAP][condition],1
	mov ?r[5][ma5_LAM][condition],1
	mov ?r[5][ma5_BER][condition],1
	mov ?r[5][ma5_rg][condition],1
	mov ?r[5][ma5_rg_1][condition],1
	mov ?r[5][ma5_rg_2][condition],1
	mov ?r[5][ma5_rg_3][condition],1
	mov ?r[5][ma5_rg_4][condition],1
	mov ?r[5][ma5_rg_5][condition],1
	mov ?r[5][ma5_rg_6][condition],1
	mov ?r[5][ma5_eri][condition],1
	mov ?r[5][ma5_dla][condition],1
	mov ?r[5][ma5_s45][condition],1
	mov ?r[5][ma5_s410][condition],1
	mov ?r[5][ma5_s00][condition],1
	mov ?r[5][ma5_s556][condition],2
	mov ?r[5][ma5_cor][condition],1
	mov ?r[5][ma5_ger][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep5_2.png"

	mov ?tips[1][tips_flg],1

return

;---------------------------------
*rmenu_main_ep5_scene_50050

	gosub *rmenu_main_ep5_scene_50040
	mov ?r[5][HID][condition],2

return

;---------------------------------
*rmenu_main_ep5_2_scene_50050

	gosub *rmenu_main_ep5_2_scene_50040

return

;---------------------------------
*rmenu_main_ep5_scene_50055

	gosub *rmenu_main_ep5_scene_50050
	mov ?r[5][kla][condition],3

return

;---------------------------------
*rmenu_main_ep5_2_scene_50055

	gosub *rmenu_main_ep5_2_scene_50040

return

;---------------------------------
*rmenu_main_ep5_scene_50056

	gosub *rmenu_main_ep5_scene_50055
	
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

return

;---------------------------------
*rmenu_main_ep5_2_scene_50056

	gosub *rmenu_main_ep5_2_scene_50040
	
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1

return

;---------------------------------
*rmenu_main_ep5_scene_50100

	gosub *rmenu_main_ep5_scene_50056

return

;---------------------------------
*rmenu_main_ep5_2_scene_50100

	gosub *rmenu_main_ep5_2_scene_50056

return

;---------------------------------
*rmenu_main_ep5_scene_50110

	gosub *rmenu_main_ep5_scene_50056
	
	mov ?tips[4][tips_flg],1

return

;---------------------------------
*rmenu_main_ep5_2_scene_50110

	gosub *rmenu_main_ep5_2_scene_50056
	
	mov ?tips[4][tips_flg],1

return

;******************************************************************
; EP6
;******************************************************************
*rmenu_main_ep6_scene_60000

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------

*rmenu_main_ep6_2_scene_60000

	mov ?r[6][ma5_but][condition],1
	mov ?r[6][ma5_WAL][condition],1
	mov ?r[6][ma5_RON][condition],1
	mov ?r[6][ma5_GAP][condition],1
	mov ?r[6][ma5_LAM][condition],1
	mov ?r[6][ma5_BER][condition],1
	mov ?r[6][ma5_rg][condition],1
	mov ?r[6][ma5_rg_1][condition],1
	mov ?r[6][ma5_rg_2][condition],1
	mov ?r[6][ma5_rg_3][condition],1
	mov ?r[6][ma5_rg_4][condition],1
	mov ?r[6][ma5_rg_5][condition],1
	mov ?r[6][ma5_rg_6][condition],1
	mov ?r[6][ma5_eri][condition],1
	mov ?r[6][ma5_GOA][condition],1
	mov ?r[6][ma5_dla][condition],1
	mov ?r[6][ma5_cor][condition],1
	mov ?r[6][ma5_ger][condition],1
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_2_60000.png"

return

;---------------------------------

*rmenu_main_ep6_3_scene_60000

	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"	;cha_back.bmp"

return

;---------------------------------
*rmenu_main_ep6_scene_60010

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep6_2_scene_60010

	gosub *rmenu_main_ep6_2_scene_60000

return

;---------------------------------
*rmenu_main_ep6_3_scene_60010

	mov ?r[6][ma5_enj][condition],1

	mov ?r[6][ma5_enj][itiran_x],433 : mov ?r[6][ma5_enj][itiran_y],493

	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

return

;---------------------------------
*rmenu_main_ep6_scene_60011

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep6_2_scene_60011

	gosub *rmenu_main_ep6_2_scene_60010
	
return

;---------------------------------
*rmenu_main_ep6_3_scene_60011

	mov ?r[6][ma5_enj][condition],1
	mov ?r[6][ma5_AMA][condition],1

	mov ?r[6][ma5_enj][itiran_x],433
	mov ?r[6][ma5_AMA][itiran_x],433

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_3_60011.png"

return

;---------------------------------
*rmenu_main_ep6_scene_60012

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep6_2_scene_60012

	gosub *rmenu_main_ep6_2_scene_60011

return

;---------------------------------
*rmenu_main_ep6_3_scene_60012

	mov ?r[6][ma5_enj][condition],1
	mov ?r[6][ma5_AMA][condition],1
	mov ?r[6][ma5_FEA][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_3.png"

return

;---------------------------------
*rmenu_main_ep6_scene_60013

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------

*rmenu_main_ep6_2_scene_60013

	gosub *rmenu_main_ep6_2_scene_60012

return

;---------------------------------
*rmenu_main_ep6_3_scene_60013

	gosub *rmenu_main_ep6_3_scene_60012
	mov ?r[6][ma5_FEA][condition],2

return

;---------------------------------
*rmenu_main_ep6_scene_60020

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep6_2_scene_60020

	gosub *rmenu_main_ep6_2_scene_60013

	mov ?r[6][ma5_BEA][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_2_60020.png"

return

;---------------------------------
*rmenu_main_ep6_3_scene_60020

	gosub *rmenu_main_ep6_3_scene_60013

return

;---------------------------------
*rmenu_main_ep6_scene_60030

	mov ?r[6][eri][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------

*rmenu_main_ep6_2_scene_60030

	gosub *rmenu_main_ep6_2_scene_60020

return

;---------------------------------
*rmenu_main_ep6_3_scene_60030

	gosub *rmenu_main_ep6_3_scene_60020

return

;---------------------------------
*rmenu_main_ep6_scene_60031

	gosub *rmenu_main_ep6_scene_60030

return

;---------------------------------

*rmenu_main_ep6_2_scene_60031

	gosub *rmenu_main_ep6_2_scene_60030
	mov ?r[6][ma5_BE2][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_2.png"

return

;---------------------------------
*rmenu_main_ep6_3_scene_60031

	gosub *rmenu_main_ep6_3_scene_60030

return

;---------------------------------
*rmenu_main_ep6_scene_60040

	gosub *rmenu_main_ep6_scene_60031

return

;---------------------------------

*rmenu_main_ep6_2_scene_60040

	gosub *rmenu_main_ep6_2_scene_60031
	mov ?r[6][ma5_ZEP][condition],1
	mov ?r[6][ma5_FUR][condition],1

return

;---------------------------------
*rmenu_main_ep6_3_scene_60040

	gosub *rmenu_main_ep6_3_scene_60031

return

;---------------------------------
*rmenu_main_ep6_scene_60050

	gosub *rmenu_main_ep6_scene_60040
	mov ?r[6][eva][condition],2

return

;---------------------------------

*rmenu_main_ep6_2_scene_60050

	gosub *rmenu_main_ep6_2_scene_60031	

return

;---------------------------------
*rmenu_main_ep6_3_scene_60050

	gosub *rmenu_main_ep6_3_scene_60040

return

;---------------------------------
*rmenu_main_ep6_scene_60060

	gosub *rmenu_main_ep6_scene_60050
	mov ?r[6][kir][condition],2

return

;---------------------------------

*rmenu_main_ep6_2_scene_60060

	gosub *rmenu_main_ep6_2_scene_60050

return

;---------------------------------
*rmenu_main_ep6_3_scene_60060

	gosub *rmenu_main_ep6_3_scene_60050

return

;---------------------------------
*rmenu_main_ep6_scene_60070

	gosub *rmenu_main_ep6_scene_60060
	mov ?r[6][ros][condition],2

return

;---------------------------------
*rmenu_main_ep6_2_scene_60070

		gosub *rmenu_main_ep6_2_scene_60060

return

;---------------------------------
*rmenu_main_ep6_3_scene_60070

	gosub *rmenu_main_ep6_3_scene_60060

return

;---------------------------------
*rmenu_main_ep6_scene_60071

	gosub *rmenu_main_ep6_scene_60070
	mov ?r[6][mar][condition],2

return

;---------------------------------

*rmenu_main_ep6_2_scene_60071

	gosub *rmenu_main_ep6_2_scene_60070

return

;---------------------------------
*rmenu_main_ep6_3_scene_60071

	gosub *rmenu_main_ep6_3_scene_60070

return

;---------------------------------
*rmenu_main_ep6_scene_60080

	gosub *rmenu_main_ep6_scene_60071
	mov ?r[6][nat][condition],2

return

;---------------------------------
*rmenu_main_ep6_2_scene_60080

	gosub *rmenu_main_ep6_2_scene_60071

return

;---------------------------------
*rmenu_main_ep6_3_scene_60080

	gosub *rmenu_main_ep6_3_scene_60071

return

;---------------------------------
*rmenu_main_ep6_scene_60090

	gosub *rmenu_main_ep6_scene_60080
	mov ?r[6][but][condition],2

return

;---------------------------------

*rmenu_main_ep6_2_scene_60090

	gosub *rmenu_main_ep6_2_scene_60080
	
return

;---------------------------------
*rmenu_main_ep6_3_scene_60090

	gosub *rmenu_main_ep6_3_scene_60080

return

;---------------------------------
*rmenu_main_ep6_scene_60100

	mov ?r[6][eri][condition],1
	mov ?r[6][eva][condition],3
	mov ?r[6][kir][condition],3
	mov ?r[6][ros][condition],3
	mov ?r[6][mar][condition],3
	mov ?r[6][nat][condition],3
	mov ?r[6][but][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

return

;---------------------------------
*rmenu_main_ep6_2_scene_60100

	mov ?r[6][ma5_but][condition],1
	mov ?r[6][ma5_BEA][condition],1
	mov ?r[6][ma5_BE2][condition],1
	mov ?r[6][ma5_WAL][condition],1
	mov ?r[6][ma5_RON][condition],1
	mov ?r[6][ma5_GAP][condition],1
	mov ?r[6][ma5_LAM][condition],1
	mov ?r[6][ma5_BER][condition],1
	mov ?r[6][ma5_rg][condition],1
	mov ?r[6][ma5_rg_1][condition],1
	mov ?r[6][ma5_rg_2][condition],1
	mov ?r[6][ma5_rg_3][condition],1
	mov ?r[6][ma5_rg_4][condition],1
	mov ?r[6][ma5_rg_5][condition],1
	mov ?r[6][ma5_rg_6][condition],1
	mov ?r[6][ma5_eri][condition],1
	mov ?r[6][ma5_GOA][condition],1
	mov ?r[6][ma5_dla][condition],1
	mov ?r[6][ma5_cor][condition],1
	mov ?r[6][ma5_ger][condition],1
	mov ?r[6][ma5_ZEP][condition],1
	mov ?r[6][ma5_FUR][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_2.png"

return

;---------------------------------
*rmenu_main_ep6_3_scene_60100

	mov ?r[6][ma5_enj][condition],1
	mov ?r[6][ma5_AMA][condition],1
	mov ?r[6][ma5_FEA][condition],2

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_3.png"

return

;******************************************************************
; EP7
;******************************************************************
*rmenu_main_ep7_scene_70000

	mov ?r[7][KIN][condition],-1
	mov ?r[7][KLA][condition],-1
	mov ?r[7][NAT][condition],-1
	mov ?r[7][JES][condition],-1
	mov ?r[7][EVA][condition],-1
	mov ?r[7][HID][condition],-1
	mov ?r[7][GEO][condition],-1
	mov ?r[7][RUD][condition],-1
	mov ?r[7][KIR][condition],-1
	mov ?r[7][BUT][condition],-1
	mov ?r[7][ROS][condition],-1
	mov ?r[7][MAR][condition],-1

	mov ?r[7][SHA][condition],-1
	mov ?r[7][KAN][condition],-1
	mov ?r[7][GEN][condition],-1
	mov ?r[7][GOH][condition],-1
	mov ?r[7][KUM][condition],-1
	mov ?r[7][NAN][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"


return

;---------------------------------
*rmenu_main_ep7_2_scene_70000

	mov ?r[7][ma5_BER][condition],1
	mov ?r[7][ma5_BEA][condition],1
	mov ?r[7][ma5_WAL][condition],1
	mov ?r[7][ma5_RON][condition],1
	mov ?r[7][ma5_GAP][condition],1
	mov ?r[7][ma5_MAR][condition],1
	mov ?r[7][ma5_rg][condition],1
	mov ?r[7][ma5_rg_1][condition],1
	mov ?r[7][ma5_rg_2][condition],1
	mov ?r[7][ma5_rg_3][condition],1
	mov ?r[7][ma5_rg_4][condition],1
	mov ?r[7][ma5_rg_5][condition],1
	mov ?r[7][ma5_rg_6][condition],1

	mov ?r[7][ma5_ber][itiran_y],190+92
	mov ?r[7][ma5_mar][itiran_y],340+92
	mov ?r[7][ma5_bea][itiran_y],340+92
	mov ?r[7][ma5_wal][itiran_y],490+92
	mov ?r[7][ma5_ron][itiran_y],490+92
	mov ?r[7][ma5_gap][itiran_y],490+92
	mov ?r[7][ma5_rg][itiran_y],640+92
	mov ?r[7][ma5_rg_1][itiran_y],640+92
	mov ?r[7][ma5_rg_2][itiran_y],640+92
	mov ?r[7][ma5_rg_3][itiran_y],640+92
	mov ?r[7][ma5_rg_4][itiran_y],640+92
	mov ?r[7][ma5_rg_5][itiran_y],640+92
	mov ?r[7][ma5_rg_6][itiran_y],640+92

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep7_2_70000.png"

return

;---------------------------------
*rmenu_main_ep7_scene_70010

	gosub *rmenu_main_ep7_scene_70000
	mov ?tips[1][tips_flg],1	;ＳＳＶＤ

return

;---------------------------------
*rmenu_main_ep7_2_scene_70010

	gosub *rmenu_main_ep7_2_scene_70000
	mov ?tips[1][tips_flg],1	;ＳＳＶＤ

return

;---------------------------------
*rmenu_main_ep7_scene_70011

	gosub *rmenu_main_ep7_scene_70010

return

;---------------------------------
*rmenu_main_ep7_2_scene_70011

	gosub *rmenu_main_ep7_2_scene_70010
	mov ?r[7][ma5_WIL][condition],1
	
	mov ?r[7][ma5_WIL][itiran_y],340+92

return

;---------------------------------
*rmenu_main_ep7_scene_70020

	gosub *rmenu_main_ep7_scene_70011
	mov ?r[7][RIO][condition],1
	
	mov ?r[7][RIO][itiran_x],433 : mov ?r[7][RIO][itiran_y],493
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"

return

;---------------------------------
*rmenu_main_ep7_2_scene_70020

	gosub *rmenu_main_ep7_2_scene_70011

return

;---------------------------------
*rmenu_main_ep7_scene_70030

	mov ?r[7][KIN][condition],1
	mov ?r[7][KLA][condition],1
	mov ?r[7][NAT][condition],1
	mov ?r[7][JES][condition],1
	mov ?r[7][EVA][condition],1
	mov ?r[7][HID][condition],1
	mov ?r[7][GEO][condition],1
	mov ?r[7][RUD][condition],1
	mov ?r[7][KIR][condition],1
	mov ?r[7][BUT][condition],1
	mov ?r[7][ROS][condition],1
	mov ?r[7][MAR][condition],1

	mov ?r[7][SHA][condition],1
	mov ?r[7][KAN][condition],1
	mov ?r[7][GEN][condition],1
	mov ?r[7][GOH][condition],1
	mov ?r[7][KUM][condition],1
	mov ?r[7][NAN][condition],1
	mov ?r[7][RIO][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep7.png"
	mov ?tips[1][tips_flg],1

return

;---------------------------------
*rmenu_main_ep7_2_scene_70030

	gosub *rmenu_main_ep7_2_scene_70020

return

;---------------------------------
*rmenu_main_ep7_scene_70040

	gosub *rmenu_main_ep7_scene_70030

return

;---------------------------------
*rmenu_main_ep7_2_scene_70040

	mov ?r[7][ma5_BER][condition],1
	mov ?r[7][ma5_BEA][condition],1
	mov ?r[7][ma5_WAL][condition],1
	mov ?r[7][ma5_RON][condition],1
	mov ?r[7][ma5_GAP][condition],1
	mov ?r[7][ma5_MAR][condition],1
	mov ?r[7][ma5_rg][condition],1
	mov ?r[7][ma5_rg_1][condition],1
	mov ?r[7][ma5_rg_2][condition],1
	mov ?r[7][ma5_rg_3][condition],1
	mov ?r[7][ma5_rg_4][condition],1
	mov ?r[7][ma5_rg_5][condition],1
	mov ?r[7][ma5_rg_6][condition],1
	mov ?r[7][ma5_ZEP][condition],1
	mov ?r[7][ma5_FUR][condition],1

	mov ?r[7][ma5_WIL][condition],1
	mov ?r[7][ma5_CUR][condition],1
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep7_2.png"
	mov ?tips[1][tips_flg],1

return

;---------------------------------
*rmenu_main_ep7_scene_70100

	gosub *rmenu_main_ep7_scene_70040

return

;---------------------------------
*rmenu_main_ep7_2_scene_70100

	gosub *rmenu_main_ep7_2_scene_70040

return

;******************************************************************
; EP8
;******************************************************************
*rmenu_main_ep8_scene_80000

	mov ?r[8][KIN][condition],-1
	mov ?r[8][KLA][condition],-1
	mov ?r[8][NAT][condition],-1
	mov ?r[8][JES][condition],-1
	mov ?r[8][EVA][condition],-1
	mov ?r[8][HID][condition],-1
	mov ?r[8][GEO][condition],-1
	mov ?r[8][RUD][condition],-1
	mov ?r[8][KIR][condition],-1
	mov ?r[8][BUT][condition],-1
	mov ?r[8][ROS][condition],-1
	mov ?r[8][MAR][condition],-1

	mov ?r[8][SHA][condition],-1
	mov ?r[8][KAN][condition],-1
	mov ?r[8][GEN][condition],-1
	mov ?r[8][GOH][condition],-1
	mov ?r[8][KUM][condition],-1
	mov ?r[8][NAN][condition],-1

	mov ?r[8][EN2][condition],-1
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"	;cha_back3.bmp"

return

;---------------------------------
*rmenu_main_ep8_2_scene_80000
*rmenu_main_ep8_2_scene_80010
*rmenu_main_ep8_2_scene_80011
*rmenu_main_ep8_2_scene_80020
*rmenu_main_ep8_2_scene_80110
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"	;cha_back3.bmp"

return

;---------------------------------
*rmenu_main_ep8_scene_80010

	mov ?r[8][KIN][condition],1
	mov ?r[8][KLA][condition],1
	mov ?r[8][NAT][condition],1
	mov ?r[8][JES][condition],1
	mov ?r[8][EVA][condition],1
	mov ?r[8][HID][condition],1
	mov ?r[8][GEO][condition],1
	mov ?r[8][RUD][condition],1
	mov ?r[8][KIR][condition],1
	mov ?r[8][BUT][condition],1
	mov ?r[8][ROS][condition],1
	mov ?r[8][MAR][condition],1

	mov ?r[8][SHA][condition],1
	mov ?r[8][KAN][condition],1
	mov ?r[8][GEN][condition],1
	mov ?r[8][GOH][condition],1
	mov ?r[8][KUM][condition],1
	mov ?r[8][NAN][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"	;cha_back_28_1.bmp"

return

;---------------------------------
*rmenu_main_ep8_scene_80011

	gosub *rmenu_main_ep8_scene_80010
	
	mov ?r[8][EN2][condition],1
	
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3.png"	;cha_back_29.bmp"

return

;---------------------------------
*rmenu_main_ep8_scene_80020

	gosub *rmenu_main_ep8_scene_80011
	
	mov ?r[8][bea][condition],1

return

;---------------------------------
*rmenu_main_ep8_scene_80030

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80030

	mov ?r[8][ma5_wal][condition],1
	mov ?r[8][ma5_ron][condition],1
	mov ?r[8][ma5_gap][condition],1

	mov ?r[8][ma5_bb][condition],1

	mov ?r[8][ma5_wal][itiran_x],343 : mov ?r[8][ma5_wal][itiran_y],550
	mov ?r[8][ma5_ron][itiran_x],433 : mov ?r[8][ma5_ron][itiran_y],550
	mov ?r[8][ma5_gap][itiran_x],523 : mov ?r[8][ma5_gap][itiran_y],550
	mov ?r[8][ma5_bb][itiran_x],523  : mov ?r[8][ma5_bb][itiran_y],400

	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"	;cha_back3.bmp"

return

;---------------------------------
*rmenu_main_ep8_scene_80040

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80040

	mov ?r[8][ma5_wal][condition],1
	mov ?r[8][ma5_ron][condition],1
	mov ?r[8][ma5_gap][condition],1

	mov ?r[8][ma5_bb][condition],1
	mov ?r[8][ma5_rg][condition],1
	mov ?r[8][ma5_rg_1][condition],1
	mov ?r[8][ma5_rg_2][condition],1
	mov ?r[8][ma5_rg_3][condition],1
	mov ?r[8][ma5_rg_4][condition],1
	mov ?r[8][ma5_rg_5][condition],1
	mov ?r[8][ma5_rg_6][condition],1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"	;cha_back3.bmp"

return

;---------------------------------
*rmenu_main_ep8_scene_80050

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80050

	gosub *rmenu_main_ep8_2_scene_80040

	mov ?r[8][ma5_s45][condition],1
	mov ?r[8][ma5_s410][condition],1
	mov ?r[8][ma5_s00][condition],1
	mov ?r[8][ma5_s556][condition],2

return

;---------------------------------
*rmenu_main_ep8_scene_80060

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80060

	gosub *rmenu_main_ep8_2_scene_80050
	
	mov ?r[8][ma5_ZEP][condition],1
	mov ?r[8][ma5_FUR][condition],1

return

;---------------------------------
*rmenu_main_ep8_scene_80070

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80070

	gosub *rmenu_main_ep8_2_scene_80060

	mov ?r[8][ma5_dla][condition],1
	mov ?r[8][ma5_ger][condition],1
	mov ?r[8][ma5_cor][condition],1

return

;---------------------------------
*rmenu_main_ep8_scene_80080

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80080

	gosub *rmenu_main_ep8_2_scene_80070

	mov ?r[8][ma5_lam][condition],1

return

;---------------------------------
*rmenu_main_ep8_scene_80090

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80090

	gosub *rmenu_main_ep8_2_scene_80080

	mov ?r[8][ma5_wr][condition],1

return

;---------------------------------
*rmenu_main_ep8_scene_80100

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80100

	gosub *rmenu_main_ep8_2_scene_80090

	mov ?r[8][ma5_ber][condition],1

return

;---------------------------------
*rmenu_main_ep8_scene_80110

	gosub *rmenu_main_ep8_scene_80020

	mov ?r[8][KIN][condition],-1
	
	mov ?r[8][EN2][condition],-1
	mov ?r[8][bea][condition],-1

	mov $r_cha_back,":a;graphics\menu\murder\murder_story_person_left_bg.png"	;cha_back_28_2.bmp"

return

;---------------------------------
*rmenu_main_ep8_scene_80120

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80120

	gosub *rmenu_main_ep8_2_scene_80100
	
	mov ?r[8][ma5_eri][condition],1

return
;---------------------------------
*rmenu_main_ep8_scene_80130

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80130

	gosub *rmenu_main_ep8_2_scene_80120
	
	mov ?r[8][ma5_ev2][condition],1
	mov ?r[8][ma5_goa][condition],1

return
;---------------------------------
*rmenu_main_ep8_scene_80140

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80140

	gosub *rmenu_main_ep8_2_scene_80130

	mov ?r[8][ma5_fea][condition],1

return
;---------------------------------
*rmenu_main_ep8_scene_80150

	gosub *rmenu_main_ep8_scene_80020

return

;---------------------------------
*rmenu_main_ep8_2_scene_80150

	gosub *rmenu_main_ep8_2_scene_80140

	mov ?r[8][ma5_EN2][condition],1

return

;*************************************
;turupettann
;*************************************

*turu_pettann

skip_off
textoff

E_A

setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
change_font 6,6 
border_pad_push 25
csp_grst

lbg s0_3,"black"
flush 22
lbg s0_3,"white"
flush 22
lsp 4,":c;graphics\omake\touhou_1.png",0,0
print 28

mov %tmp,20
lsph %tmp,":s#ffff00ジェシー！！！",0,0 : inc %tmp
lsph %tmp,":s#00ffff　キャーーーーーーーー！！！",0,0 : inc %tmp
lsph %tmp,":s#80ff00　　　　　　　　　　　ｷﾀ━━━(ﾟ∀ﾟ)━━━!!!! ",0,0 : inc %tmp
lsph %tmp,":s#ff0000☆つるぺったん☆　　　　　　　　　　　ジェシ様！！！",0,0 : inc %tmp
lsph %tmp,":s#ffff00ジェシジェシジェシさまぁああぁああ〜〜〜〜〜〜☆",0,0 : inc %tmp
lsph %tmp,":s#0000ffらめぇ〜〜〜〜〜　落ちるぅ〜〜〜〜",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　　　　　ジェシさま最高！！！",0,0 : inc %tmp
lsph %tmp,":s#ff8040　お姉様ぁあああぁああ〜〜〜〜☆",0,0 : inc %tmp

mov %tmp,30
lsph %tmp,":a;graphics\omake\pettan.png",0,0 : inc %tmp
setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ff0000（じゃない！！！）",0,0 : inc %tmp

lsph %tmp,":s#80ff00Title ：つるぺったん",0,0 : inc %tmp
lsph %tmp,":s#00ffffArtist：Silver Forest ",0,0 : inc %tmp


setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
mov %tmp,10
lsph %tmp,":s#00ffffぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffff00　ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ff8040　　ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#80ff00　ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#0000ffぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ff0000　ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#00ffff　　ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffffff　ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp

mov %tmp,40
lsph %tmp,":s#ff0000　　　　( ﾟ∀ﾟ)o彡ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffffff　( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡",0,0 : inc %tmp
lsph %tmp,":s#00ffff　　　( ﾟ∀ﾟ)o彡ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#80ff00( ﾟ∀ﾟ)o彡ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#0000ff　　( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡( ﾟ∀ﾟ)o彡",0,0 : inc %tmp
lsph %tmp,":s#00ffff　　　　　　( ﾟ∀ﾟ)o彡ぺったん☆ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ff8040　( ﾟ∀ﾟ)o彡ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffff00　　( ﾟ∀ﾟ)o彡ぺったん☆ぺったん☆つるぺったん☆",0,0 : inc %tmp


mov %tmp,50
setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#00ffffぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffff00　　　　ぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp

setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ff8040　ぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#80ff00　　　　　ぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#0000ff　　　　ぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ff0000　　ぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp

setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#00ffff　ぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffffffぺったん　　　ぺったん　　　餅ぺったん☆",0,0 : inc %tmp


mov %tmp,60
setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#00ffffぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffff00　　　ぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp

setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ff8040　　　ぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#80ff00ぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#0000ff　　　　　　ぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ff0000　　ぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp

setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#00ffff　　　　　ぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffffffぺったん　　　ぺったん　　　胸ぺったん☆",0,0 : inc %tmp


mov %tmp,70
setwindow4 31,16,36,2500,0,36,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ffff00　　　　　　　　許可取ってんのかよ氏ね",0,0 : inc %tmp
lsph %tmp,":s#ffff00　　　　　　　　　　　　　　　　↑ちゃんと取りました！",0,0 : inc %tmp
lsph %tmp,":a;graphics\omake\pettan_aa2.png",270,0 : inc %tmp

setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ff8040　　　　全俺が萌えた！！！",0,0 : inc %tmp

setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#00ffff☆　　（　＾∇＾）σ）≧∇≦）　　☆",0,0 : inc %tmp

lsph %tmp,":s#ff0000［←樹海］",0,0 : inc %tmp
lsph %tmp,":s#ff0000　　||　　　　オワタ ┗(^o^）┓三",0,0 : inc %tmp
lsph %tmp,":s#ff0000　　||　　　　　　　　┏┗　 三",0,0 : inc %tmp

mov %tmp,80
setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ffff00ヽξ(`・３・)ﾉ うぜぇぜ！",0,0 : inc %tmp
lsph %tmp,":s#ffff00　　（　へ）",0,0 : inc %tmp
lsph %tmp,":s#ffff00　　 く ",0,0 : inc %tmp

setwindow4 31,16,36,2500,0,36,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ff0000この早さなら言える！　朱志香は俺の嫁！！！",0,0 : inc %tmp
lsph %tmp,":s#ff0000　　　　　　　　　　　　　　いや、俺の嫁だ！！！",0,0 : inc %tmp
lsph %tmp,":s#ff0000　　　　　　　　　　　　　　　　　　　朱志香なら、俺の隣で寝ているぜ",0,0 : inc %tmp


;lsph %tmp,":s#ff0000　　　　うぜぇぜ！ヽξ(`・３・)ﾉ ",0,0 : inc %tmp
;lsph %tmp,":s#ff0000　　　　　　　　　　　（へ　）",0,0 : inc %tmp
;lsph %tmp,":s#ff0000　　　 　　　　　　　　　　>  ",0,0 : inc %tmp

setwindow4 31,16,36,2500,0,36,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
mov %tmp,110
lsph %tmp,":s#ffffff＼　　　∩─−、　　　＝＝ ",0,0 : inc %tmp
lsph %tmp,":s#ffffff　＼／　●　､_ ｀ヽ 　　＝＝＝",0,0 : inc %tmp
lsph %tmp,":s#ffffff　／＼（　●　●　| つ",0,0 : inc %tmp
lsph %tmp,":s#ffffff　| 　Ｘ＿入＿ノ　　ミ　　　そんな貧乳で俺様が釣られクマ――",0,0 : inc %tmp
lsph %tmp,":s#ffffff　、　（＿／　　　ノ　／⌒l ",0,0 : inc %tmp
lsph %tmp,":s#ffffff　／＼＿＿＿ノ＿／　／　　＝＝＝＝",0,0 : inc %tmp
lsph %tmp,":s#ffffffく　　　　　　　　　　ノ　　＝＝＝＝",0,0 : inc %tmp
lsph %tmp,":s#ffffff　＼　＼＿　　　　　＼",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　＼＿＿）　　　　　＼　　　＝＝＝＝　（⌒",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　　＼　　＿＿＿＿　＼＿＿　　（⌒（⌒",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　　　＼＿＿＿）＿＿＿）（⌒　（⌒　　ズザザザ",0,0 : inc %tmp




mov %tmp,90
lsph %tmp,":a;graphics\omake\pettan_aa1.png",270,0 : inc %tmp
lsph %tmp,":a;graphics\omake\pettan_aa3.png",270,0 : inc %tmp

setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
;lsph %tmp,":s#ff0000全俺が萌えた！！！",0,0 : 
inc %tmp

setwindow4 31,16,50,2500,0,50,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
lsph %tmp,":s#ffffff／hidden／hidden／hidden／hidden／hidden／hidden",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　／hidden／hidden／hidden／hidden／hidden／hidden",0,0 : inc %tmp
lsph %tmp,":s#ffffff／hidden／hidden／hidden／hidden／hidden／hidden",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　　　　　／hidden／hidden／hidden／hidden／hidden／hidden",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　／hidden／hidden／hidden／hidden／hidden／hidden",0,0 : inc %tmp
lsph %tmp,":s#ffffff／hidden／hidden／hidden／hidden／hidden／hidden",0,0 : inc %tmp
;lsph %tmp,":a;graphics\omake\pettan_aa4.png",270,0 : inc %tmp


setwindow4 31,16,72,2500,0,72,%textspeed,1,0,0,1,1,#999999,0,0,1919,1079
mov %tmp,100
lsph %tmp,":s#ffff00きゃーきゃーきゃーーー！！！",0,0 : inc %tmp
lsph %tmp,":s#00ffff　にゃり〜〜〜〜〜ん☆",0,0 : inc %tmp
lsph %tmp,":s#80ff00（＞０＜）★タイが曲がっていてよ★（＞０＜） ",0,0 : inc %tmp
lsph %tmp,":s#ff0000☆つるぺったん☆",0,0 : inc %tmp
lsph %tmp,":s#ffff00ジェシジェシジェシさまぁああぁああ〜〜〜〜〜〜☆",0,0 : inc %tmp
lsph %tmp,":s#0000ffらめぇ〜〜〜〜〜　落ちるぅ〜〜〜〜",0,0 : inc %tmp
lsph %tmp,":s#ffffff　　　　　　　ジェシさま最高！！！",0,0 : inc %tmp
lsph %tmp,":s#ff8040　お姉様ぁあああぁああ〜〜〜〜☆",0,0 : inc %tmp


bgmplay 94,100,1
resettimer


mov %tmp1,1920
mov %tmp2,1920
mov %tmp4,1920
mov %tmp5,1920
mov %tmp6,1920
mov %tmp7,1920
mov %tmp8,1920
mov %tmp9,1920
mov %tmp11,1920

for %tmp10 = 0 to 36000 step 130
	drawclear
	drawsp 4,1,255,0,0
	;drawsp 5,1,255,100,0

		notif %tmp10 >= 0 goto *pettann_50
		notif %tmp10 <= 4900 goto *pettann_50 ;2400
			drawsp 20,1,255,%tmp2,30
			drawsp 21,1,255,%tmp2,30+135
			drawsp 22,1,255,%tmp2,30+135*2
			drawsp 23,1,255,%tmp2,30+135*3
			drawsp 24,1,255,%tmp2,30+135*4
			drawsp 25,1,255,%tmp2,30+135*5
			drawsp 26,1,255,%tmp2,30+135*6
			drawsp 27,1,255,%tmp2,30+135*7
			sub %tmp2,100
		*pettann_50

		notif %tmp10 >= 5000 goto *pettann_60 ;2500
		notif %tmp10 <= 7200 goto *pettann_60 ;4700
			drawsp 30,1,255,860,60
			drawsp 32,1,255,1100,830
			drawsp 33,1,255,1100,890
		*pettann_60

		;notif %tmp10 >= 3500 goto *pettann_70
		;notif %tmp10 <= 4700 goto *pettann_70
			;drawsp 31,1,320,185,280
		;*pettann_70


		notif %tmp10 >= 8000 goto *pettann_100 ;5500
		notif %tmp10 <= 12500 goto *pettann_100 ;7500
			drawsp 10,1,255,%tmp1,30
			drawsp 11,1,255,%tmp1,30+135
			drawsp 12,1,255,%tmp1,30+135*2
			drawsp 13,1,255,%tmp1,30+135*3
			drawsp 14,1,255,%tmp1,30+135*4
			drawsp 15,1,255,%tmp1,30+135*5
			drawsp 16,1,255,%tmp1,30+135*6
			drawsp 17,1,255,%tmp1,30+135*7
			sub %tmp1,100
		*pettann_100

		notif %tmp10 >= 9500 goto *pettann_150 ;6500
		notif %tmp10 <= 16500 goto *pettann_150 ;10000
			drawsp 80,1,255,%tmp8,30
			drawsp 81,1,255,%tmp8,30+65
			drawsp 82,1,255,%tmp8,30+65*2
			drawsp 83,1,255,%tmp8,30+65*5
			drawsp 84,1,255,%tmp8,30+65*6
			drawsp 85,1,255,%tmp8,30+65*7
			drawsp 110,1,255,%tmp8,1000-45*10
			drawsp 111,1,255,%tmp8,1000-45*9
			drawsp 112,1,255,%tmp8,1000-45*8
			drawsp 113,1,255,%tmp8,1000-45*7
			drawsp 114,1,255,%tmp8,1000-45*6
			drawsp 115,1,255,%tmp8,1000-45*5
			drawsp 116,1,255,%tmp8,1000-45*4
			drawsp 117,1,255,%tmp8,1000-45*3
			drawsp 118,1,255,%tmp8,1000-45*2
			drawsp 119,1,255,%tmp8,1000-45
			drawsp 120,1,255,%tmp8,1000
			sub %tmp8,60
		*pettann_150


		notif %tmp10 >= 13500 goto *pettann_200 ;8000
		notif %tmp10 <= 18500 goto *pettann_200 ;11000
			drawsp 40,1,255,%tmp4,30
			drawsp 41,1,255,%tmp4,30+135
			drawsp 42,1,255,%tmp4,30+135*2
			drawsp 43,1,255,%tmp4,30+135*3
			drawsp 44,1,255,%tmp4,30+135*4
			drawsp 45,1,255,%tmp4,30+135*5
			drawsp 46,1,255,%tmp4,30+135*6
			drawsp 47,1,255,%tmp4,30+135*7
			sub %tmp4,100
		*pettann_200

		notif %tmp10 >= 16000 goto *pettann_250 ;9500
		notif %tmp10 <= 22500 goto *pettann_250 ;13000
			drawsp 70,1,255,%tmp7,30
			drawsp 71,1,255,%tmp7,30+65
			drawsp 72,1,255,%tmp7,30+135*2
			drawsp 73,1,255,%tmp7,980-65*5
			drawsp 74,1,255,%tmp7,980-65*4
			drawsp 75,1,255,%tmp7,980-65*2
			drawsp 76,1,255,%tmp7,980-65
			drawsp 77,1,255,%tmp7,980
			sub %tmp7,60
		*pettann_250


		notif %tmp10 >= 19000 goto *pettann_300 ;11000
		notif %tmp10 <= 24500 goto *pettann_300 ;13500
			drawsp 50,1,255,%tmp5,30
			drawsp 51,1,255,%tmp5,30+135
			drawsp 52,1,255,%tmp5,251
			drawsp 53,1,255,%tmp5,251+135
			drawsp 54,1,255,%tmp5,251+135*2
			drawsp 55,1,255,%tmp5,251+135*3
			drawsp 56,1,255,%tmp5,30+135*6
			drawsp 57,1,255,%tmp5,30+135*7
			sub %tmp5,100
		*pettann_300

		notif %tmp10 >= 21000 goto *pettann_350 ;12000
		notif %tmp10 <= 27700 goto *pettann_350 ;16000
			drawsp 90,1,255,%tmp9,30
			drawsp 91,1,255,%tmp9,869-30
			;drawsp 92,1,255,%tmp9,120
			drawsp 93,1,255,%tmp9,80+85*2
			drawsp 94,1,255,%tmp9,80+85*3
			drawsp 95,1,255,%tmp9,80+85*4
			drawsp 96,1,255,%tmp9,80+85*5
			drawsp 97,1,255,%tmp9,80+85*6
			drawsp 98,1,255,%tmp9,80+85*7
			sub %tmp9,70
		*pettann_350

		notif %tmp10 >= 24500 goto *pettann_400 ;13500
		notif %tmp10 <= 29500 goto *pettann_400 ;16000
			drawsp 60,1,255,%tmp6,30
			drawsp 61,1,255,%tmp6,30+135
			drawsp 62,1,255,%tmp6,251
			drawsp 63,1,255,%tmp6,251+135
			drawsp 64,1,255,%tmp6,251+135*2
			drawsp 65,1,255,%tmp6,251+135*3
			drawsp 66,1,255,%tmp6,30+135*6
			drawsp 67,1,255,%tmp6,30+135*7
			sub %tmp6,100
		*pettann_400

		notif %tmp10 >= 27000 goto *pettann_500 ;15000
		notif %tmp10 <= 32000 goto *pettann_500 ;20000
			drawsp 100,1,255,%tmp11,30
			drawsp 101,1,255,%tmp11,30+135
			drawsp 102,1,255,%tmp11,30+135*2
			drawsp 103,1,255,%tmp11,30+135*3
			drawsp 104,1,255,%tmp11,30+135*4
			drawsp 105,1,255,%tmp11,30+135*5
			drawsp 106,1,255,%tmp11,30+135*6
			drawsp 107,1,255,%tmp11,30+135*7
			sub %tmp11,100
		*pettann_500

	draw
	waittimer %tmp10
next
;bg "bmp\pettan\bg.bmp",0
drawclear
drawend
csp_grst
textoff
border_pad_pop
set_name_window_non
skip_on

return

;************************************************************
;Save screen
;************************************************************
*savemode
	;Called on external enter. I expect save to be off here already though.
	saveoff
*savemode1
	mov %Free21,on ;save
	gosub *save_load_init
	gosub *save_load_build

*savemode_btn_loop

	btnwait2 %BtnRes

	if %BtnRes = 13 mov %savemodePage,%savemodePageNow : goto *loadmode1
	
	if %BtnRes = Page1  mov %savemodePage,1 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page2  mov %savemodePage,2 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page3  mov %savemodePage,3 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page4  mov %savemodePage,4 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page5  mov %savemodePage,5 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page6  mov %savemodePage,6 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page7  mov %savemodePage,7 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page8  mov %savemodePage,8 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page9  mov %savemodePage,9 : seplay 9,1010,100 : goto *savemode1
    if %BtnRes = Page10  mov %savemodePage,10 : seplay 9,1010,100 : goto *savemode1
	
	if %BtnRes = 1 goto *savemode_save
	if %BtnRes = 2 goto *savemode_save
	if %BtnRes = 3 goto *savemode_save
	if %BtnRes = 4 goto *savemode_save

	if %BtnRes = rmenu_btn_Exit : goto *save_exit
	if %BtnRes = -1 goto *save_exit
	if %BtnRes = -10 goto *save_exit

	goto *savemode_btn_loop

;***************************************************************
;Loading screen
;***************************************************************
*loadmode
	;Called on external enter. I expect save to be off here already though.
	saveoff
	if %load_for_title = 1 lsp 2,":c;graphics\colour\black.png",0,0 : print 10,500 : _csp 2

*loadmode1
	mov %Free21,off
	gosub *save_load_init
	gosub *save_load_build

*loadmode_btn_loop

	btnwait2 %BtnRes

	if %BtnRes = Page1  mov %savemodePage,1 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page2  mov %savemodePage,2 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page3  mov %savemodePage,3 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page4  mov %savemodePage,4 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page5  mov %savemodePage,5 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page6  mov %savemodePage,6 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page7  mov %savemodePage,7 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page8  mov %savemodePage,8 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page9  mov %savemodePage,9 : seplay 9,1010,100 : goto *loadmode1
	if %BtnRes = Page10  mov %savemodePage,10 : seplay 9,1010,100 : goto *loadmode1

	if %BtnRes = 12 mov %savemodePage,%savemodePageNow : goto *savemode1

	if %BtnRes = 1 goto *loadmode_load
	if %BtnRes = 2 goto *loadmode_load
	if %BtnRes = 3 goto *loadmode_load
	if %BtnRes = 4 goto *loadmode_load

	if %BtnRes = rmenu_btn_Exit : goto *save_exit
	if %BtnRes = -1 goto *save_exit
	if %BtnRes = -10 goto *save_exit

	goto *loadmode_btn_loop

; Common code

*save_exit
	gosub *save_load_cleanup

	seplay 9,1005,100 : wait 50

	;print 1
	;texton
	mov %load_for_title,0
return

*save_load_init
	gosub *save_load_cleanup

	mov %Free1,0
	mov %Free2,0
	mov %Free3,0
	mov %Free4,0
	mov %Free5,0
	mov %Free6,0

	mov %savescreenshotsp,31 ;Save screenshot sprite data
	mov %saveTimesp,11
	mov %saveTextsp,21

	btndef ""

	;Default to page 1
	if %savemodePage = 0 mov %savemodePage,1
	mov %savemodePageNow,%savemodePage

	lsp 451,":c;graphics\colour\black.png",0,0,black_toukaritu
	lsp saveload_caption,saveload_caption,20,0 ;new

	;Display frame for save data
	;x: x2+330, y: x2
	mov %tmp,150
	lsp 41,saveload_area,82,%tmp : add %tmp,200	;Frame a save area 1
	lsp 42,saveload_area,82,%tmp : add %tmp,200	;Frame a save area 2
	lsp 43,saveload_area,82,%tmp : add %tmp,200	;Frame a save area 3
	lsp 44,saveload_area,82,%tmp				;Frame a save area 4
		   
	if %savemodePageNow = 1 lsp 5,":a;graphics\menu\save\saveload_area_n1.png",-18,0	;Frame a save n 1
	if %savemodePageNow = 2 lsp 5,":a;graphics\menu\save\saveload_area_n2.png",-18,0	;Frame a save n 2
	if %savemodePageNow = 3 lsp 5,":a;graphics\menu\save\saveload_area_n3.png",-18,0	;Frame a save n 3
	if %savemodePageNow = 4 lsp 5,":a;graphics\menu\save\saveload_area_n4.png",-18,0	;Frame a save n 4
	if %savemodePageNow = 5 lsp 5,":a;graphics\menu\save\saveload_area_n5.png",-18,0	;Frame a save n 5
	if %savemodePageNow = 6 lsp 5,":a;graphics\menu\save\saveload_area_n6.png",-18,0	;Frame a save n 6
	if %savemodePageNow = 7 lsp 5,":a;graphics\menu\save\saveload_area_n7.png",-18,0	;Frame a save n 7
	if %savemodePageNow = 8 lsp 5,":a;graphics\menu\save\saveload_area_n8.png",-18,0	;Frame a save n 8
	if %savemodePageNow = 9 lsp 5,":a;graphics\menu\save\saveload_area_n9.png",-18,0	;Frame a save n 9
	if %savemodePageNow = 10 lsp 5,":a;graphics\menu\save\saveload_area_n10.png",-18,0	;Frame a save n 10

	mov %tmp,150
	lsp 25,":a/2,0,3;graphics\menu\save\saveload_area_black.png",82,%tmp,150 : add %tmp,200	;Frame a save select area 1
	lsp 26,":a/2,0,3;graphics\menu\save\saveload_area_black.png",82,%tmp,150 : add %tmp,200	;Frame a save select area 2
	lsp 27,":a/2,0,3;graphics\menu\save\saveload_area_black.png",82,%tmp,150 : add %tmp,200	;Frame a save select area 3
	lsp 28,":a/2,0,3;graphics\menu\save\saveload_area_black.png",82,%tmp,150				;Frame a save select area 4
return

*save_load_chapter

	mov $saveTextsp2,""

	if %CHIRU_MODE != 0 jumpf
		;Episode 1
		if $%Free5 = "1_op"		mov $saveTextsp2,save_1_op : return
		if $%Free5 = "1_01"		mov $saveTextsp2,save_1_01 : return
		if $%Free5 = "1_02"		mov $saveTextsp2,save_1_02 : return
		if $%Free5 = "1_03"		mov $saveTextsp2,save_1_03 : return
		if $%Free5 = "1_04"		mov $saveTextsp2,save_1_04 : return
		if $%Free5 = "1_05"		mov $saveTextsp2,save_1_05 : return
		if $%Free5 = "1_06"		mov $saveTextsp2,save_1_06 : return
		if $%Free5 = "1_07"		mov $saveTextsp2,save_1_07 : return
		if $%Free5 = "1_08"		mov $saveTextsp2,save_1_08 : return
		if $%Free5 = "1_09"		mov $saveTextsp2,save_1_09 : return
		if $%Free5 = "1_10"		mov $saveTextsp2,save_1_10 : return
		if $%Free5 = "1_11"		mov $saveTextsp2,save_1_11 : return
		if $%Free5 = "1_12"		mov $saveTextsp2,save_1_12 : return
		if $%Free5 = "1_13"		mov $saveTextsp2,save_1_13 : return
		if $%Free5 = "1_14"		mov $saveTextsp2,save_1_14 : return
		if $%Free5 = "1_15"		mov $saveTextsp2,save_1_15 : return
		if $%Free5 = "1_16"		mov $saveTextsp2,save_1_16 : return
		if $%Free5 = "1_17"		mov $saveTextsp2,save_1_17 : return
		if $%Free5 = "1_tea"	mov $saveTextsp2,save_1_tea : return
		if $%Free5 = "1_ura"	mov $saveTextsp2,save_1_ura : return
		
		;Episode 2
		if $%Free5 = "2_op"		mov $saveTextsp2,save_2_op : return
		if $%Free5 = "2_01"		mov $saveTextsp2,save_2_01 : return
		if $%Free5 = "2_02"		mov $saveTextsp2,save_2_02 : return
		if $%Free5 = "2_03"		mov $saveTextsp2,save_2_03 : return
		if $%Free5 = "2_04"		mov $saveTextsp2,save_2_04 : return
		if $%Free5 = "2_05"		mov $saveTextsp2,save_2_05 : return
		if $%Free5 = "2_06"		mov $saveTextsp2,save_2_06 : return
		if $%Free5 = "2_07"		mov $saveTextsp2,save_2_07 : return
		if $%Free5 = "2_08"		mov $saveTextsp2,save_2_08 : return
		if $%Free5 = "2_09"		mov $saveTextsp2,save_2_09 : return
		if $%Free5 = "2_10"		mov $saveTextsp2,save_2_10 : return
		if $%Free5 = "2_11"		mov $saveTextsp2,save_2_11 : return
		if $%Free5 = "2_12"		mov $saveTextsp2,save_2_12 : return
		if $%Free5 = "2_13"		mov $saveTextsp2,save_2_13 : return
		if $%Free5 = "2_14"		mov $saveTextsp2,save_2_14 : return
		if $%Free5 = "2_15"		mov $saveTextsp2,save_2_15 : return
		if $%Free5 = "2_16"		mov $saveTextsp2,save_2_16 : return
		if $%Free5 = "2_17"		mov $saveTextsp2,save_2_17 : return
		if $%Free5 = "2_18"		mov $saveTextsp2,save_2_18 : return
		if $%Free5 = "2_tea"	mov $saveTextsp2,save_2_tea : return
		if $%Free5 = "2_ura"	mov $saveTextsp2,save_2_ura : return
		
		;Episode 3
		if $%Free5 = "3_op"		mov $saveTextsp2,save_3_op : return
		if $%Free5 = "3_01"		mov $saveTextsp2,save_3_01 : return
		if $%Free5 = "3_02"		mov $saveTextsp2,save_3_02 : return
		if $%Free5 = "3_03"		mov $saveTextsp2,save_3_03 : return
		if $%Free5 = "3_04"		mov $saveTextsp2,save_3_04 : return
		if $%Free5 = "3_05"		mov $saveTextsp2,save_3_05 : return
		if $%Free5 = "3_06"		mov $saveTextsp2,save_3_06 : return
		if $%Free5 = "3_07"		mov $saveTextsp2,save_3_07 : return
		if $%Free5 = "3_08"		mov $saveTextsp2,save_3_08 : return
		if $%Free5 = "3_09"		mov $saveTextsp2,save_3_09 : return
		if $%Free5 = "3_10"		mov $saveTextsp2,save_3_10 : return
		if $%Free5 = "3_11"		mov $saveTextsp2,save_3_11 : return
		if $%Free5 = "3_12"		mov $saveTextsp2,save_3_12 : return
		if $%Free5 = "3_13"		mov $saveTextsp2,save_3_13 : return
		if $%Free5 = "3_14"		mov $saveTextsp2,save_3_14 : return
		if $%Free5 = "3_15"		mov $saveTextsp2,save_3_15 : return
		if $%Free5 = "3_16"		mov $saveTextsp2,save_3_16 : return
		if $%Free5 = "3_17"		mov $saveTextsp2,save_3_17 : return
		if $%Free5 = "3_18"		mov $saveTextsp2,save_3_18 : return
		if $%Free5 = "3_tea"	mov $saveTextsp2,save_3_tea : return
		if $%Free5 = "3_ura"	mov $saveTextsp2,save_3_ura : return
		
		;Episode 4
		if $%Free5 = "4_op"		mov $saveTextsp2,save_4_op : return
		if $%Free5 = "4_01"		mov $saveTextsp2,save_4_01 : return
		if $%Free5 = "4_02"		mov $saveTextsp2,save_4_02 : return
		if $%Free5 = "4_03"		mov $saveTextsp2,save_4_03 : return
		if $%Free5 = "4_04"		mov $saveTextsp2,save_4_04 : return
		if $%Free5 = "4_05"		mov $saveTextsp2,save_4_05 : return
		if $%Free5 = "4_06"		mov $saveTextsp2,save_4_06 : return
		if $%Free5 = "4_07"		mov $saveTextsp2,save_4_07 : return
		if $%Free5 = "4_08"		mov $saveTextsp2,save_4_08 : return
		if $%Free5 = "4_09"		mov $saveTextsp2,save_4_09 : return
		if $%Free5 = "4_10"		mov $saveTextsp2,save_4_10 : return
		if $%Free5 = "4_11"		mov $saveTextsp2,save_4_11 : return
		if $%Free5 = "4_12"		mov $saveTextsp2,save_4_12 : return
		if $%Free5 = "4_13"		mov $saveTextsp2,save_4_13 : return
		if $%Free5 = "4_14"		mov $saveTextsp2,save_4_14 : return
		if $%Free5 = "4_15"		mov $saveTextsp2,save_4_15 : return
		if $%Free5 = "4_16"		mov $saveTextsp2,save_4_16 : return
		if $%Free5 = "4_17"		mov $saveTextsp2,save_4_17 : return
		if $%Free5 = "4_18"		mov $saveTextsp2,save_4_18 : return
		if $%Free5 = "4_19"		mov $saveTextsp2,save_4_19 : return
		if $%Free5 = "4_tea"	mov $saveTextsp2,save_4_tea : return
		if $%Free5 = "4_ura"	mov $saveTextsp2,save_4_ura : return
	~


	if %CHIRU_MODE != 1 jumpf
		;Episode 5
		if $%Free5 = "5_op"		mov $saveTextsp2,save_5_op : return
		if $%Free5 = "5_01"		mov $saveTextsp2,save_5_01 : return
		if $%Free5 = "5_02"		mov $saveTextsp2,save_5_02 : return
		if $%Free5 = "5_03"		mov $saveTextsp2,save_5_03 : return
		if $%Free5 = "5_04"		mov $saveTextsp2,save_5_04 : return
		if $%Free5 = "5_05"		mov $saveTextsp2,save_5_05 : return
		if $%Free5 = "5_06"		mov $saveTextsp2,save_5_06 : return
		if $%Free5 = "5_07"		mov $saveTextsp2,save_5_07 : return
		if $%Free5 = "5_08"		mov $saveTextsp2,save_5_08 : return
		if $%Free5 = "5_09"		mov $saveTextsp2,save_5_09 : return
		if $%Free5 = "5_10"		mov $saveTextsp2,save_5_10 : return
		if $%Free5 = "5_11"		mov $saveTextsp2,save_5_11 : return
		if $%Free5 = "5_12"		mov $saveTextsp2,save_5_12 : return
		if $%Free5 = "5_13"		mov $saveTextsp2,save_5_13 : return
		if $%Free5 = "5_14"		mov $saveTextsp2,save_5_14 : return
		if $%Free5 = "5_15"		mov $saveTextsp2,save_5_15 : return
		if $%Free5 = "5_tea"	mov $saveTextsp2,save_5_tea : return
		if $%Free5 = "5_ura"	mov $saveTextsp2,save_5_ura : return
		
		;Episode 6
		if $%Free5 = "6_op"		mov $saveTextsp2,save_6_op : return
		if $%Free5 = "6_01"		mov $saveTextsp2,save_6_01 : return
		if $%Free5 = "6_02"		mov $saveTextsp2,save_6_02 : return
		if $%Free5 = "6_03"		mov $saveTextsp2,save_6_03 : return
		if $%Free5 = "6_04"		mov $saveTextsp2,save_6_04 : return
		if $%Free5 = "6_05"		mov $saveTextsp2,save_6_05 : return
		if $%Free5 = "6_06"		mov $saveTextsp2,save_6_06 : return
		if $%Free5 = "6_07"		mov $saveTextsp2,save_6_07 : return
		if $%Free5 = "6_08"		mov $saveTextsp2,save_6_08 : return
		if $%Free5 = "6_09"		mov $saveTextsp2,save_6_09 : return
		if $%Free5 = "6_10"		mov $saveTextsp2,save_6_10 : return
		if $%Free5 = "6_11"		mov $saveTextsp2,save_6_11 : return
		if $%Free5 = "6_12"		mov $saveTextsp2,save_6_12 : return
		if $%Free5 = "6_13"		mov $saveTextsp2,save_6_13 : return
		if $%Free5 = "6_14"		mov $saveTextsp2,save_6_14 : return
		if $%Free5 = "6_15"		mov $saveTextsp2,save_6_15 : return
		if $%Free5 = "6_16"		mov $saveTextsp2,save_6_16 : return
		if $%Free5 = "6_17"		mov $saveTextsp2,save_6_17 : return
		if $%Free5 = "6_18"		mov $saveTextsp2,save_6_18 : return
		if $%Free5 = "6_tea"	mov $saveTextsp2,save_6_tea : return
		if $%Free5 = "6_ura"	mov $saveTextsp2,save_6_ura : return
		
		;Episode 7
		if $%Free5 = "7_op"		mov $saveTextsp2,save_7_op : return
		if $%Free5 = "7_01"		mov $saveTextsp2,save_7_01 : return
		if $%Free5 = "7_02"		mov $saveTextsp2,save_7_02 : return
		if $%Free5 = "7_03"		mov $saveTextsp2,save_7_03 : return
		if $%Free5 = "7_04"		mov $saveTextsp2,save_7_04 : return
		if $%Free5 = "7_05"		mov $saveTextsp2,save_7_05 : return
		if $%Free5 = "7_06"		mov $saveTextsp2,save_7_06 : return
		if $%Free5 = "7_07"		mov $saveTextsp2,save_7_07 : return
		if $%Free5 = "7_08"		mov $saveTextsp2,save_7_08 : return
		if $%Free5 = "7_09"		mov $saveTextsp2,save_7_09 : return
		if $%Free5 = "7_10"		mov $saveTextsp2,save_7_10 : return
		if $%Free5 = "7_11"		mov $saveTextsp2,save_7_11 : return
		if $%Free5 = "7_12"		mov $saveTextsp2,save_7_12 : return
		if $%Free5 = "7_13"		mov $saveTextsp2,save_7_13 : return
		if $%Free5 = "7_14"		mov $saveTextsp2,save_7_14 : return
		if $%Free5 = "7_15"		mov $saveTextsp2,save_7_15 : return
		if $%Free5 = "7_16"		mov $saveTextsp2,save_7_16 : return
		if $%Free5 = "7_17"		mov $saveTextsp2,save_7_17 : return
		if $%Free5 = "7_18"		mov $saveTextsp2,save_7_18 : return
		if $%Free5 = "7_tea"	mov $saveTextsp2,save_7_tea : return
		if $%Free5 = "7_ura"	mov $saveTextsp2,save_7_ura : return
		
		;Episode 8
		if $%Free5 = "8_op"		mov $saveTextsp2,save_8_op : return
		if $%Free5 = "8_01"		mov $saveTextsp2,save_8_01 : return
		if $%Free5 = "8_02"		mov $saveTextsp2,save_8_02 : return
		if $%Free5 = "8_03"		mov $saveTextsp2,save_8_03 : return
		if $%Free5 = "8_04"		mov $saveTextsp2,save_8_04 : return
		if $%Free5 = "8_05"		mov $saveTextsp2,save_8_05 : return
		if $%Free5 = "8_06"		mov $saveTextsp2,save_8_06 : return
		if $%Free5 = "8_07"		mov $saveTextsp2,save_8_07 : return
		if $%Free5 = "8_08"		mov $saveTextsp2,save_8_08 : return
		if $%Free5 = "8_09"		mov $saveTextsp2,save_8_09 : return
		if $%Free5 = "8_10"		mov $saveTextsp2,save_8_10 : return
		if $%Free5 = "8_11"		mov $saveTextsp2,save_8_11 : return
		if $%Free5 = "8_12"		mov $saveTextsp2,save_8_12 : return
		if $%Free5 = "8_13"		mov $saveTextsp2,save_8_13 : return
		if $%Free5 = "8_14"		mov $saveTextsp2,save_8_14 : return
		if $%Free5 = "8_15"		mov $saveTextsp2,save_8_15 : return
		if $%Free5 = "8_16"		mov $saveTextsp2,save_8_16 : return
		if $%Free5 = "8_tea"	mov $saveTextsp2,save_8_tea : return
		if $%Free5 = "8_ura"	mov $saveTextsp2,save_8_ura : return
	~
return

*save_load_build
	
	;Obtain (first) save index
	mov %Free3,%savemodePageNow
	mul %Free3,4
	sub %Free3,4
	inc %Free3

	mov %Free1,savedataflg
	add %Free1,%Free3				;save state

	mov %savedataTime,savedataTime
	add %savedataTime,%Free3		;save time

	mov %Free5,savedataComment
	add %Free5,%Free3				;save comment

	;For screenshot index
	if %CHIRU_MODE = 1 add %Free3,100

	mov %savescreenshotsp,31   ;Save screenshot sprite data
	mov %saveTimesp,11
	mov %saveTextsp,21

	mov %x,94  ;screenshot
	mov %y,163 ;screenshot

	mov %x2,1545 ;time
	mov %y2,165  ;time

	mov %x3,427 ;comment
	mov %y3,220 ;comment

	btndef ""

	for %Free2 = 1 to 4

		;get the xy axis
		;Fixes last offset?
		if %y > 800 mov %y,100 : mov %x,1192 : mov %y2,222 : mov %y3,160 : mov %x2,1192 : mov %x3,1352

		;Save present
		if %%Free1 = 0 jumpf

			;Screenshot of the save data
			mov $Free1,":c;screenshot\ss"
			itoa $Free2,%Free3
			add $Free1,$Free2
			add $Free1,".bmp"
			lsp %savescreenshotsp,$Free1,%x,%y

			border_pad_push 3

			;Date and time of the save data
			mov $saveTimesp2,":s;#FFFFFF`{p:31:" + $%savedataTime + "}"
			lsp %saveTimesp,$saveTimesp2,%x2,%y2

			;Comment of the save data
			gosub *save_load_chapter
			lsp %saveTextsp,$saveTextsp2,%x3,%y3

			border_pad_pop

			;Skip if saving (marks present saves clickable)
			if %Free21 == on jumpf
			if %Free2 = 1 spbtn 41,%Free2 : spbtn 25,%Free2
			if %Free2 = 2 spbtn 42,%Free2 : spbtn 26,%Free2
			if %Free2 = 3 spbtn 43,%Free2 : spbtn 27,%Free2
			if %Free2 = 4 spbtn 44,%Free2 : spbtn 28,%Free2
		~

		inc %Free1 				;state
		inc %Free3 				;screenshot index
		inc %savescreenshotsp	;screenshot sprite
		inc %savedataTime 		;time
		inc %saveTimesp			;time sprite
		inc %Free5 				;comment
		inc %saveTextsp			;comment sprite

		add %y,200 		;down for screenshot
		add %y2,200 	;down for time
		add %y3,200 	;down for comment
	next

	;Define buttons

	;Skip if loading
	if %Free21 == off jumpf
		spbtn 41,1	;save area 1
		spbtn 42,2	;save area 2
		spbtn 43,3	;save area 3
		spbtn 44,4	;save area 4
		spbtn 25,1
		spbtn 26,2
		spbtn 27,3
		spbtn 28,4
	~

	lsp Page_line_down,":a;graphics\menu\save\saveload_line_down.png",0,900
	lsp Page_line_up,":a;graphics\menu\save\saveload_line_up.png",0,0

	if %Free21 == on gosub *savemode_buttons
	if %Free21 == off gosub *loadmode_buttons

	lsp saveload_Exit_button,set_exit,0,0
	align_buttons_r saveload_Exit_button,saveload_Load_button,Save
	
	if %load_for_title = 0 spbtn Save,12
	spbtn saveload_Load_button,13
	spbtn saveload_Exit_button,rmenu_btn_Exit

	mov %tmp1,82 : mov %tmp2,100
	lsp Page1,":a/2,0,3;graphics\menu\save\saveload_area_n1_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page2,":a/2,0,3;graphics\menu\save\saveload_area_n2_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page3,":a/2,0,3;graphics\menu\save\saveload_area_n3_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page4,":a/2,0,3;graphics\menu\save\saveload_area_n4_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page5,":a/2,0,3;graphics\menu\save\saveload_area_n5_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page6,":a/2,0,3;graphics\menu\save\saveload_area_n6_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page7,":a/2,0,3;graphics\menu\save\saveload_area_n7_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page8,":a/2,0,3;graphics\menu\save\saveload_area_n8_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page9,":a/2,0,3;graphics\menu\save\saveload_area_n9_button.png",%tmp1,980 : add %tmp1,%tmp2
	lsp Page10,":a/2,0,3;graphics\menu\save\saveload_area_n10_button.png",%tmp1,980 : add %tmp1,%tmp2

	if %savemodePageNow = 1 lsp Page1,":a/2,0,3;graphics\menu\save\saveload_area_n1_button_b.png",140-58,980
	if %savemodePageNow = 2 lsp Page2,":a/2,0,3;graphics\menu\save\saveload_area_n2_button_b.png",240-58,980
	if %savemodePageNow = 3 lsp Page3,":a/2,0,3;graphics\menu\save\saveload_area_n3_button_b.png",340-58,980
	if %savemodePageNow = 4 lsp Page4,":a/2,0,3;graphics\menu\save\saveload_area_n4_button_b.png",440-58,980
	if %savemodePageNow = 5 lsp Page5,":a/2,0,3;graphics\menu\save\saveload_area_n5_button_b.png",540-58,980
	if %savemodePageNow = 6 lsp Page6,":a/2,0,3;graphics\menu\save\saveload_area_n6_button_b.png",640-58,980
	if %savemodePageNow = 7 lsp Page7,":a/2,0,3;graphics\menu\save\saveload_area_n7_button_b.png",740-58,980
	if %savemodePageNow = 8 lsp Page8,":a/2,0,3;graphics\menu\save\saveload_area_n8_button_b.png",840-58,980
	if %savemodePageNow = 9 lsp Page9,":a/2,0,3;graphics\menu\save\saveload_area_n9_button_b.png",940-58,980
	if %savemodePageNow = 10 lsp Page10,":a/2,0,3;graphics\menu\save\saveload_area_n10_button_b.png",1040-58,980

	spbtn Page1,Page1
	spbtn Page2,Page2
	spbtn Page3,Page3
	spbtn Page4,Page4
	spbtn Page5,Page5
	spbtn Page6,Page6
	spbtn Page7,Page7
	spbtn Page8,Page8
	spbtn Page9,Page9
	spbtn Page10,Page10

	print 10,200
return

*save_load_cleanup

	_csp 2,100
	_csp Page1,Page10
	_csp Page_line_down
	_csp Page_line_up
	_csp saveload_Load_button
	_csp saveload_Exit_button
	_csp Save
	_csp rmenu_btn_Exit
	_csp 451
	_csp r_black_lsp

	;checkme from savemode
	_csp 302
	_csp 303

return

*save_load_index
	mov %savedataNowNum,%savemodePageNow
	mul %savedataNowNum,4
	sub %savedataNowNum,4
	add %savedataNowNum,%BtnRes

	;Real save index
	mov %Free1,%savedataNowNum
	if %CHIRU_MODE = 1 add %Free1,100
return

*savemode_buttons
		lsp Save,save_btn_b,0,0
		lsp saveload_Load_button,load_btn,0,0
return

*loadmode_buttons
		if %load_for_title = 0 lsp Save,save_btn,0,0
		lsp saveload_Load_button,load_btn_b,0,0
return


;Actual save code
*savemode_save
	gosub *save_load_index
	
	mov %savedataflg,savedataflg
	add %savedataflg,%savedataNowNum
	mov %%savedataflg,1

	mov $Free1,"screenshot\ss"
	itoa $Free2,%Free1
	add $Free1,$Free2
	add $Free1,".bmp"
	savescreenshot2 $Free1

	time %Hour,%Minute
	date %Year,%Month,%Day

	;Add Day
	mov $SaveTime,"`"
	if %Day < 10 add $SaveTime,"0" : itoa $Free1,%Day : add $SaveTime,$Free1 : add $SaveTime,"/"
	if %Day >= 10 itoa $Free1,%Day : add $SaveTime,$Free1 : add $SaveTime,"/"
	;Add Month
	if %Month < 10 add $SaveTime,"0" : itoa $Free1,%Month : add $SaveTime,$Free1 : add $SaveTime,"/"
	if %Month >= 10 itoa $Free1,%Month : add $SaveTime,$Free1 : add $SaveTime,"/"
	;Add Year
	add $SaveTime,"20" : itoa $Free1,%Year : add $SaveTime,$Free1 : add $SaveTime," "
	;Add Hour
	if %Hour < 10 add $SaveTime,"0" : itoa $Free1,%Hour : add $SaveTime,$Free1 : add $SaveTime,":"
	if %Hour >= 10 itoa $Free1,%Hour : add $SaveTime,$Free1 : add $SaveTime,":"
	;Add Minute
	if %Minute < 10 add $SaveTime,"0" : itoa $Free1,%Minute : add $SaveTime,$Free1
	if %Minute >= 10 itoa $Free1,%Minute : add $SaveTime,$Free1
	add $SaveTime,"`"

	mov %Free2,savedataTime
	add %Free2,%savedataNowNum
	mov $%Free2,$SaveTime

	;Save chapter title
	mov %Free2,savedataComment+%savedataNowNum
	mov $Free2,$name_chapter_save
	mov $%Free2,$Free2

	;Save game
	savegame %Free1
	seplay 9,1030,100

	goto *savemode1


*loadmode_load
	gosub *save_load_index

	notif %load_for_title = 0 jumpf
		E_A
		seplay 9,1022,100
		lsp 2,ware,0,0
		print 1
		delay 1000
		lsp 2,":c;graphics\colour\black.png",0,0
		print 22
		delay 2000
	~

	gosub *save_load_cleanup

	btndef ""

	notif %load_for_title = 1 jumpf
		E_A
		seplay 9,17,100
		bg white,10
		delay 3000
	~

	mov %load_for_title,0
	loadgame %Free1

	goto *loadmode1

;***********************************************************************
;Main launcher
;***********************************************************************
*boot_logo

E_B
E_MA
saveoff            ;Speedup the process by disabling game save
rmode 0            ;Speedup the process by disabling right-click menu
textoff
setfps 60
skip_off           ;Disable skip for main menus
mov %skip_flg_bak,off
mov %no_cache_atm,off

;-----------------------
;Display the logos
;Click left and right to skip the display of the logo and go to the title screen   
;-----------------------

if %title_skip = 1 goto *boot_logo_skip
isdown %tmp
if %tmp = 1 goto *boot_logo_skip
lr_trap *boot_logo_skip

lsp 100,":c;graphics\system\logo\alchemist.png",0,0
print 10,2000
wait2 2000

lsp 100,":c;graphics\colour\white.png",0,0
print 10,2000

lsp 100,":c;graphics\system\logo\07th.png",0,0
print 10,2000
wait2 2000

lsp 100,":c;graphics\colour\black.png",0,0
print 10,1000

lsp 100,project_logo,0,0

aspt blur,100,5000
aspt alpha,100,0
print 1
dwaveloop 16,"sound\se\umilse_016.ogg"
ach_prop 16,%sfx_vol,700
aspt blur,100,1,3000
aspt alpha,100,255,2000
aspt alpha,100,255,3000
aspt alpha,100,0,3000
aspt blur,100,1,1000
aspt blur,100,5000,3000
sptwait blur,100
ach_prop 16,0,2000
wait2 2000
_csp 100
print 10,500

;Done with logos
goto *boot_logo_skip_100

*boot_logo_skip
	mov %title_skip,1
	_csp 100

*boot_logo_skip_100
	lr_trap off

	mov %Free1,off
	mov %anim_mode,off

	if %UMINEKOEND > 0 mov %Free1,on
	if $flag_scenario_1_op == "●" mov %Free1,on
	if %title_skip > 0 mov %Free1,off
	if %Free1 != on goto *boot_logo_no_video

	if %CHIRU_MODE == 0 mov $Free1,"op"
	if %CHIRU_MODE == 1 mov $Free1,"op4"

	pam 100,$Free1,1
	mov %Free1,off

*boot_logo_no_video

	if %anim_mode == on flush 23 ;trapped
	if %anim_mode == off flush 1
	

	;Enable rclick menu
	rmode 1
	btndef ""
	csp_rst

;***********************************************************************
;Main menu
;***********************************************************************
*b_title

clearlog 1
mov $log_choices,""
mov %log_is_generated_to_cvs,-1

;Create session
gosub *trophy_session_create

mono 0

;reset characters
if %CHIRU_MODE != 0 jumpf
	for %tmp = 1 to char_max
		mov ?r[%tmp][condition],0
	next
~

if %CHIRU_MODE != 1 jumpf
	for %tmp = 1 to char_max_ep5
		mov ?r[%scenario_Number][%tmp][condition],0
	next
~

gosub *chain_sprites

;Parametrs mouse Tips
mov %r_display_cha,0
mov %r_display_cha_ma,0
mov %r_side,0
mov %r_display_side,0
mov %r_display_tips,0
mov %r_display_grim,0
mov %r_for_title,0
mov %r_tea_bea,0
mov %r_ber_flg,0
mov %r_mode_flg,off	;Remove right-click the OFF
mov %r_u_tea_flg,0 ;Right-click for tea
mov %omake,0

;Initialize tips and grimoir
for %tmp = 0 to 10
	mov ?tips[%tmp][tips_flg],0
next
for %tmp = 0 to 15
	mov ?grim[%tmp][grim_flg],0
next

;Initialize scene variables
mov %play_scene,0
mov %grim_scene,0
mov %skip_flg,on

;Initialise config values
operate_config read,$current_renderer,"prefer-renderer"
operate_config read,$window_size,"window-width"
operate_config read,$full_window_auto,"fullscreen"
if $full_window_auto == "noval" mov %full_window_auto,2 : jumpf
operate_config read,$full_window_auto,"window"
if $full_window_auto == "noval" mov %full_window_auto,1 : jumpf
mov %full_window_auto,0
~

;Initialise border_padding stack
mov %b_pad_counter,-1
border_pad_push 0

;Reset audiosystem
E_A
gosub *lv_generate
gosub *se_generate
gosub *me_generate
; Cake test
; mov %title_skip,0 : goto *d58138

if $omake_return == "trailer" mov %title_skip,0 : mov %r_mode_flg,1 : goto *omake_chiru_menu
if $omake_return == "omake"   mov %title_skip,0 : mov %r_mode_flg,1 : goto *omake_chiru_menu
if $omake_return == "omake8"  mov %title_skip,0 : mov %r_mode_flg,1 : goto *omake_chiru_menu
if $omake_return == "omake9"  mov %title_skip,0 : mov %r_mode_flg,1 : goto *omake_chiru_menu

;rondo
if %CHIRU_MODE != 0 jumpf
;Background image, default sfx
if %UMINEKOEND = 0 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title1_bg1.png"
if %UMINEKOEND = 1 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title1_bg1.png"
if %UMINEKOEND = 11 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title1_bg1.png"
if %UMINEKOEND = 12 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title1_bg1.png"

if %UMINEKOEND = 20 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title2_bg2.png"
if %UMINEKOEND = 21 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title2_bg2.png"
if %UMINEKOEND = 22 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title2_bg2.png"

if %UMINEKOEND = 30 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title3_bg3.png"
if %UMINEKOEND = 31 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title3_bg3.png"
if %UMINEKOEND = 32 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title3_bg3.png"

if %UMINEKOEND = 40 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title4_bg4.png"
if %UMINEKOEND = 41 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title4_bg4.png"
if %UMINEKOEND = 42 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\title4_bg4.png"
if %UMINEKOEND >= 50 meplay 1,16,50 : mov $tmp10,":c;graphics\menu\title\title5_bg5.png"
~
;end

;chiru
if %CHIRU_MODE != 1 jumpf
;Background image, default sfx
if %UMINEKOEND = 50 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title1_bg1.png"
if %UMINEKOEND = 51 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title1_bg1.png"
if %UMINEKOEND = 52 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title1_bg1.png"

if %UMINEKOEND = 60 meplay 1,16,50 : mov $tmp10,":c;graphics\menu\title\chiru\title2_bg2.png"
if %UMINEKOEND = 61 meplay 1,16,50 : mov $tmp10,":c;graphics\menu\title\chiru\title2_bg2.png"
if %UMINEKOEND = 62 meplay 1,16,50 : mov $tmp10,":c;graphics\menu\title\chiru\title2_bg2.png"

if %UMINEKOEND = 70 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title3_bg3.png"
if %UMINEKOEND = 71 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title4_bg4.png"
if %UMINEKOEND = 72 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title4_bg4.png"

if %UMINEKOEND = 80 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title5_bg5.png"
if %UMINEKOEND = 81 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title6_bg6.png"
if %UMINEKOEND = 82 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title6_bg6.png"
if %UMINEKOEND >= 90 meplay 1,2,100 : mov $tmp10,":c;graphics\menu\title\chiru\title7_bg7.png"
~
;end

mov %title_y,140

csp_rst
btndef ""

set_window_simple 1,1
setwindow5 ":a;graphics\system\empty.png"

;Background display logo
if %CHIRU_MODE != 0 jumpf
lsph t_logo_lsp,t_logo_rondo,860,45
~
if %CHIRU_MODE != 1 jumpf
lsph t_logo_lsp,t_logo_chiru,860,45
~
;----------------------
;Button placement

if %CHIRU_MODE != 0 jumpf
	;Main Menu
	lsph t_btn_start_lsp,t_btn_start,1325,424 ;extra -30(450) to correspond to ps3 ;10
	lsph t_btn_web_lsp,t_btn_web,1325,488 ;9
	if %UMINEKOEND = 0 lsph t_btn_exit_lsp,t_btn_exit,1325,616
	if %UMINEKOEND = 1 lsph t_btn_exit_lsp,t_btn_exit1_cg,1325,680
	if %UMINEKOEND = 11 lsph t_btn_exit_lsp,t_btn_exit2,1325,808
	if %UMINEKOEND = 12 lsph t_btn_exit_lsp,t_btn_exit3,1325,872
	if %UMINEKOEND >= 20 && %UMINEKOEND < 50 lsph t_btn_exit_lsp,t_btn_exit5,1325,1000
	if %UMINEKOEND >= 40 lsph t_btn_exit_lsp,t_btn_exit5,1325,1000 ;from the bottom, 1

	if %UMINEKOEND >= 11 lsph t_btn_tea_lsp,t_btn_tea,1325,552 ;8
	if %UMINEKOEND >= 12 lsph t_btn_ura_tea_lsp,t_btn_ura_tea,1325,616 ;7
	if %UMINEKOEND >= 20 lsph t_btn_tips_lsp,t_btn_tips,1325,744 ;5
	if %UMINEKOEND > 12 lsph t_btn_music_lsp,t_btn_music,1325,936 ;2
	if %UMINEKOEND = 11 lsph t_btn_music_lsp,t_btn_music2,1325,744
	if %UMINEKOEND = 12 lsph t_btn_music_lsp,t_btn_music3,1325,808 
	;new
	if %UMINEKOEND >= 20 lsph t_chars_lsp,t_chars,1325,680 ;6
	if %UMINEKOEND >= 11 lsph t_cg_lsp,t_cg,1325,872 ;3
	if %UMINEKOEND = 1 lsph t_cg_lsp,t_cg1,1325,616 ;3
	if %UMINEKOEND >= 0 lsph t_config_lsp,t_config_newgame,1325,552 ;4
	if %UMINEKOEND = 12 lsph t_config_lsp,t_config3,1325,680 ;4
	if %UMINEKOEND >= 20 lsph t_config_lsp,t_config,1325,808 ;4
	;end 1ep
	if %UMINEKOEND = 11 lsph t_config_lsp,t_config2,1325,616 ;4
	if %UMINEKOEND = 11 lsph t_cg_lsp,t_cg2,1325,680
	if %UMINEKOEND = 12 lsph t_cg_lsp,t_cg3,1325,744


	if %UMINEKOEND_FLG = 11 lsph t_btn_tea_lsp,t_btn_tea_new,1325,552
	if %UMINEKOEND_FLG = 12 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,616
	if %UMINEKOEND_TIPS_FLG = 1 lsph t_btn_tips_lsp,t_btn_tips_new,1325,736
	if %UMINEKOEND_TIPS_CHA_FLG = 1 lsph t_chars_lsp,t_chars_new,1325,680

	if %UMINEKOEND_FLG = 20 lsph t_btn_start_lsp,t_btn_start_new,1325,424 
	if %UMINEKOEND_FLG = 21 lsph t_btn_tea_lsp,t_btn_tea_new,1325,544
	if %UMINEKOEND_FLG = 22 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,552
	if %UMINEKOEND_TIPS_FLG = 2 lsph t_btn_tips_lsp,t_btn_tips_new,1325,672
	if %UMINEKOEND_TIPS_CHA_FLG = 2 lsph t_chars_lsp,t_chars_new,1325,680

	if %UMINEKOEND_FLG = 30 lsph t_btn_start_lsp,t_btn_start_new,1325,424
	if %UMINEKOEND_FLG = 31 lsph t_btn_tea_lsp,t_btn_tea_new,1325,544
	if %UMINEKOEND_FLG = 32 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,552
	if %UMINEKOEND_TIPS_FLG = 3 lsph t_btn_tips_lsp,t_btn_tips_new,1325,672
	if %UMINEKOEND_TIPS_CHA_FLG = 3 lsph t_chars_lsp,t_chars_new,1325,680

	if %UMINEKOEND_FLG = 40 lsph t_btn_start_lsp,t_btn_start_new,1325,424
	if %UMINEKOEND_FLG = 41 lsph t_btn_tea_lsp,t_btn_tea_new,1325,544
	if %UMINEKOEND_FLG = 42 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,552
	if %UMINEKOEND_TIPS_FLG = 4 lsph t_btn_tips_lsp,t_btn_tips_new,1325,672
	if %UMINEKOEND_MUSIC_FLG = 1 lsph t_btn_music_lsp,t_btn_music_new,1325,744
	if %UMINEKOEND_TIPS_CHA_FLG = 4 lsph t_chars_lsp,t_chars_new,1325,680
	if %UMINEKOEND_CG_FLG = 1 lsph t_cg_lsp,t_cg_new1,1325,680
	if %UMINEKOEND = 12 && %UMINEKOEND_MUSIC_FLG = 1 lsph t_btn_music_lsp,t_btn_music_new2,1325,808
	if %UMINEKOEND = 12 && %UMINEKOEND_CG_FLG = 1 lsph t_cg_lsp,t_cg_new2,1325,744
	if %UMINEKOEND >= 20 && %UMINEKOEND_MUSIC_FLG = 1 lsph t_btn_music_lsp,t_btn_music_new3,1325,936
	if %UMINEKOEND >= 20 && %UMINEKOEND_CG_FLG = 1 lsph t_cg_lsp,t_cg_new3,1325,872

	lsph t_trophy_lsp,t_trophy,-45,-45
~

if %CHIRU_MODE != 1 jumpf

	lsph t_btn_start_lsp,t_btn_start,1325,424 ;extra -30(450) to correspond to ps3 ;10
	lsph t_btn_web_lsp,t_btn_web,1325,488 ;9
	
	if %UMINEKOEND = 50 lsph t_config_lsp,t_config_newgame,1325,552 ;4
	if %UMINEKOEND = 50 lsph t_cg_lsp,t_cg1,1325,616
	if %UMINEKOEND = 50 lsph t_btn_music_lsp,t_btn_music1,1325,680
	if %UMINEKOEND = 50 lsph t_btn_exit_lsp,t_btn_exit1,1325,744

	if %UMINEKOEND = 51 lsph t_btn_exit_lsp,t_btn_exit2,1325,808
	if %UMINEKOEND >= 51 lsph t_btn_tea_lsp,t_btn_tea,1325,552 ;8
	if %UMINEKOEND = 51 lsph t_btn_music_lsp,t_btn_music2,1325,744
	if %UMINEKOEND >= 51 lsph t_cg_lsp,t_cg,1325,872 ;3
	if %UMINEKOEND = 51 lsph t_config_lsp,t_config2,1325,616 ;4
	if %UMINEKOEND = 51 lsph t_cg_lsp,t_cg2,1325,680
	
	if %UMINEKOEND = 52 lsph t_btn_exit_lsp,t_btn_exit3,1325,872
	if %UMINEKOEND >= 52 lsph t_btn_ura_tea_lsp,t_btn_ura_tea,1325,616 ;7
	if %UMINEKOEND > 52 lsph t_btn_music_lsp,t_btn_music,1325,936 ;2
	if %UMINEKOEND = 52 lsph t_btn_music_lsp,t_btn_music3,1325,808 
	if %UMINEKOEND = 52 lsph t_config_lsp,t_config3,1325,680 ;4
	if %UMINEKOEND = 52 lsph t_cg_lsp,t_cg3,1325,744
	
	if %UMINEKOEND >= 60 && %UMINEKOEND < 90 lsph t_btn_exit_lsp,t_btn_exit5,1325,1000
	if %UMINEKOEND >= 90 lsph t_btn_exit_lsp,t_btn_exit5,1325,1000 ;from the bottom, 1
	if %UMINEKOEND >= 60 lsph t_btn_tips_lsp,t_btn_tips,1325,744 ;5
	if %UMINEKOEND >= 60 lsph t_chars_lsp,t_chars,1325,680 ;6
	if %UMINEKOEND >= 60 lsph t_config_lsp,t_config,1325,808 ;4
	
	;if %UMINEKOEND = 1 lsph t_btn_exit_lsp,t_btn_exit1_cg,1325,680
	;if %UMINEKOEND = 1 lsph t_cg_lsp,t_cg1,1325,616 ;3
		
	if %UMINEKOEND_FLG = 50 lsph t_btn_start_lsp,t_btn_start_new,1325,424
	if %UMINEKOEND_FLG = 51 lsph t_btn_tea_lsp,t_btn_tea_new,1325,552
	if %UMINEKOEND_FLG = 52 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,616
	if %UMINEKOEND_TIPS_FLG = 5 lsph t_btn_tips_lsp,t_btn_tips_new,1325,736
	if %UMINEKOEND_TIPS_CHA_FLG = 5 lsph t_chars_lsp,t_chars_new,1325,680
	
	if %UMINEKOEND_FLG = 60 lsph t_btn_start_lsp,t_btn_start_new,1325,424 
	if %UMINEKOEND_FLG = 61 lsph t_btn_tea_lsp,t_btn_tea_new,1325,544
	if %UMINEKOEND_FLG = 62 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,552
	if %UMINEKOEND_TIPS_FLG = 6 lsph t_btn_tips_lsp,t_btn_tips_new,1325,672
	if %UMINEKOEND_TIPS_CHA_FLG = 6 lsph t_chars_lsp,t_chars_new,1325,680

	if %UMINEKOEND_FLG = 70 lsph t_btn_start_lsp,t_btn_start_new,1325,424
	if %UMINEKOEND_FLG = 71 lsph t_btn_tea_lsp,t_btn_tea_new,1325,544
	if %UMINEKOEND_FLG = 72 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,552
	if %UMINEKOEND_TIPS_FLG = 7 lsph t_btn_tips_lsp,t_btn_tips_new,1325,672
	if %UMINEKOEND_TIPS_CHA_FLG = 7 lsph t_chars_lsp,t_chars_new,1325,680

	if %UMINEKOEND_FLG = 80 lsph t_btn_start_lsp,t_btn_start_new,1325,424
	if %UMINEKOEND_FLG = 81 lsph t_btn_tea_lsp,t_btn_tea_new,1325,544
	if %UMINEKOEND_FLG = 82 lsph t_btn_ura_tea_lsp,t_btn_ura_tea_new,1325,552
	if %UMINEKOEND_TIPS_FLG = 8 lsph t_btn_tips_lsp,t_btn_tips_new,1325,672
	if %UMINEKOEND_MUSIC_FLG = 5 lsph t_btn_music_lsp,t_btn_music_new,1325,744
	if %UMINEKOEND_TIPS_CHA_FLG = 8 lsph t_chars_lsp,t_chars_new,1325,680
	if %UMINEKOEND_CG_FLG = 5 lsph t_cg_lsp,t_cg_new1,1325,680
	
	if %UMINEKOEND = 52 && %UMINEKOEND_MUSIC_FLG = 5 lsph t_btn_music_lsp,t_btn_music_new2,1325,808
	if %UMINEKOEND = 52 && %UMINEKOEND_CG_FLG = 5 lsph t_cg_lsp,t_cg_new2,1325,744
	if %UMINEKOEND >= 60 && %UMINEKOEND_MUSIC_FLG = 5 lsph t_btn_music_lsp,t_btn_music_new3,1325,936
	if %UMINEKOEND >= 60 && %UMINEKOEND_CG_FLG = 5 lsph t_cg_lsp,t_cg_new3,1325,872
	
	lsph t_trophy_lsp,t_trophy,-45,-45	
~
	
lsph t_btn_omake_lsp,":a;graphics\system\clock\clock_c.png",60,983,0

gosub *verify_script_date
	
;----------------------
;Skip the effects
;If you skipped the circle logo, you will skip the effects here too
lr_trap *b_title_moment

if %title_skip = 1 goto *b_title_skip_100
	
	lr_trap off
	cl a,1
	mov %title_skip,0
	
	gosub *title_loading
	
	lr_trap *b_title_moment
	
	vsp t_trophy_lsp,1
	vsp t_warning_lsp,1

	bg $tmp10,6
	vsp t_hane_lsp,1 : print 5
	vsp t_logo_lsp,1 : print 22
	vsp t_btn_start_lsp,1 : print 22
	vsp t_btn_web_lsp,1 : print 22
	 
	if %CHIRU_MODE != 0 jumpf
	if %UMINEKOEND >= 11 vsp t_btn_tea_lsp,1 : amsp t_btn_tea_lsp,1325,552,250 : print 22
	if %UMINEKOEND >= 12 vsp t_btn_ura_tea_lsp,1 : amsp t_btn_ura_tea_lsp,1325,616,250 :  print 22
	if %UMINEKOEND >= 20 vsp t_chars_lsp,1 : amsp t_chars_lsp,1325,680,250 : print 22
	if %UMINEKOEND >= 20 vsp t_btn_tips_lsp,1 : amsp t_btn_tips_lsp,1325,744,250 : print 22
	~
	
	if %CHIRU_MODE != 1 jumpf
		if %UMINEKOEND >= 51 vsp t_btn_tea_lsp,1 : amsp t_btn_tea_lsp,1325,552,250 : print 22
		if %UMINEKOEND >= 52 vsp t_btn_ura_tea_lsp,1 : amsp t_btn_ura_tea_lsp,1325,616,250 :  print 22
		if %UMINEKOEND >= 60 vsp t_chars_lsp,1 : amsp t_chars_lsp,1325,680,250 : print 22
		if %UMINEKOEND >= 60 vsp t_btn_tips_lsp,1 : amsp t_btn_tips_lsp,1325,744,250 : print 22
	~
	
	vsp t_config_lsp,1 : print 22
	if %UMINEKOEND >= 1 vsp t_cg_lsp,1 : print 22
	if %UMINEKOEND >= 1 vsp t_btn_music_lsp,1 : print 22
	vsp t_btn_exit_lsp,1 : print 22
	
	;Erase the submenus
	_csp t_btn_ep1_lsp : _csp t_btn_ep2_lsp : _csp t_btn_ep3_lsp : _csp t_btn_ep4_lsp
	_csp t_btn_ep2_unlock_lsp : _csp t_btn_ep3_unlock_lsp : _csp t_btn_ep4_unlock_lsp
	_csp t_btn_load_lsp
	_csp t_btn_ep1_tea_lsp : _csp t_btn_ep2_tea_lsp : _csp t_btn_ep3_tea_lsp : _csp t_btn_ep4_tea_lsp
	_csp t_btn_ep1_tips_lsp : _csp t_btn_ep2_tips_lsp : _csp t_btn_ep3_tips_lsp : _csp t_btn_ep4_tips_lsp
	_csp t_btn_ep1_ura_tea_lsp : _csp t_btn_ep2_ura_tea_lsp : _csp t_btn_ep3_ura_tea_lsp : _csp t_btn_ep4_ura_tea_lsp
    ;Clear the standing images
    cl a,1

;Momentous display
*b_title_skip_100
*b_title_moment
	lr_trap off
	_csp 4
	
	if %title_skip == 0 goto *b_title_no_load
	mov %title_skip,0
	
	gosub *title_loading
	
	*b_title_no_load

	bg $tmp10,1
	vsp t_btn_omake_lsp,1
	vsp t_trophy_lsp,1
	vsp t_warning_lsp,1
	vsp t_bg_lsp,1
	vsp t_hane_lsp,1
	vsp t_logo_lsp,1
	vsp t_btn_start_lsp,1
	vsp t_btn_web_lsp,1
	vsp t_btn_exit_lsp,1
	if %UMINEKOEND >= 1 vsp t_cg_lsp,1
	vsp t_config_lsp,1
	vsp t_btn_ep1_lsp,0
	vsp t_btn_ep2_lsp,0
	vsp t_btn_ep3_lsp,0
	vsp t_btn_ep4_lsp,0
	vsp t_btn_ep5_8_lsp,0
	vsp t_btn_ep2_unlock_lsp,0
	vsp t_btn_ep3_unlock_lsp,0
	vsp t_btn_ep4_unlock_lsp,0
	vsp t_btn_ep5_8_unlock_lsp,0
	vsp t_btn_load_lsp,0
	if %UMINEKOEND >= 11 vsp t_btn_tea_lsp,1 : amsp t_btn_tea_lsp,1325,552,250
	if %UMINEKOEND >= 12 vsp t_btn_ura_tea_lsp,1 : amsp t_btn_ura_tea_lsp,1325,616,250
	if %UMINEKOEND >= 20 vsp t_btn_tips_lsp,1 : amsp t_btn_tips_lsp,1325,744,250	
	if %UMINEKOEND >= 1 vsp t_btn_music_lsp,1
	if %UMINEKOEND >= 20 vsp t_chars_lsp,1 : amsp t_chars_lsp,1325,680,250

	;Erase the submenus
	_csp t_btn_ep1_lsp : _csp t_btn_ep2_lsp : _csp t_btn_ep3_lsp : _csp t_btn_ep4_lsp : _csp t_btn_ep5_8_lsp
	_csp t_btn_ep2_unlock_lsp : _csp t_btn_ep3_unlock_lsp : _csp t_btn_ep4_unlock_lsp : _csp t_btn_ep5_8_unlock_lsp 
	_csp t_btn_load_lsp
	_csp t_btn_ep1_tea_lsp : _csp t_btn_ep2_tea_lsp : _csp t_btn_ep3_tea_lsp : _csp t_btn_ep4_tea_lsp
	_csp t_btn_ep1_tips_lsp : _csp t_btn_ep2_tips_lsp : _csp t_btn_ep3_tips_lsp : _csp t_btn_ep4_tips_lsp
	_csp t_btn_ep1_ura_tea_lsp : _csp t_btn_ep2_ura_tea_lsp : _csp t_btn_ep3_ura_tea_lsp : _csp t_btn_ep4_ura_tea_lsp
	;Clear the standing images
	cl a,1

if %CHIRU_MODE = 1 gosub *verify_chiru

; Definitions and buttons, click the button for processing
*b_title_button_loop
	btndef ""
	transbtn
	exbtn_d "C62-65C72-77C79-88C101C103C105"
	exbtn t_btn_start_lsp,t_btn_start_lsp,"P83"
	exbtn t_btn_web_lsp,t_btn_web_lsp,"P87"
	exbtn t_btn_tea_lsp,t_btn_tea_lsp,"P86"
	exbtn t_btn_ura_tea_lsp,t_btn_ura_tea_lsp,"P81"
	exbtn t_chars_lsp,t_chars_lsp,"P103"
	exbtn t_btn_tips_lsp,t_btn_tips_lsp,"P85"
	exbtn t_config_lsp,t_config_lsp,"P101"
	exbtn t_cg_lsp,t_cg_lsp,"P105"
	exbtn t_btn_music_lsp,t_btn_music_lsp,"P84"
	exbtn t_btn_exit_lsp,t_btn_exit_lsp,"P82"
	spbtn t_trophy_lsp,t_trophy_lsp
	if %omake = 0 spbtn t_btn_omake_lsp,t_btn_omake_lsp
	if %omake = 1 spbtn t_btn_omake_lsp,t_btn_omake_end_lsp
	btntime 30000
	btnwait2 %BtnRes

	if %BtnRes = t_btn_start_lsp cell t_btn_start_lsp,1 : print 1 : btndef "" : goto *start_sub_menu
	if %BtnRes = t_btn_web_lsp seplay 9,1001,100 : menu_window : shell "http://07th-expansion.net"
	if %BtnRes = t_btn_tea_lsp cell t_btn_tea_lsp,1 : print 1 : btndef "" : goto *tea_sub_menu
	if %BtnRes = t_btn_ura_tea_lsp cell t_btn_ura_tea_lsp,1 : print 1 : btndef "" : goto *ura_tea_sub_menu
	if %BtnRes = t_btn_tips_lsp cell t_btn_tips_lsp,1 : print 1 : btndef "" : goto *tips_sub_menu
	if %BtnRes = t_btn_exit_lsp seplay 9,18,100 : csp_rst : vol_me 1,-1,2500 : bg black,18,3000,msk_kanon_r : wait 3000 : end
	if %BtnRes = t_btn_music_lsp seplay 9,1001,100 : gosub *bgm_mode_ps3 : mov %title_skip,1 : goto *b_title
	if %BtnRes = t_chars_lsp cell t_chars_lsp,1 : print 1 : btndef "" : goto *char_sub_menu
	if %BtnRes = t_cg_lsp csp_rst : seplay 9,1001,100 : gosub *cg_mode_ps3 : mov %title_skip,1 : goto *b_title
	if %BtnRes = t_trophy_lsp csp_rst : seplay 9,1001,100 : gosub *trophy_ps3 : mov %title_skip,1 : goto *b_title
	if %BtnRes = t_config_lsp csp_rst : seplay 9,1001,100 : gosub *settings : mov %title_skip,1 : goto *b_title
	if %BtnRes = t_btn_omake_lsp && %omake_level > 1 mov %scenario_Number,5 mov %omake,1 : goto *umi_start
	if %CHIRU_MODE = 0 && %BtnRes = t_btn_omake_lsp gosub *omake_sub_menu
	if %CHIRU_MODE = 1 && %BtnRes = t_btn_omake_lsp mov %scenario_Number,5 mov %omake,1 : goto *umi_start
	if %BtnRes = t_btn_omake_end_lsp gosub *omake_sub_menu_end
	; Show the op only after ep1 prologue
	if %BtnRes = -5 && %UMINEKOEND > 0 goto *show_opening
	if %BtnRes = -5 && $flag_scenario_1_op == "●" goto *show_opening
	goto *b_title_button_loop

*switch_game
	chvol 0,%dlg_vol
	dwave 0,"sound\voice\27\50700008.ogg" 

*switch_game_q
	csp_rst
	bg black,0
	print 18,50,msk_down

	waitvoice 1 

	mov %title_skip,1
	if %CHIRU_MODE == 1 mov %CHIRU_MODE,0 : jumpf
		mov %CHIRU_MODE,1
	~

	definereset

*show_opening
	if %CHIRU_MODE == 0 mov $Free1,"op" : goto *show_opening_do
	
	;OP level
	mov %Free1,0
	if %UMINEKOEND > 50           mov %Free1,1 ;56
	if $flag_scenario_5_op == "●" mov %Free1,1 ;56
	if %UMINEKOEND >= 70          mov %Free1,2 ;78

	if %Free1 != 0 jumpf
		mov $Free1,"op4"
	~
	if %Free1 != 1 jumpf
		if %current_op == 0 mov $Free1,"op56"
		if %current_op == 1 mov $Free1,"op4"
		inc %current_op
		if %current_op = 2 mov %current_op,0
	~
	if %Free1 != 2 jumpf
		if %current_op == 0 mov $Free1,"op78"
		if %current_op == 1 mov $Free1,"op4"
		if %current_op == 2 mov $Free1,"op56"
		inc %current_op
		if %current_op = 3 mov %current_op,0
	~	

*show_opening_do
	csp_rst
	bg black,0
	vol_mix_fade 1000
	flush 2
	wait 500
	mov %anim_mode,off
	pam 100,$Free1,1
	if %anim_mode == on flush 23 ;trapped
	if %anim_mode == off flush 1

	mov %title_skip,1
	goto *b_title

*title_loading

	clear_cache_img 0 ;main cache

		lsp 4,loading_progres,1170,898
		print 1

		;Description texts
		if %CHIRU_MODE = 0 lsph t_txt_ep1_lsp,t_txt_ep1,100,470
		if %CHIRU_MODE = 0 lsph t_txt_ep2_lsp,t_txt_ep2,100,470
		if %CHIRU_MODE = 0 lsph t_txt_ep3_lsp,t_txt_ep3,100,470
		if %CHIRU_MODE = 0 lsph t_txt_ep4_lsp,t_txt_ep4,100,470
		
		if %CHIRU_MODE = 1 lsph t_txt_ep5_lsp,t_txt_ep5,100,470
		if %CHIRU_MODE = 1 lsph t_txt_ep6_lsp,t_txt_ep6,100,470
		if %CHIRU_MODE = 1 lsph t_txt_ep7_lsp,t_txt_ep7,100,470
		if %CHIRU_MODE = 1 lsph t_txt_ep8_lsp,t_txt_ep8,100,470
		
		lsph t_txt_ep1_4_lsp,t_txt_ep1_4,100,470
		lsph t_txt_ep5_8_lsp,t_txt_ep5_8,100,470
		
		lsph t_txt_load_lsp,t_txt_load,100,470
		lsph t_txt_web_lsp,t_txt_web,100,470
		lsph t_txt_music_lsp,t_txt_music,100,470
		lsph t_txt_start_lsp,t_txt_start,100,470
		lsph t_txt_exit_lsp,t_txt_exit,100,470
		lsph t_txt_lock_lsp,t_txt_lock,100,470
		lsph t_txt_unlock_lsp,t_txt_unlock,100,470

		lsph t_txt_tea_lsp,t_txt_tea,100,470

		lsph t_txt_ura_tea_lsp,t_txt_ura_tea,100,470

		lsph t_txt_tips_lsp,t_txt_tips,100,470

		lsph t_txt_config_lsp,t_txt_config,100,470
		lsph t_txt_cg_lsp,t_txt_cg,100,470
		lsph t_txt_chars_lsp,t_txt_chars,100,470

		if %enable_cache == 0 goto *skip_load_ru

		if %CHIRU_MODE = 0 cache_img 0,msgwnd_wnd
		if %CHIRU_MODE = 1 cache_img 0,msgwnd_wnd_ep5
		cache_img 0,"graphics\system\wnd\msgwnd2.png"
		cache_img 0,"graphics\system\wnd\msgwnd3.png"
		cache_img 0,"graphics\system\wnd\msgwnd4.png"

		cache_img 0,r_btn_load2_cache
		cache_img 0,r_btn_save2_cache
		cache_img 0,r_btn_char_cache
		cache_img 0,r_btn_tips_cache
		cache_img 0,r_btn_setting_cache
		cache_img 0,r_btn_logs_cache
		cache_img 0,r_btn_clear_cache
		cache_img 0,r_btn_system_cache

		lsph 5,cache_chars1,0,0 : _csp 5
		lsph 5,cache_chars2,0,0 : _csp 5
		lsph 5,cache_chars3,0,0 : _csp 5
		lsph 5,cache_chars4,0,0 : _csp 5
		lsph 5,cache_chars5,0,0 : _csp 5
		lsph 5,cache_chars6,0,0 : _csp 5
		lsph 5,cache_chars7,0,0 : _csp 5
		lsph 5,cache_chars8,0,0 : _csp 5
		lsph 5,cache_chars9,0,0 : _csp 5
		lsph 5,cache_chars10,0,0 : _csp 5
	*skip_load_ru

	if %enable_cache == 0 jumpf

		cache_img 0,"graphics\colour\black.png"
		
		cache_img 0,"graphics\system\fade\1.png"
		cache_img 0,"graphics\system\fade\2.png"
		cache_img 0,"graphics\system\fade\c.png"
		cache_img 0,"graphics\system\fade\down.png"
		cache_img 0,"graphics\system\fade\kanon_r.png"
		cache_img 0,"graphics\system\fade\left.png"
		cache_img 0,"graphics\system\fade\m1.png"
		cache_img 0,"graphics\system\fade\right.png"
		cache_img 0,"graphics\system\fade\up.png"
		cache_img 0,"graphics\system\fade\x.png"

		cache_img 0,"graphics\system\skip.png"
		cache_img 0,"graphics\system\automode.png"

		cache_img 0,"graphics\menu\SystemBtn\black_buttons.png"
		cache_img 0,"graphics\menu\config\bg_config.png"
		cache_img 0,"graphics\menu\tips\bg_tips.png"
		cache_img 0,"graphics\menu\chars\bg_chars.png"
	~
	
	_csp 4
return

;------------------------------
;Sub-menu after pressing the Start
*start_sub_menu
	btndef ""

	seplay 1,51,100
	;To erase any button other than the start, to place the button ep1 start small, of the load.
	;to place the button, Unlock ep2 (Note: The branch in a clear state)
	;Display the Unlock button and a clear state EP2 UMINEKOEND not <20, does not blink
	;To view the EP2 clear, and may blink UMINEKOEND> = 20 EP1.

	vsp t_btn_web_lsp,0
	vsp t_btn_tea_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	vsp t_btn_ura_tea_lsp,0
	vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0

	print 1

	;start chiru subs_menu
	if %CHIRU_MODE = 1 goto *start_sub_menu_500
	
   ;An episode, not a clear state
   ;------------------------------
	*start_sub_menu_100
	notif %UMINEKOEND < 20 goto *start_sub_menu_btn_100
	
		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep1,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep2_1,1562,548 ;+60
		lsp t_btn_ep3_lsp,t_btn_ep3_1,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep4_1,1562,668
		lsp t_btn_ep5_8_lsp,t_btn_ep5_8_1,1562,728
		lsp t_btn_ep2_unlock_lsp,t_btn_ep_unlock,1430,548
		lsp t_btn_ep3_unlock_lsp,t_btn_ep_unlock,1430,608
		lsp t_btn_ep4_unlock_lsp,t_btn_ep_unlock,1430,668
		lsp t_btn_ep5_8_unlock_lsp,t_btn_ep_unlock,1430,728
		lsp t_btn_load_lsp,t_btn_load,1562,788	

		print 85

		*start_sub_menu_btn_100_loop
		btndef ""

		exbtn_d "P97,1C62-65C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P65"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P80"
		exbtn t_btn_ep2_unlock_lsp,t_btn_ep2_unlock_lsp,"P79"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P80"
		exbtn t_btn_ep3_unlock_lsp,t_btn_ep3_unlock_lsp,"P79"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P80"
		exbtn t_btn_ep4_unlock_lsp,t_btn_ep4_unlock_lsp,"P79"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P80"
		exbtn t_btn_ep5_8_unlock_lsp,t_btn_ep5_8_unlock_lsp,"P79"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_100_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep3_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_100_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep4_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_100_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep5_8_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_100_loop ;Button to make a sound processing was run over by

		if %BtnRes = t_btn_ep2_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep2_unlock ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep3_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep3_unlock ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep4_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep4_unlock ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep5_8_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep5_8_unlock ;Out to unlock a confirmation message.

		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_100_loop

		;Check out the message, unlock processing
		*ep2_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
			
			;Button processing
			*ep2_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep2_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,20
				mov %UMINEKOEND_FLG,20
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep2_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep2_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_100
			*ep2_unlock_200
		goto *ep2_unlock_loop


		;Check out the message, unlock processing
		*ep3_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
				
			;Button processing
			*ep3_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep3_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,30
				mov %UMINEKOEND_FLG,30
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep3_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep3_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_100
			*ep3_unlock_200
		goto *ep3_unlock_loop


		;Check out the message, unlock processing
		*ep4_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
			
			;Button processing
			*ep4_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep4_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,40
				mov %UMINEKOEND_FLG,40
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep4_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep4_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_100
			*ep4_unlock_200
		goto *ep4_unlock_loop
		
		;Check out the message, unlock processing
		*ep5_8_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
			
			;Button processing
			*ep5_8_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep5_8_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,50
				mov %UMINEKOEND_FLG,50
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep5_8_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep5_8_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_100
			*ep5_8_unlock_200
		goto *ep5_8_unlock_loop
	*start_sub_menu_btn_100

   ;------------------------------
   ;Not clear a clear state 2 episode, episode
	*start_sub_menu_200
	notif %UMINEKOEND >= 20 goto *start_sub_menu_btn_200
	notif %UMINEKOEND < 30 goto *start_sub_menu_btn_200
	
		if %omake = 1 goto *omake_sub_menu_ep
		
		lsp t_btn_ep1_lsp,t_btn_ep1,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep2,1562,548
		if %UMINEKOEND_FLG = 20 lsp t_btn_ep2_lsp,t_btn_ep2_new,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep3_1,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep4_1,1562,668
		lsp t_btn_ep5_8_lsp,t_btn_ep5_8_1,1562,728		
		lsp t_btn_ep3_unlock_lsp,t_btn_ep_unlock,1430,608
		lsp t_btn_ep4_unlock_lsp,t_btn_ep_unlock,1430,668
		lsp t_btn_ep5_8_unlock_lsp,t_btn_ep_unlock,1430,728
		lsp t_btn_load_lsp,t_btn_load,1562,788		

		print 85
		
		*start_sub_menu_btn_200_loop
		btndef ""

		exbtn_d "P97,1C62-65C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P65"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P64"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P80"
		exbtn t_btn_ep3_unlock_lsp,t_btn_ep3_unlock_lsp,"P79"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P80"
		exbtn t_btn_ep4_unlock_lsp,t_btn_ep4_unlock_lsp,"P79"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P80"
		exbtn t_btn_ep5_8_unlock_lsp,t_btn_ep5_8_unlock_lsp,"P79"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_200_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep4_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_200_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep5_8_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_200_loop ;Button to make a sound processing was run over by
		
		if %BtnRes = t_btn_ep3_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep3_unlock_2 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep4_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep4_unlock_2 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep5_8_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep5_8_unlock_2 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_200_loop

		;Check out the message, unlock processing
		*ep3_unlock_2
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
			;Button processing
			*ep3_unlock_2_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep3_unlock_2_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,30
				mov %UMINEKOEND_FLG,30
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep3_unlock_2_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep3_unlock_2_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_200
			*ep3_unlock_2_200
		goto *ep3_unlock_2_loop

		;Check out the message, unlock processing
		*ep4_unlock_2
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
			;Button processing
			*ep4_unlock_2_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep4_unlock_2_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,40
				mov %UMINEKOEND_FLG,40
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep4_unlock_2_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep4_unlock_2_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_200
			*ep4_unlock_2_200
		goto *ep4_unlock_2_loop
		
		
		;Check out the message, unlock processing
		*ep5_8_unlock_2
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
		;Button processing
		*ep5_8_unlock_2_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep5_8_unlock_2_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,50
				mov %UMINEKOEND_FLG,50
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep5_8_unlock_2_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep5_8_unlock_2_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_200
			*ep5_8_unlock_2_200
		goto *ep5_8_unlock_2_loop
	*start_sub_menu_btn_200

   ;------------------------------
   ;Clear two-state episode
	*start_sub_menu_300
	notif %UMINEKOEND >= 30 goto *start_sub_menu_btn_300
	notif %UMINEKOEND < 40 goto *start_sub_menu_btn_300
	
		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep1,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep2,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep3,1562,608
		if %UMINEKOEND_FLG = 30 lsp t_btn_ep3_lsp,t_btn_ep3_new,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep4_1,1562,668
		lsp t_btn_ep5_8_lsp,t_btn_ep5_8_1,1562,728
		lsp t_btn_ep4_unlock_lsp,t_btn_ep_unlock,1430,669
		lsp t_btn_ep5_8_unlock_lsp,t_btn_ep_unlock,1430,728
		lsp t_btn_load_lsp,t_btn_load,1562,788

		print 85

		*start_sub_menu_btn_300_loop
		btndef ""

		exbtn_d "P97,1C62-65C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P65"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P64"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P63"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P80"
		exbtn t_btn_ep4_unlock_lsp,t_btn_ep4_unlock_lsp,"P79"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P80"
		exbtn t_btn_ep5_8_unlock_lsp,t_btn_ep5_8_unlock_lsp,"P79"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : goto *umi_start
		if %BtnRes = t_btn_ep4_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_300_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep5_8_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_300_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep4_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep4_unlock_3 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep5_8_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep5_8_unlock_3 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_300_loop

		;Check out the message, unlock processing
		*ep4_unlock_3
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
			;Button processing
			*ep4_unlock_3_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep4_unlock_3_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,40
				mov %UMINEKOEND_FLG,40
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep4_unlock_3_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep4_unlock_3_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_300
			*ep4_unlock_3_200
		goto *ep4_unlock_3_loop
		
		;Check out the message, unlock processing
		*ep5_8_unlock_3
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				

			print 24
			
			;Button processing
			*ep5_8_unlock_3_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep5_8_unlock_3_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,50
				mov %UMINEKOEND_FLG,50
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep5_8_unlock_3_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep5_8_unlock_3_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_300
			*ep5_8_unlock_3_200
		goto *ep5_8_unlock_3_loop
		
	*start_sub_menu_btn_300
   ;------------------------------
   ;Clear state episode 3
	*start_sub_menu_400
	notif %UMINEKOEND >= 40 goto *start_sub_menu_btn_400
	notif %UMINEKOEND < 50 goto *start_sub_menu_btn_400
	
		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep1,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep2,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep3,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep4,1562,668
		lsp t_btn_ep5_8_lsp,t_btn_ep5_8_1,1562,728
		if %UMINEKOEND_FLG = 40 lsp t_btn_ep4_lsp,t_btn_ep4_new,1562,668
		lsp t_btn_ep5_8_unlock_lsp,t_btn_ep_unlock,1430,728
		lsp t_btn_load_lsp,t_btn_load,1562,788
		
		print 85

		*start_sub_menu_btn_400_loop
		btndef ""

		exbtn_d "P97,1C62-65C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P65"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P64"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P63"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P62"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P80"
		exbtn t_btn_ep5_8_unlock_lsp,t_btn_ep5_8_unlock_lsp,"P79"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : goto *umi_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : goto *umi_start
		if %BtnRes = t_btn_ep5_8_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_400_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep5_8_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep5_8_unlock_4 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_400_loop
		
		*ep5_8_unlock_4
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				

			print 24
			
			;Button processing
			*ep5_8_unlock_4_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep5_8_unlock_4_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,50
				mov %UMINEKOEND_FLG,50
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep5_8_unlock_4_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep5_8_unlock_4_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_400
			*ep5_8_unlock_4_200
		goto *ep5_8_unlock_4_loop
		
	*start_sub_menu_btn_400
;------------------------------
*start_sub_menu_450
	notif %UMINEKOEND >= 50 goto *start_sub_menu_btn_450
	
		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep1,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep2,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep3,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep4,1562,668
		lsp t_btn_ep5_8_lsp,t_btn_ep5_8,1562,728
		;if %UMINEKOEND_FLG = 40 lsp t_btn_ep4_lsp,t_btn_ep4_new,1562,668
		lsp t_btn_load_lsp,t_btn_load,1562,788

		print 85

		*start_sub_menu_btn_450_loop
		btndef ""

		exbtn_d "P97,1C62-65C79-88C101C103C105C72"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P65"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P64"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P63"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P62"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P72"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,1 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,2 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,3 : goto *umi_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,4 : goto *umi_start
		if %BtnRes = t_btn_ep5_8_lsp : goto *switch_game
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_450_loop
		
	*start_sub_menu_btn_450
;------------------------------


*start_sub_menu_500
	notif %UMINEKOEND < 60 goto *start_sub_menu_btn_500

		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep5,1562,488
		if %UMINEKOEND_FLG = 50 lsp t_btn_ep1_lsp,t_btn_ep5_new,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep6_1,1562,548 ;+60
		lsp t_btn_ep3_lsp,t_btn_ep7_1,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep8_1,1562,668
		lsp t_btn_ep2_unlock_lsp,t_btn_ep_unlock,1430,548
		lsp t_btn_ep3_unlock_lsp,t_btn_ep_unlock,1430,608
		lsp t_btn_ep4_unlock_lsp,t_btn_ep_unlock,1430,668
		lsp t_btn_ep5_8_lsp,t_btn_ep1_4,1562,728
		lsp t_btn_load_lsp,t_btn_load,1562,788	

		print 85

		*start_sub_menu_btn_500_loop
		btndef ""

		exbtn_d "P97,1C73-77C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P77"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P80"
		exbtn t_btn_ep2_unlock_lsp,t_btn_ep2_unlock_lsp,"P79"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P80"
		exbtn t_btn_ep3_unlock_lsp,t_btn_ep3_unlock_lsp,"P79"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P80"
		exbtn t_btn_ep4_unlock_lsp,t_btn_ep4_unlock_lsp,"P79"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P73"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,5 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_500_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep3_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_500_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep4_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_500_loop ;Button to make a sound processing was run over by

		if %BtnRes = t_btn_ep2_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep6_unlock ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep3_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep7_unlock ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep4_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep8_unlock ;Out to unlock a confirmation message.
		
		if %BtnRes = t_btn_ep5_8_lsp : goto *switch_game
		
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_500_loop

		;Check out the message, unlock processing
		*ep6_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
			
			;Button processing
			*ep6_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep6_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,60
				mov %UMINEKOEND_FLG,60
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep6_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep6_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_500
			*ep6_unlock_200
		goto *ep6_unlock_loop


		;Check out the message, unlock processing
		*ep7_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
				
			;Button processing
			*ep7_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep7_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,70
				mov %UMINEKOEND_FLG,70
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep7_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep7_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_500
			*ep7_unlock_200
		goto *ep7_unlock_loop


		;Check out the message, unlock processing
		*ep8_unlock
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566			

			print 24
			
			;Button processing
			*ep8_unlock_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep8_unlock_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,80
				mov %UMINEKOEND_FLG,80
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep8_unlock_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep8_unlock_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_500
			*ep8_unlock_200
		goto *ep8_unlock_loop
	*start_sub_menu_btn_500
;------------------------------
	*start_sub_menu_600
	;notif %UMINEKOEND >= 60 goto *start_sub_menu_btn_600
	;notif %UMINEKOEND < 70 goto *start_sub_menu_btn_600
	if %UMINEKOEND < 60 goto *start_sub_menu_btn_600
	if %UMINEKOEND >= 70 goto *start_sub_menu_btn_600

		if %omake = 1 goto *omake_sub_menu_ep
		
		lsp t_btn_ep1_lsp,t_btn_ep5,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep6,1562,548
		if %UMINEKOEND_FLG = 60 lsp t_btn_ep2_lsp,t_btn_ep6_new,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep7_1,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep8_1,1562,668
		lsp t_btn_ep3_unlock_lsp,t_btn_ep_unlock,1430,608
		lsp t_btn_ep4_unlock_lsp,t_btn_ep_unlock,1430,668
		lsp t_btn_ep5_8_lsp,t_btn_ep1_4,1562,728
		lsp t_btn_load_lsp,t_btn_load,1562,788
				
		print 85
		
		*start_sub_menu_btn_600_loop
		btndef ""

		exbtn_d "P97,1C73-77C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P77"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P76"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P80"
		exbtn t_btn_ep3_unlock_lsp,t_btn_ep3_unlock_lsp,"P79"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P80"
		exbtn t_btn_ep4_unlock_lsp,t_btn_ep4_unlock_lsp,"P79"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P73"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,5 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,6 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_600_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep4_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_600_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep3_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep7_unlock_2 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep4_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep8_unlock_2 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep5_8_lsp : goto *switch_game
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_600_loop

		;Check out the message, unlock processing
		*ep7_unlock_2
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
			;Button processing
			*ep7_unlock_2_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep7_unlock_2_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,70
				mov %UMINEKOEND_FLG,70
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep7_unlock_2_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep7_unlock_2_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_600
			*ep7_unlock_2_200
		goto *ep7_unlock_2_loop

		;Check out the message, unlock processing
		*ep8_unlock_2
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
			;Button processing
			*ep8_unlock_2_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep8_unlock_2_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,80
				mov %UMINEKOEND_FLG,80
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep8_unlock_2_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep8_unlock_2_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_600
			*ep8_unlock_2_200
		goto *ep8_unlock_2_loop
	*start_sub_menu_btn_600

   ;------------------------------
   ;Clear two-state episode
	*start_sub_menu_700
	;notif %UMINEKOEND >= 70 goto *start_sub_menu_btn_700
	;notif %UMINEKOEND < 80 goto *start_sub_menu_btn_700
	if %UMINEKOEND < 70 goto *start_sub_menu_btn_700
	if %UMINEKOEND >= 80 goto *start_sub_menu_btn_700
	
		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep5,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep6,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep7,1562,608
		if %UMINEKOEND_FLG = 70 lsp t_btn_ep3_lsp,t_btn_ep7_new,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep8_1,1562,668
		lsp t_btn_ep4_unlock_lsp,t_btn_ep_unlock,1430,669
		lsp t_btn_ep5_8_lsp,t_btn_ep1_4,1562,728
		lsp t_btn_load_lsp,t_btn_load,1562,788	
		
		print 85

		*start_sub_menu_btn_700_loop
		btndef ""

		exbtn_d "P97,1C73-77C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P77"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P76"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P75"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P80"
		exbtn t_btn_ep4_unlock_lsp,t_btn_ep4_unlock_lsp,"P79"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P73"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,5 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,6 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,7 : goto *umi_start
		if %BtnRes = t_btn_ep4_lsp btndef "" : seplay 9,5,100 : goto *start_sub_menu_btn_700_loop ;Button to make a sound processing was run over by
		if %BtnRes = t_btn_ep4_unlock_lsp btndef "" : seplay 9,1001,100 : goto *ep8_unlock_3 ;Out to unlock a confirmation message.
		if %BtnRes = t_btn_ep5_8_lsp : goto *switch_game
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_700_loop

		;Check out the message, unlock processing
		*ep8_unlock_3
			lsp unlock_bg_lsp,unlock_bg,750,400
			lsp unlock_yes_lsp,unlock_yes,789,494
			lsp unlock_no_lsp,unlock_no,789,566				
			
			print 24
			
			;Button processing
			*ep8_unlock_3_loop
			btndef ""
			spbtn unlock_yes_lsp,unlock_yes_lsp
			spbtn unlock_no_lsp,unlock_no_lsp
			btnwait2 %BtnRes   ;%bm_p
			
			notif %BtnRes = unlock_yes_lsp goto *ep8_unlock_3_100
				;One state to clear the episode.
				seplay 3,1001,100
				mov %UMINEKOEND,80
				mov %UMINEKOEND_FLG,80
				gosub *do_unlock
				wait 1000
				E_A
				seplay 1,31,100
				csp_rst
				bg black,22
				
				wait 2000
				seplay 1,25,100
				bg TEXT006,22
				delay 12000
				bg black,22
				E_A
				goto *b_title
			*ep8_unlock_3_100
				
			notif %BtnRes = unlock_no_lsp notif %BtnRes = -1 goto *ep8_unlock_3_200
				_csp unlock_bg_lsp
				_csp unlock_yes_lsp
				_csp unlock_no_lsp
				btndef ""
				seplay 9,1001,100
				print 1
				goto *start_sub_menu_700
			*ep8_unlock_3_200
		goto *ep8_unlock_3_loop
	*start_sub_menu_btn_700
   ;------------------------------
   ;Clear state episode 3
	*start_sub_menu_800
	;notif %UMINEKOEND >= 80 goto *start_sub_menu_btn_800
	if %UMINEKOEND < 80 goto *start_sub_menu_btn_800
	if %UMINEKOEND > 90 goto *start_sub_menu_btn_800

		if %omake = 1 goto *omake_sub_menu_ep
	
		lsp t_btn_ep1_lsp,t_btn_ep5,1562,488
		lsp t_btn_ep2_lsp,t_btn_ep6,1562,548
		lsp t_btn_ep3_lsp,t_btn_ep7,1562,608
		lsp t_btn_ep4_lsp,t_btn_ep8,1562,668
		if %UMINEKOEND_FLG = 80 lsp t_btn_ep4_lsp,t_btn_ep8_new,1562,668
		lsp t_btn_ep5_8_lsp,t_btn_ep1_4,1562,728
		lsp t_btn_load_lsp,t_btn_load,1562,788	
		
		print 85

		*start_sub_menu_btn_800_loop
		btndef ""

		exbtn_d "P97,1C73-77C79-88C101C103C105"

		exbtn t_btn_ep1_lsp,t_btn_ep1_lsp,"P77"
		exbtn t_btn_ep2_lsp,t_btn_ep2_lsp,"P76"
		exbtn t_btn_ep3_lsp,t_btn_ep3_lsp,"P75"
		exbtn t_btn_ep4_lsp,t_btn_ep4_lsp,"P74"
		exbtn t_btn_ep5_8_lsp,t_btn_ep5_8_lsp,"P73"
		exbtn t_btn_load_lsp,t_btn_load_lsp,"P88"

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_lsp mov %scenario_Number,5 : goto *umi_start
		if %BtnRes = t_btn_ep2_lsp mov %scenario_Number,6 : goto *umi_start
		if %BtnRes = t_btn_ep3_lsp mov %scenario_Number,7 : goto *umi_start
		if %BtnRes = t_btn_ep4_lsp mov %scenario_Number,8 : goto *umi_start
		if %BtnRes = t_btn_ep5_8_lsp : goto *switch_game
		if %BtnRes = t_btn_load_lsp btndef "" : _csp t_warning_lsp : seplay 9,1001,100 : mov %load_for_title,1 : gosub *loadmode : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		goto *start_sub_menu_btn_800_loop
	*start_sub_menu_btn_800
;------------------------------

;------------------------------
;Sub-menu after pressing the Tea Party
*tea_sub_menu
	if %CHIRU_MODE = 1 goto *tea_sub_menu_chiru

	btndef ""

	;Turn off the button other than the tea party, tea party button to display per episode
	;Note to clear the flag, go to view at least ep2 ep1, 3 in more than one.

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	;vsp t_btn_tea_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	vsp t_btn_ura_tea_lsp,0
	vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0
	
	seplay 1,51,100
	print 1

	wait 100

	;Shift on the Tea Party button.
	resettimer
	msp t_btn_tea_lsp,0,-32,-100 : print 1 : waittimer 50
	msp t_btn_tea_lsp,0,-32,0 : print 1 : waittimer 100
	msp t_btn_tea_lsp,0,-32,0 : print 1 : waittimer 150
	msp t_btn_tea_lsp,0,-32,100 :print 1	
	seplay 9,1001,100

	*tea_sub_menu_100

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 11 lsp t_btn_ep1_tea_lsp,t_btn_ep1,1562,488
	if %UMINEKOEND >= 21 lsp t_btn_ep2_tea_lsp,t_btn_ep2,1562,548
	if %UMINEKOEND >= 31 lsp t_btn_ep3_tea_lsp,t_btn_ep3,1562,608
	if %UMINEKOEND >= 41 lsp t_btn_ep4_tea_lsp,t_btn_ep4,1562,668
	;new
	if %UMINEKOEND_FLG = 11 lsp t_btn_ep1_tea_lsp,t_btn_ep1_new,1562,488
	if %UMINEKOEND_FLG = 21 lsp t_btn_ep2_tea_lsp,t_btn_ep2_new,1562,548
	if %UMINEKOEND_FLG = 31 lsp t_btn_ep3_tea_lsp,t_btn_ep3_new,1562,608
	if %UMINEKOEND_FLG = 41 lsp t_btn_ep4_tea_lsp,t_btn_ep4_new,1562,668
	
	print 85 ;15,10

	*tea_sub_menu_btn_100_loop
		btndef ""
		exbtn_d "P94,1C81-C87C101C103C105C42-45P86,1"

		exbtn t_btn_ep1_tea_lsp,t_btn_ep1_tea_lsp,""
		exbtn t_btn_ep2_tea_lsp,t_btn_ep2_tea_lsp,""
		exbtn t_btn_ep3_tea_lsp,t_btn_ep3_tea_lsp,""
		exbtn t_btn_ep4_tea_lsp,t_btn_ep4_tea_lsp,""

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_tea_lsp btndef "" : mov %scenario_Number,1 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_1
		if %BtnRes = t_btn_ep2_tea_lsp btndef "" : mov %scenario_Number,2 : csp_rst  : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_2
		if %BtnRes = t_btn_ep3_tea_lsp btndef "" : mov %scenario_Number,3 : csp_rst  : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_3
		if %BtnRes = t_btn_ep4_tea_lsp btndef "" : mov %scenario_Number,4 : csp_rst  : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_4
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *tea_sub_menu_btn_100_loop
;------------------------------
*tea_sub_menu_chiru
	btndef ""

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	;vsp t_btn_tea_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	vsp t_btn_ura_tea_lsp,0
	vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0

	seplay 1,51,100
	print 1

	wait 100

	resettimer
	msp t_btn_tea_lsp,0,-32,-100 : print 1 : waittimer 50
	msp t_btn_tea_lsp,0,-32,0 : print 1 : waittimer 100
	msp t_btn_tea_lsp,0,-32,0 : print 1 : waittimer 150
	msp t_btn_tea_lsp,0,-32,100 :print 1
	seplay 9,1001,100

	*tea_sub_menu_100_chiru

	if %UMINEKOEND >= 51 lsp t_btn_ep1_tea_lsp,t_btn_ep5,1562,488
	if %UMINEKOEND >= 61 lsp t_btn_ep2_tea_lsp,t_btn_ep6,1562,548
	if %UMINEKOEND >= 71 lsp t_btn_ep3_tea_lsp,t_btn_ep7,1562,608
	if %UMINEKOEND >= 81 lsp t_btn_ep4_tea_lsp,t_btn_ep8,1562,668
	;new
	if %UMINEKOEND_FLG = 51 lsp t_btn_ep1_tea_lsp,t_btn_ep5_new,1562,488
	if %UMINEKOEND_FLG = 61 lsp t_btn_ep2_tea_lsp,t_btn_ep6_new,1562,548
	if %UMINEKOEND_FLG = 71 lsp t_btn_ep3_tea_lsp,t_btn_ep7_new,1562,608
	if %UMINEKOEND_FLG = 81 lsp t_btn_ep4_tea_lsp,t_btn_ep8_new,1562,668

	print 85 ;15,10

	*tea_sub_menu_btn_100_loop_chiru
		btndef ""
		exbtn_d "P94,1P94,1C81-87C101C103C105C42-45P86,1"

		exbtn t_btn_ep1_tea_lsp,t_btn_ep1_tea_lsp,""
		exbtn t_btn_ep2_tea_lsp,t_btn_ep2_tea_lsp,""
		exbtn t_btn_ep3_tea_lsp,t_btn_ep3_tea_lsp,""
		exbtn t_btn_ep4_tea_lsp,t_btn_ep4_tea_lsp,""

		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_tea_lsp btndef "" : mov %scenario_Number,5 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_5
		if %BtnRes = t_btn_ep2_tea_lsp btndef "" : mov %scenario_Number,6 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_6
		if %BtnRes = t_btn_ep3_tea_lsp btndef "" : mov %scenario_Number,7 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_7
		if %BtnRes = t_btn_ep4_tea_lsp btndef "" : mov %scenario_Number,8 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *teatime_8
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *tea_sub_menu_btn_100_loop_chiru
;------------------------------


;------------------------------
;Sub-menu after pressing the ura tea party
*ura_tea_sub_menu
	if %CHIRU_MODE = 1 goto *ura_tea_sub_menu_chiru

	btndef ""

	;To erase any button other than the tea party, tea party button to display per episode
	;Note to clear the flag, go to view at least ep2 ep1, 3 in more than one.

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	vsp t_btn_tea_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	;vsp t_btn_ura_tea_lsp,0
	vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0

	seplay 1,51,100
	print 1

	wait 100

	;Shift on the Tea Party button.
	resettimer
	msp t_btn_ura_tea_lsp,0,-32,-100 : print 1 : waittimer 50
	msp t_btn_ura_tea_lsp,0,-32,0 : print 1 : waittimer 100
	msp t_btn_ura_tea_lsp,0,-32,0 : print 1 : waittimer 150
	msp t_btn_ura_tea_lsp,0,-32,0 : print 1 : waittimer 200
	msp t_btn_ura_tea_lsp,0,-32,50 : print 1 : waittimer 250
	msp t_btn_ura_tea_lsp,0,-32,50 :print 1	
	seplay 9,1001,100

	*ura_tea_sub_menu_100

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 12 lsp t_btn_ep1_ura_tea_lsp,t_btn_ep1,1562,488
	if %UMINEKOEND >= 22 lsp t_btn_ep2_ura_tea_lsp,t_btn_ep2,1562,548
	if %UMINEKOEND >= 32 lsp t_btn_ep3_ura_tea_lsp,t_btn_ep3,1562,608
	if %UMINEKOEND >= 42 lsp t_btn_ep4_ura_tea_lsp,t_btn_ep4,1562,668
	;new
	if %UMINEKOEND_FLG = 12 lsp t_btn_ep1_ura_tea_lsp,t_btn_ep1_new,1562,488
	if %UMINEKOEND_FLG = 22 lsp t_btn_ep2_ura_tea_lsp,t_btn_ep2_new,1562,548
	if %UMINEKOEND_FLG = 32 lsp t_btn_ep3_ura_tea_lsp,t_btn_ep3_new,1562,608
	if %UMINEKOEND_FLG = 42 lsp t_btn_ep4_ura_tea_lsp,t_btn_ep4_new,1562,668

	print 85 ;15,10

	*ura_tea_sub_menu_btn_100_loop
		btndef ""

		exbtn_d "P91,1C82-87C101C103C105C22-25P81,1"

		exbtn t_btn_ep1_ura_tea_lsp,t_btn_ep1_ura_tea_lsp,""
		exbtn t_btn_ep2_ura_tea_lsp,t_btn_ep2_ura_tea_lsp,""
		exbtn t_btn_ep3_ura_tea_lsp,t_btn_ep3_ura_tea_lsp,""
		exbtn t_btn_ep4_ura_tea_lsp,t_btn_ep4_ura_tea_lsp,""
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_ura_tea_lsp btndef "" : mov %scenario_Number,1 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_1
		if %BtnRes = t_btn_ep2_ura_tea_lsp btndef "" : mov %scenario_Number,2 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_2
		if %BtnRes = t_btn_ep3_ura_tea_lsp btndef "" : mov %scenario_Number,3 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_3
		if %BtnRes = t_btn_ep4_ura_tea_lsp btndef "" : mov %scenario_Number,4 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_4
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *ura_tea_sub_menu_btn_100_loop

;------------------------------
*ura_tea_sub_menu_chiru
	btndef ""

	;To erase any button other than the tea party, tea party button to display per episode
	;Note to clear the flag, go to view at least ep2 ep1, 3 in more than one.

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	vsp t_btn_tea_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	;vsp t_btn_ura_tea_lsp,0
	vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0

	seplay 1,51,100
	print 1

	wait 100

	;Shift on the Tea Party button.
	resettimer
	msp t_btn_ura_tea_lsp,0,-32,-100 : print 1 : waittimer 50
	msp t_btn_ura_tea_lsp,0,-32,0 : print 1 : waittimer 100
	msp t_btn_ura_tea_lsp,0,-32,0 : print 1 : waittimer 150
	msp t_btn_ura_tea_lsp,0,-32,0 : print 1 : waittimer 200
	msp t_btn_ura_tea_lsp,0,-32,50 : print 1 : waittimer 250
	msp t_btn_ura_tea_lsp,0,-32,50 :print 1	
	seplay 9,1001,100

	*ura_tea_sub_menu_100_chiru

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 52 lsp t_btn_ep1_ura_tea_lsp,t_btn_ep5,1562,488
	if %UMINEKOEND >= 62 lsp t_btn_ep2_ura_tea_lsp,t_btn_ep6,1562,548
	if %UMINEKOEND >= 72 lsp t_btn_ep3_ura_tea_lsp,t_btn_ep7,1562,608
	if %UMINEKOEND >= 82 lsp t_btn_ep4_ura_tea_lsp,t_btn_ep8,1562,668
	;new
	if %UMINEKOEND_FLG = 52 lsp t_btn_ep1_ura_tea_lsp,t_btn_ep5_new,1562,488
	if %UMINEKOEND_FLG = 62 lsp t_btn_ep2_ura_tea_lsp,t_btn_ep6_new,1562,548
	if %UMINEKOEND_FLG = 72 lsp t_btn_ep3_ura_tea_lsp,t_btn_ep7_new,1562,608
	if %UMINEKOEND_FLG = 82 lsp t_btn_ep4_ura_tea_lsp,t_btn_ep8_new,1562,668

	print 85 ;15,10

	*ura_tea_sub_menu_btn_100_loop_chiru
		btndef ""

		exbtn_d "P91,1P91,1C82-87C101C103C105C22-25P81,1"

		exbtn t_btn_ep1_ura_tea_lsp,t_btn_ep1_ura_tea_lsp,""
		exbtn t_btn_ep2_ura_tea_lsp,t_btn_ep2_ura_tea_lsp,""
		exbtn t_btn_ep3_ura_tea_lsp,t_btn_ep3_ura_tea_lsp,""
		exbtn t_btn_ep4_ura_tea_lsp,t_btn_ep4_ura_tea_lsp,""
		btnwait2 %BtnRes

		if %BtnRes = t_btn_ep1_ura_tea_lsp btndef "" : mov %scenario_Number,5 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_5
		if %BtnRes = t_btn_ep2_ura_tea_lsp btndef "" : mov %scenario_Number,6 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_6
		if %BtnRes = t_btn_ep3_ura_tea_lsp btndef "" : mov %scenario_Number,7 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_7
		if %BtnRes = t_btn_ep4_ura_tea_lsp btndef "" : mov %scenario_Number,8 : csp_rst : seplay 9,17,100 : bg white,10 : delay 2000 : set_name_window_non : goto *ura_teatime_8
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *ura_tea_sub_menu_btn_100_loop_chiru

;------------------------------
;Sub-menu after pressing the Tips
*tips_sub_menu
	btndef ""

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	vsp t_btn_tea_lsp,0
	;vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	vsp t_btn_ura_tea_lsp,0
	vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0

	seplay 8,1001,100
	print 1

	wait 100

	;Shift on the Tips button.
	resettimer
	msp t_btn_tips_lsp,0,-32,-100 : print 1 : waittimer 50
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 100
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 150
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 200
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 250
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 300
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 300
	msp t_btn_tips_lsp,0,-32,0 : print 1 : waittimer 300
	msp t_btn_tips_lsp,0,-32,50 : print 1 : waittimer 350
	msp t_btn_tips_lsp,0,-32,50 :print 1		
	seplay 9,1001,100
	
	if %CHIRU_MODE = 1 goto *tips_sub_menu_100_chiru

	*tips_sub_menu_100

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 20 lsp t_btn_ep1_tips_lsp,t_btn_ep1,1562,488
	if %UMINEKOEND >= 30 lsp t_btn_ep2_tips_lsp,t_btn_ep2,1562,548
	if %UMINEKOEND >= 40 lsp t_btn_ep3_tips_lsp,t_btn_ep3,1562,608
	if %UMINEKOEND >= 50 lsp t_btn_ep4_tips_lsp,t_btn_ep4,1562,668	
	;new
	if %UMINEKOEND_TIPS_FLG = 1 lsp t_btn_ep1_tips_lsp,t_btn_ep1_new,1562,488
	if %UMINEKOEND_TIPS_FLG = 2 lsp t_btn_ep2_tips_lsp,t_btn_ep2_new,1562,548
	if %UMINEKOEND_TIPS_FLG = 3 lsp t_btn_ep3_tips_lsp,t_btn_ep3_new,1562,608
	if %UMINEKOEND_TIPS_FLG = 4 lsp t_btn_ep4_tips_lsp,t_btn_ep4_new,1562,668	
	
	print 85 ;15,10

	*tips_sub_menu_btn_100_loop
		btndef ""

		exbtn_d "P93,1C81-87C101C103C105C32-35P85,1"

		exbtn t_btn_ep1_tips_lsp,t_btn_ep1_tips_lsp,""
		exbtn t_btn_ep2_tips_lsp,t_btn_ep2_tips_lsp,""
		exbtn t_btn_ep3_tips_lsp,t_btn_ep3_tips_lsp,""
		exbtn t_btn_ep4_tips_lsp,t_btn_ep4_tips_lsp,""

		btnwait2 %BtnRes
		if %BtnRes = t_btn_ep1_tips_lsp csp_rst : mov %scenario_Number,1 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep2_tips_lsp csp_rst : mov %scenario_Number,2 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep3_tips_lsp csp_rst : mov %scenario_Number,3 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep4_tips_lsp csp_rst : mov %scenario_Number,4 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *tips_sub_menu_btn_100_loop


*tips_sub_menu_100_chiru

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 60 lsp t_btn_ep1_tips_lsp,t_btn_ep5,1562,488
	if %UMINEKOEND >= 70 lsp t_btn_ep2_tips_lsp,t_btn_ep6,1562,548
	if %UMINEKOEND >= 80 lsp t_btn_ep3_tips_lsp,t_btn_ep7,1562,608
	if %UMINEKOEND >= 90 lsp t_btn_ep4_tips_lsp,t_btn_ep8,1562,668	
	;new
	if %UMINEKOEND_TIPS_FLG = 5 lsp t_btn_ep1_tips_lsp,t_btn_ep5_new,1562,488
	if %UMINEKOEND_TIPS_FLG = 6 lsp t_btn_ep2_tips_lsp,t_btn_ep6_new,1562,548
	if %UMINEKOEND_TIPS_FLG = 7 lsp t_btn_ep3_tips_lsp,t_btn_ep7_new,1562,608
	if %UMINEKOEND_TIPS_FLG = 8 lsp t_btn_ep4_tips_lsp,t_btn_ep8_new,1562,668	

	print 85 ;15,10

	*tips_sub_menu_btn_100_loop_chiru
		btndef ""

		exbtn_d "P93,1C81-87C101C103C105C32-35P85,1"

		exbtn t_btn_ep1_tips_lsp,t_btn_ep1_tips_lsp,""
		exbtn t_btn_ep2_tips_lsp,t_btn_ep2_tips_lsp,""
		exbtn t_btn_ep3_tips_lsp,t_btn_ep3_tips_lsp,""
		exbtn t_btn_ep4_tips_lsp,t_btn_ep4_tips_lsp,""
		btnwait2 %BtnRes
		if %BtnRes = t_btn_ep1_tips_lsp csp_rst : mov %scenario_Number,5 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep2_tips_lsp csp_rst : mov %scenario_Number,6 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep3_tips_lsp csp_rst : mov %scenario_Number,7 : seplay 9,1001,100 : mov %r_display,1 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep4_tips_lsp csp_rst : mov %scenario_Number,8 : seplay 9,1001,100 : mov %r_display,2 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *tips_sub_menu_btn_100_loop_chiru

;------------------------------

;------------------------------
;Sub-menu after pressing the Tips
*char_sub_menu
	btndef ""

	vsp t_btn_start_lsp,0
	vsp t_btn_web_lsp,0
	vsp t_btn_tea_lsp,0
	vsp t_btn_tips_lsp,0
	vsp t_btn_exit_lsp,0
	vsp t_btn_music_lsp,0
	vsp t_btn_ura_tea_lsp,0
	;vsp t_chars_lsp,0
	vsp t_cg_lsp,0
	vsp t_config_lsp,0
	vsp t_trophy_lsp,0

	seplay 8,1001,100
	print 1

	wait 100

	;Shift on the Tips button.
	resettimer
	msp t_chars_lsp,0,-32,-100 : print 1 : waittimer 50
	msp t_chars_lsp,0,-32,0 : print 1 : waittimer 100
	msp t_chars_lsp,0,-32,0 : print 1 : waittimer 150
	msp t_chars_lsp,0,-32,0 : print 1 : waittimer 200
	msp t_chars_lsp,0,-32,0 : print 1 : waittimer 250
	msp t_chars_lsp,0,-32,0 : print 1 : waittimer 300
	msp t_chars_lsp,0,-32,50 : print 1 : waittimer 350
	msp t_chars_lsp,0,-32,50 :print 1		
	seplay 9,1001,100
	
	if %CHIRU_MODE = 1 goto *char_sub_menu_100_chiru

	*char_sub_menu_100

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 20 lsp t_btn_ep1_tips_lsp,t_btn_ep1,1562,488
	if %UMINEKOEND >= 30 lsp t_btn_ep2_tips_lsp,t_btn_ep2,1562,548
	if %UMINEKOEND >= 40 lsp t_btn_ep3_tips_lsp,t_btn_ep3,1562,608
	if %UMINEKOEND >= 50 lsp t_btn_ep4_tips_lsp,t_btn_ep4,1562,668	
	;new
	if %UMINEKOEND_TIPS_CHA_FLG = 1 lsp t_btn_ep1_tips_lsp,t_btn_ep1_new,1562,488
	if %UMINEKOEND_TIPS_CHA_FLG = 2 lsp t_btn_ep2_tips_lsp,t_btn_ep2_new,1562,548
	if %UMINEKOEND_TIPS_CHA_FLG = 3 lsp t_btn_ep3_tips_lsp,t_btn_ep3_new,1562,608
	if %UMINEKOEND_TIPS_CHA_FLG = 4 lsp t_btn_ep4_tips_lsp,t_btn_ep4_new,1562,668		

	print 85 ;15,10

	*char_sub_menu_btn_100_loop
		btndef ""

		exbtn_d "P104,1C81-87C101C105C32-35P103,1"

		exbtn t_btn_ep1_tips_lsp,t_btn_ep1_tips_lsp,""
		exbtn t_btn_ep2_tips_lsp,t_btn_ep2_tips_lsp,""
		exbtn t_btn_ep3_tips_lsp,t_btn_ep3_tips_lsp,""
		exbtn t_btn_ep4_tips_lsp,t_btn_ep4_tips_lsp,""
		btnwait2 %BtnRes
		if %BtnRes = t_btn_ep1_tips_lsp csp_rst : mov %scenario_Number,1 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep2_tips_lsp csp_rst : mov %scenario_Number,2 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep3_tips_lsp csp_rst : mov %scenario_Number,3 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep4_tips_lsp csp_rst : mov %scenario_Number,4 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *char_sub_menu_btn_100_loop

*char_sub_menu_100_chiru

	;Adjust the layer you want to display by a clear state
	if %UMINEKOEND >= 60 lsp t_btn_ep1_tips_lsp,t_btn_ep5,1562,488
	if %UMINEKOEND >= 70 lsp t_btn_ep2_tips_lsp,t_btn_ep6,1562,548
	if %UMINEKOEND >= 80 lsp t_btn_ep3_tips_lsp,t_btn_ep7,1562,608
	if %UMINEKOEND >= 90 lsp t_btn_ep4_tips_lsp,t_btn_ep8,1562,668	
	;new
	if %UMINEKOEND_TIPS_CHA_FLG = 5 lsp t_btn_ep1_tips_lsp,t_btn_ep5_new,1562,488
	if %UMINEKOEND_TIPS_CHA_FLG = 6 lsp t_btn_ep2_tips_lsp,t_btn_ep6_new,1562,548
	if %UMINEKOEND_TIPS_CHA_FLG = 7 lsp t_btn_ep3_tips_lsp,t_btn_ep7_new,1562,608
	if %UMINEKOEND_TIPS_CHA_FLG = 8 lsp t_btn_ep4_tips_lsp,t_btn_ep8_new,1562,668		

	print 85 ;15,10

	*char_sub_menu_btn_100_loop_chiru
		btndef ""

		exbtn_d "P104,1C81-87C101C105C32-35P103,1"

		exbtn t_btn_ep1_tips_lsp,t_btn_ep1_tips_lsp,""
		exbtn t_btn_ep2_tips_lsp,t_btn_ep2_tips_lsp,""
		exbtn t_btn_ep3_tips_lsp,t_btn_ep3_tips_lsp,""
		exbtn t_btn_ep4_tips_lsp,t_btn_ep4_tips_lsp,""
		btnwait2 %BtnRes
		if %BtnRes = t_btn_ep1_tips_lsp csp_rst : mov %scenario_Number,5 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep2_tips_lsp csp_rst : mov %scenario_Number,6 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep3_tips_lsp csp_rst : mov %scenario_Number,7 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = t_btn_ep4_tips_lsp csp_rst : mov %scenario_Number,8 : seplay 9,1001,100 : mov %r_display,0 : mov %r_for_title,1 : gosub *rmenu_main_new : mov %title_skip,1 : goto *b_title
		if %BtnRes = 0 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -1 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
		if %BtnRes = -10 btndef "" : seplay 9,1001,100 : mov %r_for_title,1 : goto *b_title_moment
goto *char_sub_menu_btn_100_loop_chiru

;------------------------------

;------------------------------

*omake_sub_menu
		lsp t_btn_start_lsp,t_btn_start_omake,1325,424
		;lsph t_txt_start_lsp,":a;graphics\menu\title\title1_text_start_omake.png",100,470
		;lsph t_txt_ep1_lsp,":a;graphics\menu\title\title1_text_omake_ep1.png",100,470
		;lsph t_txt_ep2_lsp,":a;graphics\menu\title\title1_text_omake_ep2.png",100,470
		;lsph t_txt_ep3_lsp,":a;graphics\menu\title\title1_text_omake_ep3.png",100,470
		;lsph t_txt_ep4_lsp,":a;graphics\menu\title\title1_text_omake_ep4.png",100,470

		if %CHIRU_MODE = 0 _csp t_txt_start_lsp : _csp t_txt_ep1_lsp : _csp t_txt_ep2_lsp : _csp t_txt_ep3_lsp : _csp t_txt_ep4_lsp
	if %CHIRU_MODE = 1 _csp t_txt_start_lsp : _csp t_txt_ep5_lsp : _csp t_txt_ep6_lsp : _csp t_txt_ep7_lsp : _csp t_txt_ep8_lsp
	mov %omake,1
return

*omake_sub_menu_end
	if %CHIRU_MODE = 1 goto *omake_sub_menu_end_chiru
		lsp t_btn_start_lsp,t_btn_start,1325,424
		if %UMINEKOEND_FLG = 20 lsph t_btn_start_lsp,t_btn_start_new,1325,424 
		if %UMINEKOEND_FLG = 30 lsph t_btn_start_lsp,t_btn_start_new,1325,424
		if %UMINEKOEND_FLG = 40 lsph t_btn_start_lsp,t_btn_start_new,1325,424
		lsph t_txt_start_lsp,t_txt_start,100,470
		lsph t_txt_ep1_lsp,t_txt_ep1,100,470
		lsph t_txt_ep2_lsp,t_txt_ep2,100,470
		lsph t_txt_ep3_lsp,t_txt_ep3,100,470
		lsph t_txt_ep4_lsp,t_txt_ep4,100,470
		mov %omake,0
return

*omake_sub_menu_end_chiru
		lsp t_btn_start_lsp,t_btn_start,1325,424
		if %UMINEKOEND_FLG = 60 lsph t_btn_start_lsp,t_btn_start_new,1325,424 
		if %UMINEKOEND_FLG = 70 lsph t_btn_start_lsp,t_btn_start_new,1325,424
		if %UMINEKOEND_FLG = 80 lsph t_btn_start_lsp,t_btn_start_new,1325,424
		lsph t_txt_start_lsp,t_txt_start,100,470
		lsph t_txt_ep5_lsp,t_txt_ep5,100,470
		lsph t_txt_ep6_lsp,t_txt_ep6,100,470
		lsph t_txt_ep7_lsp,t_txt_ep7,100,470
		lsph t_txt_ep8_lsp,t_txt_ep8,100,470
		mov %omake,0
return

*omake_sub_menu_ep
	if %CHIRU_MODE = 1 goto *omake_sub_menu_ep_chiru

		if %UMINEKOEND > 10 lsp t_btn_ep1_lsp,t_btn_ep1,1562,488
		if %UMINEKOEND > 20 lsp t_btn_ep2_lsp,t_btn_ep2,1562,548
		if %UMINEKOEND > 30 lsp t_btn_ep3_lsp,t_btn_ep3,1562,608
		if %UMINEKOEND > 40 lsp t_btn_ep4_lsp,t_btn_ep4,1562,668
	
	print 85

	if %UMINEKOEND < 20 goto *start_sub_menu_btn_100_loop
	if %UMINEKOEND < 30 goto *start_sub_menu_btn_200_loop
	if %UMINEKOEND < 40 goto *start_sub_menu_btn_300_loop
	if %UMINEKOEND >= 40 goto *start_sub_menu_btn_400_loop
return

*omake_sub_menu_ep_chiru
		if %UMINEKOEND > 50 lsp t_btn_ep1_lsp,t_btn_ep5,1562,488
		if %UMINEKOEND > 60 lsp t_btn_ep2_lsp,t_btn_ep6,1562,548
		if %UMINEKOEND > 70 lsp t_btn_ep3_lsp,t_btn_ep7,1562,608
		if %UMINEKOEND > 80 lsp t_btn_ep4_lsp,t_btn_ep8,1562,668
	print 85

	if %UMINEKOEND < 60 goto *start_sub_menu_btn_500_loop
	if %UMINEKOEND < 70 goto *start_sub_menu_btn_600_loop
	if %UMINEKOEND < 80 goto *start_sub_menu_btn_700_loop
	if %UMINEKOEND >= 80 goto *start_sub_menu_btn_800_loop
return

*do_unlock_chars8
	if %vv_enj = 0 mov %vv_enj,1
	if %vv_goa = 0 mov %vv_goa,1
*do_unlock_chars7
	if %vv_wil = 0 mov %vv_wil,1
	if %vv_rio = 0 mov %vv_rio,1
	if %vv_cur = 0 mov %vv_cur,1
*do_unlock_chars6
	if %vv_bu3 = 0 mov %vv_bu3,1
	if %vv_fea = 0 || %vv_fe2 = 0 mov %vv_fea,1 : mov %vv_fe2,1
	if %vv_zep = 0 mov %vv_zep,1
	if %vv_fur = 0 mov %vv_fur,1
*do_unlock_chars5
	if %vv_eri = 0 mov %vv_eri,1
	if %vv_dla = 0 mov %vv_dla,1
	if %vv_ger = 0 mov %vv_ger,1
	if %vv_cor = 0 mov %vv_cor,1
*do_unlock_chars4
	if %vv_sak = 0 mov %vv_sak,1
	if %vv_oko = 0 mov %vv_oko,1
	if %vv_kas = 0 mov %vv_kas,1
	if %vv_ama = 0 mov %vv_ama,1
	if %vv_pro = 0 mov %vv_pro,1
	if %vv_s00 = 0 mov %vv_s00,1
	if %vv_gap = 0 mov %vv_gap,1
	if %vv_na2 = 0 mov %vv_na2,1
	if %vv_ku2 = 0 mov %vv_ku2,1
	if %vv_kaw = 0 mov %vv_kaw,1
*do_unlock_chars3
	if %vv_rg5 = 0 mov %vv_rg5,1
	if %vv_rg2 = 0 mov %vv_rg2,1
	if %vv_rg4 = 0 mov %vv_rg4,1
	if %vv_rg1 = 0 mov %vv_rg1,1
	if %vv_ron = 0 mov %vv_ron,1
	if %vv_wal = 0 mov %vv_wal,1
	if %vv_ev2 = 0 mov %vv_ev2,1
	if %vv_s41 = 0 mov %vv_s41,1
	if %vv_s45 = 0 mov %vv_s45,1
	if %vv_enj = 0 mov %vv_enj,1
*do_unlock_chars2
	if %vv_goa = 0 mov %vv_goa,1
	if %vv_rg7 = 0 mov %vv_rg7,1
	if %vv_rg3 = 0 mov %vv_rg3,1
	if %vv_rg6 = 0 mov %vv_rg6,1
	if %vv_lam = 0 mov %vv_lam,1
*do_unlock_chars1
	if %vv_nan = 0 mov %vv_nan,1
	if %vv_0 = 0 || %vv_99 = 0 mov %vv_0,1 : mov %vv_99,1 : mov %vv_inc,0
	if %vv_kin = 0 || %vv_ki2 = 0 mov %vv_kin,1 : mov %vv_ki2,1
	if %vv_gen = 0 mov %vv_gen,1
	if %vv_but = 0 mov %vv_but,1
	if %vv_geo = 0 mov %vv_geo,1
	if %vv_hid = 0 mov %vv_hid,1
	if %vv_eva = 0 mov %vv_eva,1
	if %vv_kir = 0 mov %vv_kir,1
	if %vv_rud = 0 mov %vv_rud,1
	if %vv_mar = 0 mov %vv_mar,1
	if %vv_ros = 0 mov %vv_ros,1
	if %vv_jes = 0 mov %vv_jes,1
	if %vv_kum = 0 mov %vv_kum,1
	if %vv_goh = 0 mov %vv_goh,1
	if %vv_kan = 0 mov %vv_kan,1
	if %vv_nat = 0 mov %vv_nat,1
	if %vv_sha = 0 mov %vv_sha,1
	if %vv_cla = 0 mov %vv_cla,1
	if %vv_bea = 0 || %vv_be2 = 0 || %vv_be3 = 0 mov %vv_bea,1 : mov %vv_be2,1 : mov %vv_be3,1
	if %vv_ber = 0 mov %vv_ber,1
return

*do_unlock
	if %UMINEKOEND >= 90 mark_range_read "*umi1_op","*ura_8_end" : gosub *do_unlock_chars8 : return ;unlock ep8
	if %UMINEKOEND >= 80 mark_range_read "*umi1_op","*ura_7_end" : gosub *do_unlock_chars7 : return ;unlock ep8
	if %UMINEKOEND >= 70 mark_range_read "*umi1_op","*ura_6_end" : gosub *do_unlock_chars6 : return ;unlock ep7
	if %UMINEKOEND >= 60 mark_range_read "*umi1_op","*ura_5_end" : gosub *do_unlock_chars5 : return ;unlock ep6
	if %UMINEKOEND >= 50 mark_range_read "*umi1_op","*ura_4_end" : gosub *do_unlock_chars4 : return ;unlock ep5
	if %UMINEKOEND >= 40 mark_range_read "*umi1_op","*ura_3_end" : gosub *do_unlock_chars3 : return ;unlock ep4
	if %UMINEKOEND >= 30 mark_range_read "*umi1_op","*ura_2_end" : gosub *do_unlock_chars2 : return ;unlock ep3
	if %UMINEKOEND >= 20 mark_range_read "*umi1_op","*ura_1_end" : gosub *do_unlock_chars1 : return ;unlock ep2
	if %UMINEKOEND >= 12 mark_range_read "*umi1_op","*teatime_1_end" : gosub *do_unlock_chars1 : return ;done tea
	if %UMINEKOEND >= 11 mark_range_read "*umi1_op","*umi1_end" : gosub *do_unlock_chars1 : return ;done ep
return

;><><><><><><><><><><><><><><><><><><><>

*umi_start
csp_rst
if %omake = 1 && %omake_level > 1 jumpf
	seplay 9,17,100
	bg white,10
	E_MA
	delay 2000
~
if %omake = 0 || %omake_level <= 1 jumpf
	seplay 1,22,71
	bg black,0
	flush 99,2000,"whirl.dll/r"
	E_MA
	delay 2000
~

if %scenario_Number = 1 goto *umi1_standby
if %scenario_Number = 2 goto *umi2_standby
if %scenario_Number = 3 goto *umi3_standby
if %scenario_Number = 4 goto *umi4_standby
;chiru
if %scenario_Number = 5 goto *umi5_standby
if %scenario_Number = 6 goto *umi6_standby
if %scenario_Number = 7 goto *umi7_standby
if %scenario_Number = 8 goto *umi8_standby

;Perhaps, expected to be the scenario selection screen

*umi1_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o1
 if %UMINEKOEND >= 11 || $flag_scenario_1_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi1_op

*umi2_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o2
 if %UMINEKOEND >= 21 || $flag_scenario_2_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi2_op

*umi3_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o3
 if %UMINEKOEND >= 31 || $flag_scenario_3_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi3_op

*umi4_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o4
 if %UMINEKOEND >= 41 || $flag_scenario_4_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi4_op
 
*umi5_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o_chiru
 if %UMINEKOEND >= 51 || $flag_scenario_5_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi5_op

*umi6_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o_chiru
 if %UMINEKOEND >= 61 || $flag_scenario_6_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi6_op

*umi7_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o_chiru
 if %UMINEKOEND >= 71 || $flag_scenario_7_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi7_op

*umi8_standby
 if %omake = 1 gosub *jump_sysdata_set1 : goto *o_chiru
 if %UMINEKOEND >= 81 || $flag_scenario_8_op == "●" goto *scenario_jump_q
 gosub *jump_sysdata_set1
 goto *umi8_op

;***********************************************************
; Jumo to scenario mode
;***********************************************************
*scenario_jump_q

;Use confirmation scenario jump mode

csp_rst
lsp 703,":c;graphics\colour\black.png",0,0,100
bg ":a;graphics\menu\logview\mes_bg.png",2

;Advance when the magic can be used.
*scenario_jump_q2
mov %x,670
mov %y,480

border_pad_push 5

lsp 501,use_magic1,0,0 ;%y : add %y,55
lsp 503,use_magic2,0,0
lsp 504,use_magic3,0,0

align_message_c 501,503,504

border_pad_pop

*scenario_jump_q3
btndef ""

spbtn 503,503
spbtn 504,504

btnwait %btnRes

if %BtnRes = -1 mov %title_skip,1 : goto *b_title
if %BtnRes = -10 mov %title_skip,1 : goto *b_title
if %btnRes = 503 btndef "" : goto *scenario_jump_name
if %btnRes = 504 btndef "" : goto *scenario_start
goto *scenario_jump_q3


;--------------------------------------------

*scenario_start    ;Start from the beginning of the scenario
	;Scenario start confirmation
	if %scenario_Number = 1 gosub *jump_sysdata_set1 : goto *umi1_op ;Scenario 1 Obtain basic data
	if %scenario_Number = 2 gosub *jump_sysdata_set1 : goto *umi2_op ;Scenario 2 Obtain basic data
	if %scenario_Number = 3 gosub *jump_sysdata_set1 : goto *umi3_op ;Scenario 3 Obtain basic data
	if %scenario_Number = 4 gosub *jump_sysdata_set1 : goto *umi4_op ;Scenario 4 Obtain basic data
	if %scenario_Number = 5 gosub *jump_sysdata_set1 : goto *umi5_op ;Scenario 5 Obtain basic data
	if %scenario_Number = 6 gosub *jump_sysdata_set1 : goto *umi6_op ;Scenario 6 Obtain basic data
	if %scenario_Number = 7 gosub *jump_sysdata_set1 : goto *umi7_op ;Scenario 7 Obtain basic data
	if %scenario_Number = 8 gosub *jump_sysdata_set1 : goto *umi8_op ;Scenario 8 Obtain basic data


;--------------------------------------------

*scenario_jump_name

border_pad_push 5

_csp 501
_csp 502
_csp 503
_csp 504

;Acquired scenario_Number from the title menu
mov %Free1,561
mov $%Free1,date_scenario_op_chapter :inc %Free1 
mov $%Free1,date_scenario_1_chapter :inc %Free1 
mov $%Free1,date_scenario_2_chapter :inc %Free1 
mov $%Free1,date_scenario_3_chapter :inc %Free1 
mov $%Free1,date_scenario_4_chapter :inc %Free1 
mov $%Free1,date_scenario_5_chapter :inc %Free1 
mov $%Free1,date_scenario_6_chapter :inc %Free1 
mov $%Free1,date_scenario_7_chapter :inc %Free1 
mov $%Free1,date_scenario_8_chapter :inc %Free1 
mov $%Free1,date_scenario_9_chapter :inc %Free1 
mov $%Free1,date_scenario_10_chapter :inc %Free1 
mov $%Free1,date_scenario_11_chapter :inc %Free1 
mov $%Free1,date_scenario_12_chapter :inc %Free1 
mov $%Free1,date_scenario_13_chapter :inc %Free1 
mov $%Free1,date_scenario_14_chapter :inc %Free1 
mov $%Free1,date_scenario_15_chapter :inc %Free1 
mov $%Free1,date_scenario_16_chapter :inc %Free1 
mov $%Free1,date_scenario_17_chapter :inc %Free1
mov $%Free1,date_scenario_18_chapter :inc %Free1
mov $%Free1,date_scenario_19_chapter :inc %Free1
mov $%Free1,date_scenario_20_chapter :inc %Free1
mov $%Free1,date_scenario_21_chapter :inc %Free1
mov $%Free1,date_scenario_22_chapter :inc %Free1
mov $%Free1,date_scenario_23_chapter :inc %Free1
mov $%Free1,date_scenario_24_chapter :inc %Free1
mov $%Free1,date_scenario_25_chapter :inc %Free1

notif %scenario_Number = 1 jumpf
	;Ep1
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 1}",1430,19
	mov %Free5,flag_scenario_1_op
	
	mov %Free1,501
	mov $%Free1,scenario_1_op :inc %Free1 ;*umi1_op
	mov $%Free1,scenario_1_1 :inc %Free1 ;*umi1_1
	mov $%Free1,scenario_1_2 :inc %Free1 ;*umi1_2
	mov $%Free1,scenario_1_3 :inc %Free1 ;*umi1_3
	mov $%Free1,scenario_1_4 :inc %Free1 ;*umi1_4
	mov $%Free1,scenario_1_5 :inc %Free1 ;*umi1_5
	mov $%Free1,scenario_1_6 :inc %Free1 ;*umi1_6
	mov $%Free1,scenario_1_7 :inc %Free1 ;*umi1_7
	mov $%Free1,scenario_1_8 :inc %Free1 ;*umi1_8
	mov $%Free1,scenario_1_9 :inc %Free1 ;*umi1_9
	mov $%Free1,scenario_1_10 :inc %Free1 ;*umi1_10
	mov $%Free1,scenario_1_11 :inc %Free1 ;*umi1_11
	mov $%Free1,scenario_1_12 :inc %Free1 ;*umi1_12
	mov $%Free1,scenario_1_13 :inc %Free1 ;*umi1_13
	mov $%Free1,scenario_1_14 :inc %Free1 ;*umi1_14
	mov $%Free1,scenario_1_15 :inc %Free1 ;*umi1_15
	mov $%Free1,scenario_1_16 :inc %Free1 ;*umi1_16
	mov $%Free1,scenario_1_17 :inc %Free1 ;*umi1_17

	mov %Free1,531
	mov $%Free1,date_scenario_1_op :inc %Free1 ;*umi1_op
	mov $%Free1,date_scenario_1_1 :inc %Free1 ;*umi1_1
	mov $%Free1,date_scenario_1_2 :inc %Free1 ;*umi1_2
	mov $%Free1,date_scenario_1_3 :inc %Free1 ;*umi1_3
	mov $%Free1,date_scenario_1_4 :inc %Free1 ;*umi1_4
	mov $%Free1,date_scenario_1_5 :inc %Free1 ;*umi1_5
	mov $%Free1,date_scenario_1_6 :inc %Free1 ;*umi1_6
	mov $%Free1,date_scenario_1_7 :inc %Free1 ;*umi1_7
	mov $%Free1,date_scenario_1_8 :inc %Free1 ;*umi1_8
	mov $%Free1,date_scenario_1_9 :inc %Free1 ;*umi1_9
	mov $%Free1,date_scenario_1_10 :inc %Free1 ;*umi1_10
	mov $%Free1,date_scenario_1_11 :inc %Free1 ;*umi1_11
	mov $%Free1,date_scenario_1_12 :inc %Free1 ;*umi1_12
	mov $%Free1,date_scenario_1_13 :inc %Free1 ;*umi1_13
	mov $%Free1,date_scenario_1_14 :inc %Free1 ;*umi1_14
	mov $%Free1,date_scenario_1_15 :inc %Free1 ;*umi1_15
	mov $%Free1,date_scenario_1_16 :inc %Free1 ;*umi1_16
	mov $%Free1,date_scenario_1_17 :inc %Free1 ;*umi1_17

	mov %Free1,591
	mov $%Free1,clock_scenario_1_op :inc %Free1 ;*umi1_op
	mov $%Free1,clock_scenario_1_1 :inc %Free1 ;*umi1_1
	mov $%Free1,clock_scenario_1_2 :inc %Free1 ;*umi1_2
	mov $%Free1,clock_scenario_1_3 :inc %Free1 ;*umi1_3
	mov $%Free1,clock_scenario_1_4 :inc %Free1 ;*umi1_4
	mov $%Free1,clock_scenario_1_5 :inc %Free1 ;*umi1_5
	mov $%Free1,clock_scenario_1_6 :inc %Free1 ;*umi1_6
	mov $%Free1,clock_scenario_1_7 :inc %Free1 ;*umi1_7
	mov $%Free1,clock_scenario_1_8 :inc %Free1 ;*umi1_8
	mov $%Free1,clock_scenario_1_9 :inc %Free1 ;*umi1_9
	mov $%Free1,clock_scenario_1_10 :inc %Free1 ;*umi1_10
	mov $%Free1,clock_scenario_1_11 :inc %Free1 ;*umi1_11
	mov $%Free1,clock_scenario_1_12 :inc %Free1 ;*umi1_12
	mov $%Free1,clock_scenario_1_13 :inc %Free1 ;*umi1_13
	mov $%Free1,clock_scenario_1_14 :inc %Free1 ;*umi1_14
	mov $%Free1,clock_scenario_1_15 :inc %Free1 ;*umi1_15
	mov $%Free1,clock_scenario_1_16 :inc %Free1 ;*umi1_16
	mov $%Free1,clock_scenario_1_17 :inc %Free1 ;*umi1_17

	;Gets the number of labels in the scenario
	mov %Free2,18
~

notif %scenario_Number = 2 jumpf
	;Ep2
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 2}",1430,19
	mov %Free5,flag_scenario_2_op
	
	mov %Free1,501

	mov $%Free1,scenario_2_op :inc %Free1 ;*umi2_op
	mov $%Free1,scenario_2_1 :inc %Free1 ;*umi2_1
	mov $%Free1,scenario_2_2 :inc %Free1 ;*umi2_2
	mov $%Free1,scenario_2_3 :inc %Free1 ;*umi2_3
	mov $%Free1,scenario_2_4 :inc %Free1 ;*umi2_4
	mov $%Free1,scenario_2_5 :inc %Free1 ;*umi2_5
	mov $%Free1,scenario_2_6 :inc %Free1 ;*umi2_6
	mov $%Free1,scenario_2_7 :inc %Free1 ;*umi2_7
	mov $%Free1,scenario_2_8 :inc %Free1 ;*umi2_8
	mov $%Free1,scenario_2_9 :inc %Free1 ;*umi2_9
	mov $%Free1,scenario_2_10 :inc %Free1 ;*umi2_10
	mov $%Free1,scenario_2_11 :inc %Free1 ;*umi2_11
	mov $%Free1,scenario_2_12 :inc %Free1 ;*umi2_12
	mov $%Free1,scenario_2_13 :inc %Free1 ;*umi2_13
	mov $%Free1,scenario_2_14 :inc %Free1 ;*umi2_14
	mov $%Free1,scenario_2_15 :inc %Free1 ;*umi2_15
	mov $%Free1,scenario_2_16 :inc %Free1 ;*umi2_16
	mov $%Free1,scenario_2_17 :inc %Free1 ;*umi2_17
	mov $%Free1,scenario_2_18 :inc %Free1 ;*umi2_18

	mov %Free1,531
	mov $%Free1,date_scenario_2_op :inc %Free1 ;*umi2_op
	mov $%Free1,date_scenario_2_1 :inc %Free1 ;*umi2_1
	mov $%Free1,date_scenario_2_2 :inc %Free1 ;*umi2_2
	mov $%Free1,date_scenario_2_3 :inc %Free1 ;*umi2_3
	mov $%Free1,date_scenario_2_4 :inc %Free1 ;*umi2_4
	mov $%Free1,date_scenario_2_5 :inc %Free1 ;*umi2_5
	mov $%Free1,date_scenario_2_6 :inc %Free1 ;*umi2_6
	mov $%Free1,date_scenario_2_7 :inc %Free1 ;*umi2_7
	mov $%Free1,date_scenario_2_8 :inc %Free1 ;*umi2_8
	mov $%Free1,date_scenario_2_9 :inc %Free1 ;*umi2_9
	mov $%Free1,date_scenario_2_10 :inc %Free1 ;*umi2_10
	mov $%Free1,date_scenario_2_11 :inc %Free1 ;*umi2_11
	mov $%Free1,date_scenario_2_12 :inc %Free1 ;*umi2_12
	mov $%Free1,date_scenario_2_13 :inc %Free1 ;*umi2_13
	mov $%Free1,date_scenario_2_14 :inc %Free1 ;*umi2_14
	mov $%Free1,date_scenario_2_15 :inc %Free1 ;*umi2_15
	mov $%Free1,date_scenario_2_16 :inc %Free1 ;*umi2_16
	mov $%Free1,date_scenario_2_17 :inc %Free1 ;*umi2_17
	mov $%Free1,date_scenario_2_18 :inc %Free1 ;*umi2_18

	mov %Free1,591
	mov $%Free1,clock_scenario_2_op :inc %Free1 ;*umi2_op
	mov $%Free1,clock_scenario_2_1 :inc %Free1 ;*umi2_1
	mov $%Free1,clock_scenario_2_2 :inc %Free1 ;*umi2_2
	mov $%Free1,clock_scenario_2_3 :inc %Free1 ;*umi2_3
	mov $%Free1,clock_scenario_2_4 :inc %Free1 ;*umi2_4
	mov $%Free1,clock_scenario_2_5 :inc %Free1 ;*umi2_5
	mov $%Free1,clock_scenario_2_6 :inc %Free1 ;*umi2_6
	mov $%Free1,clock_scenario_2_7 :inc %Free1 ;*umi2_7
	mov $%Free1,clock_scenario_2_8 :inc %Free1 ;*umi2_8
	mov $%Free1,clock_scenario_2_9 :inc %Free1 ;*umi2_9
	mov $%Free1,clock_scenario_2_10 :inc %Free1 ;*umi2_10
	mov $%Free1,clock_scenario_2_11 :inc %Free1 ;*umi2_11
	mov $%Free1,clock_scenario_2_12 :inc %Free1 ;*umi2_12
	mov $%Free1,clock_scenario_2_13 :inc %Free1 ;*umi2_13
	mov $%Free1,clock_scenario_2_14 :inc %Free1 ;*umi2_14
	mov $%Free1,clock_scenario_2_15 :inc %Free1 ;*umi2_15
	mov $%Free1,clock_scenario_2_16 :inc %Free1 ;*umi2_16
	mov $%Free1,clock_scenario_2_17 :inc %Free1 ;*umi2_17
	mov $%Free1,clock_scenario_2_18 :inc %Free1 ;*umi2_18


	;Gets the number of labels in the scenario
	mov %Free2,19
~

notif %scenario_Number = 3 jumpf
	;Ep3
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 3}",1430,19
	mov %Free5,flag_scenario_3_op
	
	mov %Free1,501

	mov $%Free1,scenario_3_op :inc %Free1 ;*umi3_op
	mov $%Free1,scenario_3_1 :inc %Free1 ;*umi3_1
	mov $%Free1,scenario_3_2 :inc %Free1 ;*umi3_2
	mov $%Free1,scenario_3_3 :inc %Free1 ;*umi3_3
	mov $%Free1,scenario_3_4 :inc %Free1 ;*umi3_4
	mov $%Free1,scenario_3_5 :inc %Free1 ;*umi3_5
	mov $%Free1,scenario_3_6 :inc %Free1 ;*umi3_6
	mov $%Free1,scenario_3_7 :inc %Free1 ;*umi3_7
	mov $%Free1,scenario_3_8 :inc %Free1 ;*umi3_8
	mov $%Free1,scenario_3_9 :inc %Free1 ;*umi3_9
	mov $%Free1,scenario_3_10 :inc %Free1 ;*umi3_10
	mov $%Free1,scenario_3_11 :inc %Free1 ;*umi3_11
	mov $%Free1,scenario_3_12 :inc %Free1 ;*umi3_12
	mov $%Free1,scenario_3_13 :inc %Free1 ;*umi3_13
	mov $%Free1,scenario_3_14 :inc %Free1 ;*umi3_14
	mov $%Free1,scenario_3_15 :inc %Free1 ;*umi3_15
	mov $%Free1,scenario_3_16 :inc %Free1 ;*umi3_16
	mov $%Free1,scenario_3_17 :inc %Free1 ;*umi3_17
	mov $%Free1,scenario_3_18 :inc %Free1 ;*umi3_18

	mov %Free1,531
	mov $%Free1,date_scenario_3_op :inc %Free1 ;*umi3_op
	mov $%Free1,date_scenario_3_1 :inc %Free1 ;*umi3_1
	mov $%Free1,date_scenario_3_2 :inc %Free1 ;*umi3_2
	mov $%Free1,date_scenario_3_3 :inc %Free1 ;*umi3_3
	mov $%Free1,date_scenario_3_4 :inc %Free1 ;*umi3_4
	mov $%Free1,date_scenario_3_5 :inc %Free1 ;*umi3_5
	mov $%Free1,date_scenario_3_6 :inc %Free1 ;*umi3_6
	mov $%Free1,date_scenario_3_7 :inc %Free1 ;*umi3_7
	mov $%Free1,date_scenario_3_8 :inc %Free1 ;*umi3_8
	mov $%Free1,date_scenario_3_9 :inc %Free1 ;*umi3_9
	mov $%Free1,date_scenario_3_10 :inc %Free1 ;*umi3_10
	mov $%Free1,date_scenario_3_11 :inc %Free1 ;*umi3_11
	mov $%Free1,date_scenario_3_12 :inc %Free1 ;*umi3_12
	mov $%Free1,date_scenario_3_13 :inc %Free1 ;*umi3_13
	mov $%Free1,date_scenario_3_14 :inc %Free1 ;*umi3_14
	mov $%Free1,date_scenario_3_15 :inc %Free1 ;*umi3_15
	mov $%Free1,date_scenario_3_16 :inc %Free1 ;*umi3_16
	mov $%Free1,date_scenario_3_17 :inc %Free1 ;*umi3_17
	mov $%Free1,date_scenario_3_18 :inc %Free1 ;*umi3_18

	mov %Free1,591
	mov $%Free1,clock_scenario_3_op :inc %Free1 ;*umi3_op
	mov $%Free1,clock_scenario_3_1 :inc %Free1 ;*umi3_1
	mov $%Free1,clock_scenario_3_2 :inc %Free1 ;*umi3_2
	mov $%Free1,clock_scenario_3_3 :inc %Free1 ;*umi3_3
	mov $%Free1,clock_scenario_3_4 :inc %Free1 ;*umi3_4
	mov $%Free1,clock_scenario_3_5 :inc %Free1 ;*umi3_5
	mov $%Free1,clock_scenario_3_6 :inc %Free1 ;*umi3_6
	mov $%Free1,clock_scenario_3_7 :inc %Free1 ;*umi3_7
	mov $%Free1,clock_scenario_3_8 :inc %Free1 ;*umi3_8
	mov $%Free1,clock_scenario_3_9 :inc %Free1 ;*umi3_9
	mov $%Free1,clock_scenario_3_10 :inc %Free1 ;*umi3_10
	mov $%Free1,clock_scenario_3_11 :inc %Free1 ;*umi3_11
	mov $%Free1,clock_scenario_3_12 :inc %Free1 ;*umi3_12
	mov $%Free1,clock_scenario_3_13 :inc %Free1 ;*umi3_13
	mov $%Free1,clock_scenario_3_14 :inc %Free1 ;*umi3_14
	mov $%Free1,clock_scenario_3_15 :inc %Free1 ;*umi3_15
	mov $%Free1,clock_scenario_3_16 :inc %Free1 ;*umi3_16
	mov $%Free1,clock_scenario_3_17 :inc %Free1 ;*umi3_17
	mov $%Free1,clock_scenario_3_18 :inc %Free1 ;*umi3_18

	;Gets the number of labels in the scenario
	mov %Free2,19
~

;Ep4
notif %scenario_Number = 4 jumpf

	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 4}",1430,19
	mov %Free5,flag_scenario_4_op

	mov %Free1,501

	mov $%Free1,scenario_4_op 	: inc %Free1 ;*umi4_op
	mov $%Free1,scenario_4_1	: inc %Free1 ;*umi4_1
	mov $%Free1,scenario_4_2	: inc %Free1 ;*umi4_2
	mov $%Free1,scenario_4_3	: inc %Free1 ;*umi4_3
	mov $%Free1,scenario_4_4	: inc %Free1 ;*umi4_4
	mov $%Free1,scenario_4_5	: inc %Free1 ;*umi4_5
	mov $%Free1,scenario_4_6	: inc %Free1 ;*umi4_6
	mov $%Free1,scenario_4_7	: inc %Free1 ;*umi4_7
	mov $%Free1,scenario_4_8	: inc %Free1 ;*umi4_8
	mov $%Free1,scenario_4_9	: inc %Free1 ;*umi4_9
	mov $%Free1,scenario_4_10	: inc %Free1 ;*umi4_10
	mov $%Free1,scenario_4_11	: inc %Free1 ;*umi4_11
	mov $%Free1,scenario_4_12	: inc %Free1 ;*umi4_12
	mov $%Free1,scenario_4_13	: inc %Free1 ;*umi4_13
	mov $%Free1,scenario_4_14	: inc %Free1 ;*umi4_14
	mov $%Free1,scenario_4_15	: inc %Free1 ;*umi4_15
	mov $%Free1,scenario_4_16	: inc %Free1 ;*umi4_16
	mov $%Free1,scenario_4_17	: inc %Free1 ;*umi4_17
	mov $%Free1,scenario_4_18	: inc %Free1 ;*umi4_18
	mov $%Free1,scenario_4_19	: inc %Free1 ;*umi4_19

	mov %Free1,531
	mov $%Free1,date_scenario_4_op 	: inc %Free1 ;*umi4_op
	mov $%Free1,date_scenario_4_1	: inc %Free1 ;*umi4_1
	mov $%Free1,date_scenario_4_2	: inc %Free1 ;*umi4_2
	mov $%Free1,date_scenario_4_3	: inc %Free1 ;*umi4_3
	mov $%Free1,date_scenario_4_4	: inc %Free1 ;*umi4_4
	mov $%Free1,date_scenario_4_5	: inc %Free1 ;*umi4_5
	mov $%Free1,date_scenario_4_6	: inc %Free1 ;*umi4_6
	mov $%Free1,date_scenario_4_7	: inc %Free1 ;*umi4_7
	mov $%Free1,date_scenario_4_8	: inc %Free1 ;*umi4_8
	mov $%Free1,date_scenario_4_9	: inc %Free1 ;*umi4_9
	mov $%Free1,date_scenario_4_10	: inc %Free1 ;*umi4_10
	mov $%Free1,date_scenario_4_11	: inc %Free1 ;*umi4_11
	mov $%Free1,date_scenario_4_12	: inc %Free1 ;*umi4_12
	mov $%Free1,date_scenario_4_13	: inc %Free1 ;*umi4_13
	mov $%Free1,date_scenario_4_14	: inc %Free1 ;*umi4_14
	mov $%Free1,date_scenario_4_15	: inc %Free1 ;*umi4_15
	mov $%Free1,date_scenario_4_16	: inc %Free1 ;*umi4_16
	mov $%Free1,date_scenario_4_17	: inc %Free1 ;*umi4_17
	mov $%Free1,date_scenario_4_18	: inc %Free1 ;*umi4_18
	mov $%Free1,date_scenario_4_19	: inc %Free1 ;*umi4_19

	mov %Free1,591
	mov $%Free1,clock_scenario_4_op 	: inc %Free1 ;*umi4_op
	mov $%Free1,clock_scenario_4_1	: inc %Free1 ;*umi4_1
	mov $%Free1,clock_scenario_4_2	: inc %Free1 ;*umi4_2
	mov $%Free1,clock_scenario_4_3	: inc %Free1 ;*umi4_3
	mov $%Free1,clock_scenario_4_4	: inc %Free1 ;*umi4_4
	mov $%Free1,clock_scenario_4_5	: inc %Free1 ;*umi4_5
	mov $%Free1,clock_scenario_4_6	: inc %Free1 ;*umi4_6
	mov $%Free1,clock_scenario_4_7	: inc %Free1 ;*umi4_7
	mov $%Free1,clock_scenario_4_8	: inc %Free1 ;*umi4_8
	mov $%Free1,clock_scenario_4_9	: inc %Free1 ;*umi4_9
	mov $%Free1,clock_scenario_4_10	: inc %Free1 ;*umi4_10
	mov $%Free1,clock_scenario_4_11	: inc %Free1 ;*umi4_11
	mov $%Free1,clock_scenario_4_12	: inc %Free1 ;*umi4_12
	mov $%Free1,clock_scenario_4_13	: inc %Free1 ;*umi4_13
	mov $%Free1,clock_scenario_4_14	: inc %Free1 ;*umi4_14
	mov $%Free1,clock_scenario_4_15	: inc %Free1 ;*umi4_15
	mov $%Free1,clock_scenario_4_16	: inc %Free1 ;*umi4_16
	mov $%Free1,clock_scenario_4_17	: inc %Free1 ;*umi4_17
	mov $%Free1,clock_scenario_4_18	: inc %Free1 ;*umi4_18
	mov $%Free1,clock_scenario_4_19	: inc %Free1 ;*umi4_19

	;Gets the number of labels in the scenario
	mov %Free2,20
~

notif %scenario_Number = 5 jumpf
	;Ep5
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 5}",1430,19
	mov %Free5,flag_scenario_5_op
	
	mov %Free1,501

	mov $%Free1,scenario_5_op :inc %Free1 ;*umi5_op
	mov $%Free1,scenario_5_1 :inc %Free1 ;*umi5_1
	mov $%Free1,scenario_5_2 :inc %Free1 ;*umi5_2
	mov $%Free1,scenario_5_3 :inc %Free1 ;*umi5_3
	mov $%Free1,scenario_5_4 :inc %Free1 ;*umi5_4
	mov $%Free1,scenario_5_5 :inc %Free1 ;*umi5_5
	mov $%Free1,scenario_5_6 :inc %Free1 ;*umi5_6
	mov $%Free1,scenario_5_7 :inc %Free1 ;*umi5_7
	mov $%Free1,scenario_5_8 :inc %Free1 ;*umi5_8
	mov $%Free1,scenario_5_9 :inc %Free1 ;*umi5_9
	mov $%Free1,scenario_5_10 :inc %Free1 ;*umi5_10
	mov $%Free1,scenario_5_11 :inc %Free1 ;*umi5_11
	mov $%Free1,scenario_5_12 :inc %Free1 ;*umi5_12
	mov $%Free1,scenario_5_13 :inc %Free1 ;*umi5_13
	mov $%Free1,scenario_5_14 :inc %Free1 ;*umi5_14
	mov $%Free1,scenario_5_15 :inc %Free1 ;*umi5_15

	mov %Free1,531
	mov $%Free1,date_scenario_5_op :inc %Free1 ;*umi5_op
	mov $%Free1,date_scenario_5_1 :inc %Free1 ;*umi5_1
	mov $%Free1,date_scenario_5_2 :inc %Free1 ;*umi5_2
	mov $%Free1,date_scenario_5_3 :inc %Free1 ;*umi5_3
	mov $%Free1,date_scenario_5_4 :inc %Free1 ;*umi5_4
	mov $%Free1,date_scenario_5_5 :inc %Free1 ;*umi5_5
	mov $%Free1,date_scenario_5_6 :inc %Free1 ;*umi5_6
	mov $%Free1,date_scenario_5_7 :inc %Free1 ;*umi5_7
	mov $%Free1,date_scenario_5_8 :inc %Free1 ;*umi5_8
	mov $%Free1,date_scenario_5_9 :inc %Free1 ;*umi5_9
	mov $%Free1,date_scenario_5_10 :inc %Free1 ;*umi5_10
	mov $%Free1,date_scenario_5_11 :inc %Free1 ;*umi5_11
	mov $%Free1,date_scenario_5_12 :inc %Free1 ;*umi5_12
	mov $%Free1,date_scenario_5_13 :inc %Free1 ;*umi5_13
	mov $%Free1,date_scenario_5_14 :inc %Free1 ;*umi5_14
	mov $%Free1,date_scenario_5_15 :inc %Free1 ;*umi5_15

	mov %Free1,591
	mov $%Free1,clock_scenario_5_op :inc %Free1 ;*umi5_op
	mov $%Free1,clock_scenario_5_1 :inc %Free1 ;*umi5_1
	mov $%Free1,clock_scenario_5_2 :inc %Free1 ;*umi5_2
	mov $%Free1,clock_scenario_5_3 :inc %Free1 ;*umi5_3
	mov $%Free1,clock_scenario_5_4 :inc %Free1 ;*umi5_4
	mov $%Free1,clock_scenario_5_5 :inc %Free1 ;*umi5_5
	mov $%Free1,clock_scenario_5_6 :inc %Free1 ;*umi5_6
	mov $%Free1,clock_scenario_5_7 :inc %Free1 ;*umi5_7
	mov $%Free1,clock_scenario_5_8 :inc %Free1 ;*umi5_8
	mov $%Free1,clock_scenario_5_9 :inc %Free1 ;*umi5_9
	mov $%Free1,clock_scenario_5_10 :inc %Free1 ;*umi5_10
	mov $%Free1,clock_scenario_5_11 :inc %Free1 ;*umi5_11
	mov $%Free1,clock_scenario_5_12 :inc %Free1 ;*umi5_12
	mov $%Free1,clock_scenario_5_13 :inc %Free1 ;*umi5_13
	mov $%Free1,clock_scenario_5_14 :inc %Free1 ;*umi5_14
	mov $%Free1,clock_scenario_5_15 :inc %Free1 ;*umi5_15


	;Gets the number of labels in the scenario
	mov %Free2,16
~

notif %scenario_Number = 6 jumpf
	;Ep6
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 6}",1430,19
	mov %Free5,flag_scenario_6_op
	
	mov %Free1,501

	mov $%Free1,scenario_6_op :inc %Free1 ;*umi6_op
	mov $%Free1,scenario_6_1 :inc %Free1 ;*umi6_1
	mov $%Free1,scenario_6_2 :inc %Free1 ;*umi6_2
	mov $%Free1,scenario_6_3 :inc %Free1 ;*umi6_3
	mov $%Free1,scenario_6_4 :inc %Free1 ;*umi6_4
	mov $%Free1,scenario_6_5 :inc %Free1 ;*umi6_5
	mov $%Free1,scenario_6_6 :inc %Free1 ;*umi6_6
	mov $%Free1,scenario_6_7 :inc %Free1 ;*umi6_7
	mov $%Free1,scenario_6_8 :inc %Free1 ;*umi6_8
	mov $%Free1,scenario_6_9 :inc %Free1 ;*umi6_9
	mov $%Free1,scenario_6_10 :inc %Free1 ;*umi6_10
	mov $%Free1,scenario_6_11 :inc %Free1 ;*umi6_11
	mov $%Free1,scenario_6_12 :inc %Free1 ;*umi6_12
	mov $%Free1,scenario_6_13 :inc %Free1 ;*umi6_13
	mov $%Free1,scenario_6_14 :inc %Free1 ;*umi6_14
	mov $%Free1,scenario_6_15 :inc %Free1 ;*umi6_15
	mov $%Free1,scenario_6_16 :inc %Free1 ;*umi6_16
	mov $%Free1,scenario_6_17 :inc %Free1 ;*umi6_17
	mov $%Free1,scenario_6_18 :inc %Free1 ;*umi6_18

	mov %Free1,531
	mov $%Free1,date_scenario_6_op :inc %Free1 ;*umi6_op
	mov $%Free1,date_scenario_6_1 :inc %Free1 ;*umi6_1
	mov $%Free1,date_scenario_6_2 :inc %Free1 ;*umi6_2
	mov $%Free1,date_scenario_6_3 :inc %Free1 ;*umi6_3
	mov $%Free1,date_scenario_6_4 :inc %Free1 ;*umi6_4
	mov $%Free1,date_scenario_6_5 :inc %Free1 ;*umi6_5
	mov $%Free1,date_scenario_6_6 :inc %Free1 ;*umi6_6
	mov $%Free1,date_scenario_6_7 :inc %Free1 ;*umi6_7
	mov $%Free1,date_scenario_6_8 :inc %Free1 ;*umi6_8
	mov $%Free1,date_scenario_6_9 :inc %Free1 ;*umi6_9
	mov $%Free1,date_scenario_6_10 :inc %Free1 ;*umi6_10
	mov $%Free1,date_scenario_6_11 :inc %Free1 ;*umi6_11
	mov $%Free1,date_scenario_6_12 :inc %Free1 ;*umi6_12
	mov $%Free1,date_scenario_6_13 :inc %Free1 ;*umi6_13
	mov $%Free1,date_scenario_6_14 :inc %Free1 ;*umi6_14
	mov $%Free1,date_scenario_6_15 :inc %Free1 ;*umi6_15
	mov $%Free1,date_scenario_6_16 :inc %Free1 ;*umi6_16
	mov $%Free1,date_scenario_6_17 :inc %Free1 ;*umi6_17
	mov $%Free1,date_scenario_6_18 :inc %Free1 ;*umi6_18

	mov %Free1,591
	mov $%Free1,clock_scenario_6_op :inc %Free1 ;*umi6_op
	mov $%Free1,clock_scenario_6_1 :inc %Free1 ;*umi6_1
	mov $%Free1,clock_scenario_6_2 :inc %Free1 ;*umi6_2
	mov $%Free1,clock_scenario_6_3 :inc %Free1 ;*umi6_3
	mov $%Free1,clock_scenario_6_4 :inc %Free1 ;*umi6_4
	mov $%Free1,clock_scenario_6_5 :inc %Free1 ;*umi6_5
	mov $%Free1,clock_scenario_6_6 :inc %Free1 ;*umi6_6
	mov $%Free1,clock_scenario_6_7 :inc %Free1 ;*umi6_7
	mov $%Free1,clock_scenario_6_8 :inc %Free1 ;*umi6_8
	mov $%Free1,clock_scenario_6_9 :inc %Free1 ;*umi6_9
	mov $%Free1,clock_scenario_6_10 :inc %Free1 ;*umi6_10
	mov $%Free1,clock_scenario_6_11 :inc %Free1 ;*umi6_11
	mov $%Free1,clock_scenario_6_12 :inc %Free1 ;*umi6_12
	mov $%Free1,clock_scenario_6_13 :inc %Free1 ;*umi6_13
	mov $%Free1,clock_scenario_6_14 :inc %Free1 ;*umi6_14
	mov $%Free1,clock_scenario_6_15 :inc %Free1 ;*umi6_15
	mov $%Free1,clock_scenario_6_16 :inc %Free1 ;*umi6_16
	mov $%Free1,clock_scenario_6_17 :inc %Free1 ;*umi6_17
	mov $%Free1,clock_scenario_6_18 :inc %Free1 ;*umi6_18


	;Gets the number of labels in the scenario
	mov %Free2,19
~

notif %scenario_Number = 7 jumpf
	;Ep7
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 7}",1430,19
	mov %Free5,flag_scenario_7_op
	
	mov %Free1,501

	mov $%Free1,scenario_7_op :inc %Free1 ;*umi7_op
	mov $%Free1,scenario_7_1 :inc %Free1 ;*umi7_1
	mov $%Free1,scenario_7_2 :inc %Free1 ;*umi7_2
	mov $%Free1,scenario_7_3 :inc %Free1 ;*umi7_3
	mov $%Free1,scenario_7_4 :inc %Free1 ;*umi7_4
	mov $%Free1,scenario_7_5 :inc %Free1 ;*umi7_5
	mov $%Free1,scenario_7_6 :inc %Free1 ;*umi7_6
	mov $%Free1,scenario_7_7 :inc %Free1 ;*umi7_7
	mov $%Free1,scenario_7_8 :inc %Free1 ;*umi7_8
	mov $%Free1,scenario_7_9 :inc %Free1 ;*umi7_9
	mov $%Free1,scenario_7_10 :inc %Free1 ;*umi7_10
	mov $%Free1,scenario_7_11 :inc %Free1 ;*umi7_11
	mov $%Free1,scenario_7_12 :inc %Free1 ;*umi7_12
	mov $%Free1,scenario_7_13 :inc %Free1 ;*umi7_13
	mov $%Free1,scenario_7_14 :inc %Free1 ;*umi7_14
	mov $%Free1,scenario_7_15 :inc %Free1 ;*umi7_15
	mov $%Free1,scenario_7_16 :inc %Free1 ;*umi7_16
	mov $%Free1,scenario_7_17 :inc %Free1 ;*umi7_17
	mov $%Free1,scenario_7_18 :inc %Free1 ;*umi7_18

	mov %Free1,531
	mov $%Free1,date_scenario_7_op :inc %Free1 ;*umi7_op
	mov $%Free1,date_scenario_7_1 :inc %Free1 ;*umi7_1
	mov $%Free1,date_scenario_7_2 :inc %Free1 ;*umi7_2
	mov $%Free1,date_scenario_7_3 :inc %Free1 ;*umi7_3
	mov $%Free1,date_scenario_7_4 :inc %Free1 ;*umi7_4
	mov $%Free1,date_scenario_7_5 :inc %Free1 ;*umi7_5
	mov $%Free1,date_scenario_7_6 :inc %Free1 ;*umi7_6
	mov $%Free1,date_scenario_7_7 :inc %Free1 ;*umi7_7
	mov $%Free1,date_scenario_7_8 :inc %Free1 ;*umi7_8
	mov $%Free1,date_scenario_7_9 :inc %Free1 ;*umi7_9
	mov $%Free1,date_scenario_7_10 :inc %Free1 ;*umi7_10
	mov $%Free1,date_scenario_7_11 :inc %Free1 ;*umi7_11
	mov $%Free1,date_scenario_7_12 :inc %Free1 ;*umi7_12
	mov $%Free1,date_scenario_7_13 :inc %Free1 ;*umi7_13
	mov $%Free1,date_scenario_7_14 :inc %Free1 ;*umi7_14
	mov $%Free1,date_scenario_7_15 :inc %Free1 ;*umi7_15
	mov $%Free1,date_scenario_7_16 :inc %Free1 ;*umi7_16
	mov $%Free1,date_scenario_7_17 :inc %Free1 ;*umi7_17
	mov $%Free1,date_scenario_7_18 :inc %Free1 ;*umi7_18

	mov %Free1,591
	mov $%Free1,clock_scenario_7_op :inc %Free1 ;*umi7_op
	mov $%Free1,clock_scenario_7_1 :inc %Free1 ;*umi7_1
	mov $%Free1,clock_scenario_7_2 :inc %Free1 ;*umi7_2
	mov $%Free1,clock_scenario_7_3 :inc %Free1 ;*umi7_3
	mov $%Free1,clock_scenario_7_4 :inc %Free1 ;*umi7_4
	mov $%Free1,clock_scenario_7_5 :inc %Free1 ;*umi7_5
	mov $%Free1,clock_scenario_7_6 :inc %Free1 ;*umi7_6
	mov $%Free1,clock_scenario_7_7 :inc %Free1 ;*umi7_7
	mov $%Free1,clock_scenario_7_8 :inc %Free1 ;*umi7_8
	mov $%Free1,clock_scenario_7_9 :inc %Free1 ;*umi7_9
	mov $%Free1,clock_scenario_7_10 :inc %Free1 ;*umi7_10
	mov $%Free1,clock_scenario_7_11 :inc %Free1 ;*umi7_11
	mov $%Free1,clock_scenario_7_12 :inc %Free1 ;*umi7_12
	mov $%Free1,clock_scenario_7_13 :inc %Free1 ;*umi7_13
	mov $%Free1,clock_scenario_7_14 :inc %Free1 ;*umi7_14
	mov $%Free1,clock_scenario_7_15 :inc %Free1 ;*umi7_15
	mov $%Free1,clock_scenario_7_16 :inc %Free1 ;*umi7_16
	mov $%Free1,clock_scenario_7_17 :inc %Free1 ;*umi7_17
	mov $%Free1,clock_scenario_7_18 :inc %Free1 ;*umi7_18


	;Gets the number of labels in the scenario
	mov %Free2,19
~

notif %scenario_Number = 8 jumpf
	;Ep8
	
	lsp 500,":s;#FFFFFF`{p:15:"+date_scenario_episode+" 8}",1430,19
	mov %Free5,flag_scenario_8_op
	
	mov %Free1,501

	mov $%Free1,scenario_8_op :inc %Free1 ;*umi8_op
	mov $%Free1,scenario_8_1 :inc %Free1 ;*umi8_1
	mov $%Free1,scenario_8_2 :inc %Free1 ;*umi8_2
	mov $%Free1,scenario_8_3 :inc %Free1 ;*umi8_3
	mov $%Free1,scenario_8_4 :inc %Free1 ;*umi8_4
	mov $%Free1,scenario_8_5 :inc %Free1 ;*umi8_5
	mov $%Free1,scenario_8_6 :inc %Free1 ;*umi8_6
	mov $%Free1,scenario_8_7 :inc %Free1 ;*umi8_7
	mov $%Free1,scenario_8_8 :inc %Free1 ;*umi8_8
	mov $%Free1,scenario_8_9 :inc %Free1 ;*umi8_9
	mov $%Free1,scenario_8_10 :inc %Free1 ;*umi8_10
	mov $%Free1,scenario_8_11 :inc %Free1 ;*umi8_11
	mov $%Free1,scenario_8_12 :inc %Free1 ;*umi8_12
	mov $%Free1,scenario_8_13 :inc %Free1 ;*umi8_13
	mov $%Free1,scenario_8_14 :inc %Free1 ;*umi8_14
	mov $%Free1,scenario_8_15 :inc %Free1 ;*umi8_15
	mov $%Free1,scenario_8_16 :inc %Free1 ;*umi8_16

	mov %Free1,531
	mov $%Free1,date_scenario_8_op :inc %Free1 ;*umi8_op
	mov $%Free1,date_scenario_8_1 :inc %Free1 ;*umi8_1
	mov $%Free1,date_scenario_8_2 :inc %Free1 ;*umi8_2
	mov $%Free1,date_scenario_8_3 :inc %Free1 ;*umi8_3
	mov $%Free1,date_scenario_8_4 :inc %Free1 ;*umi8_4
	mov $%Free1,date_scenario_8_5 :inc %Free1 ;*umi8_5
	mov $%Free1,date_scenario_8_6 :inc %Free1 ;*umi8_6
	mov $%Free1,date_scenario_8_7 :inc %Free1 ;*umi8_7
	mov $%Free1,date_scenario_8_8 :inc %Free1 ;*umi8_8
	mov $%Free1,date_scenario_8_9 :inc %Free1 ;*umi8_9
	mov $%Free1,date_scenario_8_10 :inc %Free1 ;*umi8_10
	mov $%Free1,date_scenario_8_11 :inc %Free1 ;*umi8_11
	mov $%Free1,date_scenario_8_12 :inc %Free1 ;*umi8_12
	mov $%Free1,date_scenario_8_13 :inc %Free1 ;*umi8_13
	mov $%Free1,date_scenario_8_14 :inc %Free1 ;*umi8_14
	mov $%Free1,date_scenario_8_15 :inc %Free1 ;*umi8_15
	mov $%Free1,date_scenario_8_16 :inc %Free1 ;*umi8_16

	mov %Free1,591
	mov $%Free1,clock_scenario_8_op :inc %Free1 ;*umi8_op
	mov $%Free1,clock_scenario_8_1 :inc %Free1 ;*umi8_1
	mov $%Free1,clock_scenario_8_2 :inc %Free1 ;*umi8_2
	mov $%Free1,clock_scenario_8_3 :inc %Free1 ;*umi8_3
	mov $%Free1,clock_scenario_8_4 :inc %Free1 ;*umi8_4
	mov $%Free1,clock_scenario_8_5 :inc %Free1 ;*umi8_5
	mov $%Free1,clock_scenario_8_6 :inc %Free1 ;*umi8_6
	mov $%Free1,clock_scenario_8_7 :inc %Free1 ;*umi8_7
	mov $%Free1,clock_scenario_8_8 :inc %Free1 ;*umi8_8
	mov $%Free1,clock_scenario_8_9 :inc %Free1 ;*umi8_9
	mov $%Free1,clock_scenario_8_10 :inc %Free1 ;*umi8_10
	mov $%Free1,clock_scenario_8_11 :inc %Free1 ;*umi8_11
	mov $%Free1,clock_scenario_8_12 :inc %Free1 ;*umi8_12
	mov $%Free1,clock_scenario_8_13 :inc %Free1 ;*umi8_13
	mov $%Free1,clock_scenario_8_14 :inc %Free1 ;*umi8_14
	mov $%Free1,clock_scenario_8_15 :inc %Free1 ;*umi8_15
	mov $%Free1,clock_scenario_8_16 :inc %Free1 ;*umi8_16

	;Gets the number of labels in the scenario
	mov %Free2,17
~

border_pad_pop

*scenario_jump
mov %Free1,501

;Base XY axis value
;mov %x,70
;mov %y,70
mov %x,1273
mov %y,87

exbtn_d "C531-580R602,0,0R603,0,0"
;lsp2 500,black,1345,450,35,40,0

if %scenario_Number = 1 lbsp2 610,chapter_screen_all_ep1,664,476,175,175,0 ;chapter screen
if %scenario_Number = 2 lbsp2 610,chapter_screen_all_ep2,664,476,175,175,0 ;chapter screen
if %scenario_Number = 3 lbsp2 610,chapter_screen_all_ep3,664,476,175,175,0 ;chapter screen
if %scenario_Number = 4 lbsp2 610,chapter_screen_all_ep4,664,476,175,175,0 ;chapter screen
;chiru
if %scenario_Number = 5 lbsp2 610,chapter_screen_all_ep5,664,476,175,175,0 ;chapter screen
if %scenario_Number = 6 lbsp2 610,chapter_screen_all_ep6,664,476,175,175,0 ;chapter screen
if %scenario_Number = 7 lbsp2 610,chapter_screen_all_ep7,664,476,175,175,0 ;chapter screen
if %scenario_Number = 8 lbsp2 610,chapter_screen_all_ep8,664,476,175,175,0 ;chapter screen

;aspt2 blur,610,10
lsp2 609,":a;graphics\menu\jump\border.png",664,476 ;portrait border -30 надо будет сделать в x для всех
lsp2 608,":a;graphics\menu\jump\border2.png",332,824 ;portrait for text left
lsp2 607,":a;graphics\menu\jump\border2.png",999,824 ;portrait for text right

display_clock3 665,825,45,6*60,8*60,0,0

;lsp 500,rmenu_btn_please_select_text,%x,100

;Do we display all the jumps regardless of actual completeness?
mov %Free6,0
if %scenario_Number = 1 && %UMINEKOEND > 10 mov %Free6,1
if %scenario_Number = 2 && %UMINEKOEND > 20 mov %Free6,1
if %scenario_Number = 3 && %UMINEKOEND > 30 mov %Free6,1
if %scenario_Number = 4 && %UMINEKOEND > 41 mov %Free6,1
;chiru
if %scenario_Number = 5 && %UMINEKOEND > 50 mov %Free6,1
if %scenario_Number = 6 && %UMINEKOEND > 60 mov %Free6,1
if %scenario_Number = 7 && %UMINEKOEND > 70 mov %Free6,1
if %scenario_Number = 8 && %UMINEKOEND > 81 mov %Free6,1


;Button placement

;for %Free3 = 1 to %Free2
;creates stack overflow when we try to exit the for loop

mov %Free3,0
*scenario_btn_iter
	inc %Free3
	if %Free3 > %Free2 goto *scenario_btn_done

	border_pad_push 5

	;_csp %Free1
	lsp %Free1,":s;#D7D7D7#FFFFFF`{p:15:{w:620:}{fit}"+$%Free1+"}",%x,%y ;chapter
	add %Free1,30
	if $%Free1 != "" lsph %Free1,":s;#FFFFFF`{a:c:{w:300:{fit}{p:14:"+$%Free1+"}}}",860,803 ;text right time
	if $%Free1 == "" lsph %Free1,":s;#FFFFFF`{a:c:{w:300:{fit}{p:16:—————————}}}",860,794

	add %Free1,30
	lsph %Free1,":s;#FFFFFF`{a:c:{w:300:{fit}{p:14:"+$%Free1+"}}}",168,803 ;text left chapter

	border_pad_pop

	mov %Free7,%Free1+30

	;Button
	itoa $Free1,%Free1-30
	itoa $Free4,%Free1
	sub %Free1,60
	exbtn %Free1,%Free3,"P"+$Free1+"P"+$Free4+$%Free7 ;+"P604"

	;X values increase
	add %y,44
	inc %Free1

	if %Free6 == 1 goto *scenario_btn_iter
	inc %Free5
	if $%Free5 != "●" goto *scenario_btn_done
goto *scenario_btn_iter

*scenario_btn_done

;Back button
lsp rmenu_btn_Exit,rmenu_btn_Exit_text,%x,990
spbtn rmenu_btn_Exit,rmenu_btn_Exit

;Make black darker
amsp 703,0,0,140

print 1

*scenario_jump_btnwait
;Wait for clicks

    ;transbtn
	btnwait %btnRes
	
	if %btnRes = rmenu_btn_Exit btndef "" : csp2 -1 : mov %title_skip,1 : goto *b_title
	if %btnRes = -1 			btndef "" : csp2 -1 : mov %title_skip,1 : goto *b_title
	if %btnRes = -10 			btndef "" : csp2 -1 : mov %title_skip,1 : goto *b_title
	if %scenario_Number = 1  goto *scenario_jump_data1
	if %scenario_Number = 2  goto *scenario_jump_data2
	if %scenario_Number = 3  goto *scenario_jump_data3
	if %scenario_Number = 4  goto *scenario_jump_data4
	;chiru
	if %scenario_Number = 5  goto *scenario_jump_data5
	if %scenario_Number = 6  goto *scenario_jump_data6
	if %scenario_Number = 7  goto *scenario_jump_data7
	if %scenario_Number = 8  goto *scenario_jump_data8

goto *scenario_jump_btnwait

*perform_magic_jump
	btndef ""
	bg black,0
	csp2 -1
	csp_rst
	print 22
	wait2 100
	E_A
return

;---------------------------

*jump_sysdata_set1   ;Scenario Settings 1-1 System
	btndef ""
	textoff

	csp_rst
	bg black,22
	set_name_window_non
	text_speed %textspeed
	text_fade 133
	mov %flg_number_t,0
	mov %flg_number_o,0

return

*umi1_op_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_0
return

*umi1_1_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_1 
return

*umi1_2_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_2
return

*umi1_3_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_3
return

*umi1_4_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_4
return

*umi1_5_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_5
return

*umi1_6_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_6
return

*umi1_7_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_7 
return

*umi1_8_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_8
return

*umi1_9_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_9 
return

*umi1_10_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_10
return

*umi1_11_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_11
return

*umi1_12_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_12
return

*umi1_13_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_13
return

*umi1_14_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_14
return

*umi1_15_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_15
return

*umi1_16_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_16
return

*umi1_17_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set1_17
return

*teatime_1_flags
*ura_teatime_1_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,1
return

*umi2_op_flags
*umi2_1_flags
*umi2_2_flags
*umi2_3_flags
*umi2_4_flags
*umi2_5_flags
*umi2_6_flags
*umi2_7_flags
*umi2_8_flags
*umi2_9_flags
*umi2_10_flags
*umi2_11_flags
*umi2_12_flags
*umi2_13_flags
*umi2_14_flags
*umi2_15_flags
*umi2_16_flags
*umi2_17_flags
*umi2_18_flags
*umi3_op_flags
*umi3_1_flags
*umi3_2_flags
*umi3_3_flags
*umi3_4_flags
*umi3_5_flags
*umi3_6_flags
*umi3_7_flags
*umi3_8_flags
*umi3_9_flags
*umi3_10_flags
*umi3_11_flags
*umi3_12_flags
*umi3_13_flags
*umi3_14_flags
*umi3_15_flags
*umi3_16_flags
*umi3_17_flags
*umi3_18_flags
*umi4_op_flags
*umi4_1_flags
*umi4_2_flags
*umi4_3_flags
*umi4_4_flags
*umi4_5_flags
*umi4_6_flags
*umi4_7_flags
*umi4_8_flags
*umi4_9_flags
*umi4_10_flags
*umi4_11_flags
*umi4_12_flags
*umi4_13_flags
*umi4_14_flags
*umi4_15_flags
*umi4_16_flags
*umi4_17_flags
*umi4_18_flags
*umi4_19_flags
	gosub *jump_sysdata_set1
return

*teatime_2_flags
*ura_teatime_2_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,2
return

*teatime_3_flags
*ura_teatime_3_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,3
return

*teatime_4_flags
*ura_teatime_4_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,4
return

;chiru
*umi5_op_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_0
return

*umi5_1_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_1
return

*umi5_2_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_2
return

*umi5_3_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_3

return

*umi5_4_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_4
return

*umi5_5_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_5
return

*umi5_6_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_6

return

*umi5_7_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_7
return

*umi5_8_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_8
return

*umi5_9_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_9
return

*umi5_10_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_10
return

*umi5_11_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_11
return

*umi5_12_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_12
return

*umi5_13_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_13
return

*umi5_14_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_14
return

*umi5_15_flags
	gosub *jump_sysdata_set1 
	gosub *jump_flg_set5_15
return

*teatime_5_flags
*ura_teatime_5_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,5
return

*umi6_op_flags
*umi6_1_flags
*umi6_2_flags
*umi6_3_flags
*umi6_4_flags
*umi6_5_flags
*umi6_6_flags
*umi6_7_flags
*umi6_8_flags
*umi6_9_flags
*umi6_10_flags
*umi6_11_flags
*umi6_12_flags
*umi6_13_flags
*umi6_14_flags
*umi6_15_flags
*umi6_16_flags
*umi6_17_flags
*umi6_18_flags
*umi7_op_flags
*umi7_1_flags
*umi7_2_flags
*umi7_3_flags
*umi7_4_flags
*umi7_5_flags
*umi7_6_flags
*umi7_7_flags
*umi7_8_flags
*umi7_9_flags
*umi7_10_flags
*umi7_11_flags
*umi7_12_flags
*umi7_13_flags
*umi7_14_flags
*umi7_15_flags
*umi7_16_flags
*umi7_17_flags
*umi7_18_flags
; These have to correctly set the coin count and eva variables.
*umi8_op_flags
*umi8_1_flags
*umi8_2_flags
*umi8_3_flags
*umi8_4_flags
*umi8_5_flags
*umi8_6_flags
	mov %total_coin_count,0
	mov %eva_hint_counter,0	
	gosub *jump_sysdata_set1 
	return
*umi8_7_flags
	mov $log_ch_current,"*umi8_7"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_8_flags
	mov $log_ch_current,"*umi8_8"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_9_flags
	mov $log_ch_current,"*umi8_9"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_10_flags
	mov $log_ch_current,"*umi8_10"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_11_flags
	mov $log_ch_current,"*umi8_11"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_12_flags
	mov $log_ch_current,"*umi8_12"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_13_flags
	mov $log_ch_current,"*umi8_13"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_14_flags
	mov $log_ch_current,"*umi8_14"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_15_flags
	mov $log_ch_current,"*umi8_15"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return
*umi8_16_flags
	mov $log_ch_current,"*umi8_16"
	gosub *jump_sysdata_set1
	gosub *ep8_varset_sskip
	return

*teatime_6_flags
*ura_teatime_6_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,6
return

*teatime_7_flags
*ura_teatime_7_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,7
return

*teatime_8_flags
*ura_teatime_8_flags
	gosub *jump_sysdata_set1
	mov %scenario_Number,8
return

*scenario_jump_data1

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 18 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *umi1_op_flags : skip_on : goto *umi1_op
	if %BtnRes = 2 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,8*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_1_flags : skip_on : goto *umi1_1
	if %BtnRes = 3 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,10*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_2_flags : skip_on : goto *umi1_2
	if %BtnRes = 4 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,12*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_3_flags : skip_on : goto *umi1_3
	if %BtnRes = 5 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,13*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_4_flags : skip_on : goto *umi1_4
	if %BtnRes = 6 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,13*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_5_flags : skip_on : goto *umi1_5
	if %BtnRes = 7 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,15*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_6_flags : skip_on : goto *umi1_6
	if %BtnRes = 8 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,18*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_7_flags : skip_on : goto *umi1_7
	if %BtnRes = 9 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,22*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_8_flags : skip_on : goto *umi1_8
	if %BtnRes = 10 gosub *scenario_jump_hiduke_1986_10_4 : gosub *scenario_jump_exit_efe1 : gosub *umi1_9_flags : skip_on : goto *umi1_9
	if %BtnRes = 11 display_clock2 960,540,65,0,6*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_10_flags : skip_on : goto *umi1_10
	if %BtnRes = 12 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,8*60+45,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_11_flags : skip_on : goto *umi1_11
	if %BtnRes = 13 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,13*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_12_flags : skip_on : goto *umi1_12
	if %BtnRes = 14 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,19*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_13_flags : skip_on : goto *umi1_13
	if %BtnRes = 15 gosub *scenario_jump_hiduke_1986_10_5 : gosub *scenario_jump_exit_efe1 : gosub *umi1_14_flags : skip_on : goto *umi1_14
	if %BtnRes = 16 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,20*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_15_flags : skip_on : goto *umi1_15
	if %BtnRes = 17 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,23*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi1_16_flags : skip_on : goto *umi1_16
	if %BtnRes = 18 gosub *scenario_jump_exit_efe1 : gosub *umi1_17_flags : skip_on : goto *umi1_17

	goto *scenario_jump_btnwait


*scenario_jump_data2

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 19 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_op
	if %BtnRes = 2 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_1
	if %BtnRes = 3 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_2
	if %BtnRes = 4 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_3
	if %BtnRes = 5 gosub *scenario_jump_hiduke_1986_10_4 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_4
	if %BtnRes = 6 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,10*60+45,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_5
	if %BtnRes = 7 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,13*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_6
	if %BtnRes = 8 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,18*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_7
	if %BtnRes = 9 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,22*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_8
	if %BtnRes = 10 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,6*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_9
	if %BtnRes = 11 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,6*60+43,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_10
	if %BtnRes = 12 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,6*60+50,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_11
	if %BtnRes = 13 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,7*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_12
	if %BtnRes = 14 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,13*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_13
	if %BtnRes = 15 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,13*60+17,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_14
	if %BtnRes = 16 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,18*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_15
	if %BtnRes = 17 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,21*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_16
	if %BtnRes = 18 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,23*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_17
	if %BtnRes = 19 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,23*60+59,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi2_18


*scenario_jump_data3

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 19 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_op
	if %BtnRes = 2 gosub *scenario_jump_hiduke_1986_10_4 : *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_1
	if %BtnRes = 3 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,14*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_2
	if %BtnRes = 4 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,20*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_3
	if %BtnRes = 5 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,21*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_4
	if %BtnRes = 6 gosub *scenario_jump_hiduke_1986_10_4 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_5
	if %BtnRes = 7 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,0,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_6
	if %BtnRes = 8 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,21,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_7
	if %BtnRes = 9 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,6*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_8
	if %BtnRes = 10 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,7*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_9
	if %BtnRes = 11 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,9*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_10
	if %BtnRes = 12 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,10*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_11
	if %BtnRes = 13 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,10*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_12
	if %BtnRes = 14 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,11*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_13
	if %BtnRes = 15 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,13*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_14
	if %BtnRes = 16 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,13*60+30,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_15
	if %BtnRes = 17 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,17*60+44,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_16
	if %BtnRes = 18 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,18*60+3,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_17
	if %BtnRes = 19 gosub *scenario_jump_hiduke_1986_10_5 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi3_18


*scenario_jump_data4

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 20 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_op
	if %BtnRes = 2 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_1
	if %BtnRes = 3 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_2
	if %BtnRes = 4 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_3
	if %BtnRes = 5 display_clock2 960,540,65,0,14*60+51,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_4
	if %BtnRes = 6 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,18*60+7,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_5
	if %BtnRes = 7 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_6
	if %BtnRes = 8 gosub *scenario_jump_exit_efe1 : gosub *scenario_jump_hiduke_1998 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_7
	if %BtnRes = 9 gosub *scenario_jump_exit_efe1 : gosub *scenario_jump_hiduke_enj_mirai : gosub *jump_sysdata_set1 : skip_on : goto *umi4_8
	if %BtnRes = 10 csp_rst : bg black,2 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_9
	if %BtnRes = 11 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_10
	if %BtnRes = 12 display_clock2 960,540,65,0,21*60+48,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_11
	if %BtnRes = 13 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_12
	if %BtnRes = 14 gosub *scenario_jump_hiduke_1986_10_4_2 : display_clock2 960,540,65,0,22*60+32,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_13
	if %BtnRes = 15 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_14
	if %BtnRes = 16 gosub *scenario_jump_hiduke_1986_10_4_2 : display_clock2 960,540,65,0,23*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_15
	if %BtnRes = 17 gosub *scenario_jump_hiduke_1986_10_4_2 : display_clock2 960,540,65,0,23*60+11,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_16
	if %BtnRes = 18 gosub *scenario_jump_hiduke_1986_10_4_2 : display_clock2 960,540,65,0,23*60+47,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_17
	if %BtnRes = 19 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_18
	if %BtnRes = 20 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi4_19

;chiru
*scenario_jump_data5

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 18 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *umi5_op_flags : skip_on : goto *umi5_op
	if %BtnRes = 2 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : gosub *umi5_1_flags : skip_on : goto *umi5_1
	if %BtnRes = 3 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : gosub *umi5_2_flags : skip_on : goto *umi5_2
	if %BtnRes = 4 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : gosub *umi5_3_flags : skip_on : goto *umi5_3
	if %BtnRes = 5 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,11*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_4_flags : skip_on : goto *umi5_4
	if %BtnRes = 6 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,19*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_5_flags : skip_on : goto *umi5_5
	if %BtnRes = 7 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,22*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_6_flags : skip_on : goto *umi5_6
	if %BtnRes = 8 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,22*60+47,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_7_flags : skip_on : goto *umi5_7
	if %BtnRes = 9 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,23*49,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_8_flags : skip_on : goto *umi5_8
	if %BtnRes = 10 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : gosub *umi5_9_flags : skip_on : goto *umi5_9
	if %BtnRes = 11 display_clock2 960,540,65,0,7*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_10_flags : skip_on : goto *umi5_10
	if %BtnRes = 12 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,8*60+4,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_11_flags : skip_on : goto *umi5_11
	if %BtnRes = 13 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,11*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_12_flags : skip_on : goto *umi5_12
	if %BtnRes = 14 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,12*60+33,0,0  : gosub *scenario_jump_exit_efe1 : gosub *umi5_13_flags : skip_on : goto *umi5_13
	if %BtnRes = 15 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,24*60,0,0 : gosub *scenario_jump_exit_efe1 : gosub *umi5_14_flags : skip_on : goto *umi5_14
	if %BtnRes = 16 gosub *scenario_jump_hiduke_1986_10_5 : gosub *scenario_jump_exit_efe1 : gosub *umi5_15_flags : skip_on : goto *umi5_15

	goto *scenario_jump_btnwait


*scenario_jump_data6

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 19 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi6_op
	if %BtnRes = 2 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_1
	if %BtnRes = 3 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_2
	if %BtnRes = 4 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_3
	if %BtnRes = 5 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_4
	if %BtnRes = 6 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : goto *umi6_5
	if %BtnRes = 7 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,22*60+3,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_6
	if %BtnRes = 8 gosub *scenario_jump_hiduke_1986_10_4 : display_clock2 960,540,65,0,22*60+59,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_7
	if %BtnRes = 9 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_8
	if %BtnRes = 10 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_9
	if %BtnRes = 11 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,7,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_10
	if %BtnRes = 12 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,12,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_11
	if %BtnRes = 13 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,1*60+11,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_12
	if %BtnRes = 14 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_13
	if %BtnRes = 15 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,2*60+22,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_14
	if %BtnRes = 16 gosub *scenario_jump_hiduke_1986_10_5 : display_clock2 960,540,65,0,2*60+34,0,0 : gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_15
	if %BtnRes = 17 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_16
	if %BtnRes = 18 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_17
	if %BtnRes = 19 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on :  goto *umi6_18


*scenario_jump_data7

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 20 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *jump_sysdata_set1 : skip_on : goto *umi7_op
	if %BtnRes = 2 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_1
	if %BtnRes = 3 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_2
	if %BtnRes = 4 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_3
	if %BtnRes = 5 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_4
	if %BtnRes = 6 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_5
	if %BtnRes = 7 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_6
	if %BtnRes = 8 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_7
	if %BtnRes = 9 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_8
	if %BtnRes = 10 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_9
	if %BtnRes = 11 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_10
	if %BtnRes = 12 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_11
	if %BtnRes = 13 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_12
	if %BtnRes = 14 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_13
	if %BtnRes = 15 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_14
	if %BtnRes = 16 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_15
	if %BtnRes = 17 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_16
	if %BtnRes = 18 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_17
	if %BtnRes = 19 gosub *scenario_jump_exit_efe1 :gosub *jump_sysdata_set1 : skip_on : goto *umi7_18

*scenario_jump_data8

	if %BtnRes < 1 goto *scenario_jump_btnwait
	if %BtnRes > 20 goto *scenario_jump_btnwait

	gosub *perform_magic_jump

	skip_off

	; Choice vectors for ep8 (= flag_scenario + 15 if flag_scenario >= flag_scenario_8_4 and flag_scenario <= flag_scenario_8_15)
	; represent the choice vectors at the end of that chapter and are to be loaded when magic jumping into the following chapter
	; i.e. load when jumping into chapter 8_5 or later
	; i.e. load when btnres is >= 6 and <= 17
	; i.e. don't load when btnres is < 6 or > 17
	if %BtnRes < 6 jumpf
	if %BtnRes > 17 jumpf
		mov %Free1,choice_vector_8_4+%BtnRes-6 ; i.e. load from choice_vector_8_4 when clicking 8_5, and so on
		if $%Free1 != "" loadchoices $%Free1 : accept_choice_next_index 0 : jumpf
		; Note, prologue is 1, chapter 1 is 2, etc.
		; debug_var %BtnRes - 1, "Empty choices for chapter"
		if %BtnRes = 6 loadchoices "0" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 7 loadchoices "0" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 8 loadchoices "0,0,0,1,3,2,3,4,0,1" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 9 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 10 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 11 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 12 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 13 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 14 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 15 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 16 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
		if %BtnRes = 17 loadchoices "0,0,0,1,3,2,3,4,0,1,2,1,4,0,2,4,2,27" : accept_choice_next_index 0 : jumpf
	~

	; Flags call ep8 varset, ensuring that we correctly initialize the ep8 variables according to the provided choice vector
	if %BtnRes = 1 gosub *scenario_jump_exit_efe1 : gosub *umi8_op_flags : skip_on : goto *umi8_op
	if %BtnRes = 2 gosub *scenario_jump_exit_efe1 : gosub *umi8_1_flags : skip_on : goto *umi8_1
	if %BtnRes = 3 gosub *scenario_jump_exit_efe1 : gosub *umi8_2_flags : skip_on : goto *umi8_2
	if %BtnRes = 4 gosub *scenario_jump_exit_efe1 : gosub *umi8_3_flags : skip_on : goto *umi8_3
	if %BtnRes = 5 gosub *scenario_jump_exit_efe1 : gosub *umi8_4_flags : skip_on : goto *umi8_4
	if %BtnRes = 6 gosub *scenario_jump_exit_efe1 : gosub *umi8_5_flags : skip_on : goto *umi8_5
	if %BtnRes = 7 gosub *scenario_jump_exit_efe1 : gosub *umi8_6_flags : skip_on : goto *umi8_6
	if %BtnRes = 8 gosub *scenario_jump_exit_efe1 : gosub *umi8_7_flags : skip_on : goto *umi8_7
	if %BtnRes = 9 gosub *scenario_jump_exit_efe1 : gosub *umi8_8_flags : skip_on : goto *umi8_8
	if %BtnRes = 10 gosub *scenario_jump_exit_efe1 : gosub *umi8_9_flags : skip_on : goto *umi8_9
	if %BtnRes = 11 gosub *scenario_jump_exit_efe1 : gosub *umi8_10_flags : skip_on : goto *umi8_10
	if %BtnRes = 12 gosub *scenario_jump_exit_efe1 : gosub *umi8_11_flags : skip_on : goto *umi8_11
	if %BtnRes = 13 gosub *scenario_jump_exit_efe1 : gosub *umi8_12_flags : skip_on : goto *umi8_12
	if %BtnRes = 14 gosub *scenario_jump_exit_efe1 : gosub *umi8_13_flags : skip_on : goto *umi8_13
	if %BtnRes = 15 gosub *scenario_jump_exit_efe1 : gosub *umi8_14_flags : skip_on : goto *umi8_14
	if %BtnRes = 16 gosub *scenario_jump_exit_efe1 : gosub *umi8_15_flags : skip_on : goto *umi8_15
	if %BtnRes = 17 gosub *scenario_jump_exit_efe1 : gosub *umi8_16_flags : skip_on : goto *umi8_16

;----------------------------------------

*scenario_jump_hiduke_1986_10_4
	csp_rst
	bg black,2
	seplay 1,29,100
	bg oct_4_1986,2
	wait 1000
	bg black,2
return

*scenario_jump_hiduke_1986_10_4_2
	csp_rst
	bg black,2
	seplay 1,28,100
	bg oct_4_1986,2
	wait 1000
	bg black,2
return

*scenario_jump_hiduke_1986_10_5
	csp_rst
	bg black,2
	seplay 1,28,100
	bg oct_5_1986,2
	wait 1000
	bg black,2
return

*scenario_jump_hiduke_1998
	E_A
	csp_rst
	bg black,2
	seplay 1,29,70
	bg oct_1998,80
	wait 4000
	bg black,22
return

*scenario_jump_hiduke_enj_mirai
	E_A
	csp_rst
	seplay 1,29,70
	bg ENJ_mirai01,80
	wait 4000
	bg black,22
return
;----------------------------------------

*scenario_jump_exit_efe1
	;To create glass effect.
	E_A
	delay 1000
	lsp2 1,ware,960,540,100,100,0
	seplay 9,1100,100
	print 1
	delay 1000
	
	csp_rst
	bg black,2

return

;----------------------------------------

;Jump condition at the time of character management scenario, the flag
*jump_flg_set1_0

	;Character state initialization, and Tips
	for %tmp = 1 to char_max : mov ?r[%tmp][condition],0 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next


return


*jump_flg_set1_1
	;Character state initialization, and Tips
	for %tmp = 1 to char_max : mov ?r[%tmp][condition],0 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1

	mov ?r[but][condition],1
	mov ?r[geo][condition],1
	mov ?r[hid][condition],1
	mov ?r[eva][condition],1
	mov ?r[kir][condition],1
	mov ?r[rud][condition],1
	mov ?r[mar][condition],1
	mov ?r[ros][condition],1
return


*jump_flg_set1_2
	;Character state initialization, and Tips
	for %tmp = 1 to char_max : mov ?r[%tmp][condition],0 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1

	mov ?r[but][condition],1
	mov ?r[geo][condition],1
	mov ?r[hid][condition],1
	mov ?r[eva][condition],1
	mov ?r[kir][condition],1
	mov ?r[rud][condition],1
	mov ?r[mar][condition],1
	mov ?r[ros][condition],1
	mov ?r[jes][condition],1
	mov ?r[kum][condition],1
return


*jump_flg_set1_3
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1

	mov ?r[bea][condition],0
	mov ?r[ber][condition],0
	mov ?r[sha][condition],0
	mov ?r[gen][condition],0
	mov ?r[nat][condition],0
	mov ?r[kin][condition],0
	mov ?r[nan][condition],0
	mov ?r[kla][condition],0
return


*jump_flg_set1_4
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?r[bea][condition],0
	mov ?r[ber][condition],0
	mov ?r[nan][condition],0
	mov ?r[kla][condition],0
return


*jump_flg_set1_5
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1
return


*jump_flg_set1_6
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
return


*jump_flg_set1_7
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
return


*jump_flg_set1_8
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
return


*jump_flg_set1_9
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
return


*jump_flg_set1_10
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
return


*jump_flg_set1_11
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	mov ?r[sha][condition],2
return


*jump_flg_set1_12
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	mov ?r[sha][condition],2
	mov ?r[kin][condition],2
return


*jump_flg_set1_13
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1
	mov ?grim[10][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	mov ?r[sha][condition],2
	mov ?r[kin][condition],2
return


*jump_flg_set1_14
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1
	mov ?grim[10][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	mov ?r[sha][condition],2
	mov ?r[kin][condition],2
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
return


*jump_flg_set1_15
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1
	mov ?grim[10][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1

	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	mov ?r[sha][condition],2
	mov ?r[kin][condition],3
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
return


*jump_flg_set1_16
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1
	mov ?grim[10][grim_flg],1

	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1

	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	mov ?r[sha][condition],2
	mov ?r[kin][condition],3
	mov ?r[eva][condition],2
	mov ?r[hid][condition],2
	mov ?r[kan][condition],2
return

*jump_flg_set1_17
	;Character state initialization, and Tips
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],2 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 0 to 11 : mov ?grim[%tmp][grim_flg],0 : next
	mov ?grim[1][grim_flg],1
	mov ?grim[2][grim_flg],1
	mov ?grim[3][grim_flg],1
	mov ?grim[4][grim_flg],1
	mov ?grim[5][grim_flg],1
	mov ?grim[6][grim_flg],1
	mov ?grim[7][grim_flg],1
	mov ?grim[8][grim_flg],1
	mov ?grim[9][grim_flg],1
	mov ?grim[10][grim_flg],1

	mov ?r[kin][condition],3
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?tips[3][tips_flg],1
	mov ?tips[4][tips_flg],1
return

*jump_flg_set5_0
	for %tmp = 1 to char_max_ep5 : mov ?r[%scenario_Number][%tmp][condition],0 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
return

*jump_flg_set5_1
	for %tmp = 1 to char_max_ep5: mov ?r[%scenario_Number][%tmp][condition],0 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?r[%scenario_Number][but][condition],1
	mov ?r[%scenario_Number][geo][condition],1
	mov ?r[%scenario_Number][hid][condition],1
	mov ?r[%scenario_Number][eva][condition],1
	mov ?r[%scenario_Number][kir][condition],1
	mov ?r[%scenario_Number][rud][condition],1
	mov ?r[%scenario_Number][mar][condition],1
	mov ?r[%scenario_Number][ros][condition],1
return


*jump_flg_set5_2
	for %tmp = 1 to char_max_ep5: mov ?r[%scenario_Number][%tmp][condition],0 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?r[%scenario_Number][but][condition],1
	mov ?r[%scenario_Number][geo][condition],1
	mov ?r[%scenario_Number][hid][condition],1
	mov ?r[%scenario_Number][eva][condition],1
	mov ?r[%scenario_Number][kir][condition],1
	mov ?r[%scenario_Number][rud][condition],1
	mov ?r[%scenario_Number][mar][condition],1
	mov ?r[%scenario_Number][ros][condition],1
	mov ?r[%scenario_Number][jes][condition],1
	mov ?r[%scenario_Number][kum][condition],1
return


*jump_flg_set5_3
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?r[%scenario_Number][bea][condition],0
	mov ?r[%scenario_Number][ber][condition],0
	mov ?r[%scenario_Number][sha][condition],0
	mov ?r[%scenario_Number][gen][condition],0
	mov ?r[%scenario_Number][nat][condition],0
	mov ?r[%scenario_Number][kin][condition],0
	mov ?r[%scenario_Number][nan][condition],0
	mov ?r[%scenario_Number][kla][condition],0
return


*jump_flg_set5_4
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?r[%scenario_Number][bea][condition],0
	mov ?r[%scenario_Number][ber][condition],0
	mov ?r[%scenario_Number][nan][condition],0
	mov ?r[%scenario_Number][kla][condition],0
return


*jump_flg_set5_5
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
return


*jump_flg_set5_6
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
return


*jump_flg_set5_7
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
return


*jump_flg_set5_8
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
return


*jump_flg_set5_9
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
return


*jump_flg_set5_10
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
return


*jump_flg_set5_11
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?r[%scenario_Number][kla][condition],2
	mov ?r[%scenario_Number][rud][condition],2
	mov ?r[%scenario_Number][kir][condition],2
	mov ?r[%scenario_Number][ros][condition],2
	mov ?r[%scenario_Number][goh][condition],2
	mov ?r[%scenario_Number][sha][condition],2
return


*jump_flg_set5_12
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?r[%scenario_Number][kla][condition],2
	mov ?r[%scenario_Number][rud][condition],2
	mov ?r[%scenario_Number][kir][condition],2
	mov ?r[%scenario_Number][ros][condition],2
	mov ?r[%scenario_Number][goh][condition],2
	mov ?r[%scenario_Number][sha][condition],2
	mov ?r[%scenario_Number][kin][condition],2
return


*jump_flg_set5_13
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?r[%scenario_Number][kla][condition],2
	mov ?r[%scenario_Number][rud][condition],2
	mov ?r[%scenario_Number][kir][condition],2
	mov ?r[%scenario_Number][ros][condition],2
	mov ?r[%scenario_Number][goh][condition],2
	mov ?r[%scenario_Number][sha][condition],2
	mov ?r[%scenario_Number][kin][condition],2
return


*jump_flg_set5_14
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?r[%scenario_Number][kla][condition],2
	mov ?r[%scenario_Number][rud][condition],2
	mov ?r[%scenario_Number][kir][condition],2
	mov ?r[%scenario_Number][ros][condition],2
	mov ?r[%scenario_Number][goh][condition],2
	mov ?r[%scenario_Number][sha][condition],2
	mov ?r[%scenario_Number][kin][condition],2
	mov ?r[%scenario_Number][eva][condition],2
	mov ?r[%scenario_Number][hid][condition],2
return


*jump_flg_set5_15
	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	for %tmp = 0 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	mov ?tips[1][tips_flg],1
	mov ?tips[2][tips_flg],1
	mov ?r[%scenario_Number][kla][condition],2
	mov ?r[%scenario_Number][rud][condition],2
	mov ?r[%scenario_Number][kir][condition],2
	mov ?r[%scenario_Number][ros][condition],2
	mov ?r[%scenario_Number][goh][condition],2
	mov ?r[%scenario_Number][sha][condition],2
	mov ?r[%scenario_Number][kin][condition],3
	mov ?r[%scenario_Number][eva][condition],2
	mov ?r[%scenario_Number][hid][condition],2
return

;-----------------------------------------------------------------------------------------------------------
;-----------------------------------------------------------------------------------------------------------
;-----------------------------------------------------------------------------------------------------------

;************************************************************************************
; NEVER EVER call this command!!!
; It is only there for autogenerated parts of the script!!!
;
; The only cases you may use it in script is for LEGACY (conversion) reasons:
;   a) csp -1NUM  - clear set NUM, equivalent to csp_set NUM
;   b) csp mskNUM - equivalent to _csp mskNUM
; restore cursors on csp -1
;************************************************************************************

*csp
	getparam %cspParam
	if %cspParam < -1 mov %cspParam,-10-%cspParam : goto *csp_set_direct
	if %cspParam == msk1 || %cspParam == msk2 || %cspParam == msk3 _csp %cspParam : return
	error "csp MISUSE!!"
return

;************************************************************************************
; Non ingame reset call that will remove all the sprites.
; As an additional feature it ensures that you have cursor icons ready.
;************************************************************************************
*csp_rst
	_csp -1
	_csp2 -1
	btndef ""
	lsph TextCC1SpNum,":a/10,80,2;graphics\system\wnd\cursor0.png",0,0
	lsph TextCC2SpNum,":a/10,80,2;graphics\system\wnd\cursor1.png",0,0
	lsph TextCC3SpNum,":a;graphics\system\skip.png",30,80
	lsph TextCC4SpNum,":a;graphics\system\automode.png",30,80
	enable_transitions TextCC3SpNum,0
	enable_transitions TextCC4SpNum,0
	if %skip_icon = on vsp TextCC3SpNum,1
	if %autom_icon = on vsp TextCC4SpNum,1
return

;************************************************************************************
; Ingame reset call that will correctly remove all the sprites.
; As an additional feature it ensures that you have cursor icons ready.
;************************************************************************************
*csp_grst
	csp_set 0
	csp_set 1
	csp_set 2
	csp_set 3
	goto *csp_rst

*csp_set
	getparam %cspParam
*csp_set_direct
	spriteset_enable %cspParam,0
*reset_set_direct
	if %cspParam = 0 mov %Free11,s0_30_b : mov %Free12,s0_0 : goto *csp_set_r
	if %cspParam = 1 mov %Free11,s1_30_b : mov %Free12,s1_0 : goto *csp_set_r
	if %cspParam = 2 mov %Free11,s2_30_b : mov %Free12,s2_0 : goto *csp_set_r
	if %cspParam = 3 mov %Free11,s3_30_b : mov %Free12,s3_0 : goto *csp_set_r
	error "Insane param to csp_set"

*csp_set_r
	_csp2 %Free11,%Free12 
	_csp %Free11,%Free12

*csp_set_loop
	if %Free11 > %Free12 return
		mov %cspParam2,997-%Free11
		div %cspParam2,2
		if ?rain_s[%cspParam2][0] != on add %Free11,2 : goto *csp_set_loop
		;Mark found layer as to be freed on print
		mov ?rain_s[%cspParam2][0],off
		mov %cspParam2,?rain_s[%cspParam2][1]
		mov ?layer_q[%cspParam2],1
		add %Free11,2
	goto *csp_set_loop

*reset_set
	getparam %cspParam
	goto *reset_set_direct

;Actual remove slot fn
*csp_slot
	getparam %cspParam
*sprite_cleanup	;Low level calls that actually reset a sprite
	if %vid_play < 0 && -%vid_play == %cspParam : mov %vid_play,%cspParam
	_csp %cspParam
	_csp %cspParam-1
	_csp2 %cspParam
	_csp2 %cspParam-1
	mov %cspParam2,997-%cspParam
	div %cspParam2,2
	if ?rain_s[%cspParam2][0] != on return
	;Mark found layer as to be freed on print
	mov ?rain_s[%cspParam2][0],off
	mov %cspParam2,?rain_s[%cspParam2][1]
	mov ?layer_q[%cspParam2],1
return

;Print command wrapper that resets our layers
*flush
	getparam %print_efe,%print_delay,$print_dll
	jnskip print 1 ~ jskip
	if $print_dll != "" print %print_efe,%print_delay,$print_dll : jumpf
	if %print_delay != 0 print %print_efe,%print_delay : jumpf
	print %print_efe
~
	if %vid_play > 0 stopvideo : mov %vid_play,0
	for %print_efe = 0 to 7 ;Set rain layers as reusable
		mov ?rain_q[%print_efe],0
		if ?layer_q[%print_efe] == 1 mov ?rain_l[%print_efe],off : mov ?layer_q[%print_efe],off
	next

	mov %print_delay,0
	mov $print_dll,""
return

*flush2
	getparam %print_efe,%print_delay,$print_dll
	jnskip print2 1 ~ jskip
	if $print_dll != "" print2 %print_efe,%print_delay,$print_dll : jumpf
	if %print_delay != 0 print2 %print_efe,%print_delay : jumpf
	print2 %print_efe
~
	if %vid_play > 0 stopvideo : mov %vid_play,0
	for %print_efe = 0 to 7 ;Set rain layers as reusable
		mov ?rain_q[%print_efe],0
		if ?layer_q[%print_efe] == 1 mov ?rain_l[%print_efe],off : mov ?layer_q[%print_efe],off 
	next

	mov %print_delay,0
	mov $print_dll,""
return

*break_glass
	skip_off

    rain_pause s0_11
    rain_pause s0_7
    
    textoff
    wait 167
    
    lsp s0_28,hana1,0,0,150
    flush 7
    
    lsp2 s0_29,cinema_logo_1,500,-50,100,100,0
    set_hotspot s0_29,"480","280"
    flush 5
    
    wait 1000
    
    lbg s0_27,"black"
    lbg s0_28,"black"
    flush 2
    
    E_A
    csp -10
    lsp2 s0_29,cinema_logo_1,500,-50,100,100,0
    set_hotspot s0_29,"480","280"

    skip_on
return

*break_glass2
	skip_off

    rain_pause s0_11
    rain_pause s0_7
    
    textoff
    wait 167
    
    lbg s0_27,"black"
    aspt2 alpha,s0_27,150
    flush 1
    
    lsp s0_28,ware,0,0
    E_A
    seplay 9,1006,71
    flush 1
    
    wait 1000
    
    lsp2 s0_29,cinema_logo_1,500,-50,100,100,0
    set_hotspot s0_29,"480","280"
    flush 5
    
    wait 1000
    
    lbg s0_28,"black"
    flush 2
    
    csp -10
    lsp2 s0_29,cinema_logo_1,500,-50,100,100,0
    set_hotspot s0_29,"480","280"

    skip_on
return

*break_glass3
	skip_off

	rain_pause s0_11
	rain_pause s0_7

	textoff
	wait 167

	lsp s0_28,hana1,0,0,150
	flush 7

	lsp2 s0_29,cinema_logo_2,500,-50,100,100,0
	set_hotspot s0_29,"480","320"
	flush 18,3333,msk_down

	wait 1500

	lbg s0_27,"black"
	lbg s0_28,"black"

	vol_mix_fade 2667
	vol_bgm -1,2667
	flush 10,2000

	csp -10
    lsp2 s0_29,cinema_logo_2,500,-50,100,100,0
    set_hotspot s0_29,"480","320"

	skip_on
return

*break_glass4
	skip_off

	rain_pause s0_11
	rain_pause s0_7

	textoff
	wait 167

	lbg s0_27,"black"
    aspt2 alpha,s0_27,150
    flush 1

    lsp s0_28,ware,0,0
    E_A
    seplay 9,1006,71
    flush 1
    
    wait 1000

	lsp2 s0_29,cinema_logo_2,500,-50,100,100,0
	set_hotspot s0_29,"480","320"
	flush 18,3333,msk_down

	wait 1000

	lbg s0_28,"black"
	flush 10,2000

	csp -10
	lsp2 s0_29,cinema_logo_2,500,-50,100,100,0
    set_hotspot s0_29,"480","320"

	skip_on
return

*display_clock
    getparam %clock_xpos,%clock_ypos,%clock_scale,%start_min,%end_min,%clock_sfx,%clock_sfx2
    
    skip_off

    mov %start_min_hand,-%start_min*6
    mov %start_hour_hand,-%start_min/2
    mov %end_min_hand,-%end_min*6
    mov %end_hour_hand,-%end_min/2

    lsp2 s0_17,clock,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,0
    lsp2 s0_18,clock_m,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,%start_min_hand
    lsp2 s0_19,clock_h,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,%start_hour_hand
    lsp2 s0_20,clock_c,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,0
    
    flush 2
    
    aspt2 rot,s0_18,%end_min_hand,516,4
    aspt2 rot,s0_19,%end_hour_hand,43,4
    
    if %clock_sfx == 1 meplay 5,1051,71
    notif %clock_sfx == 1 meplay 5,1050,71
    
    sptwait2 rot,s0_18
    sptwait2 rot,s0_19
    
    E_M5
    
    if %clock_sfx2 == 1 seplay 3,1052,71 : wait2 23000
    
    wait 100
    csp -10

    skip_on
return

;display_clock for menu jumps
*display_clock2
    getparam %clock_xpos,%clock_ypos,%clock_scale,%start_min,%end_min,%clock_sfx,%clock_sfx2
	
	skip_off

    mov %start_min_hand,-%start_min*6
    mov %start_hour_hand,-%start_min/2
    mov %end_min_hand,-%end_min*6
    mov %end_hour_hand,-%end_min/2

    lsp2 s0_17,clock,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,0
    lsp2 s0_18,clock_m,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,%start_min_hand
    lsp2 s0_19,clock_h,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,%start_hour_hand
    lsp2 s0_20,clock_c,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,0
    
    flush 2
    
    aspt2 rot,s0_18,%end_min_hand,516,4
    aspt2 rot,s0_19,%end_hour_hand,43,4
    
    if %clock_sfx == 1 meplay 5,1051,71
    notif %clock_sfx == 1 meplay 5,1050,71
    
    sptwait2 rot,s0_18
    sptwait2 rot,s0_19
    
    E_M5
    
    if %clock_sfx2 == 1 seplay 3,1052,71 : wait2 23000

    skip_on
return

*display_clock3
    getparam %clock_xpos,%clock_ypos,%clock_scale,%start_min,%end_min,%clock_sfx,%clock_sfx2
	
    mov %start_min_hand,-%start_min*6
    mov %start_hour_hand,-%start_min/2
    mov %end_min_hand,-%end_min*6
    mov %end_hour_hand,-%end_min/2

    lsp2 604,clock,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,0
    lsp2 603,clock_m,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,%start_min_hand
    lsp2 602,clock_h,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,%start_hour_hand
    lsp2 601,clock_c,%clock_xpos,%clock_ypos,%clock_scale,%clock_scale,0
    
return

*gstg
	getparam %gstg_id
	if %gstg_id != 1 jumpf
	if %scenario_Number = 1 mov ?grim[1][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,31
	if %scenario_Number = 3 mov %play_scene,30051
	if %scenario_Number = 4 mov %grim_scene,401
	if %scenario_Number = 5 mov %grim_scene,501
	if %scenario_Number = 6 mov %grim_scene,601
	if %scenario_Number = 7 mov %grim_scene,701
	if %scenario_Number = 8 mov %grim_scene,801
	mov %r_display_grim,1
	;mov %r_menu_data,on
	;mov %data_pagemax,0
	;inc %data_pagemax
	~
	if %gstg_id != 2 jumpf
	if %scenario_Number = 1 mov ?grim[2][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,41
	if %scenario_Number = 3 mov %play_scene,30101
	if %scenario_Number = 4 mov %grim_scene,402
	if %scenario_Number = 5 mov %grim_scene,502
	if %scenario_Number = 6 mov %grim_scene,602
	if %scenario_Number = 7 mov %grim_scene,702
	if %scenario_Number = 8 mov %grim_scene,802
	mov %r_display_grim,2
	~
	if %gstg_id != 3 jumpf
	if %scenario_Number = 1 mov ?grim[3][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,42
	if %scenario_Number = 3 mov %play_scene,30281
	if %scenario_Number = 4 mov %grim_scene,403
	if %scenario_Number = 5 mov %grim_scene,503
	if %scenario_Number = 6 mov %grim_scene,603
	if %scenario_Number = 7 mov %grim_scene,703
	if %scenario_Number = 8 mov %grim_scene,803
	mov %r_display_grim,3
	~
	if %gstg_id != 4 jumpf
	if %scenario_Number = 1 mov ?grim[4][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,101
	if %scenario_Number = 3 mov %play_scene,30282
	if %scenario_Number = 4 mov %grim_scene,404
	if %scenario_Number = 5 mov %grim_scene,504
	if %scenario_Number = 6 mov %grim_scene,604
	if %scenario_Number = 7 mov %grim_scene,704
	if %scenario_Number = 8 mov %grim_scene,804
	mov %r_display_grim,4
	~
	if %gstg_id != 5 jumpf
	if %scenario_Number = 1 mov ?grim[5][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %grim_scene,405
	if %scenario_Number = 5 mov %grim_scene,505
	if %scenario_Number = 6 mov %grim_scene,605
	if %scenario_Number = 7 mov %grim_scene,705
	if %scenario_Number = 8 mov %grim_scene,805
	mov %r_display_grim,5
	~
	if %gstg_id != 6 jumpf
	if %scenario_Number = 1 mov ?grim[6][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %grim_scene,406
	if %scenario_Number = 5 mov %grim_scene,506
	if %scenario_Number = 6 mov %grim_scene,606
	if %scenario_Number = 7 mov %grim_scene,706
	if %scenario_Number = 8 mov %grim_scene,806
	mov %r_display_grim,6
	~
	if %gstg_id != 7 jumpf
	if %scenario_Number = 1 mov ?grim[7][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %grim_scene,407
	if %scenario_Number = 5 mov %grim_scene,507
	if %scenario_Number = 6 mov %grim_scene,607
	if %scenario_Number = 7 mov %grim_scene,707
	if %scenario_Number = 8 mov %grim_scene,807
	mov %r_display_grim,7
	~
	if %gstg_id != 8 jumpf
	if %scenario_Number = 1 mov ?grim[8][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %grim_scene,408
	if %scenario_Number = 5 mov %grim_scene,508
	if %scenario_Number = 6 mov %grim_scene,608
	if %scenario_Number = 7 mov %grim_scene,708
	if %scenario_Number = 8 mov %grim_scene,808
	mov %r_display_grim,8
	~
	if %gstg_id != 9 jumpf
	if %scenario_Number = 1 mov ?grim[9][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %grim_scene,409
	if %scenario_Number = 5 mov %grim_scene,509
	if %scenario_Number = 6 mov %grim_scene,609
	if %scenario_Number = 7 mov %grim_scene,709
	if %scenario_Number = 8 mov %grim_scene,809
	mov %r_display_grim,9
	~
	if %gstg_id != 10 jumpf
	if %scenario_Number = 1 mov ?grim[10][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %play_scene,0
	if %scenario_Number = 5 mov %grim_scene,510
	if %scenario_Number = 6 mov %grim_scene,610
	if %scenario_Number = 7 mov %grim_scene,710
	if %scenario_Number = 8 mov %grim_scene,810
	mov %r_display_grim,10
	~
	if %gstg_id != 11 jumpf
	if %scenario_Number = 1 mov ?grim[11][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %play_scene,0
	if %scenario_Number = 5 mov %grim_scene,511
	if %scenario_Number = 6 mov %grim_scene,611
	if %scenario_Number = 7 mov %grim_scene,711
	if %scenario_Number = 8 mov %grim_scene,811
	mov %r_display_grim,11
	~
	if %gstg_id != 12 jumpf
	if %scenario_Number = 1 mov ?grim[12][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %play_scene,0
	if %scenario_Number = 5 mov %grim_scene,512
	if %scenario_Number = 6 mov %grim_scene,612
	if %scenario_Number = 7 mov %grim_scene,712
	if %scenario_Number = 8 mov %grim_scene,812
	mov %r_display_grim,12
	~
	if %gstg_id != 13 jumpf
	if %scenario_Number = 1 mov ?grim[13][grim_flg],1
	if %scenario_Number = 2 mov %play_scene,0
	if %scenario_Number = 3 mov %play_scene,0
	if %scenario_Number = 4 mov %play_scene,0
	if %scenario_Number = 5 mov %grim_scene,513
	if %scenario_Number = 6 mov %grim_scene,613
	if %scenario_Number = 7 mov %grim_scene,713
	if %scenario_Number = 8 mov %grim_scene,813
	mov %r_display_grim,13
	~
return

*gstt
	getparam %gstt_id
	if %gstt_id != 0 jumpf
	mov ?tips[1][tips_flg],1
	mov %r_menu_data,on
	mov %data_pagemax,0
	inc %data_pagemax
	~
	if %gstt_id != 1 jumpf
	mov ?tips[2][tips_flg],1
	~
	if %gstt_id != 2 jumpf
	mov ?tips[3][tips_flg],1
	~
	if %gstt_id != 3 jumpf
	mov ?tips[4][tips_flg],1
	~
	if %gstt_id != 4 jumpf
	;do nothing
	~
	if %gstt_id != 5 jumpf
	mov %r_display_tips,2
	~
	if %gstt_id != 6 jumpf
	mov %r_display_tips,3
	~
	if %gstt_id != 7 jumpf
	mov %r_display_tips,4
	~
	if %gstt_id != 8 jumpf
	mov %r_display_tips,5
	~
	if %gstt_id != 9 jumpf
	mov %r_display_tips,2
	~
	if %gstt_id != 10 jumpf
	mov %r_display_tips,1
	~
	if %gstt_id != 11 jumpf
	for %tmp = 0 to 5 : mov ?tips[%tmp][tips_flg],1 : next
	for %tmp = 0 to 10 : mov ?grim[%tmp][grim_flg],1 : next
	mov ?grim[11][grim_flg],0
	~
	if %gstt_id != 12 jumpf
	if %UMINEKOEND < 12 mov %UMINEKOEND,12 : mov %UMINEKOEND_FLG,12
	~
	if %gstt_id != 13 jumpf
	mov %grim_scene,310
	~
	if %gstt_id != 14 jumpf
	mov %r_u_tea_flg,1
	mov %r_for_title,0
	for %tmp = 0 to 5 : mov ?tips[%tmp][tips_flg],1 : next
	for %tmp = 0 to 10 : mov ?grim[%tmp][grim_flg],1 : next
	~
	if %gstt_id != 15 jumpf
	mov %r_u_tea_flg,1
	mov %r_for_title,0
	~
	if %gstt_id != 16 jumpf
	mov %grim_scene,311
	~
return

;mainly unlocks characters in r_menu
*gstc
	getparam %gstc_id

	if %CHIRU_MODE = 1 goto *gstc_chiru

	itoa $gstc_id,%gstc_id
	mov $gstc_id, "*gstc"+$gstc_id
	goto $gstc_id

	*gstc0
	mov ?r[but][condition],1
	return
	*gstc1
	mov ?r[geo][condition],1
	return
	*gstc2
	mov ?r[hid][condition],1
	return
	*gstc3
	mov ?r[eva][condition],1
	return
	*gstc4
	mov ?r[kir][condition],1
	return
	*gstc5
	mov ?r[rud][condition],1
	return
	*gstc6
	mov ?r[mar][condition],1
	return
	*gstc7
	mov ?r[ros][condition],1
	return
	*gstc8
	mov ?r[jes][condition],1
	return
	*gstc9
	mov ?r[kum][condition],1
	return
	*gstc10
	mov ?r[goh][condition],1
	return
	*gstc11
	mov ?r[kan][condition],1
	return
	*gstc12
	mov ?r[sha][condition],1
	return
	*gstc13
	mov ?r[gen][condition],1
	return
	*gstc14
	mov ?r[nat][condition],1
	return
	*gstc15
	mov ?r[kin][condition],1
	return
	*gstc16
	mov ?r[kla][condition],1
	return
	*gstc17
	mov ?r[nan][condition],1
	return
	*gstc18
	mov ?r[kla][condition],2
	mov ?r[rud][condition],2
	mov ?r[kir][condition],2
	mov ?r[ros][condition],2
	mov ?r[goh][condition],2
	return
	*gstc19
	mov ?r[sha][condition],2
	return
	*gstc20
	mov ?r[kin][condition],2
	return
	*gstc21
	mov ?r[eva][condition],2
	return
	*gstc22
	mov ?r[hid][condition],2
	return
	*gstc23
	mov ?r[kin][condition],3
	return
	*gstc24
	mov ?r[kan][condition],2
	return
	*gstc25
	mov ?r[gen][condition],2
	mov ?r[kum][condition],2
	mov ?r[nan][condition],2
	return
	*gstc26
	mov ?r[nat][condition],2
	return
	*gstc27
	mov %play_scene,10
	mov %r_display_cha,geo
	mov %r_display,0
	return
	*gstc28
	mov %play_scene,20
	return
	*gstc29
	mov %play_scene,30
	return
	*gstc30
	mov %play_scene,30
	return
	*gstc31
	mov %play_scene,31 ;accounts for grim 1
	return
	*gstc32
	mov %play_scene,40
	mov %r_display_cha,bea
	mov %r_display,0
	return
	*gstc33
	mov %play_scene,40
	return
	*gstc34
	mov %play_scene,40
	return
	*gstc35
	mov %play_scene,40
	return
	*gstc36
	mov %play_scene,41 ;accounts for grim 2
	return
	*gstc37
	mov %play_scene,45
	return
	*gstc38
	mov %play_scene,41 ;accounts for grim 2
	return
	*gstc39
	mov %play_scene,42 ;accounts for grim 3
	return
	*gstc40
	mov %play_scene,46
	return
	*gstc41
	mov %play_scene,50
	mov %r_display_cha,kan
	mov %r_display,0
	return
	*gstc42
	mov %play_scene,60
	return
	*gstc43
	mov %play_scene,60
	return
	*gstc44
	mov %play_scene,60
	return
	*gstc45
	mov %play_scene,60
	return
	*gstc46
	mov %play_scene,60
	return
	*gstc47
	mov %play_scene,60
	return
	*gstc48
	mov %play_scene,60
	return
	*gstc49
	mov %play_scene,60
	return
	*gstc50
	mov %play_scene,60
	return
	*gstc51
	mov %play_scene,60
	return
	*gstc52
	mov %play_scene,60
	return
	*gstc53
	mov %play_scene,60
	return
	*gstc54
	mov %play_scene,60
	return
	*gstc55
	mov %play_scene,60
	return
	*gstc56
	mov %play_scene,60
	return
	*gstc57
	mov %play_scene,60
	return
	*gstc58
	mov %play_scene,60
	return
	*gstc59
	mov %play_scene,70
	return
	*gstc60
	mov %play_scene,70
	return
	*gstc61
	mov %play_scene,70
	return
	*gstc62
	mov %play_scene,70
	return
	*gstc63
	mov %play_scene,70
	return
	*gstc64
	mov %play_scene,70
	return
	*gstc65
	mov %play_scene,70
	return
	*gstc66
	mov %play_scene,70
	return
	*gstc67
	mov %play_scene,70
	return
	*gstc68
	mov %play_scene,70
	return
	*gstc69
	mov %play_scene,70
	return
	*gstc70
	mov %play_scene,71
	return
	*gstc71
	mov %play_scene,71
	return
	*gstc72
	mov %play_scene,71
	return
	*gstc73
	mov %play_scene,71
	return
	*gstc74
	mov %play_scene,71
	return
	*gstc75
	mov %play_scene,71
	return
	*gstc76
	mov %play_scene,71
	return
	*gstc77
	mov %play_scene,71
	return
	*gstc78
	mov %play_scene,80
	mov %r_display,0
	return
	*gstc79
	mov %play_scene,80
	return
	*gstc80
	mov %play_scene,80
	return
	*gstc81
	mov %play_scene,90
	mov %r_display,1
	return
	*gstc82
	mov %play_scene,90
	return
	*gstc83
	mov %play_scene,100
	mov %r_display,1
	return
	*gstc84
	mov %play_scene,101 ;accounts for grim 4
	return
	*gstc85
	mov %play_scene,101
	return
	*gstc86
	mov %play_scene,101
	return
	*gstc87
	mov %play_scene,110
	mov %r_display,0
	return
	*gstc88
	mov %play_scene,120
	mov %r_display,0
	return
	*gstc89
	mov %play_scene,120
	return
	*gstc90
	mov %play_scene,120
	return
	*gstc91
	mov %play_scene,120
	return
	*gstc92
	mov %play_scene,120
	return
	*gstc93
	mov %play_scene,120
	return
	*gstc94
	mov %play_scene,120
	return
	*gstc95
	mov %play_scene,120
	return
	*gstc96
	mov %play_scene,120
	return
	*gstc97
	mov %play_scene,120
	return
	*gstc98
	mov %play_scene,120
	return
	*gstc99
	mov %play_scene,120
	return
	*gstc100
	mov %play_scene,120
	return
	*gstc101
	mov %play_scene,120
	return
	*gstc102
	mov %play_scene,130
	return
	*gstc103
	mov %play_scene,130
	return
	*gstc104
	mov %play_scene,130
	return
	*gstc105
	mov %play_scene,140
	mov %r_display,0
	return
	*gstc106
	mov %play_scene,140
	return
	*gstc107
	mov %play_scene,150
	mov %r_display,1
	return
	*gstc108
	mov %play_scene,150
	return
	*gstc109
	mov %play_scene,150
	return
	*gstc110
	mov %play_scene,160
	mov %r_display,0
	return
	*gstc111
	mov %play_scene,170
	mov %r_display,0
	return
	*gstc112
	mov %play_scene,180
	mov %r_display,1
	return
	*gstc113
	mov %play_scene,180
	return
	*gstc114
	mov %play_scene,180
	return
	*gstc115
	mov %play_scene,30010
	mov %grim_scene,300
	return
	*gstc116
	mov %play_scene,30020
	mov %r_display_cha_ma,ma3_bea
	return
	*gstc117
	mov %play_scene,30030
	mov %grim_scene,300
	return
	*gstc118
	mov %play_scene,30032
	mov %grim_scene,302
	return
	*gstc119
	mov %play_scene,30022
	return
	*gstc120
	mov %play_scene,30032
	return
	*gstc121
	mov %play_scene,30040
	return
	*gstc122
	mov %play_scene,30035
	mov %r_display_cha_ma,ma3_ron
	mov %r_display,0
	return
	*gstc123
	mov %play_scene,30050
	mov %r_display_cha_ma,ma3_ron
	return
	*gstc124
	mov %play_scene,30060
	return
	*gstc125
	mov %play_scene,30060
	mov %grim_scene,303
	return
	*gstc126
	mov %play_scene,30050
	mov %grim_scene,303
	return
	*gstc127
	mov %play_scene,30060
	return
	*gstc128
	mov %play_scene,30060
	mov %grim_scene,303
	return
	*gstc129
	mov %play_scene,30050
	return
	*gstc130
	mov %play_scene,30060
	return
	*gstc131
	mov %play_scene,30050
	return
	*gstc132
	mov %play_scene,30060
	return
	*gstc133
	mov %play_scene,30050
	return
	*gstc134
	mov %play_scene,30060
	return
	*gstc135
	mov %play_scene,30060
	mov %grim_scene,303
	return
	*gstc136
	mov %play_scene,30050
	return
	*gstc137
	mov %play_scene,30060
	return
	*gstc138
	mov %play_scene,30060
	mov %grim_scene,303
	return
	*gstc139
	mov %play_scene,30050
	return
	*gstc140
	mov %play_scene,30060
	return
	*gstc141
	mov %play_scene,30051 ;accounts for grim 1
	return
	*gstc142
	mov %play_scene,30061 ;accounts for grim 1
	mov %grim_scene,304
	return
	*gstc143
	mov %play_scene,30051 ;accounts for grim 1
	return
	*gstc144
	mov %play_scene,30070
	mov %r_display_cha_ma,ma3_wal
	mov %r_display,0
	return
	*gstc145
	mov %play_scene,30080
	mov %grim_scene,305
	return
	*gstc146
	mov %play_scene,30090
	mov %r_display,0
	return
	*gstc147
	mov %play_scene,30100
	mov %r_display,1
	return
	*gstc148
	mov %play_scene,30110
	return
	*gstc149
	mov %play_scene,30100
	mov %grim_scene,305
	return
	*gstc150
	mov %play_scene,30110
	return
	*gstc151
	mov %play_scene,30100
	return
	*gstc152
	mov %play_scene,30101 ;accounts for grim 2
	mov %grim_scene,306
	return
	*gstc153
	mov %play_scene,30110
	return
	*gstc154
	mov %play_scene,30120
	mov %r_display_cha_ma,ma3_ev2
	mov %r_display,0
	return
	*gstc155
	mov %play_scene,30130
	return
	*gstc156
	mov %play_scene,30140
	return
	*gstc157
	mov %play_scene,30150
	return
	*gstc158
	mov %play_scene,30160
	mov %grim_scene,306
	return
	*gstc159
	mov %play_scene,30160
	return
	*gstc160
	mov %play_scene,30150
	return
	*gstc161
	mov %play_scene,30160
	return
	*gstc162
	mov %play_scene,30150
	return
	*gstc163
	mov %play_scene,30160
	mov %grim_scene,306
	return
	*gstc164
	mov %play_scene,30170
	mov %r_display,0
	return
	*gstc165
	mov %play_scene,30180
	return
	*gstc166
	mov %play_scene,30180
	return
	*gstc167
	mov %play_scene,30180
	return
	*gstc168
	mov %play_scene,30170
	return
	*gstc169
	mov %play_scene,30180
	return
	*gstc170
	mov %play_scene,30180
	mov %grim_scene,306
	return
	*gstc171
	mov %play_scene,30180
	return
	*gstc172
	mov %play_scene,30170
	return
	*gstc173
	mov %play_scene,30170
	return
	*gstc174
	mov %play_scene,30190
	mov %r_display_cha_ma,ma3_s
	mov %r_display,0
	return
	*gstc175
	mov %play_scene,30190
	return
	*gstc176
	mov %play_scene,30200
	return
	*gstc177
	mov %play_scene,30200
	mov %grim_scene,307
	return
	*gstc178
	mov %play_scene,30190
	return
	*gstc179
	mov %play_scene,30210
	mov %r_display,0
	return
	*gstc180
	mov %play_scene,30220
	return
	*gstc181
	mov %play_scene,30210
	return
	*gstc182
	mov %play_scene,30220
	return
	*gstc183
	mov %play_scene,30210
	return
	*gstc184
	mov %play_scene,30220
	mov %grim_scene,307
	return
	*gstc185
	mov %play_scene,30220
	return
	*gstc186
	mov %play_scene,30210
	return
	*gstc187
	mov %play_scene,30220
	return
	*gstc188
	mov %play_scene,30220
	return
	*gstc189
	mov %play_scene,30210
	return
	*gstc190
	mov %play_scene,30220
	return
	*gstc191
	mov %play_scene,30220
	mov %grim_scene,307
	return
	*gstc192
	mov %play_scene,30230
	mov %r_display,0
	return
	*gstc193
	mov %play_scene,30230
	return
	*gstc194
	mov %play_scene,30240
	mov %r_display,0
	return
	*gstc195
	mov %play_scene,30240
	return
	*gstc196
	mov %play_scene,30250
	mov %r_display,0
	return
	*gstc197
	mov %play_scene,30250
	return
	*gstc198
	mov %play_scene,30260
	return
	*gstc199
	mov %play_scene,30260
	return
	*gstc200
	mov %play_scene,30250
	return
	*gstc201
	mov %play_scene,30270
	mov %r_display,0
	return
	*gstc202
	mov %play_scene,30280
	mov %grim_scene,307
	mov %r_display_cha,bea
	mov %r_display,0
	return
	*gstc203
	mov %play_scene,40000 : mov %r_display_side,0 : mov %r_display_cha,but
	mov %grim_scene,400
	return
	*gstc204
	mov %play_scene,40001 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_enj
	return
	*gstc205
	mov %play_scene,40005 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_bea
	mov %grim_scene,400
	return
	*gstc206
	mov %play_scene,40005 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_enj
	return
	*gstc207
	mov %play_scene,40005 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc208
	mov %play_scene,40005 : mov %r_display_side,0
	mov %grim_scene,401
	return
	*gstc209
	mov %play_scene,40005 : mov %r_display_side,0 : mov %r_display_cha,mar
	return
	*gstc210
	mov %play_scene,40030 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,402
	return
	*gstc211
	mov %play_scene,40040 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_oko
	return
	*gstc212
	mov %play_scene,40050 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_kas
	return
	*gstc213
	mov %play_scene,40060 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_ama
	return
	*gstc214
	mov %play_scene,40060
	mov %grim_scene,402
	return
	*gstc215
	mov %play_scene,40070 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_ber
	mov %grim_scene,402
	return
	*gstc216
	mov %play_scene,40080 : mov %r_display_side,0 : mov %r_display_cha,0
	mov %grim_scene,403
	return
	*gstc217
	mov %play_scene,40080 : mov %r_display_side,1
	return
	*gstc218
	mov %play_scene,40080 : mov %r_display_side,0
	return
	*gstc219
	mov %play_scene,40090 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_kin
	return
	*gstc220
	mov %play_scene,40090 : mov %r_display_side,0
	mov %grim_scene,403
	return
	*gstc221
	mov %play_scene,40090 : mov %r_display_side,1
	return
	*gstc222
	mov %play_scene,40090 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_enj
	return
	*gstc223
	mov %play_scene,40090 : mov %r_display_side,0 : mov %r_display_cha,mar
	return
	*gstc224
	mov %play_scene,40090 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_mar
	return
	*gstc225
	mov %play_scene,40090 : mov %r_display_side,0 : mov %r_display_cha,mar
	return
	*gstc226
	mov %play_scene,40090 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_mar
	return
	*gstc227
	mov %play_scene,40090 : mov %r_display_side,0 : mov %r_display_cha,ros
	return
	*gstc228
	mov %play_scene,40090 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_mar
	return
	*gstc229
	mov %play_scene,40090 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_mar
	return
	*gstc230
	mov %play_scene,40090 : mov %r_display_side,1
	return
	*gstc231
	mov %play_scene,40100 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_sak
	return
	*gstc232
	mov %play_scene,40110 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_mar
	return
	*gstc233
	mov %play_scene,40110 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,404
	return
	*gstc234
	mov %play_scene,40120 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_pro
	return
	*gstc235
	mov %play_scene,40130 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_mar
	return
	*gstc236
	mov %play_scene,40140 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_rg
	return
	*gstc237
	mov %play_scene,40140 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,404
	return
	*gstc238
	mov %play_scene,40140 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_enj
	return
	*gstc239
	mov %play_scene,40150 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_enj
	return
	*gstc240
	mov %play_scene,40160 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,404
	return
	*gstc241
	mov %play_scene,40160 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,405
	return
	*gstc242
	mov %play_scene,40160 : mov %r_display_side,0 : mov %r_display_cha,mar
	mov %grim_scene,405
	return
	*gstc243
	mov %play_scene,40160 : mov %r_display_side,0 : mov %r_display_cha,mar
	mov %grim_scene,406
	return
	*gstc244
	mov %play_scene,40170 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_sak
	return
	*gstc245
	mov %play_scene,40170 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,406
	return
	*gstc246
	mov %play_scene,40175 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_sak
	return
	*gstc247
	mov %play_scene,40175 : mov %r_display_side,0
	mov %grim_scene,406
	return
	*gstc248
	mov %play_scene,40175 : mov %r_display_side,1
	return
	*gstc249
	mov %play_scene,40175 : mov %r_display_side,0
	return
	*gstc250
	mov %play_scene,40175 : mov %r_display_side,0 : mov %r_display_cha,kin
	return
	*gstc251
	mov %play_scene,40175 : mov %r_display_side,0
	return
	*gstc252
	mov %play_scene,40180 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_s
	return
	*gstc253
	mov %play_scene,40190
	return
	*gstc254
	mov %play_scene,40200 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_ron
	return
	*gstc255
	mov %play_scene,40210 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_wal
	return
	*gstc256
	mov %play_scene,40220 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_gap
	return
	*gstc257
	mov %play_scene,40220 : mov %r_display_side,1
	return
	*gstc258
	mov %play_scene,40220 : mov %r_display_side,0 : mov %r_display_cha,0
	mov %grim_scene,406
	return
	*gstc259
	mov %play_scene,40220 : mov %r_display_side,0
	return
	*gstc260
	mov %play_scene,40220 : mov %r_display_side,0
	return
	*gstc261
	mov %play_scene,40220 : mov %r_display_side,0
	return
	*gstc262
	mov %play_scene,40220 : mov %r_display_side,0
	return
	*gstc263
	mov %play_scene,40220 : mov %r_display_side,0
	return
	*gstc264
	mov %play_scene,40220 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,407
	return
	*gstc265
	mov %play_scene,40230 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_mas
	return
	*gstc266
	mov %play_scene,40230 : mov %r_display_side,2
	return
	*gstc267
	mov %play_scene,40240 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_sab
	return
	*gstc268
	mov %play_scene,40250 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_kwa
	return
	*gstc269
	mov %play_scene,40250 : mov %r_display_side,0
	mov %grim_scene,407
	return
	*gstc270
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	mov %grim_scene,407
	return
	*gstc271
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,geo
	return
	*gstc272
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	return
	*gstc273
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,geo
	return
	*gstc274
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	return
	*gstc275
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,geo
	return
	*gstc276
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	return
	*gstc277
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,geo
	return
	*gstc278
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	return
	*gstc279
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,kan
	return
	*gstc280
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,geo
	return
	*gstc281
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	return
	*gstc282
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,kan
	return
	*gstc283
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,kla
	return
	*gstc284
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,jes
	return
	*gstc285
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,geo
	return
	*gstc286
	mov %play_scene,40250 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_gap
	return
	*gstc287
	mov %play_scene,40250 : mov %r_display_side,0 : mov %r_display_cha,but
	mov %grim_scene,411
	return
	*gstc288
	mov %play_scene,40260 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc289
	mov %play_scene,40260 : mov %r_display_side,1 : mov %r_display_cha_ma,0
	return
	*gstc290
	mov %play_scene,40270 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc291
	mov %play_scene,40280 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_bea
	return
	*gstc292
	mov %play_scene,40280 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	mov %grim_scene,411
	return
	*gstc293
	mov %play_scene,40290 : mov %r_display_side,2 : mov %r_display_cha_enj,enj_enj
	return
	*gstc294
	mov %play_scene,40300 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_enj
	mov %grim_scene,411
	return
	*gstc295
	mov %play_scene,40310 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_sak
	return
	*gstc296
	mov %play_scene,40320 : mov %r_display_side,1 : mov %r_display_cha_ma,0
	return
	*gstc297
	mov %play_scene,40330 : mov %r_display_side,1 : mov %r_display_cha_ma,0
	return
	*gstc298
	mov %play_scene,40335 : mov %r_display_side,1
	return
	*gstc299
	for %tmp = 1 to 18 : mov ?r[%tmp][condition],2 : next
	mov ?r[kin][condition],3
	return
	*gstc300
	mov %r_tea_bea,1
	mov ?r[bea][condition],1
	return
	*gstc301
	mov %play_scene,1010
	return
	*gstc302
	mov %play_scene,1020
	return
	*gstc303
	mov %play_scene,31010
	return
	*gstc304
	mov %play_scene,31020
	mov %r_display_cha_ma,ma3_lam
	return
	*gstc305
	mov %play_scene,40340 : mov %r_display_side,0 : mov %r_display_cha,but
	mov %grim_scene,500 ;before 411
	return
	*gstc306
	mov %play_scene,40350 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc307
	mov %play_scene,40360 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc308
	mov %play_scene,40370 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc309
	mov %play_scene,40380 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc310
	mov %play_scene,40390 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc311
	mov %play_scene,40400 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc312
	mov %play_scene,40410 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc313
	mov %play_scene,40420 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc314
	mov %play_scene,40430 : mov %r_display_side,0 : mov %r_display_cha,0
	return
	*gstc315
	mov %play_scene,40440 : mov %r_display_side,0 : mov %r_display_cha,bea
	return
	*gstc316
	mov %r_display_cha,bea
	mov %r_display,0	
	return
	*gstc317
	mov %r_ber_flg,1
	return
	*gstc318
	mov %r_display_cha,bea
	mov %r_display,0
	mov %play_scene,2010
	return
	*gstc319
	mov %play_scene,2010
	return
	*gstc320
	mov %play_scene,2020
	return
	*gstc321
	mov %play_scene,32010
	return
	*gstc322
	mov %play_scene,32020
	mov %r_display_cha,enj
	mov %r_display,0
	return
	*gstc323
	mov %play_scene,32030
	return
	*gstc324
	mov %play_scene,32040
	mov %r_display_cha_ma,ma3_enj
	mov %r_display,0 
	return
	*gstc325
	mov %play_scene,40450 : mov %r_display_side,1 : mov %r_display_cha_ma,ma4_lam
	mov %grim_scene,500 ;before 411
return

*gstc_chiru

	itoa $gstc_id,%gstc_id
	mov $gstc_id, "*gstcc"+$gstc_id
	goto $gstc_id

	;umi5
	*gstcc0
	mov %r_display_side,0
	mov %play_scene,50000
	return
	*gstcc1
	mov %r_display_side,0
	mov %play_scene,50005
	return
	*gstcc2
	mov %play_scene,50010
	mov %r_display_side,0
	return
	*gstcc3
	mov %play_scene,50010
	return
	*gstcc4
	mov %play_scene,50010
	return
	*gstcc5
	mov %play_scene,50010
	return
	*gstcc6
	mov %play_scene,50010
	return
	*gstcc7
	mov %play_scene,50015
	mov %r_display_side,0
	mov %r_display_cha,eri
	return
	*gstcc8
	mov %play_scene,50020
	return
	*gstcc9
	mov %play_scene,50020
	mov %grim_scene,501
	return
	*gstcc10
	mov %play_scene,50020
	mov %grim_scene,501
	return
	*gstcc11
	mov %play_scene,50020
	mov %grim_scene,501
	return
	*gstcc12
	mov %play_scene,50020
	mov %grim_scene,501
	return
	*gstcc13
	mov %play_scene,50020
	mov %grim_scene,501
	return
	*gstcc14
	mov %play_scene,50030
	mov %r_display_side,0
	mov %r_display_cha,geo
	mov %grim_scene,501
	return
	*gstcc15
	mov %play_scene,50031
	mov %r_display_side,0
	mov %r_display_cha,gen
	mov %grim_scene,501
	return
	*gstcc16
	mov %play_scene,50032
	mov %r_display_side,0
	mov %r_display_cha,kla
	mov %grim_scene,501
	return
	*gstcc17
	mov %play_scene,50032
	mov %grim_scene,501
	return
	*gstcc18
	mov %play_scene,50035
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_dla
	mov %grim_scene,503
	return
	*gstcc19
	mov %play_scene,50036
	mov %r_display_side,1
	mov %grim_scene,503
	return
	*gstcc20
	mov %play_scene,50040
	mov %r_display_side,1
	mov %grim_scene,503
	return
	*gstcc21
	mov %play_scene,50040
	mov %grim_scene,503
	return
	*gstcc22
	mov %play_scene,50040
	mov %grim_scene,503
	return
	*gstcc23
	mov %play_scene,50050
	mov %r_display_side,0
	mov %r_display_cha,hid
	mov %grim_scene,503
	return
	*gstcc24
	mov %play_scene,50050
	mov %grim_scene,503
	return
	*gstcc25
	mov %play_scene,50055
	mov %r_display_side,0
	mov %r_display_cha,KLA
	mov %grim_scene,503
	return
	*gstcc26
	mov %play_scene,50056
	mov %grim_scene,503
	return
	*gstcc27
	mov %play_scene,50056
	mov %grim_scene,503
	return
	
	;umi6
	*gstcc28
	mov %play_scene,60000
	mov %r_display_side,0
	return
	*gstcc29
	mov %play_scene,60000
	return
	*gstcc30
	;mov %side_flg,1
	mov %play_scene,60010
	mov %r_display_side,2
	mov %r_display_cha_enj,ma5_enj
	return
	*gstcc31
	mov %play_scene,60011
	mov %r_display_side,2
	mov %r_display_cha_enj,ma5_AMA
	return
	*gstcc32
	mov %play_scene,60012
	mov %r_display_side,2
	mov %r_display_cha_enj,ma5_FEA
	return
	*gstcc33
	mov %play_scene,60013
	mov %r_display_side,2
	mov %r_display_cha_enj,ma5_FEA
	return
	*gstcc34
	mov %play_scene,60013
	mov %grim_scene,601
	return
	*gstcc35
	mov %play_scene,60020
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_bea
	mov %grim_scene,601
	return
	*gstcc36
	mov %play_scene,60020
	mov %grim_scene,601
	return
	*gstcc37
	mov %play_scene,60030
	mov %grim_scene,601
	return
	*gstcc38
	mov %play_scene,60030
	mov %r_display_side,0
	mov %r_display_cha,eri
	mov %grim_scene,601
	return
	*gstcc39
	mov %play_scene,60031
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_BE2
	mov %grim_scene,602
	return
	*gstcc40
	mov %play_scene,60031
	mov %grim_scene,602
	return
	*gstcc41
	mov %play_scene,60031
	mov %grim_scene,602
	return
	*gstcc42
	mov %play_scene,60031
	mov %grim_scene,602
	return
	*gstcc43
	mov %play_scene,60031
	mov %grim_scene,602
	return
	*gstcc44
	mov %play_scene,60040
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_zf
	mov %grim_scene,602
	return
	*gstcc45
	mov %play_scene,60040
	mov %grim_scene,602
	return
	*gstcc46
	mov %play_scene,60040
	mov %grim_scene,602
	return
	*gstcc47
	mov %play_scene,60040
	mov %grim_scene,602
	return
	*gstcc48
	mov %play_scene,60040
	mov %grim_scene,602
	return
	*gstcc49
	;mov %side_flg,1
	mov %play_scene,60090
	mov %r_display_side,0
	mov %r_display_cha,NAT
	mov %grim_scene,602
	return
	*gstcc50
	mov %play_scene,60090
	mov %grim_scene,602
	return
	*gstcc51
	mov %play_scene,60090
	mov %grim_scene,602
	return
	*gstcc52
	mov %play_scene,60090
	mov %grim_scene,602
	return
	*gstcc53
	mov %play_scene,60100
	mov %r_display_side,0
	mov %r_display_cha,NAT
	mov %grim_scene,602
	return
	*gstcc54
	mov %play_scene,60100
	mov %grim_scene,602
	return
	*gstcc55
	mov %play_scene,60100
	mov %grim_scene,602
	return
	*gstcc56
	mov %play_scene,60100
	mov %grim_scene,602
	return
	
	;umi7
	*gstcc57
	mov %play_scene,70000
	mov %r_display_side,1
	return
	*gstcc58
	mov %play_scene,70010
	mov %r_display_side,1
	return
	*gstcc59
	mov %play_scene,70011
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_WIL
	return
	*gstcc60
	mov %play_scene,70011
	return
	*gstcc61
	mov %play_scene,70020
	mov %r_display_side,0
	mov %r_display_cha,RIO
	return
	*gstcc62
	mov %play_scene,70030
	mov %r_display_side,0
	return
	*gstcc63
	mov %play_scene,70030
	return
	*gstcc64
	mov %play_scene,70030
	return
	*gstcc65
	mov %play_scene,70030
	return
	*gstcc66
	mov %play_scene,70030
	return
	*gstcc67
	mov %play_scene,70030
	return
	*gstcc68
	mov %play_scene,70030
	return
	*gstcc69
	mov %play_scene,70040
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_CUR
	return
	*gstcc70
	mov %play_scene,70040
	return
	*gstcc71
	mov %play_scene,70040
	return
	*gstcc72
	mov %play_scene,70040
	return
	*gstcc73
	mov %play_scene,70040
	return
	*gstcc74
	mov %play_scene,70040
	return
	*gstcc75
	mov %play_scene,70040
	mov %grim_scene,701
	return
	*gstcc76
	mov %play_scene,70040
	mov %grim_scene,701
	return
	*gstcc77
	mov %play_scene,70040
	mov %grim_scene,701
	return
	*gstcc78
	mov %play_scene,70040
	mov %grim_scene,701
	return
	
	;umi8
	;*gstcc79
	;mov %play_scene,80000
	;mov %r_display_side,1
	;mov %r_display_cha_ma,ma5_but
	;return
	
	*gstcc79
	mov %play_scene,80010
	mov %r_display_side,0
	mov %r_display_cha,BUT
	return
	*gstcc80
	mov %play_scene,80011
	mov %r_display_side,0
	mov %r_display_cha,en2
	return
	*gstcc81
	mov %play_scene,80011
	mov %r_display_side,0
	return
	*gstcc82
	mov %play_scene,80020 
	mov %r_display_side,0
	mov %r_display_cha,bea
	return
	*gstcc83
	mov %play_scene,80020
	mov %r_display_side,0
	mov %grim_scene,801
	return
	*gstcc84
	mov %play_scene,80020
	mov %r_display_side,0
	mov %grim_scene,801
	return
	*gstcc85
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	;mov %ivent_coins,0
	mov %grim_scene,801
	return
	*gstcc86
	;mov %quiz_pass_flg,1
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	;mov %ivent_coins,0
	mov %grim_scene,801
	return
	*gstcc87
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	return
	*gstcc88
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	;mov %quiz_num,9
	;mov %ivent_coins,0
	return
	*gstcc89
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc90
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc91
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc92
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc93
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc94
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc95
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc96
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc97
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	;mov %ivent_coins,0
	return
	*gstcc98
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc99
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc100
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc101
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc102
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc103
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc104
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc105
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc106
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	;mov %ivent_coins,0
	mov %grim_scene,802
	return
	*gstcc107
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc108
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc109
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc110
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc111
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc112
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc113
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc114
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc115
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc116
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc117
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc118
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc119
	mov %play_scene,80020
	mov %r_display_side,0
	mov %r_display_cha,en2
	mov %grim_scene,802
	return
	*gstcc120
	mov %play_scene,80020
	mov %r_display_side,0
	mov %grim_scene,802
	return
	*gstcc121
	mov %play_scene,80030
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_bb
	mov %grim_scene,802
	return
	*gstcc122
	mov %play_scene,80040
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_rg
	mov %grim_scene,802
	return
	*gstcc123
	mov %play_scene,80050
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_s00
	mov %grim_scene,802
	return
	*gstcc124
	mov %play_scene,80060
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_ZEP
	mov %grim_scene,802
	return
	*gstcc125
	mov %play_scene,80070
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_dla
	mov %grim_scene,802
	return
	*gstcc126
	mov %play_scene,80080
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_lam
	mov %grim_scene,802
	return
	*gstcc127
	mov %play_scene,80090
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_wr
	mov %grim_scene,802
	return
	*gstcc128
	mov %play_scene,80100
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_ber
	mov %grim_scene,802
	return
	*gstcc129
	mov %bern_hints_taken,0
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc130
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc131
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc132
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc133
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc134
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	
	
	*gstcc135
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc136
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc137
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc138
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc139
	mov %play_scene,80110
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc140
	if %play_scene = 80110 mov %play_scene,80301
	if %bern_hints_taken < 1 mov %bern_hints_taken,1
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc141
	if %play_scene = 80301 mov %play_scene,80302
	if %bern_hints_taken < 2 mov %bern_hints_taken,2
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc142
	if %play_scene = 80302 mov %play_scene,80303
	if %bern_hints_taken < 3 mov %bern_hints_taken,3
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc143
	if %play_scene = 80303 mov %play_scene,80304
	if %bern_hints_taken < 4 mov %bern_hints_taken,4
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc144
	if %play_scene = 80304 mov %play_scene,80305
	if %bern_hints_taken < 5 mov %bern_hints_taken,5
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc145
	if %play_scene = 80305 mov %play_scene,80306
	if %bern_hints_taken < 6 mov %bern_hints_taken,6
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc146
	if %play_scene = 80306 mov %play_scene,80307
	if %bern_hints_taken < 7 mov %bern_hints_taken,7
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc147
	if %play_scene = 80307 mov %play_scene,80308
	if %bern_hints_taken < 8 mov %bern_hints_taken,8
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc148
	if %play_scene = 80308 mov %play_scene,80309
	if %bern_hints_taken < 9 mov %bern_hints_taken,9
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc149
	if %play_scene = 80309 mov %play_scene,80310
	if %bern_hints_taken < 10 mov %bern_hints_taken,10
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc150
	if %play_scene = 80310 mov %play_scene,80311
	if %bern_hints_taken < 11 mov %bern_hints_taken,11
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc151
	if %play_scene = 80311 mov %play_scene,80312
	if %bern_hints_taken < 12 mov %bern_hints_taken,12
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc152
	if %play_scene = 80312 mov %play_scene,80313
	if %bern_hints_taken < 13 mov %bern_hints_taken,13
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc153
	if %play_scene = 80313 mov %play_scene,80314
	if %bern_hints_taken < 14 mov %bern_hints_taken,14
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc154
	if %play_scene = 80314 mov %play_scene,80315
	if %bern_hints_taken < 15 mov %bern_hints_taken,15
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc155
	if %play_scene = 80315 mov %play_scene,80316
	if %bern_hints_taken < 16 mov %bern_hints_taken,16
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc156
	if %play_scene = 80316 mov %play_scene,80317
	if %bern_hints_taken < 17 mov %bern_hints_taken,17
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc157
	if %play_scene = 80317 mov %play_scene,80318
	if %bern_hints_taken < 18 mov %bern_hints_taken,18
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc158
	if %play_scene = 80318 mov %play_scene,80319
	if %bern_hints_taken < 19 mov %bern_hints_taken,19
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc159
	if %play_scene = 80319 mov %play_scene,80320
	if %bern_hints_taken < 20 mov %bern_hints_taken,20
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	*gstcc160
	if %play_scene = 80320 mov %play_scene,80321
	if %bern_hints_taken < 21 mov %bern_hints_taken,21
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	
	;umi8_10
	*gstcc161
	mov %play_scene,80100
	mov %r_display_side,0
	mov %r_display_cha,but
	mov %grim_scene,802
	return
	
	*gstcc162
	mov %play_scene,80120
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_ERI
	mov %grim_scene,802
	return
	*gstcc163
	mov %play_scene,80130
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_EV2
	mov %grim_scene,802
	return
	*gstcc164
	mov %play_scene,80140
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_FEA
	mov %grim_scene,802
	return
	
	;umi8_11<-12
	*gstcc165
	mov %play_scene,80140
	mov %r_display_side,1
	mov %grim_scene,802
	return
	*gstcc166
	mov %play_scene,80150
	mov %r_display_side,1
	mov %r_display_cha_ma,ma5_EN2
	mov %grim_scene,802
	return
	
	;12<-13
	*gstcc167
		mov %play_scene,80150
	mov %r_display_side,0
	mov %grim_scene,802
	return
	
	;13<-14
	*gstcc168
	mov %play_scene,80150
	mov %r_display_side,0
	mov %grim_scene,802
	return
	;14<-15
	*gstcc169
	mov %play_scene,80150
	mov %r_display_side,1
	mov %grim_scene,802
	return
	;15<-16
	*gstcc170
	mov %play_scene,80150
	mov %r_display_side,0
	mov %grim_scene,802
	return
	;16<-17
	*gstcc171
	mov %play_scene,80150
	mov %r_display_side,1
	mov %grim_scene,802
	return
	*gstcc172
	mov %play_scene,80150
	mov %r_display_side,0
	mov %grim_scene,802
	return
	*gstcc173
	mov %play_scene,80150
	mov %r_display_side,0	
	mov %grim_scene,802
	return
	*gstcc174
	mov %play_scene,80150
	mov %r_display_side,0
	mov %grim_scene,802
	return
	*gstcc175
	mov %play_scene,80150
	mov %r_display_side,0
	mov %grim_scene,802
	return
	
	;tea_umi5
	*gstcc176
	mov %r_display_side,1
	mov %play_scene,50100
	mov %grim_scene,503
	return
	
	;tea_umi6
	*gstcc177
	mov %r_display_side,1
	mov %play_scene,60100
	mov %grim_scene,602
	return
	
	;tea_umi7
	*gstcc178
	mov %r_display_side,1
	mov %play_scene,70100
	mov %grim_scene,701
	return
	
	;tea_umi8
	*gstcc179
	mov %r_display_side,1
	mov %play_scene,80150
	mov %grim_scene,802
	return
	
	;ura5
	*gstcc180
	mov %r_display_side,1
	mov %play_scene,50100
	mov %grim_scene,504
	return
	*gstcc181
	mov %play_scene,50110
	mov %grim_scene,504
	return
	
	;ura6
	*gstcc182
	mov %r_display_side,1
	mov %play_scene,60100
	mov %grim_scene,602
	return
	
	;ura7
	*gstcc183
	mov %r_display_side,1
	mov %play_scene,70100
	mov %grim_scene,702
	return
	
	;ura8
	*gstcc184
	mov %r_display_side,0
	mov %play_scene,80150
	mov %grim_scene,802
	return	
	
return

;****************************************************
;new_ura logs ura name by its id
;****************************************************
*new_ura
	getparam %ep_id
	if %ep_id == 1 mov $ep_id,scenario_ura_1: jumpf
	if %ep_id == 2 mov $ep_id,scenario_ura_2: jumpf
	if %ep_id == 3 mov $ep_id,scenario_ura_3: jumpf
	if %ep_id == 4 mov $ep_id,scenario_ura_4: jumpf
	if %ep_id == 5 mov $ep_id,scenario_ura_5: jumpf
	if %ep_id == 6 mov $ep_id,scenario_ura_6: jumpf
	if %ep_id == 7 mov $ep_id,scenario_ura_7: jumpf
	if %ep_id == 8 mov $ep_id,scenario_ura_8: jumpf
	~
	if %no_log_gen == 1 setlog 1,$ep_id
	if %no_log_gen != 0 jumpf
		mark_read
		if %ep_id == 1 && %UMINEKOEND_FLG == 12 mov %UMINEKOEND_FLG,0
		if %ep_id == 2 && %UMINEKOEND_FLG == 22 mov %UMINEKOEND_FLG,0
		if %ep_id == 3 && %UMINEKOEND_FLG == 32 mov %UMINEKOEND_FLG,0
		if %ep_id == 4 && %UMINEKOEND_FLG == 42 mov %UMINEKOEND_FLG,0
		if %ep_id == 5 && %UMINEKOEND_FLG == 52 mov %UMINEKOEND_FLG,0
		if %ep_id == 6 && %UMINEKOEND_FLG == 62 mov %UMINEKOEND_FLG,0
		if %ep_id == 7 && %UMINEKOEND_FLG == 72 mov %UMINEKOEND_FLG,0
		if %ep_id == 8 && %UMINEKOEND_FLG == 82 mov %UMINEKOEND_FLG,0
	~
return

;****************************************************
;ch_done opens the chapter in magic menu
;and also saves the most recent choice list for magic jump
;****************************************************
*ch_done
	getparam %ep_id ;ch_id actually
	mov $%ep_id,"●"
	; Choice vectors for ep8 (= flag_scenario + 15 if flag_scenario >= flag_scenario_8_4 and flag_scenario <= flag_scenario_8_15)
	if %ep_id < flag_scenario_8_4 return
	if %ep_id > flag_scenario_8_15 return
	add %ep_id,15
	; Save choice vector to global variable choice_vector_8_N where N is the chapter we just finished
	savechoices $%ep_id
return

;****************************************************
;new_tea logs tea name by its id
;****************************************************
*new_tea
	getparam %ep_id
	if %ep_id == 1 mov $ep_id,scenario_tea_1 : jumpf
	if %ep_id == 2 mov $ep_id,scenario_tea_2 : jumpf
	if %ep_id == 3 mov $ep_id,scenario_tea_3 : jumpf
	if %ep_id == 4 mov $ep_id,scenario_tea_4 : jumpf
	if %ep_id == 5 mov $ep_id,scenario_tea_5 : jumpf
	if %ep_id == 6 mov $ep_id,scenario_tea_6 : jumpf
	if %ep_id == 7 mov $ep_id,scenario_tea_7 : jumpf
	if %ep_id == 8 mov $ep_id,scenario_tea_8 : jumpf
	~
	if %no_log_gen == 1 setlog 1,$ep_id
	if %no_log_gen != 0 jumpf
		mark_read
		if %ep_id == 1 && %UMINEKOEND_FLG == 11 mov %UMINEKOEND_FLG,0
		if %ep_id == 2 && %UMINEKOEND_FLG == 21 mov %UMINEKOEND_FLG,0
		if %ep_id == 3 && %UMINEKOEND_FLG == 31 mov %UMINEKOEND_FLG,0
		if %ep_id == 4 && %UMINEKOEND_FLG == 41 mov %UMINEKOEND_FLG,0
		if %ep_id == 5 && %UMINEKOEND_FLG == 51 mov %UMINEKOEND_FLG,0
		if %ep_id == 6 && %UMINEKOEND_FLG == 61 mov %UMINEKOEND_FLG,0
		if %ep_id == 7 && %UMINEKOEND_FLG == 71 mov %UMINEKOEND_FLG,0
		if %ep_id == 8 && %UMINEKOEND_FLG == 81 mov %UMINEKOEND_FLG,0
	~
return

;****************************************************
;new_episode logs ep name by its id
;****************************************************
*new_episode
	getparam %ep_id
	if %ep_id == 1 mov $ep_id,scenario_episode_1 : jumpf
	if %ep_id == 2 mov $ep_id,scenario_episode_2 : jumpf
	if %ep_id == 3 mov $ep_id,scenario_episode_3 : jumpf
	if %ep_id == 4 mov $ep_id,scenario_episode_4 : jumpf
	if %ep_id == 5 mov $ep_id,scenario_episode_5 : jumpf
	if %ep_id == 6 mov $ep_id,scenario_episode_6 : jumpf
	if %ep_id == 7 mov $ep_id,scenario_episode_7 : jumpf
	if %ep_id == 8 mov $ep_id,scenario_episode_8 : jumpf
	~
	if %no_log_gen == 1 setlog 1,$ep_id
	if %no_log_gen != 0 jumpf
		mark_read
		if %ep_id == 2 && %UMINEKOEND_FLG == 20 mov %UMINEKOEND_FLG,0
		if %ep_id == 3 && %UMINEKOEND_FLG == 30 mov %UMINEKOEND_FLG,0
		if %ep_id == 4 && %UMINEKOEND_FLG == 40 mov %UMINEKOEND_FLG,0
		if %ep_id == 5 && %UMINEKOEND_FLG == 50 mov %UMINEKOEND_FLG,0
		if %ep_id == 6 && %UMINEKOEND_FLG == 60 mov %UMINEKOEND_FLG,0
		if %ep_id == 7 && %UMINEKOEND_FLG == 70 mov %UMINEKOEND_FLG,0
		if %ep_id == 8 && %UMINEKOEND_FLG == 80 mov %UMINEKOEND_FLG,0
	~
return

;****************************************************
;new_chapter displays & logs specified chapter name
;****************************************************
*new_chapter
	getparam $chapter_time,$chapter_title
	jskip_s
	if %bgm_chapter_display == 0 jumpf
		border_pad_push 3
		enable_transitions 746,0 : lsp 746,":s;#FFFFFF`{p:7:"+$chapter_time+"{n}"+$chapter_title+"}",35,940
		spt alpha,746,0,7000 : aspt alpha,746,0,100
		border_pad_pop
	~
	if %no_log_gen == 1 && $chapter_time != "" setlog 1,$chapter_time+"{n}"+$chapter_title
	if %no_log_gen == 1 && $chapter_time == "" setlog 1,$chapter_title
	if %no_log_gen == 0 mark_read
return

;****************************************************
;show_characters proceeds to characters menu
;****************************************************
*show_characters
	textclear
	mov %r_display,0
	gosub *rmenu_main
	goto *r_exit2
return

;****************************************************
;border_pad push and pop allow accessing border_padding stack
;****************************************************

*border_pad_push
	getparam %b_pad_temp
	inc %b_pad_counter
	if %b_pad_counter > 10 error "border_stack error, too high value"
	mov ?padding_s[%b_pad_counter],%b_pad_temp
	border_padding %b_pad_temp
return

*border_pad_pop
	dec %b_pad_counter
	if %b_pad_counter < 0 error "border_stack error, too low value"
	border_padding ?padding_s[%b_pad_counter]
return

;****************************************************
;masks a spriteset with a provided mask
;****************************************************

*mask_set
	getparam %mask_spr,$mask_file,%mask_set
	lsph %mask_spr,$mask_file,0,0
	spriteset_mask %mask_set,%mask_spr
return

;****************************************************
;Creates whirl effect
;****************************************************

*show_whirl
	jnskip print 1 : return ~
	;Old way:
	;print 99,2000,"whirl.dll/p"
	agpt warp_wave,200
	agpt warp_spd,25
	agpt warp_amp,500,1000,3
	wait2 200
	print2 10,1750
	gptwait warp_amp
	agpt warp_amp,0,1000,3
	gptwait warp_amp
return

;****************************************************
;Creates glass effect
;****************************************************

*show_glass
	getparam %glass_speed
	;10 = 85000, 100 = 9000, 200 = 4700, 350 = 2300
	;450 = 2100, 500 = 1900, 1000 = 1000
	;y = 10000 / ln(x/40) - 2000
	if %glass_speed == 0 || %glass_speed == 1000 flush 99,1000,"glass.dll" : return
	if %glass_speed == 1200 flush 99,940,"glass.dll/1200" : return
	if %glass_speed == 1300 flush 99,870,"glass.dll/1300" : return
	if %glass_speed == 1500 flush 99,760,"glass.dll/1500" : return
	if %glass_speed == 1600 flush 99,710,"glass.dll/1600" : return
	itoa $glass_speed,%glass_speed
	error "Unsupported glass parameter: "+$glass_speed
return

;****************************************************
;skip_off
;Disables skip and resets the timer
;****************************************************

*skip_off
	mov %skip_flg,off
	resettimer
	skip_disable
	vsp TextCC3SpNum,0 : mov %skip_icon,off
return

*skip_on
	mov %skip_flg,on
	skip_enable
return

;****************************************************
;rumble
;Wraps rumble call to support force setting
;****************************************************

*rumble
	getparam %rumble_s,%rumble_t
	jnskip_s return ~
	if %rumble_strength == 0 return
	mov %rumble_s,%rumble_strength*%rumble_s/50
	notif %rumble_s == 0 _rumble %rumble_s,%rumble_t
return

;****************************************************
;rain_load (sprite)
;Loads rain layer in a specified sprite
;****************************************************

*rain_load
getparam %rain_slot,%rain_amount

;If this sprite already has a layer (assume it is rain), store it for later kill (in flush)
mov %rain_layer,997-%rain_slot
div %rain_layer,2
if ?rain_s[%rain_layer][0] == on mov %rain_layer,?rain_s[%rain_layer][1] : mov ?layer_q[%rain_layer],1

mov %rain_layer,0

;idiocy, why it fails with "return not in gosub" with for loop
*rain_next
	if ?rain_l[%rain_layer] == off mov ?rain_l[%rain_layer],on : jumpf
    inc %rain_layer
    if %rain_layer == 8 error "no free rain layers"
    goto *rain_next
~

*rain_load_just_reset

itoa $rain_layer,%rain_layer
;z_order_override %rain_slot,%rain_slot
;s0_11 975 -> 997-975=22 -> 11
;s0_7 983  -> 997-983=14 -> 7
mov %rain_slot,997-%rain_slot
div %rain_slot,2

;sprite{enabled,layer_id,objects,speed,wind,pause}
mov ?rain_s[%rain_slot][0],on ;enabled
mov ?rain_s[%rain_slot][1],%rain_layer ;id
mov ?rain_s[%rain_slot][2],500 ;objects - old 500
mov ?rain_s[%rain_slot][3],800 ;speed - old 6
mov ?rain_s[%rain_slot][4],0 ;wind
mov ?rain_s[%rain_slot][5],off ;pause
mov ?rain_s[%rain_slot][6],%rain_amount ;orbs

if %rain_amount != 1 jumpf
	fall blend,%rain_layer,"add"
	fall base, %rain_layer,"graphics\system\rain\orb.png"
	fall amount,%rain_layer,50
	fall c_speed,%rain_layer,500
	fall wind,%rain_layer,1000
~
if %rain_amount = 1 jumpf
	fall blend,%rain_layer,"add"
	fall base, %rain_layer,"graphics\system\rain\drop.png"
	fall amount,%rain_layer,500
	fall c_speed,%rain_layer,800
	fall wind,%rain_layer,0
~

mov ?rain_q[%rain_layer],1
fall pause,%rain_layer,0

mul %rain_slot,2
mov %rain_slot,997-%rain_slot
lsp %rain_slot,"*"+$rain_layer
mov %rain_amount,0 ;orbs
mov %rain_layer,0

return

;****************************************************
;rain_pause (sprite)
;Pauses rain layer in a specified sprite
;****************************************************

*rain_pause
getparam %rain_slot

mov %rain_slot,997-%rain_slot
div %rain_slot,2

if ?rain_s[%rain_slot][5] == on return

mov ?rain_s[%rain_slot][5],on ;paused
;layermessage ?rain_s[%rain_slot][1],"p"

mov %rain_slot,?rain_s[%rain_slot][1]

;Ensure that the screen is covered with rain
if ?rain_q[%rain_slot] == 1 fall cover,%rain_slot

fall pause,%rain_slot,1

return

;****************************************************
;rain_resume (sprite)
;Resumes paused rain layer in a specified sprite
;****************************************************

*rain_resume
getparam %rain_slot

mov %rain_slot,997-%rain_slot
div %rain_slot,2

if ?rain_s[%rain_slot][5] == off return

mov ?rain_s[%rain_slot][5],off ;paused
fall pause,?rain_s[%rain_slot][1],0

return

;****************************************************
;rain_params (sprite),(drops),(speed),(wind),(droptimer)
;Customises paused rain layer in a specified sprite
;****************************************************

*rain_params
getparam %rain_slot,%rain_amount,%rain_speed,%rain_wind,%rain_layer

mov %rain_slot,997-%rain_slot
div %rain_slot,2

if ?rain_s[%rain_slot][0] == off mov %rain_layer,0 : return

;sprite{enabled,layer_id,objects,speed,wind,pause}

mov ?rain_s[%rain_slot][2],%rain_amount
mov ?rain_s[%rain_slot][3],%rain_speed
mov ?rain_s[%rain_slot][4],%rain_wind

fall amount,?rain_s[%rain_slot][1],%rain_amount,%rain_layer
fall c_speed,?rain_s[%rain_slot][1],%rain_speed
fall wind,?rain_s[%rain_slot][1],%rain_wind

mov %rain_layer,0
return

;****************************************************
;snow (sprite)
;use -1 to disable
;****************************************************
*snow
	getparam %snow_sprite
	if %snow_sprite <= 0 layermessage 9,"x" : return

	lsp %snow_sprite,"*9"
	layermessage 9,"i|graphics\system\rain\snow1.bmp,graphics\system\rain\snow2.bmp,graphics\system\rain\snow3.bmp"
	layermessage 9,"s|1,3,0,16,2"
	layermessage 9,"f"
return

*snow2
	getparam %snow_sprite
	if %snow_sprite <= 0 layermessage 9,"x" : return

	lsp %snow_sprite,"*9"
	layermessage 9,"i|graphics\system\rain\snow1.bmp,graphics\system\rain\snow2.bmp,graphics\system\rain\snow3.bmp"
	layermessage 9,"s|1,3,0,16,2"
return

;****************************************************
;rain_params (style_index)
;Customises rain style
;****************************************************
*rain_style
	getparam %rain_style

	for %rain_slot = 0 to 7
		if %rain_style = 0 fall amps,%rain_slot,"1","1.5","0.875"
		if %rain_style = 1 fall amps,%rain_slot,"1","5","0.875"
		if %rain_style = 2 fall amps,%rain_slot,"0.05","16.6667","0.32","0.15","0.3"
	next
return

*menu_rain_pause
	for %Free1 = 0 to 123
	    if ?rain_s[%Free1][0] == on && ?rain_s[%Free1][5] == off fall pause,?rain_s[%Free1][1],1
	next
return

*menu_rain_unpause
	for %Free1 = 0 to 123
	    if ?rain_s[%Free1][0] == on && ?rain_s[%Free1][5] == off fall pause,?rain_s[%Free1][1],0
	next
return

;**************************************************
; lss loads a standing sprite with lips
;**************************************************

*lss
*load_standing_sprite
getparam %lss_slot,$lss_sec,$lss_key
csp_slot %lss_slot

lsp2 %lss_slot,":a;sprites\" + $lss_sec + "\1\" + $lss_sec + "_" + $lss_key + ".png",0,0,100,100,0
lips_sprite %lss_slot-1

;Containing main sprite hotspot, lips unrelated
loadfromreg $lss_lips_x,$lss_sec,$lss_key + "_left"
loadfromreg $lss_lips_y,$lss_sec,$lss_key + "_top"
set_hotspot %lss_slot,$lss_lips_x,$lss_lips_y

fileexist %lss_lips,"sprites\" + $lss_sec + "\2\" + $lss_sec + "_" + $lss_key + ".png"

if %lss_lips == 0 jumpf
	loadfromreg $lss_temp,$lss_sec,$lss_key + "_x"
	atoi %lss_lips_x,$lss_temp
	loadfromreg $lss_temp,$lss_sec,$lss_key + "_y"
	atoi %lss_lips_y,$lss_temp
	lsp2 %lss_slot-1,":a/4,0,3;sprites\" + $lss_sec + "\2\" + $lss_sec + "_" + $lss_key + ".png",%lss_lips_x,%lss_lips_y,100,100,0
	if $lss_sec == "en2" mov $lss_sec,"enj"
	if $lss_sec == "ka2" mov $lss_sec,"kan"
	if $lss_sec == "be2" mov $lss_sec,"bea"
	lips_sprite %lss_slot-1,$lss_sec
~

if %enable_cache == 0 || %no_cache_atm == 1 return

lookahead exsp,2,$lss_sec,$lss_key,$lss_temp,$lss_slot
if $lss_sec != "" async_cache_img 2,"sprites\" + $lss_sec + "\1\" + $lss_sec + "_" + $lss_key + ".png"
if $lss_temp != "" async_cache_img 2,"sprites\" + $lss_temp + "\1\" + $lss_temp + "_" + $lss_slot + ".png"

return

;**************************************************
; lbg loads a new background
;**************************************************

*lbg
*load_background
	getparam %lbg_slot,$lbg_name

	csp_slot %lbg_slot
	jskip_s gosub *open_cg ~
	getstralias $lbg_path,$lbg_name
	lsp2 %lbg_slot,$lbg_path,0,0

	goto *lbg_do

*lbg2
*load_background2
	getparam %lbg_slot,$lbg_name

	csp_slot %lbg_slot
	jskip_s gosub *open_cg ~
	getstralias $lbg_path,$lbg_name
	lbsp2 %lbg_slot,$lbg_path,0,0

	goto *lbg_do

*lbg_do
	;Containing main sprite hotspot, lips unrelated
	loadfromreg $lbg_left,"picture",$lbg_name + "_left"
	loadfromreg $lbg_top,"picture",$lbg_name + "_top"
	set_hotspot %lbg_slot,$lbg_left,$lbg_top

	if %enable_cache == 0 || %no_cache_atm == 1 return

	lookahead exbg,1,$lbg_name,$lbg_left

	if $lbg_name == "" jumpf
		getstralias $lbg_path,$lbg_name
		len %lbg_path,$lbg_path
		mid $lbg_path,$lbg_path,3,%lbg_path-3
		async_cache_img 1,$lbg_path
	~

	if $lbg_left == "" jumpf
		getstralias $lbg_path,$lbg_left
		len %lbg_path,$lbg_path
		mid $lbg_path,$lbg_path,3,%lbg_path-3
		async_cache_img 1,$lbg_path
	~
return

*drop_cache
	getparam $lbg_name
	getstralias $lbg_path,$lbg_name
	len %lbg_path,$lbg_path
	mid $lbg_path,$lbg_path,3,%lbg_path-3
	drop_cache_img all,$lbg_path
return

*open_cg

if %CHIRU_MODE = 1 jumpf
if $lbg_name == "c0101_c" mov %8600,1 : return
if $lbg_name == "c0201_f" mov %8601,1 : return
if $lbg_name == "c0202_b" mov %8602,1 : return
if $lbg_name == "c0301"   mov %8603,1 : return
if $lbg_name == "c0302_b" mov %8604,1 : return
if $lbg_name == "c0303"   mov %8605,1 : return
if $lbg_name == "c0406"   mov %8606,1 : return
if $lbg_name == "e0104_d" mov %8607,1 : return
if $lbg_name == "e0201"   mov %8608,1 : return
if $lbg_name == "e0404"   mov %8609,1 : return
if $lbg_name == "e0903_c" mov %8610,1 : return
if $lbg_name == "e0904_b" mov %8611,1 : return
if $lbg_name == "e0301_a" mov %8612,1 : return
if $lbg_name == "e0301_b" mov %8613,1 : return
if $lbg_name == "e0301_c" mov %8614,1 : return
if $lbg_name == "e0401_a" mov %8615,1 : return
if $lbg_name == "e0401_b" mov %8616,1 : return
if $lbg_name == "e0405"   mov %8617,1 : return
if $lbg_name == "e0406"   mov %8618,1 : return
if $lbg_name == "e0407"   mov %8619,1 : return
if $lbg_name == "e0901_a" mov %8620,1 : return
if $lbg_name == "e0901_c" mov %8621,1 : return
if $lbg_name == "e0902"   mov %8622,1 : return
if $lbg_name == "no55_00059" mov %8623,1 : return
if $lbg_name == "g0101"   mov %8624,1 : return
if $lbg_name == "g0102"   mov %8625,1 : return
if $lbg_name == "g0103"   mov %8626,1 : return
if $lbg_name == "g0201"   mov %8627,1 : return
if $lbg_name == "g0202"   mov %8628,1 : return
if $lbg_name == "g0203_b" mov %8629,1 : return
if $lbg_name == "g0301"   mov %8630,1 : return
if $lbg_name == "g0302"   mov %8631,1 : return
if $lbg_name == "g0401"   mov %8632,1 : return
if $lbg_name == "no01_00119" mov %8633,1 : return
if $lbg_name == "no60_00179" mov %8634,1 : return
if $lbg_name == "c_c0203_lb" mov %8636,1 : return
if $lbg_name == "c_c0204_b" mov %8637,1 : return
if $lbg_name == "c_c0205_b" mov %8638,1 : return
if $lbg_name == "c_c0401_lb" mov %8639,1 : return
if $lbg_name == "c_c0402_ld" mov %8640,1 : return
if $lbg_name == "c_c0403_f" mov %8641,1 : return
if $lbg_name == "c_c0404_lf" mov %8642,1 : return
if $lbg_name == "c_c0901_b" mov %8643,1 : return
if $lbg_name == "c_c0902_a" mov %8644,1 : return
if $lbg_name == "g0402"   mov %8645,1 : return
if $lbg_name == "g0403"   mov %8646,1 : return
if $lbg_name == "g0404"   mov %8647,1 : return
if $lbg_name == "c_e0101_a" mov %8648,1 : return
if $lbg_name == "c_e0102_b" mov %8649,1 : return
if $lbg_name == "c_e0103_c" mov %8650,1 : return
if $lbg_name == "c_e0305_d" mov %8651,1 : return
if $lbg_name == "c_e0406_f" mov %8652,1 : return
if $lbg_name == "c_e0903_b" mov %8653,1 : return
if $lbg_name == "portrait1" mov %8654,1 : return
if $lbg_name == "portrait3" mov %8655,1 : return
if $lbg_name == "portrait4" mov %8656,1 : return
if $lbg_name == "portrait_ep4" mov %8657,1 : return ;omake
~

;Chiru
if %CHIRU_MODE = 0 return
if $lbg_name == "ep501" mov %8800,1 : return
if $lbg_name == "ep502" mov %8801,1 : return
if $lbg_name == "ep503_b" mov %8802,1 : return
if $lbg_name == "ep504" mov %8803,1 : return
if $lbg_name == "ep505" mov %8804,1 : return
if $lbg_name == "e0901_b" mov %8805,1 : return
if $lbg_name == "ep601_nd2" mov %8806,1 : return
if $lbg_name == "ep602_b" mov %8807,1 : return
if $lbg_name == "ep603" mov %8808,1 : return
if $lbg_name == "ep604_2" mov %8809,1 : return
if $lbg_name == "ep605_c2" mov %8810,1 : return
if $lbg_name == "ep606" mov %8811,1 : return
if $lbg_name == "e0104_d" mov %8812,1 : return
if $lbg_name == "ex02" mov %8813,1 : return
if $lbg_name == "ep607" mov %8814,1 : return
if $lbg_name == "c0201_b" mov %8815,1 : return
if $lbg_name == "ep701" mov %8816,1 : return
if $lbg_name == "g0101" mov %8817,1 : return
if $lbg_name == "g0102" mov %8818,1 : return
if $lbg_name == "no64_00000" mov %8819,1 : return
if $lbg_name == "g0103" mov %8820,1 : return
if $lbg_name == "g0201" mov %8821,1 : return
if $lbg_name == "g0202" mov %8822,1 : return
if $lbg_name == "g0203_a" mov %8823,1 : return
if $lbg_name == "g0301" mov %8824,1 : return
if $lbg_name == "g0302" mov %8825,1 : return
if $lbg_name == "g0401" mov %8826,1 : return
if $lbg_name == "g0402" mov %8827,1 : return
if $lbg_name == "g0404" mov %8828,1 : return
if $lbg_name == "g0403" mov %8829,1 : return
if $lbg_name == "ep702" mov %8830,1 : return
if $lbg_name == "ep703_b" mov %8831,1 : return
if $lbg_name == "ep704_b" mov %8832,1 : return
if $lbg_name == "ep705_4" mov %8833,1 : return
if $lbg_name == "ep801" mov %8834,1 : return
if $lbg_name == "ep802" mov %8835,1 : return
if $lbg_name == "ep803" mov %8836,1 : return
if $lbg_name == "ep805" mov %8837,1 : return
if $lbg_name == "ep806" mov %8838,1 : return
if $lbg_name == "ep807_a" mov %8839,1 : return
if $lbg_name == "ep808" mov %8840,1 : return
if $lbg_name == "ep809_b" mov %8841,1 : return
if $lbg_name == "ep810_a1" mov %8842,1 : return
if $lbg_name == "ep811" mov %8843,1 : return
if $lbg_name == "ep812" mov %8844,1 : return
if $lbg_name == "c0406" mov %8845,1 : return
if $lbg_name == "ep814_d2" mov %8846,1 : return
if $lbg_name == "ep815_1_" mov %8847,1 : return
if $lbg_name == "ep815_2_" mov %8848,1 : return
if $lbg_name == "ep816" mov %8849,1 : return
if $lbg_name == "ep817" mov %8850,1 : return
if $lbg_name == "e0401_b" mov %8851,1 : return
if $lbg_name == "ep818" mov %8852,1 : return
if $lbg_name == "eve_last2" mov %8853,1 : return
if $lbg_name == "wic_c" mov %8854,1 : return
if $lbg_name == "evc_c" mov %8855,1 : return
if $lbg_name == "dlc_d1" mov %8856,1 : return
if $lbg_name == "fec_a" mov %8857,1 : return
if $lbg_name == "bec_a" mov %8858,1 : return
if $lbg_name == "brc_er" mov %8859,1 : return
if $lbg_name == "lac_a3" mov %8860,1 : return
if $lbg_name == "wrc_a" mov %8861,1 : return
if $lbg_name == "erc_ra" mov %8862,1 : return
if $lbg_name == "enc_a1" mov %8863,1 : return
if $lbg_name == "bac_ga2n" mov %8864,1 : return
if $lbg_name == "c_c0205_a" mov %8865,1 : return
if $lbg_name == "c_c0401_la" mov %8866,1 : return
if $lbg_name == "c_c0404_b" mov %8867,1 : return
if $lbg_name == "c_c0902_a" mov %8868,1 : return
if $lbg_name == "c_e0102_a" mov %8869,1 : return
if $lbg_name == "c_e0103_la" mov %8870,1 : return
if $lbg_name == "c_e0305_c" mov %8871,1 : return
if $lbg_name == "portrait5" mov %8872,1 : return
if $lbg_name == "portrait6" mov %8873,1 : return
;These two are obtained after completing ura7 and ura8
if $lbg_name == "portrait_ep7" mov %8874,1 : return
if $lbg_name == "portrait_ep8" mov %8875,1 : return
;These two are obtained when all the rest are obtained
if $lbg_name == "package03" mov %8876,1 : return
if $lbg_name == "package04" mov %8877,1 : return

return

*load_cg

if %CHIRU_MODE = 1 jumpf

if $lbg_name == "c0101_c" mov ?cg_list[0][0],1 : return
if $lbg_name == "c0201_f" mov ?cg_list[0][1],1 : return
if $lbg_name == "c0202_b" mov ?cg_list[0][2],1 : return
if $lbg_name == "c0301"   mov ?cg_list[0][3],1 : return
if $lbg_name == "c0302_b" mov ?cg_list[0][4],1 : return
if $lbg_name == "c0303"   mov ?cg_list[0][5],1 : return
if $lbg_name == "c0406"   mov ?cg_list[0][6],1 : return
if $lbg_name == "e0104_d" mov ?cg_list[0][7],1 : return
if $lbg_name == "e0201"   mov ?cg_list[0][8],1 : return
if $lbg_name == "e0404"   mov ?cg_list[0][9],1 : return
if $lbg_name == "e0903_c" mov ?cg_list[0][10],1 : return
if $lbg_name == "e0904_b" mov ?cg_list[0][11],1 : return
if $lbg_name == "e0301_a" mov ?cg_list[0][12],1 : return
if $lbg_name == "e0301_b" mov ?cg_list[0][13],1 : return
if $lbg_name == "e0301_c" mov ?cg_list[0][14],1 : return
if $lbg_name == "e0401_a" mov ?cg_list[0][15],1 : return
if $lbg_name == "e0401_b" mov ?cg_list[0][16],1 : return
if $lbg_name == "e0405"   mov ?cg_list[0][17],1 : return
if $lbg_name == "e0406"   mov ?cg_list[0][18],1 : return
if $lbg_name == "e0407"   mov ?cg_list[0][19],1 : return
if $lbg_name == "e0901_a" mov ?cg_list[0][20],1 : return
if $lbg_name == "e0901_c" mov ?cg_list[0][21],1 : return
if $lbg_name == "e0902"   mov ?cg_list[0][22],1 : return
if $lbg_name == "no55_00059" mov ?cg_list[0][23],1 : return
if $lbg_name == "g0101"   mov ?cg_list[0][24],1 : return
if $lbg_name == "g0102"   mov ?cg_list[0][25],1 : return
if $lbg_name == "g0103"   mov ?cg_list[0][26],1 : return
if $lbg_name == "g0201"   mov ?cg_list[0][27],1 : return
if $lbg_name == "g0202"   mov ?cg_list[0][28],1 : return
if $lbg_name == "g0203_b" mov ?cg_list[0][29],1 : return
if $lbg_name == "g0301"   mov ?cg_list[0][30],1 : return
if $lbg_name == "g0302"   mov ?cg_list[0][31],1 : return
if $lbg_name == "g0401"   mov ?cg_list[0][32],1 : return
if $lbg_name == "no01_00119" mov ?cg_list[0][33],1 : return
if $lbg_name == "no60_00179" mov ?cg_list[0][34],1 : return
if $lbg_name == "c_c0203_lb" mov ?cg_list[0][36],1 : return
if $lbg_name == "c_c0204_b" mov ?cg_list[0][37],1 : return
if $lbg_name == "c_c0205_b" mov ?cg_list[0][38],1 : return
if $lbg_name == "c_c0401_lb" mov ?cg_list[0][39],1 : return
if $lbg_name == "c_c0402_ld" mov ?cg_list[0][40],1 : return
if $lbg_name == "c_c0403_f" mov ?cg_list[0][41],1 : return
if $lbg_name == "c_c0404_lf" mov ?cg_list[0][42],1 : return
if $lbg_name == "c_c0901_b" mov ?cg_list[0][43],1 : return
if $lbg_name == "c_c0902_a" mov ?cg_list[0][44],1 : return
if $lbg_name == "g0402"   mov ?cg_list[0][45],1 : return
if $lbg_name == "g0403"   mov ?cg_list[0][46],1 : return
if $lbg_name == "g0404"   mov ?cg_list[0][47],1 : return
if $lbg_name == "c_e0101_a" mov ?cg_list[0][48],1 : return
if $lbg_name == "c_e0102_b" mov ?cg_list[0][49],1 : return
if $lbg_name == "c_e0103_c" mov ?cg_list[0][50],1 : return
if $lbg_name == "c_e0305_d" mov ?cg_list[0][51],1 : return
if $lbg_name == "c_e0406_f" mov ?cg_list[0][52],1 : return
if $lbg_name == "c_e0903_b" mov ?cg_list[0][53],1 : return
if $lbg_name == "portrait1" mov ?cg_list[0][54],1 : return
if $lbg_name == "portrait3" mov ?cg_list[0][55],1 : return
if $lbg_name == "portrait4" mov ?cg_list[0][56],1 : return

~

if %CHIRU_MODE = 0 return

;Chiru
if $lbg_name == "ep501" mov ?cg_list[1][0],1 : return
if $lbg_name == "ep502" mov ?cg_list[1][1],1 : return
if $lbg_name == "ep503_b" mov ?cg_list[1][2],1 : return
if $lbg_name == "ep504" mov ?cg_list[1][3],1 : return
if $lbg_name == "ep505" mov ?cg_list[1][4],1 : return
if $lbg_name == "e0901_b" mov ?cg_list[1][5],1 : return
if $lbg_name == "ep601_nd2" mov ?cg_list[1][6],1 : return
if $lbg_name == "ep602_b" mov ?cg_list[1][7],1 : return
if $lbg_name == "ep603" mov ?cg_list[1][8],1 : return
if $lbg_name == "ep604_2" mov ?cg_list[1][9],1 : return
if $lbg_name == "ep605_c2" mov ?cg_list[1][10],1 : return
if $lbg_name == "ep606" mov ?cg_list[1][11],1 : return
if $lbg_name == "e0104_d" mov ?cg_list[1][12],1 : return
if $lbg_name == "ex02" mov ?cg_list[1][13],1 : return
if $lbg_name == "ep607" mov ?cg_list[1][14],1 : return
if $lbg_name == "c0201_b" mov ?cg_list[1][15],1 : return
if $lbg_name == "ep701" mov ?cg_list[1][16],1 : return
if $lbg_name == "g0101" mov ?cg_list[1][17],1 : return
if $lbg_name == "g0102" mov ?cg_list[1][18],1 : return
if $lbg_name == "no64_00000" mov ?cg_list[1][19],1 : return
if $lbg_name == "g0103" mov ?cg_list[1][20],1 : return
if $lbg_name == "g0201" mov ?cg_list[1][21],1 : return
if $lbg_name == "g0202" mov ?cg_list[1][22],1 : return
if $lbg_name == "g0203_a" mov ?cg_list[1][23],1 : return
if $lbg_name == "g0301" mov ?cg_list[1][24],1 : return
if $lbg_name == "g0302" mov ?cg_list[1][25],1 : return
if $lbg_name == "g0401" mov ?cg_list[1][26],1 : return
if $lbg_name == "g0402" mov ?cg_list[1][27],1 : return
if $lbg_name == "g0404" mov ?cg_list[1][28],1 : return
if $lbg_name == "g0403" mov ?cg_list[1][29],1 : return
if $lbg_name == "ep702" mov ?cg_list[1][30],1 : return
if $lbg_name == "ep703_b" mov ?cg_list[1][31],1 : return
if $lbg_name == "ep704_b" mov ?cg_list[1][32],1 : return
if $lbg_name == "ep705_4" mov ?cg_list[1][33],1 : return
if $lbg_name == "ep801" mov ?cg_list[1][34],1 : return
if $lbg_name == "ep802" mov ?cg_list[1][35],1 : return
if $lbg_name == "ep803" mov ?cg_list[1][36],1 : return
if $lbg_name == "ep805" mov ?cg_list[1][37],1 : return
if $lbg_name == "ep806" mov ?cg_list[1][38],1 : return
if $lbg_name == "ep807_a" mov ?cg_list[1][39],1 : return
if $lbg_name == "ep808" mov ?cg_list[1][40],1 : return
if $lbg_name == "ep809_b" mov ?cg_list[1][41],1 : return
if $lbg_name == "ep810_a1" mov ?cg_list[1][42],1 : return
if $lbg_name == "ep811" mov ?cg_list[1][43],1 : return
if $lbg_name == "ep812" mov ?cg_list[1][44],1 : return
if $lbg_name == "c0406" mov ?cg_list[1][45],1 : return
if $lbg_name == "ep814_d2" mov ?cg_list[1][46],1 : return
if $lbg_name == "ep815_1_" mov ?cg_list[1][47],1 : return
if $lbg_name == "ep815_2_" mov ?cg_list[1][48],1 : return
if $lbg_name == "ep816" mov ?cg_list[1][49],1 : return
if $lbg_name == "ep817" mov ?cg_list[1][50],1 : return
if $lbg_name == "e0401_b" mov ?cg_list[1][51],1 : return
if $lbg_name == "ep818" mov ?cg_list[1][52],1 : return
if $lbg_name == "eve_last2" mov ?cg_list[1][53],1 : return
if $lbg_name == "wic_c" mov ?cg_list[1][54],1 : return
if $lbg_name == "evc_c" mov ?cg_list[1][55],1 : return
if $lbg_name == "dlc_d1" mov ?cg_list[1][56],1 : return
if $lbg_name == "fec_a" mov ?cg_list[1][57],1 : return
if $lbg_name == "bec_a" mov ?cg_list[1][58],1 : return
if $lbg_name == "brc_er" mov ?cg_list[1][59],1 : return
if $lbg_name == "lac_a3" mov ?cg_list[1][60],1 : return
if $lbg_name == "wrc_a" mov ?cg_list[1][61],1 : return
if $lbg_name == "erc_ra" mov ?cg_list[1][62],1 : return
if $lbg_name == "enc_a1" mov ?cg_list[1][63],1 : return
if $lbg_name == "bac_ga2n" mov ?cg_list[1][64],1 : return
if $lbg_name == "c_c0205_a" mov ?cg_list[1][65],1 : return
if $lbg_name == "c_c0401_la" mov ?cg_list[1][66],1 : return
if $lbg_name == "c_c0404_b" mov ?cg_list[1][67],1 : return
if $lbg_name == "c_c0902_a" mov ?cg_list[1][68],1 : return
if $lbg_name == "c_e0102_a" mov ?cg_list[1][69],1 : return
if $lbg_name == "c_e0103_la" mov ?cg_list[1][70],1 : return
if $lbg_name == "c_e0305_c" mov ?cg_list[1][71],1 : return
if $lbg_name == "portrait5" mov ?cg_list[1][72],1 : return
if $lbg_name == "portrait6" mov ?cg_list[1][73],1 : return
;These two are obtained after completing ura7 and ura8
if $lbg_name == "portrait_ep7" mov ?cg_list[1][74],1 : return
if $lbg_name == "portrait_ep8" mov ?cg_list[1][75],1 : return
;These two are obtained when all the rest are obtained
if $lbg_name == "package03" mov ?cg_list[1][76],1 : return
if $lbg_name == "package04" mov ?cg_list[1][77],1 : return

return

;**************************************************
; lv plays voices and manipulates lips
;**************************************************

*lv
*load_voice
getparam %lv_ch,$lv_f,$lv_v

if %no_log_gen == 1 jumpf 
jnskip
	if %lv_ch == 0 mov ?voice_s[0],0 : mov ?voice_s[1],0 : mov ?voice_s[2],0 : mov ?voice_s[3],0 : mov ?voice_s[4],0 : mov ?voice_s[5],0 : mov ?voice_s[6],0 : return
	return
~

if %animated_lips != off tree_get $lv_t,3,$lv_f

mov $lv_p,"sound\voice\" + $lv_f + "\" + $lv_v + ".ogg"
if %no_log_gen == 1 && %lv_ch == 0 lv_setlog %lv_ch,$lv_p,1 : return
if %no_log_gen == 1 lv_setlog %lv_ch,$lv_p,0 : return

;Character voice selection disabler 
atoi %lv_f,$lv_f
add %lv_f,8100
if %%lv_f == 2 jumpf

;Leave a note
mov ?voice_s[%lv_ch],1
if %lv_ch > 2 add %lv_ch,40
if %animated_lips = on lips_channel %lv_ch,$lv_t
if %animated_lips = on if %lv_f == 8199 || %lv_f == 8100 gosub *lv_special ;Handle specific folders that may have special lipsync
dwaveload %lv_ch,$lv_p

if %lv_ch != 0 : jumpf
	if ?voice_s[6] = 1 dwaveplay 46
	if ?voice_s[5] = 1 dwaveplay 45
	if ?voice_s[4] = 1 dwaveplay 44
	if ?voice_s[3] = 1 dwaveplay 43
	if ?voice_s[2] = 1 dwaveplay 2
	if ?voice_s[1] = 1 dwaveplay 1
	if ?voice_s[0] = 1 dwaveplay 0
	mov ?voice_s[0],0
	mov ?voice_s[1],0
	mov ?voice_s[2],0
	mov ?voice_s[3],0
	mov ?voice_s[4],0
	mov ?voice_s[5],0 
	mov ?voice_s[6],0
~

if %enable_cache == 0 || %no_cache_atm == 1 return ; we do know that this may be invoked in menus, fix if it creates us issues
lookahead exlv,2,$lv_tmp1a,$lv_tmp1b,$lv_tmp2a,$lv_tmp2b,$lv_tmp3a,$lv_tmp3b,$lv_tmp4a,$lv_tmp4b,$lv_tmp5a,$lv_tmp5b
for %lv_f = lv_tmp1a to lv_tmp5a
	if $%lv_f != "" mov %lv_p,%lv_f+5 : async_cache_snd 1,"sound\voice\" + $%lv_f + "\" + $%lv_p + ".ogg"
next

return

*lv_special

if %CHIRU_MODE = 1 || %lv_f != 8199 jumpf
	if $lv_v == "awase0016" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg3","rg2" : return
	if $lv_v == "awase0017" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg3","rg2" : return
	if $lv_v == "awase0018" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg2" : return
	if $lv_v == "awase0019" lips_channel %lv_ch,"rg6","rg5","rg2" : return
	if $lv_v == "awase0020" lips_channel %lv_ch,"s41","s45" : return
	if $lv_v == "awase0021" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg3","rg2" : return
	if $lv_v == "awase0029" lips_channel %lv_ch,"ev2","kas" : return
	if $lv_v == "alcmix0002" lips_channel %lv_ch,"rg4","rg2" : return
	return
~

if %CHIRU_MODE = 0 || %lv_f != 8100 jumpf
	if $lv_v == "awase7004_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7003_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6096_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6023_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6025_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6026_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6029_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6031_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6033_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6034_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6036_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6037_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6040_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6041_o" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6042_o" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6043_o" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6047_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6054_o" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase6058_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6059_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6067_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6071_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6074_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6078_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6082_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6083_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6084_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6085_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6088_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6089_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6022_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6014_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6012_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6010_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6008_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6006_o2" lips_channel %lv_ch,"fur" : return
	if $lv_v == "awase5007_o" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg3","rg2" : return
	if $lv_v == "awase6044_o" lips_channel %lv_ch,"kan","sha","jes" : return
	if $lv_v == "awase6100_o" lips_channel %lv_ch,"fea","ber" : return
	if $lv_v == "awase8005_o" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase8012_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8016_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8024_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8025_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "52100342_o" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase7016_o" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase7013_o" lips_channel %lv_ch,"rg2","rg1","sha" : return
	if $lv_v == "awase8025_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7009_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8028_o" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase8029_o" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase8030_o" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase6081_o" lips_channel %lv_ch,"rg7","rg6","rg5" : return
	if $lv_v == "awase6006_o" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase5001" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase5002" lips_channel %lv_ch,"nan","ros","kir","rud","hid","eva","nat","cla" : return
	if $lv_v == "awase5003" lips_channel %lv_ch,"rg7","rg5" : return
	if $lv_v == "awase5004" lips_channel %lv_ch,"goh","sha" : return
	if $lv_v == "awase5005" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase5006" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase5007" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg3","rg2" : return
	if $lv_v == "awase5008" lips_channel %lv_ch,"kum","kan" : return
	if $lv_v == "awase6001" lips_channel %lv_ch,"bea","but" : return
	if $lv_v == "awase6002" lips_channel %lv_ch,"bea","but" : return
	if $lv_v == "awase6003" lips_channel %lv_ch,"bea","but" : return
	if $lv_v == "awase6004" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase6005" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase6006" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6007" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6008" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6009" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6010" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6011" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6012" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6013" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6014" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6015" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6016" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6017" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6018" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6019" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6020" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6021" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6022" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6023" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6024" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6025" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6026" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6027" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6028" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6029" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6030" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6031" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6032" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6033" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6034" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6035" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6036" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6037" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6038" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6039" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6040" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6041" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6042" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6043" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6045" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6046" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6047" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6048" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6049" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6050" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6051" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6052" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6053" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6054" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase6055" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6056" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6057" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6058" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6059" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6060" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase6061" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase6062" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6063" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6064" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6065" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6066" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6067" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6068" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6069" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6070" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6071" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6072" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6073" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6074" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6075" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6076" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase6077" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6078" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6079" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6080" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6081" lips_channel %lv_ch,"rg7","rg6","rg5" : return
	if $lv_v == "awase6082" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6083" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6084" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6085" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6086" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6087" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6088" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6089" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6090" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6091" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6092" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6093" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6094" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6095" lips_channel %lv_ch,"bea","but" : return
	if $lv_v == "awase6096" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase6097" lips_channel %lv_ch,"sha","geo" : return
	if $lv_v == "awase6098" lips_channel %lv_ch,"sha","geo" : return
	if $lv_v == "awase6099" lips_channel %lv_ch,"bea","but" : return
	if $lv_v == "awase6100" lips_channel %lv_ch,"fea","ber" : return
	if $lv_v == "awase7003" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7004" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7005" lips_channel %lv_ch,"rg3","rg2","rg1" : return
	if $lv_v == "awase7006" lips_channel %lv_ch,"rg3","rg2","rg1" : return
	if $lv_v == "awase7007" lips_channel %lv_ch,"rg3","rg2","rg1" : return
	if $lv_v == "awase7008" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7009" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7010" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7011" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7012" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7013" lips_channel %lv_ch,"rg2","rg1","sha" : return
	if $lv_v == "awase7014" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase7015" lips_channel %lv_ch,"sha","jes" : return
	if $lv_v == "awase7016" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase8001" lips_channel %lv_ch,"kan","sha" : return
	if $lv_v == "awase8002" lips_channel %lv_ch,"kum","goh","sha" : return
	if $lv_v == "awase8003" lips_channel %lv_ch,"mar","but","geo","jes" : return
	if $lv_v == "awase8004" lips_channel %lv_ch,"enj","eva" : return
	if $lv_v == "awase8005" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase8006" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8007" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8008" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8009" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8010" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8011" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8012" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8013" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase8014" lips_channel %lv_ch,"cor","ger" : return
	if $lv_v == "awase8015" lips_channel %lv_ch,"rg7","rg6","rg5","rg4","rg3","rg2" : return
	if $lv_v == "awase8016" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8023" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8024" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8025" lips_channel %lv_ch,"fur","zep" : return
	if $lv_v == "awase8026" lips_channel %lv_ch,"enj","but" : return
	if $lv_v == "awase8027" lips_channel %lv_ch,"eri","enj" : return
	if $lv_v == "awase8028" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase8029" lips_channel %lv_ch,"lam","ber" : return
	if $lv_v == "awase8030" lips_channel %lv_ch,"lam","ber" : return
~

return

;**************************************************
; vv quickly changes voice volume
;**************************************************

*vv
*voice_volume
getparam ?voice_s[0]

if %no_log_gen == 0 jumpf 
	vv_setlog ?voice_s[0]
	return
~

chvol 0,%dlg_vol * ?voice_s[0] / 100
chvol 1,%dlg_vol * ?voice_s[0] / 100
chvol 2,%dlg_vol * ?voice_s[0] / 100
chvol 43,%dlg_vol * ?voice_s[0] / 100
chvol 44,%dlg_vol * ?voice_s[0] / 100
chvol 45,%dlg_vol * ?voice_s[0] / 100
chvol 46,%dlg_vol * ?voice_s[0] / 100

return

;*******************************************************
;Add a layer above the screen (1 - grey|2 - red|3 - sepia)
*mono

getparam %Free1

notif %Free1 = off jumpf

mov %monoflg,off
monocro off
return

~

if %Free1 = 1 mov %monoflg,1 : monocro #cccccc
if %Free1 = 2 mov %monoflg,2 : monocro #ff4444
if %Free1 = 3 mov %monoflg,3 : monocro #c8ab82

return

;*******************************************************************
;Video related system
;*******************************************************************

;plays masked video
;Example: anim bgsp,"no80",1
;anim_mode (1 - single_play / 0 - looped play)
*anim
getparam %anim_sprite,$anim_file,%anim_mode,%anim_alpha
csp_slot %anim_sprite
jskip
	if $anim_file == "no64" mov %anim_file,0 : mov %8635,1
	if $anim_file != "no64" mov %anim_file,1
	if $anim_file != "no64" mov $anim_file,"video\masked\"+$anim_file+".m2v"
	if $anim_file == "no64" && %video_res == 1 mov $anim_file,"video\720p\"+$anim_file+".mp4"
	if $anim_file == "no64" && %video_res == 0 mov $anim_file,"video\1080p\"+$anim_file+".mp4"
	if %anim_alpha == 1 mov %anim_file,0 ;turn alpha off

	lsp %anim_sprite,"*10"
	mov %vid_play,-%anim_sprite
	video $anim_file,0,%anim_mode,%anim_file,0 : resettimer
~
mov %anim_alpha,0

return

*anim2
getparam %anim_sprite,$anim_file,%anim_mode,%anim_alpha
csp_slot %anim_sprite
jskip
	if $anim_file == "no64" mov %anim_file,0 : mov %8635,1
	if $anim_file != "no64" mov %anim_file,1
	if $anim_file != "no64" mov $anim_file,"video\masked\"+$anim_file+".m2v"
	if $anim_file == "no64" && %video_res == 1 mov $anim_file,"video\720p\"+$anim_file+".mp4"
	if $anim_file == "no64" && %video_res == 0 mov $anim_file,"video\1080p\"+$anim_file+".mp4"
	if %anim_alpha == 1 mov %anim_file,0 ;turn alpha off

	lsp2 %anim_sprite,"*10"
	mov %vid_play,-%anim_sprite
	set_hotspot %anim_sprite,"960","1080"
	video $anim_file,0,%anim_mode,%anim_file,0 : resettimer
~
mov %anim_alpha,0
return


;plays mpg files (720p/1080p)
;Example: pam bgsp,"op",0
*pam
getparam %anim_sprite,$anim_file,%anim_mode
jnskip_s return ~

gosub *pam_audio

;video
mov $anim_sprite,"video"
if %legacy_op = 1 && $anim_file = "op" mov $anim_sprite,"legacy"
if $anim_file = "op_new" mov $anim_file,"op"
if %video_res = 1 mov $anim_file,$anim_sprite+"\720p\"+$anim_file+".mp4"
if %video_res = 0 mov $anim_file,$anim_sprite+"\1080p\"+$anim_file+".mp4"

fileexist %track_id,$anim_file
if %track_id == 0 return ;do not play missing videos

lsp %anim_sprite,"*10"

;PARAMS: filename, click, no_loop, alpha=0, audio=1, subtitles=0, sub_file=""
video $anim_file,0,1,0,0,0,$anim_mode : print 1
if %anim_file == 1 dwaveplay 9

mov %vid_play,%anim_sprite

if %anim_mode == on lr_trap *pam_end
waitvideo
mov %anim_mode,off
lr_trap off
*pam_end
if %anim_mode == on lr_trap off ;%anim_mode is left on on trap

_csp %anim_sprite
dwavestop 9

return

*pam_audio

dwavestop 9 ;audio uses me 9 channel
mov $anim_mode,"" ;reset subs

if $anim_file != "op_new" jumpf
	dwaveload 9,"sound\bgm\op.ogg" 
	goto *pam_sfx_ok
~

if $anim_file != "op" jumpf
	if %legacy_op == off dwaveload 9,"sound\bgm\op.ogg" 
	if %legacy_op == on  dwaveload 9,"legacy\bgm\op.ogg" 
	mov %track_id,1012 : goto *pam_audio_ok
~

if $anim_file != "op4" jumpf
	dwaveload 9,"sound\bgm\tiruop.ogg" 
	mov %track_id,1014 : goto *pam_audio_ok
~

if $anim_file != "op56" jumpf
	dwaveload 9,"sound\bgm\ep5_op.ogg" 
	mov %track_id,1017 : goto *pam_audio_ok
~

if $anim_file != "op78" jumpf
	dwaveload 9,"sound\bgm\ep7_op.ogg" 
	mov %track_id,1018 : goto *pam_audio_ok
~

fileexist %anim_file,"sound\pam\"+$anim_file+".ogg"
if %anim_file == 1 dwaveload 9,"sound\pam\"+$anim_file+".ogg" : goto *pam_sfx_ok

return

*pam_audio_ok
	;Unlock in musicbox
	mov %music_box_tmp,music_box_count + %track_id
	if %%music_box_tmp == 0 mov %%music_box_tmp,1 : inc %music_box_count
	;Add subtitles
	gosub *Sub_List
	mov $anim_mode,$track_id

*pam_sfx_ok
	;Set the volume
	mov %me_current_vol_7,%sfx_vol
	chvol 9,%me_current_vol_7
	;Mark as loaded
	mov %anim_file,1
return

;*******************************************************************
;Title: Umineko no time
;Purpose: Construction of a sound-related system
;*******************************************************************

;****************************Aim***********************************
;BGM play
;A bit simplified from the previous version
;*******************************************************************

*bgmplay
	getparam %BGM_Id,%Rel_vol_bgm,%BGM_Once
	gosub *bgmplay_base
return

*bgmplay2
	getparam %BGM_Id,%Rel_vol_bgm,%BGM_Once
	mov %track_id,%BGM_Id
	gosub *Sub_List
	if $track_id != "" ssa_load 8,$track_id,30 ;reduce rate if lags
	gosub *bgmplay_base
return

*bgmplay_base
	;Unlock in MusicBox and increment the unlocked amount
	mov %music_box_tmp,music_box_count + %BGM_Id
	if %%music_box_tmp == 0 mov %%music_box_tmp,1 : inc %music_box_count

	;Save for settings
	mov %bgm_current_id,%BGM_Id 
	mov %bgm_current_vol,%Rel_vol_bgm

	;Calculate the real volume
	if %Rel_vol_bgm != 0 mov %Rel_vol_bgm,%bgm_vol * %Rel_vol_bgm / 100

	;Get $BGM_Play and $BGM_Title
	gosub *BGM_List
	if $BGM_Play = "off" mov %bgm_current_id,0 : mov %bgm_title_delay,0 : jumpf
		jskip_s
		abgm_prop %Rel_vol_bgm,0,0,1 ;remove the previous props
		bgmvol %Rel_vol_bgm
		if %BGM_Once == 0 bgm $BGM_Play
		if %BGM_Once == 1 bgmonce $BGM_Play
		gosub *bgmtitle
	~
return

*bgmtitle
		enable_transitions 748,0
		aspt ypos,748,-100,200 ;remove if still here
		sptwait ypos,748
		_csp 748
		if %bgm_chapter_display == 0 mov %bgm_title_delay,0 : return
		border_pad_push 3
		lsp 748,":s;#FFFFFF`{p:7:♪"+$BGM_Title+"}",18,-100
		border_pad_pop
		spt ypos,748,0,%bgm_title_delay
		mov %bgm_title_delay,0
		aspt ypos,748,12,200
		spt ypos,748,0,6000
		aspt ypos,748,-100,200
		;make invisible in case of quakes?
		spt alpha,748,0,7100
		aspt alpha,748,0,1
return

;****************************Aim***********************************
;ME play
;A bit simplified from the previous version
;*******************************************************************

*meplay
getparam %Me_Channel,%Me_Number,%Rel_vol_me
;Real ME channels are 3+ (whether params use 1+)
add %Me_Channel,2
;Save for settings
if %Me_Channel = 3 mov %me_current_vol_1,%Rel_vol_me : mov %me_enable_1,1 : mov %me_num_1,%Me_Number
if %Me_Channel = 4 mov %me_current_vol_2,%Rel_vol_me : mov %me_enable_2,1 : mov %me_num_2,%Me_Number
if %Me_Channel = 5 mov %me_current_vol_3,%Rel_vol_me : mov %me_enable_3,1 : mov %me_num_3,%Me_Number
if %Me_Channel = 6 mov %me_current_vol_4,%Rel_vol_me : mov %me_enable_4,1 : mov %me_num_4,%Me_Number
if %Me_Channel = 7 mov %me_current_vol_5,%Rel_vol_me : mov %me_enable_5,1 : mov %me_num_5,%Me_Number
if %Me_Channel = 8 mov %me_current_vol_6,%Rel_vol_me : mov %me_enable_6,1 : mov %me_num_6,%Me_Number
if %Me_Channel = 9 mov %me_current_vol_7,%Rel_vol_me : mov %me_enable_7,1 : mov %me_num_7,%Me_Number
;Calculate the real volume
if %Rel_vol_me != 0 mov %Rel_vol_me,%sfx_vol * %Rel_vol_me / 100
;Clear the channel
dwavestop %Me_Channel
if %Me_Number = -1 && %Me_Channel = 3 mov %me_enable_1,0
if %Me_Number = -1 && %Me_Channel = 4 mov %me_enable_2,0
if %Me_Number = -1 && %Me_Channel = 5 mov %me_enable_3,0
if %Me_Number = -1 && %Me_Channel = 6 mov %me_enable_4,0
if %Me_Number = -1 && %Me_Channel = 7 mov %me_enable_5,0
if %Me_Number = -1 && %Me_Channel = 8 mov %me_enable_6,0
if %Me_Number = -1 && %Me_Channel = 9 mov %me_enable_7,0

if %Me_Number = -1 jumpf
	tree_get $Me_Play,5,%Me_Number ;Grab $ME_Play with file
	if $Me_Play = "off" jumpf
	ch_wait %Me_Channel
	jskip_s
	dwaveload %Me_Channel,$Me_Play
	chvol %Me_Channel,%Rel_vol_me
	dwaveplayloop %Me_Channel
~
notif $Me_Play = "off" jumpf
	if %Me_Channel = 3 mov %me_enable_1,0
	if %Me_Channel = 4 mov %me_enable_2,0
	if %Me_Channel = 5 mov %me_enable_3,0
	if %Me_Channel = 6 mov %me_enable_4,0
	if %Me_Channel = 7 mov %me_enable_5,0
	if %Me_Channel = 8 mov %me_enable_6,0
	if %Me_Channel = 9 mov %me_enable_7,0
~
return

;****************************Aim***********************************
;SE play
;A bit simplified from the previous version
;*******************************************************************

*seplay
	getparam %Se_Channel,%Se_Number,%Rel_vol_se
	;Real SE channels are 10+ (3 voices, 6 ME)
	add %Se_Channel,9
	if %Rel_vol_se != 0 mov %Rel_vol_se,%sfx_vol * %Rel_vol_se / 100 ;Calculate the real volume
	dwavestop %Se_Channel ;Clear the channel
jskip
	if %Se_Number != 1100 tree_get $Se_Play,4,%Se_Number
	if %Se_Number == 1100 gosub *Se_Play_List
	ch_wait %Se_Channel
	dwaveload %Se_Channel,$Se_Play ;Load, set volume, play
	chvol %Se_Channel,%Rel_vol_se
	dwaveplay %Se_Channel
~
	if %enable_cache == 0 return ; we do know that this may be invoked in menus, fix if it creates us issues
	lookahead exse,1,$se_tmp1,$se_tmp2,$se_tmp3,$se_tmp4,$se_tmp5
	for %Se_Channel = se_tmp1 to se_tmp5
		if $%Se_Channel != "" && $%Se_Channel != "1100" tree_get $Se_Play,4,$%Se_Channel : async_cache_snd 2,$Se_Play
		if $%Se_Channel == "1100" atoi %Se_Number,$%Se_Channel : gosub *Se_Play_List : async_cache_snd 2,$Se_Play
	next
return

;*******************************************************************
;Volume control
;*******************************************************************

*vol_bgm
	getparam %Rel_vol_bgm,%Vol_dur
	jnskip_s mov %Vol_dur,0 ~
	;Calculate the real volume
	if %Rel_vol_bgm == 0 mov %bgm_current_vol,0 : jumpf
	if %Rel_vol_bgm == -1 mov %bgm_current_vol,0 : jumpf
		mov %bgm_current_vol,%Rel_vol_bgm
		mov %Rel_vol_bgm,%bgm_vol * %Rel_vol_bgm / 100 
	~
	if %Vol_dur == 0 abgm_prop %Rel_vol_bgm
	if %Vol_dur != 0 abgm_prop %Rel_vol_bgm,%Vol_dur
	if %Rel_vol_bgm == -1 mov %bgm_current_id,0 : mov %Rel_vol_bgm,0 ;disable bgm
	mov %Vol_dur,0
return

*vol_me
	getparam %Me_Channel,%Rel_vol_me,%Vol_dur
	jnskip_s mov %Vol_dur,0 ~
	;Real ME channels are 3+ (whether params use 1+)
	add %Me_Channel,2
	;Calculate the real volume
	if %Rel_vol_me == 0 jumpf
	if %Rel_vol_me == -1 jumpf
		mov %Rel_vol_me,%sfx_vol * %Rel_vol_me / 100
	~
	if %Vol_dur == 0 ach_prop %Me_Channel,%Rel_vol_me
	if %Vol_dur != 0 ach_prop %Me_Channel,%Rel_vol_me,%Vol_dur
	;Disable channels
	if %Me_Channel = 3 && %Rel_vol_me == -1 mov %me_enable_1,0 : mov %Rel_vol_me,0
	if %Me_Channel = 4 && %Rel_vol_me == -1 mov %me_enable_2,0 : mov %Rel_vol_me,0
	if %Me_Channel = 5 && %Rel_vol_me == -1 mov %me_enable_3,0 : mov %Rel_vol_me,0
	if %Me_Channel = 6 && %Rel_vol_me == -1 mov %me_enable_4,0 : mov %Rel_vol_me,0
	if %Me_Channel = 7 && %Rel_vol_me == -1 mov %me_enable_5,0 : mov %Rel_vol_me,0
	if %Me_Channel = 8 && %Rel_vol_me == -1 mov %me_enable_6,0 : mov %Rel_vol_me,0
	if %Me_Channel = 9 && %Rel_vol_me == -1 mov %me_enable_7,0 : mov %Rel_vol_me,0
	;Save the volume
	if %Me_Channel = 3 mov %me_current_vol_1,%Rel_vol_me
	if %Me_Channel = 4 mov %me_current_vol_2,%Rel_vol_me
	if %Me_Channel = 5 mov %me_current_vol_3,%Rel_vol_me
	if %Me_Channel = 6 mov %me_current_vol_4,%Rel_vol_me
	if %Me_Channel = 7 mov %me_current_vol_5,%Rel_vol_me
	if %Me_Channel = 8 mov %me_current_vol_6,%Rel_vol_me
	if %Me_Channel = 9 mov %me_current_vol_7,%Rel_vol_me
	mov %Vol_dur,0
return

*vol_se
	getparam %Se_Channel,%Rel_vol_se,%Vol_dur
	jnskip_s mov %Vol_dur,0 ~
	;Real SE channels are 10+ (3 voices, 6 ME)
	add %Se_Channel,9
	;Calculate the real volume
	if %Rel_vol_se == 0 jumpf
	if %Rel_vol_se == -1 jumpf
		mov %Rel_vol_se,%sfx_vol * %Rel_vol_se / 100
	~
	if %Vol_dur == 0 ach_prop %Se_Channel,%Rel_vol_se
	if %Vol_dur != 0 ach_prop %Se_Channel,%Rel_vol_se,%Vol_dur
	mov %Vol_dur,0
return

*vol_mix_fade
	getparam %Vol_dur

	jnskip_s mov %Vol_dur,0 ~

	;ME
	ach_prop 3,-1,%Vol_dur
	ach_prop 4,-1,%Vol_dur
	ach_prop 5,-1,%Vol_dur
	ach_prop 6,-1,%Vol_dur
	ach_prop 7,-1,%Vol_dur
	ach_prop 8,-1,%Vol_dur
	ach_prop 9,-1,%Vol_dur

	mov %me_enable_1,0
	mov %me_current_vol_1,0
	mov %me_enable_2,0
	mov %me_current_vol_2,0
	mov %me_enable_3,0
	mov %me_current_vol_3,0
	mov %me_enable_4,0
	mov %me_current_vol_4,0
	mov %me_enable_5,0
	mov %me_current_vol_5,0
	mov %me_enable_6,0
	mov %me_current_vol_6,0
	mov %me_enable_7,0
	mov %me_current_vol_7,0

	;SE
	ach_prop 10,-1,%Vol_dur
	ach_prop 11,-1,%Vol_dur
	ach_prop 12,-1,%Vol_dur
	ach_prop 13,-1,%Vol_dur
	ach_prop 14,-1,%Vol_dur
	ach_prop 15,-1,%Vol_dur
	ach_prop 16,-1,%Vol_dur
	ach_prop 17,-1,%Vol_dur
	ach_prop 18,-1,%Vol_dur
	ach_prop 19,-1,%Vol_dur
	ach_prop 20,-1,%Vol_dur
	ach_prop 21,-1,%Vol_dur
	ach_prop 22,-1,%Vol_dur
	ach_prop 23,-1,%Vol_dur
	ach_prop 24,-1,%Vol_dur
	ach_prop 25,-1,%Vol_dur

	mov %Vol_dur,0

return

;--------------------
;Reset BGM 
;Stops bgm, resets its volume
;--------------------

*E_B
	;Stop playing BGM
	stop
	loopbgmstop
	mov %bgm_current_id,0

	;Reset the volume settings
	vol_bgm %bgm_vol
return

*E_M1
	dwavestop 3
	mov %me_enable_1,0
	mov %me_current_vol_1,100
	vol_me 1,%sfx_vol
return

*E_M2
	dwavestop 4
	mov %me_enable_2,0
	mov %me_current_vol_2,100
	vol_me 2,%sfx_vol
return

*E_M3
	dwavestop 5
	mov %me_enable_3,0
	mov %me_current_vol_3,100
	vol_me 3,%sfx_vol
return

*E_M4
	dwavestop 6
	mov %me_enable_4,0
	mov %me_current_vol_4,100
	vol_me 4,%sfx_vol
return

*E_M5
	dwavestop 7
	mov %me_enable_5,0
	mov %me_current_vol_5,100
	vol_me 5,%sfx_vol
return

*E_M6
	dwavestop 8
	mov %me_enable_6,0
	mov %me_current_vol_6,100
	vol_me 6,%sfx_vol
return

*E_M7
	dwavestop 9
	mov %me_enable_7,0
	mov %me_current_vol_7,100
	vol_me 7,%sfx_vol
return

;--------------------
;Reset ME All 
;Stops ME, resets their volumes
;--------------------

*E_MA
	E_M1
	E_M2
	E_M3
	E_M4
	E_M5
	E_M6
	E_M7
return

;--------------------
;Reset SE All 
;Stops SE, resets their volumes
;--------------------

*E_SA

;Stop playing SE
dwavestop 10
dwavestop 11
dwavestop 12
dwavestop 13
dwavestop 14
dwavestop 15
dwavestop 16
dwavestop 17
dwavestop 18
dwavestop 19
dwavestop 20
dwavestop 21
dwavestop 22
dwavestop 23
dwavestop 24
dwavestop 25

;Reset the volume settings
chvol 10,%sfx_vol
chvol 11,%sfx_vol
chvol 12,%sfx_vol
chvol 13,%sfx_vol
chvol 14,%sfx_vol
chvol 15,%sfx_vol
chvol 16,%sfx_vol
chvol 17,%sfx_vol
chvol 18,%sfx_vol
chvol 19,%sfx_vol
chvol 20,%sfx_vol
chvol 21,%sfx_vol
chvol 22,%sfx_vol
chvol 23,%sfx_vol
chvol 24,%sfx_vol
chvol 25,%sfx_vol

return

*effect_vol

vol_me 1,%me_current_vol_1
vol_me 2,%me_current_vol_2
vol_me 3,%me_current_vol_3
vol_me 4,%me_current_vol_4
vol_me 5,%me_current_vol_5
vol_me 6,%me_current_vol_6
vol_me 7,%me_current_vol_7

chvol 10,%sfx_vol
chvol 11,%sfx_vol
chvol 12,%sfx_vol
chvol 13,%sfx_vol
chvol 14,%sfx_vol
chvol 15,%sfx_vol
chvol 16,%sfx_vol
chvol 17,%sfx_vol
chvol 18,%sfx_vol
chvol 19,%sfx_vol
chvol 20,%sfx_vol
chvol 21,%sfx_vol
chvol 22,%sfx_vol
chvol 23,%sfx_vol
chvol 24,%sfx_vol
chvol 25,%sfx_vol

return

*voice_vol

chvol 0,%dlg_vol
chvol 1,%dlg_vol
chvol 2,%dlg_vol
chvol 43,%dlg_vol
chvol 44,%dlg_vol
chvol 45,%dlg_vol
chvol 46,%dlg_vol

return

;--------------------
;Reset All 
;Stops bgm, voice, SE, ME, resets their volumes
;--------------------

*E_A
	E_B
	E_MA
	E_SA
	;Stop the voices
	dwavestop 0
	dwavestop 1
	dwavestop 2
	dwavestop 43
	dwavestop 44
	dwavestop 45
	dwavestop 46

	;Reset voice volume
	voice_vol
return

;--------------------
;Reset All 
;Stops bgm, voice, SE, ME but does not reset their variables
;--------------------

*E_MA2
    ;Stop playing ME
    dwavestop 3
    dwavestop 4
    dwavestop 5
    dwavestop 6
    dwavestop 7
    dwavestop 8
    dwavestop 9
return

;Load system
*load_system

gosub *chain_sprites

;E_MA2

;Load ME
if %me_enable_1 = 1 meplay 1,%me_num_1,%me_current_vol_1
if %me_enable_2 = 1 meplay 2,%me_num_2,%me_current_vol_2
if %me_enable_3 = 1 meplay 3,%me_num_3,%me_current_vol_3
if %me_enable_4 = 1 meplay 4,%me_num_4,%me_current_vol_4
if %me_enable_5 = 1 meplay 5,%me_num_5,%me_current_vol_5
if %me_enable_6 = 1 meplay 6,%me_num_6,%me_current_vol_6
if %me_enable_7 = 1 meplay 7,%me_num_7,%me_current_vol_7

;The variables might be set to on, and a random csp call might enable the icons
mov %skip_icon,off : vsp TextCC3SpNum,0
mov %autom_icon,off : vsp TextCC4SpNum,0

;Load rain
rain_style %rain_style
z_override_preserve
for %Free1 = 0 to 123
    mov %Free2,?rain_s[%Free1][1]
    mov %Free3,?rain_s[%Free1][2]
    mov %Free4,?rain_s[%Free1][3]
    mov %Free5,?rain_s[%Free1][4]
    mov %Free6,?rain_s[%Free1][5]
    mov %Free9,?rain_s[%Free1][6]

    mov %Free7,%Free1*2
    mov %Free7,997-%Free7

    if ?rain_s[%Free1][0] == on rain_load %Free7,%Free9
    if ?rain_s[%Free1][0] == on rain_params %Free7,%Free3,%Free4,%Free5
    if ?rain_s[%Free1][0] == on && %Free6 == on rain_pause %Free7
next
z_override_preserve

if %skip_flg == off skip_off
if %skip_flg == on skip_on

if %cur_wndmode == off gosub *apply_msgwnd_settings
gosub *update_textspeed
mov $chapter_bak,$cur_character
mov $chapter_rmode,$name_chapter_r_click
mov $chapter_rsave,$name_chapter_save

; ep8 choicepoints are saved/loaded entirely in script.
; savechoices puts choicepoint string to a variable when saving, and then when loading,
; we restore it with loadchoices before generating the log.
; Variables... should already be set correctly, so I think there is no need to call ep8 varset.
clearlog 1
loadchoices $log_choices
mov %log_is_generated_to_cvs,-1
gosub *log_generate
; ensure we have a fully read log (even in case we crashed during saving read messages in the past).
mark_all_read

;There is no need to call update_msgwnd, but var correction is important
mov $cur_character,$chapter_bak
mov $name_chapter_r_click,$chapter_rmode
mov $name_chapter_save,$chapter_rsave

if %snow_sprite > 0 snow %snow_sprite : jumpf
	snow -1
~

;Load BGM title
if %bgm_current_id != 0 _csp 748 : gosub *BGM_List : gosub *bgmtitle
_csp 746 ;no chapter titles

;So that we save after loading
mov %TextCC12Flag,1

textshow
print 1
texton
screenflip 1

return

;<><><><><><><><><><><><><><><><><><><><>
;Fade music %mode,%fade_duration

*fede
getparam %Free1,%Free9

;%bm_pt variable stands for fade step time
;Every fade is done in 10 steps
mov %bm_pt,%Free9/10

if %Free1 = 0 goto *fede_0 ;Fade out all
if %Free1 = 1 goto *fede_10 ;Fade out BGM
if %Free1 = 10 goto *fede_1 ;Fade out ME
if %Free1 = 11 goto *fede_11 ;Fade out ME1
if %Free1 = 12 goto *fede_11 ;Fade out ME2
if %Free1 = 13 goto *fede_11 ;Fade out ME3
if %Free1 = 14 goto *fede_11 ;Fade out ME4
if %Free1 = 15 goto *fede_11 ;Fade out ME5
if %Free1 = 16 goto *fede_11 ;Fade out ME6
if %Free1 = 17 goto *fede_11 ;Fade out ME7

;Fade out all
*fede_0 

;Free11~Free19 will contain current volume levels
mov %Free1,Free11
mov %%Free1,%bgm_current_vol

mov %Free3,me_current_vol_1
for %Free1 = Free12 to Free19
	mov %%Free1,%%Free3
	inc %Free3
next

;multiply the volumes by 10 to avoid floats
mov %Free21,%bgm_current_vol*10  ;bgm
mov %Free22,%me_current_vol_1*10 ;ch3
mov %Free23,%me_current_vol_2*10 ;ch4
mov %Free24,%me_current_vol_3*10 ;ch5
mov %Free25,%me_current_vol_4*10 ;ch6
mov %Free26,%me_current_vol_5*10 ;ch7
mov %Free27,%me_current_vol_6*10 ;ch8
mov %Free28,%me_current_vol_7*10 ;ch9

;Start fading out the volume
for %Free1 = 1 to 10
	resettimer      ;Reset the internal timer
	
	;Reduction calculation
	sub %Free21,%Free11
	sub %Free22,%Free12
	sub %Free23,%Free13
	sub %Free24,%Free14
	sub %Free25,%Free15
	sub %Free26,%Free16
	sub %Free27,%Free17
	sub %Free28,%Free18

	mov %bgm_current_vol,%Free21/10
	mov %me_current_vol_1,%Free22/10
	mov %me_current_vol_2,%Free23/10
	mov %me_current_vol_3,%Free24/10
	mov %me_current_vol_4,%Free25/10
	mov %me_current_vol_5,%Free26/10
	mov %me_current_vol_6,%Free27/10
	mov %me_current_vol_7,%Free28/10
	
	vol_bgm %bgm_current_vol
	vol_me 1,%me_current_vol_1
	vol_me 2,%me_current_vol_2
	vol_me 3,%me_current_vol_3
	vol_me 4,%me_current_vol_4
	vol_me 5,%me_current_vol_5
	vol_me 6,%me_current_vol_6
	vol_me 7,%me_current_vol_7
	
	waittimer %bm_pt   ;Internal wait timer
next

;Reset everything and return
wait 500
E_A
return

;ME Fade out
*fede_1

;Free12~Free19 will contain current volume levels
mov %Free3,me_current_vol_1
for %Free1 = Free12 to Free19
	mov %%Free1,%%Free3
	inc %Free3
next

;multiply the volumes by 10 to avoid floats
mov %Free22,%me_current_vol_1*10 ;ch3
mov %Free23,%me_current_vol_2*10 ;ch4
mov %Free24,%me_current_vol_3*10 ;ch5
mov %Free25,%me_current_vol_4*10 ;ch6
mov %Free26,%me_current_vol_5*10 ;ch7
mov %Free27,%me_current_vol_6*10 ;ch8
mov %Free28,%me_current_vol_7*10 ;ch9

;Start fading out the volume
for %Free1 = 1 to 10
	resettimer      ;Reset the internal timer
	
	;Reduction calculation
	sub %Free22,%Free12
	sub %Free23,%Free13
	sub %Free24,%Free14
	sub %Free25,%Free15
	sub %Free26,%Free16
	sub %Free27,%Free17
	sub %Free28,%Free18

	mov %me_current_vol_1,%Free22/10
	mov %me_current_vol_2,%Free23/10
	mov %me_current_vol_3,%Free24/10
	mov %me_current_vol_4,%Free25/10
	mov %me_current_vol_5,%Free26/10
	mov %me_current_vol_6,%Free27/10
	mov %me_current_vol_7,%Free28/10
	
	vol_me 1,%me_current_vol_1
	vol_me 2,%me_current_vol_2
	vol_me 3,%me_current_vol_3
	vol_me 4,%me_current_vol_4
	vol_me 5,%me_current_vol_5
	vol_me 6,%me_current_vol_6
	vol_me 7,%me_current_vol_7
	
	waittimer %bm_pt   ;Internal wait timer
next


;Reset everything and return
wait 500
E_MA
return

;BGM Fade out
*fede_10

mov %Free11,%bgm_current_vol
mov %Free21,%bgm_current_vol*10

;Start fading out the volume
for %Free1 = 1 to 10
	resettimer      ;Reset the internal timer
	
	;Reduction calculation
	sub %Free21,%Free11
	mov %bgm_current_vol,%Free21/10

	vol_bgm %bgm_current_vol	

	waittimer %bm_pt   ;Internal wait timer
next

;Reset bgm and return
wait 500
E_B
return

;Fade out ME + number
*fede_11

if %Free1 = 11 mov %Free11,%me_current_vol_1 : mov %Free13,1
if %Free1 = 12 mov %Free11,%me_current_vol_2 : mov %Free13,2
if %Free1 = 13 mov %Free11,%me_current_vol_3 : mov %Free13,3
if %Free1 = 14 mov %Free11,%me_current_vol_4 : mov %Free13,4
if %Free1 = 15 mov %Free11,%me_current_vol_5 : mov %Free13,5
if %Free1 = 16 mov %Free11,%me_current_vol_6 : mov %Free13,6
if %Free1 = 17 mov %Free11,%me_current_vol_7 : mov %Free13,7

mov %Free21,%Free11*10

;Start fading out the volume
for %Free1 = 1 to 10
	resettimer      ;Reset the internal timer
	
	;Reduction calculation
	sub %Free21,%Free11
	if %Free13 = 1 mov %me_current_vol_1,%Free21/10 : vol_me %Free13,%me_current_vol_1
	if %Free13 = 2 mov %me_current_vol_2,%Free21/10 : vol_me %Free13,%me_current_vol_2
	if %Free13 = 3 mov %me_current_vol_3,%Free21/10 : vol_me %Free13,%me_current_vol_3
	if %Free13 = 4 mov %me_current_vol_4,%Free21/10 : vol_me %Free13,%me_current_vol_4
	if %Free13 = 5 mov %me_current_vol_5,%Free21/10 : vol_me %Free13,%me_current_vol_5
	if %Free13 = 6 mov %me_current_vol_6,%Free21/10 : vol_me %Free13,%me_current_vol_6
	if %Free13 = 7 mov %me_current_vol_7,%Free21/10 : vol_me %Free13,%me_current_vol_7

	waittimer %bm_pt   ;Internal wait timer
next

;Reset me channel and return
wait 500
if %Free1 = 11 E_M1
if %Free1 = 12 E_M2
if %Free1 = 13 E_M3
if %Free1 = 14 E_M4
if %Free1 = 15 E_M5
if %Free1 = 16 E_M6
if %Free1 = 17 E_M7
return

;<><><><><><><><><><><><><><><><><><><><>
;Change ME volume levels to provided (%duration,ME1-7 volume)
;Disable BGM at the same time
*cross1
getparam %Free9,%Free1,%Free2,%Free3,%Free4,%Free5,%Free6,%Free7

sub %Free1,%me_current_vol_1 : div %Free1,10	; (40-70):10 = -3
sub %Free2,%me_current_vol_2 : div %Free2,10
sub %Free3,%me_current_vol_3 : div %Free3,10
sub %Free4,%me_current_vol_4 : div %Free4,10
sub %Free5,%me_current_vol_5 : div %Free5,10
sub %Free6,%me_current_vol_6 : div %Free6,10
sub %Free7,%me_current_vol_7 : div %Free7,10

;Milliseconds per one step
mov %crosstimer,%Free9/10

for %Free8 = 1 to 10
	resettimer
	
	;Decrease BGM volume
	sub %bgm_current_vol,%bgm_current_vol/10	; 70-(70:10) = 63

	;Calculate ME volume
	mov %Free11,Free1
	for %Free16 = me_current_vol_1 to me_current_vol_7
		notif %Free11 = 0 add %%Free16,%%Free11
	    inc %Free11
	next

	vol_bgm %bgm_current_vol
	vol_me 1,%me_current_vol_1
	vol_me 2,%me_current_vol_2
	vol_me 3,%me_current_vol_3
	vol_me 4,%me_current_vol_4
	vol_me 5,%me_current_vol_5
	vol_me 6,%me_current_vol_6
	vol_me 7,%me_current_vol_7

	waittimer %crosstimer   ;Internal wait timer
next
E_B

if %me_current_vol_1 < 1 E_M1
if %me_current_vol_2 < 1 E_M2
if %me_current_vol_3 < 1 E_M3
if %me_current_vol_4 < 1 E_M4
if %me_current_vol_5 < 1 E_M5
if %me_current_vol_6 < 1 E_M6
if %me_current_vol_7 < 1 E_M7

return

*cross2
;Change BGM volume level to provided (%duration,BGM volume)
;Disable ME1-7 at the same time
getparam %Free9,%Free1

sub %Free1,%bgm_current_vol : div %Free1,10

;Milliseconds per one step
mov %crosstimer,%Free9/10

for %Free16 = 1 to 10
    resettimer      ;Reset the internal timer

    ;Calculate BGM volume
    add %bgm_current_vol,%Free1

    ;Reduction of Me
	for %Free11 = me_current_vol_1 to me_current_vol_7
		notif %%Free11 = 0 sub %%Free11,%%Free11/10
	next

    vol_bgm %bgm_current_vol
    vol_me 1,%me_current_vol_1
    vol_me 2,%me_current_vol_2
    vol_me 3,%me_current_vol_3
    vol_me 4,%me_current_vol_4
    vol_me 5,%me_current_vol_5
    vol_me 6,%me_current_vol_4
    vol_me 7,%me_current_vol_5

    waittimer %crosstimer   ;Internal wait timer
next

E_MA
if %bgm_current_vol = 0 E_B
return


;Smoothly increase/decrease volume to specified values
;(bgm) (Me1) (Me2) (Me3) (Me4) (Me5) (duration)
*fedexx

getparam %Fede_bgmv,%Fede_Me1v,%Fede_Me2v,%Fede_Me3v,%Fede_Me4v,%Fede_Me5v,%Fede_wait

;Check what to change (zero by default)
if %Fede_bgmv >= 0 && %Fede_bgmv <= 100 mov %Fede_bgmvflg,1
if %Fede_Me1v >= 0 && %Fede_Me1v <= 100 mov %Fede_Me1vflg,1
if %Fede_Me2v >= 0 && %Fede_Me2v <= 100 mov %Fede_Me2vflg,1
if %Fede_Me3v >= 0 && %Fede_Me3v <= 100 mov %Fede_Me3vflg,1
if %Fede_Me4v >= 0 && %Fede_Me4v <= 100 mov %Fede_Me4vflg,1
if %Fede_Me5v >= 0 && %Fede_Me5v <= 100 mov %Fede_Me5vflg,1

if %Fede_bgmv = %bgm_current_vol mov %Fede_bgmvflg,0
if %Fede_Me1v = %me_current_vol_1 mov %Fede_Me1vflg,0
if %Fede_Me2v = %me_current_vol_2 mov %Fede_Me2vflg,0
if %Fede_Me3v = %me_current_vol_3 mov %Fede_Me3vflg,0
if %Fede_Me4v = %me_current_vol_4 mov %Fede_Me4vflg,0
if %Fede_Me5v = %me_current_vol_5 mov %Fede_Me5vflg,0

;Calculate volume difference

mov %Free5,Fede_bgmvflg2 	;BGM volume change direction (on = down, off = up)
mov %Free4,Fede_bgmv2    	;BGM volume difference
mov %Free2,Fede_bgmv     	;BGM volume specified
mov %Free3,bgm_current_vol	;BGM volume current

for %Free1 = Fede_bgmvflg to Fede_Me5vflg

	;Skip if change flag is set to zero
	if %%Free1 = 0 jumpf

		;Set difference value to (unsigned)(current_volume - specified_volume)
		;Decide whether to increase or decrease the volume in direction flag accordingly
		if %%Free2 < %%Free3  mov %%Free4,%%Free3 : sub %%Free4,%%Free2 : mov %%Free5,on
		if %%Free2 > %%Free3  mov %%Free4,%%Free2 : sub %%Free4,%%Free3 : mov %%Free5,off

	~

	inc %Free2
	;In old times bgm_current_vol+1 = me_current_vol_1, emulate this
	if %Free3 = bgm_current_vol mov %Free3,me_current_vol_1-1
	inc %Free3
	inc %Free4
	inc %Free5

next

;Calculate volume difference for 10 steps (setup vars)

mov %Free3,Fede_bgmv4    ;BGM volume difference per step
mov %Free6,Fede_bgmv2    ;BGM volume difference

;Volume current values for first step, multiply by 100 to avoid floats
mov %Fede_bgmv3,%bgm_current_vol
mov %Fede_Me1v3,%me_current_vol_1
mov %Fede_Me2v3,%me_current_vol_2
mov %Fede_Me3v3,%me_current_vol_3
mov %Fede_Me4v3,%me_current_vol_4
mov %Fede_Me5v3,%me_current_vol_5

mul %Fede_bgmv3,100 
mul %Fede_Me1v3,100
mul %Fede_Me2v3,100
mul %Fede_Me3v3,100
mul %Fede_Me4v3,100
mul %Fede_Me5v3,100


;Update vars

;wait in ms per step
mov %bm_pt,%Fede_wait/10

for %Free1 = Fede_bgmvflg to Fede_Me5vflg

	;Skip if change flag is set to zero
	if %%Free1 = 0 jumpf

		mov %%Free3,%%Free6
		mul %%Free3,100
		div %%Free3,10

	~

	inc %Free3
	inc %Free4
	inc %Free6

next

;Run volume change

for %Free9 = 1 to 10

	resettimer      ;Reset the internal timer

	mov %Free2,Fede_bgmv3   ;BGM volume current per step
	mov %Free3,Fede_bgmv4   ;BGM volume difference per step
	mov %Free5,Fede_bgmvflg2
	mov %Free6,Free11    	;Volume variable "pointer"


	;Volume difference calculation
	for %Free1 = Fede_bgmvflg to Fede_Me5vflg

		if %%Free1 = 0 jumpf

			if %%Free5 = on  sub %%Free2,%%Free3
			if %%Free5 = off add %%Free2,%%Free3

			mov %%Free6,%%Free2

			div %%Free6,100

		~

		inc %Free2
		inc %Free3
		inc %Free5
		inc %Free6

	next

	if %Fede_bgmvflg = 1 vol_bgm %Free11
	if %Fede_Me1vflg = 1 vol_me 1,%Free12
	if %Fede_Me2vflg = 1 vol_me 2,%Free13
	if %Fede_Me3vflg = 1 vol_me 3,%Free14
	if %Fede_Me4vflg = 1 vol_me 4,%Free15
	if %Fede_Me5vflg = 1 vol_me 5,%Free16

	waittimer %bm_pt   ;Internal wait timer

next

;Finalise the values and save them
if %Fede_bgmvflg = 1 vol_bgm %Fede_bgmv : mov %bgm_current_vol,%Fede_bgmv
if %Fede_Me1vflg = 1 vol_me 1,%Fede_Me1v : mov %me_current_vol_1,%Fede_Me1v
if %Fede_Me2vflg = 1 vol_me 2,%Fede_Me2v : mov %me_current_vol_2,%Fede_Me2v
if %Fede_Me3vflg = 1 vol_me 3,%Fede_Me3v : mov %me_current_vol_3,%Fede_Me3v
if %Fede_Me4vflg = 1 vol_me 4,%Fede_Me4v : mov %me_current_vol_4,%Fede_Me4v
if %Fede_Me5vflg = 1 vol_me 5,%Fede_Me5v : mov %me_current_vol_5,%Fede_Me5v

;Disable flags by default
for %Free1 = Fede_bgmv to Fede_Me5v4
	mov %%Free1,0
next

return


*flg_p

;Values directly from PS3 script
mov %flg_number_tx,700
mov %flg_number_ty,-900
mov %flg_number_ox,800
mov %flg_number_oy,-900

inc %flg_number_o

if %flg_number_o = 1 mov $flg_pass1,":a;graphics\system\num\1.png" : jumpf
if %flg_number_o = 2 mov $flg_pass1,":a;graphics\system\num\2.png" : jumpf
if %flg_number_o = 3 mov $flg_pass1,":a;graphics\system\num\3.png" : jumpf
if %flg_number_o = 4 mov $flg_pass1,":a;graphics\system\num\4.png" : jumpf
if %flg_number_o = 5 mov $flg_pass1,":a;graphics\system\num\5.png" : jumpf
if %flg_number_o = 6 mov $flg_pass1,":a;graphics\system\num\6.png" : jumpf
if %flg_number_o = 7 mov $flg_pass1,":a;graphics\system\num\7.png" : jumpf
if %flg_number_o = 8 mov $flg_pass1,":a;graphics\system\num\8.png" : jumpf
if %flg_number_o = 9 mov $flg_pass1,":a;graphics\system\num\9.png" : jumpf
	;More than 9
	mov $flg_pass1,":a;graphics\system\num\0.png"
	mov %flg_number_o,0
	inc %flg_number_t
~

if %flg_number_t = 1 mov $flg_pass10,":a;graphics\system\num\1.png"
if %flg_number_t = 2 mov $flg_pass10,":a;graphics\system\num\2.png"
if %flg_number_t = 3 mov $flg_pass10,":a;graphics\system\num\3.png"
if %flg_number_t = 4 mov $flg_pass10,":a;graphics\system\num\4.png"
if %flg_number_t = 5 mov $flg_pass10,":a;graphics\system\num\5.png"
if %flg_number_t = 6 mov $flg_pass10,":a;graphics\system\num\6.png"
if %flg_number_t = 7 mov $flg_pass10,":a;graphics\system\num\7.png"
if %flg_number_t = 8 mov $flg_pass10,":a;graphics\system\num\8.png"
if %flg_number_t = 9 mov $flg_pass10,":a;graphics\system\num\9.png"
if %flg_number_t = 10 mov $flg_pass10,":a;graphics\system\num\0.png" : mov %flg_number_t,0
if %flg_number_t = 0 jumpf
	lsp2 flg_sp2,$flg_pass10,%flg_number_tx,%flg_number_ty
~

notif %flg_number_t = 0 vsp2 flg_sp2,1 : jumpf
	csp2 flg_sp2
~

lsp2 flg_sp3,$flg_pass1,%flg_number_ox,%flg_number_oy

; Taken from chiru.file
set_hotspot flg_sp2,"73","135" ; taken from chiru.file
set_hotspot flg_sp3,"73","135" ; taken from chiru.file

;Print with a sound effect
seplay 1,70,100
print 1

return

*BGM_List

if %BGM_Id == 0	mov $BGM_Play,"off" : mov $BGM_Title,"" : return
if %BGM_Id == 1	mov $BGM_Play,"sound\bgm\umib_001.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 2	mov $BGM_Play,"sound\bgm\umib_002.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 3	mov $BGM_Play,"sound\bgm\umib_003.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 4	mov $BGM_Play,"sound\bgm\umib_004.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 5	mov $BGM_Play,"sound\bgm\umib_005.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 6	mov $BGM_Play,"sound\bgm\umib_006.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 7	mov $BGM_Play,"sound\bgm\umib_007.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 8	mov $BGM_Play,"sound\bgm\umib_008.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 9	mov $BGM_Play,"sound\bgm\umib_009.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 10	mov $BGM_Play,"sound\bgm\umib_010.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 11	mov $BGM_Play,"sound\bgm\umib_011.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 12 	mov $BGM_Play,"sound\bgm\umib_012.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 13	mov $BGM_Play,"sound\bgm\umib_013.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 14	mov $BGM_Play,"sound\bgm\umib_014.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 15	mov $BGM_Play,"sound\bgm\umib_015.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 16	mov $BGM_Play,"sound\bgm\umib_016.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 17	mov $BGM_Play,"sound\bgm\umib_017.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 18	mov $BGM_Play,"sound\bgm\umib_018.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 19	mov $BGM_Play,"sound\bgm\umib_019.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 20	mov $BGM_Play,"sound\bgm\umib_020.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 21	mov $BGM_Play,"sound\bgm\umib_021.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 22	mov $BGM_Play,"sound\bgm\umib_022.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 23	mov $BGM_Play,"sound\bgm\umib_023.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 24	mov $BGM_Play,"sound\bgm\umib_024.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 25	mov $BGM_Play,"sound\bgm\umib_025.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 26	mov $BGM_Play,"sound\bgm\umib_026.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 27	mov $BGM_Play,"sound\bgm\umib_027.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 28	mov $BGM_Play,"sound\bgm\umib_028.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 29	mov $BGM_Play,"sound\bgm\umib_029.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 30	mov $BGM_Play,"sound\bgm\umib_030.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 31	mov $BGM_Play,"sound\bgm\umib_031.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 32	mov $BGM_Play,"sound\bgm\umib_032.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 33	mov $BGM_Play,"sound\bgm\umib_033.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 34	mov $BGM_Play,"sound\bgm\umib_034.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 35	mov $BGM_Play,"sound\bgm\umib_035.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 36	mov $BGM_Play,"sound\bgm\umib_036.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 37	mov $BGM_Play,"sound\bgm\umib_037.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 38	mov $BGM_Play,"sound\bgm\umib_038.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 39	mov $BGM_Play,"sound\bgm\umib_039.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 40	mov $BGM_Play,"sound\bgm\umib_040.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 41	mov $BGM_Play,"sound\bgm\umib_041.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 42	mov $BGM_Play,"sound\bgm\umib_042.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 43	mov $BGM_Play,"sound\bgm\umib_043.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 44	mov $BGM_Play,"sound\bgm\umib_044.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 45	mov $BGM_Play,"sound\bgm\umib_045.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 46	mov $BGM_Play,"sound\bgm\umib_046.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 47	mov $BGM_Play,"sound\bgm\umib_047.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 48	mov $BGM_Play,"sound\bgm\umib_048.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 49	mov $BGM_Play,"sound\bgm\umib_049.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 50	mov $BGM_Play,"sound\bgm\umib_050.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 51	mov $BGM_Play,"sound\bgm\umib_051.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 52	mov $BGM_Play,"sound\bgm\umib_052.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 53	mov $BGM_Play,"sound\bgm\umib_053.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 54	mov $BGM_Play,"sound\bgm\umib_054.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 55	mov $BGM_Play,"sound\bgm\umib_055.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 56	mov $BGM_Play,"sound\bgm\umib_056.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 57	mov $BGM_Play,"sound\bgm\umib_057.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 58	mov $BGM_Play,"sound\bgm\umib_058.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 59	mov $BGM_Play,"sound\bgm\umib_059.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 60	mov $BGM_Play,"sound\bgm\umib_060.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 61	mov $BGM_Play,"sound\bgm\umib_061.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 62	mov $BGM_Play,"sound\bgm\umib_062.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 63	mov $BGM_Play,"sound\bgm\umib_063.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 64	mov $BGM_Play,"sound\bgm\umib_064.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 65	mov $BGM_Play,"sound\bgm\umib_065.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 66	mov $BGM_Play,"sound\bgm\umib_066.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 67	mov $BGM_Play,"sound\bgm\umib_067.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 68	mov $BGM_Play,"sound\bgm\umib_068.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 69	mov $BGM_Play,"sound\bgm\umib_069.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 70	mov $BGM_Play,"sound\bgm\umib_070.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 71	mov $BGM_Play,"sound\bgm\umib_071.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 72	mov $BGM_Play,"sound\bgm\umib_072.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 73	mov $BGM_Play,"sound\bgm\umib_073.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 74	mov $BGM_Play,"sound\bgm\umib_074.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 75	mov $BGM_Play,"sound\bgm\umib_075.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 76	mov $BGM_Play,"sound\bgm\umib_076.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 77	mov $BGM_Play,"sound\bgm\umib_077.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 78	mov $BGM_Play,"sound\bgm\umib_078.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 79	mov $BGM_Play,"sound\bgm\umib_079.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 80	mov $BGM_Play,"sound\bgm\umib_080.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 81	mov $BGM_Play,"sound\bgm\umib_081.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 82	mov $BGM_Play,"sound\bgm\umib_082.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 83	mov $BGM_Play,"sound\bgm\umib_083.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 84	mov $BGM_Play,"sound\bgm\umib_084.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 85	mov $BGM_Play,"sound\bgm\umib_085.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 86	mov $BGM_Play,"sound\bgm\umib_086.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 87	mov $BGM_Play,"sound\bgm\umib_087.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 88	mov $BGM_Play,"sound\bgm\umib_088.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 89	mov $BGM_Play,"sound\bgm\umib_089.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 90	mov $BGM_Play,"sound\bgm\umib_090.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 91	mov $BGM_Play,"sound\bgm\umib_091.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 92	mov $BGM_Play,"sound\bgm\umib_092.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 93	mov $BGM_Play,"sound\bgm\umib_093.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 95	mov $BGM_Play,"sound\bgm\umib_095.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 96	mov $BGM_Play,"sound\bgm\umib_096.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 97	mov $BGM_Play,"sound\bgm\umib_097.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 98	mov $BGM_Play,"sound\bgm\umib_098.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 99	mov $BGM_Play,"sound\bgm\umib_099.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 100	mov $BGM_Play,"sound\bgm\umib_100.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 101	mov $BGM_Play,"sound\bgm\umib_101.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 102	mov $BGM_Play,"sound\bgm\umib_102.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 103	mov $BGM_Play,"sound\bgm\umib_103.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 104	mov $BGM_Play,"sound\bgm\umib_104.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 105	mov $BGM_Play,"sound\bgm\umib_105.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 106	mov $BGM_Play,"sound\bgm\umib_106.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 107	mov $BGM_Play,"sound\bgm\umib_107.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 108	mov $BGM_Play,"sound\bgm\umib_108.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 109	mov $BGM_Play,"sound\bgm\umib_109.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 110	mov $BGM_Play,"sound\bgm\umib_110.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 111 	mov $BGM_Play,"sound\bgm\umib_111.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 112 	mov $BGM_Play,"sound\bgm\umib_112.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 113 	mov $BGM_Play,"sound\bgm\umib_113.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 114 	mov $BGM_Play,"sound\bgm\umib_114.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 115 	mov $BGM_Play,"sound\bgm\umib_115.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 116 	mov $BGM_Play,"sound\bgm\umib_116.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 117 	mov $BGM_Play,"sound\bgm\umib_117.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 118 	mov $BGM_Play,"sound\bgm\umib_118.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 119 	mov $BGM_Play,"sound\bgm\umib_119.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 120 	mov $BGM_Play,"sound\bgm\umib_120.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 121 	mov $BGM_Play,"sound\bgm\umib_121.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 122 	mov $BGM_Play,"sound\bgm\umib_122.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 123 	mov $BGM_Play,"sound\bgm\umib_123.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 124 	mov $BGM_Play,"sound\bgm\umib_124.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 125 	mov $BGM_Play,"sound\bgm\umib_125.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 126 	mov $BGM_Play,"sound\bgm\umib_126.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 127 	mov $BGM_Play,"sound\bgm\umib_127.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 128 	mov $BGM_Play,"sound\bgm\umib_128.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 129 	mov $BGM_Play,"sound\bgm\umib_129.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 130 	mov $BGM_Play,"sound\bgm\umib_130.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 131 	mov $BGM_Play,"sound\bgm\umib_131.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 132 	mov $BGM_Play,"sound\bgm\umib_132.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 133 	mov $BGM_Play,"sound\bgm\umib_133.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 134 	mov $BGM_Play,"sound\bgm\umib_134.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 135 	mov $BGM_Play,"sound\bgm\umib_135.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 136 	mov $BGM_Play,"sound\bgm\umib_136.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 137 	mov $BGM_Play,"sound\bgm\umib_137.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 138 	mov $BGM_Play,"sound\bgm\umib_138.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 139 	mov $BGM_Play,"sound\bgm\umib_139.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 140 	mov $BGM_Play,"sound\bgm\umib_140.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 141 	mov $BGM_Play,"sound\bgm\umib_141.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 142 	mov $BGM_Play,"sound\bgm\umib_142.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 143 	mov $BGM_Play,"sound\bgm\umib_143.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 144 	mov $BGM_Play,"sound\bgm\umib_144.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 145 	mov $BGM_Play,"sound\bgm\umib_145.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 146 	mov $BGM_Play,"sound\bgm\umib_146.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 147 	mov $BGM_Play,"sound\bgm\umib_147.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 148 	mov $BGM_Play,"sound\bgm\umib_148.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 149 	mov $BGM_Play,"sound\bgm\umib_149.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 150 	mov $BGM_Play,"sound\bgm\umib_150.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 151 	mov $BGM_Play,"sound\bgm\umib_151.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 152 	mov $BGM_Play,"sound\bgm\umib_152.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 153 	mov $BGM_Play,"sound\bgm\umib_153.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 154 	mov $BGM_Play,"sound\bgm\umib_154.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 155 	mov $BGM_Play,"sound\bgm\umib_155.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 156 	mov $BGM_Play,"sound\bgm\umib_156.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 157 	mov $BGM_Play,"sound\bgm\umib_157.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 158 	mov $BGM_Play,"sound\bgm\umib_158.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 159 	mov $BGM_Play,"sound\bgm\umib_159.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 160 	mov $BGM_Play,"sound\bgm\umib_160.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 161 	mov $BGM_Play,"sound\bgm\umib_161.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 162 	mov $BGM_Play,"sound\bgm\umib_162.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 163 	mov $BGM_Play,"sound\bgm\umib_163.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 164 	mov $BGM_Play,"sound\bgm\umib_164.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 165 	mov $BGM_Play,"sound\bgm\umib_165.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 166 	mov $BGM_Play,"sound\bgm\umib_166.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 167 	mov $BGM_Play,"sound\bgm\umib_167.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 168 	mov $BGM_Play,"sound\bgm\umib_168.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 169 	mov $BGM_Play,"sound\bgm\umib_169.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 170 	mov $BGM_Play,"sound\bgm\umib_170.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 171 	mov $BGM_Play,"sound\bgm\umib_171.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 172 	mov $BGM_Play,"sound\bgm\umib_172.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 173 	mov $BGM_Play,"sound\bgm\umib_173.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 174 	mov $BGM_Play,"sound\bgm\umib_174.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 175 	mov $BGM_Play,"sound\bgm\umib_175.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 176 	mov $BGM_Play,"sound\bgm\umib_176.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 177 	mov $BGM_Play,"sound\bgm\umib_177.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 179 	mov $BGM_Play,"sound\bgm\umib_179.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 180 	mov $BGM_Play,"sound\bgm\umib_180.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 181 	mov $BGM_Play,"sound\bgm\umib_181.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 183 	mov $BGM_Play,"sound\bgm\umib_183.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 184 	mov $BGM_Play,"sound\bgm\umib_184.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 185 	mov $BGM_Play,"sound\bgm\umib_185.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 186 	mov $BGM_Play,"sound\bgm\umib_186.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 187 	mov $BGM_Play,"sound\bgm\umib_187.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 188 	mov $BGM_Play,"sound\bgm\umib_188.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 190 	mov $BGM_Play,"sound\bgm\umib_190.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 191 	mov $BGM_Play,"sound\bgm\umib_191.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 192 	mov $BGM_Play,"sound\bgm\umib_192.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 193 	mov $BGM_Play,"sound\bgm\umib_193.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 194 	mov $BGM_Play,"sound\bgm\umib_194.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 195 	mov $BGM_Play,"sound\bgm\umib_195.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 240 	mov $BGM_Play,"sound\bgm\umib_240.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 241 	mov $BGM_Play,"sound\bgm\umib_241.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1000	mov $BGM_Play,"sound\bgm\umib_1000.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1010	mov $BGM_Play,"sound\bgm\bgm_final.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1013  mov $BGM_Play,"sound\bgm\bgm_final_chiru.ogg" : gosub *bgm_title_language : return
;Extra
if %BGM_Id == 94	mov $BGM_Play,"sound\bgm\umib_094.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1011	mov $BGM_Play,"sound\bgm\system0.ogg" : gosub *bgm_title_language : return
if %legacy_op == off && %BGM_Id == 1012	mov $BGM_Play,"sound\bgm\op.ogg" : gosub *bgm_title_language : return
if %legacy_op == on  && %BGM_Id == 1012 mov $BGM_Play,"legacy\bgm\op.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1014	mov $BGM_Play,"sound\bgm\tiruop.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1017  mov $BGM_Play,"sound\bgm\ep5_op.ogg" : gosub *bgm_title_language : return
if %BGM_Id == 1018  mov $BGM_Play,"sound\bgm\ep7_op.ogg" : gosub *bgm_title_language : return


debug_str "BGM not found"

return

*bgm_title_language
mov $BGM_Title,"FIXME"
;en
if %bgm_title_language != 1 jumpf
if %BGM_Id == 1	mov $BGM_Title,"Thunberg Lily" : return
if %BGM_Id == 2	mov $BGM_Title,"Door of Summer" : return
if %BGM_Id == 3	mov $BGM_Title,"HANE (Feathers)" : return
if %BGM_Id == 4	mov $BGM_Title,"Ride on" : return
if %BGM_Id == 5	mov $BGM_Title,"sea" : return
if %BGM_Id == 6	mov $BGM_Title,"Hour of Darkness" : return
if %BGM_Id == 7	mov $BGM_Title,"Novelette" : return
if %BGM_Id == 8	mov $BGM_Title,"hope" : return
if %BGM_Id == 9	mov $BGM_Title,"White Shadow" : return
if %BGM_Id == 10	mov $BGM_Title,"steady pace" : return
if %BGM_Id == 11	mov $BGM_Title,"Towering cloud in summer" : return
if %BGM_Id == 12 	mov $BGM_Title,"Moonlit Night" : return
if %BGM_Id == 13	mov $BGM_Title,"Rose" : return
if %BGM_Id == 14	mov $BGM_Title,"At Death’s Door" : return
if %BGM_Id == 15	mov $BGM_Title,"Hell’s Halls" : return
if %BGM_Id == 16	mov $BGM_Title,"Fortitude" : return
if %BGM_Id == 17	mov $BGM_Title,"witch in gold(cembalo)" : return
if %BGM_Id == 18	mov $BGM_Title,"Beckoning" : return
if %BGM_Id == 19	mov $BGM_Title,"Fishy Aroma" : return
if %BGM_Id == 20	mov $BGM_Title,"stupefaction" : return
if %BGM_Id == 21	mov $BGM_Title,"praise" : return
if %BGM_Id == 22	mov $BGM_Title,"Pass" : return
if %BGM_Id == 23	mov $BGM_Title,"butterfly" : return
if %BGM_Id == 24	mov $BGM_Title,"goldenslaughterer" : return
if %BGM_Id == 25	mov $BGM_Title,"Worldend(bp)" : return
if %BGM_Id == 26	mov $BGM_Title,"The Witch of the Painting" : return
if %BGM_Id == 27	mov $BGM_Title,"suspicion" : return
if %BGM_Id == 28	mov $BGM_Title,"Scar in the Score" : return
if %BGM_Id == 29	mov $BGM_Title,"Core" : return
if %BGM_Id == 30	mov $BGM_Title,"Minute darkness" : return
if %BGM_Id == 31	mov $BGM_Title,"nighteyes" : return
if %BGM_Id == 32	mov $BGM_Title,"Closed My Heart" : return
if %BGM_Id == 33	mov $BGM_Title,"Requiem" : return
if %BGM_Id == 34	mov $BGM_Title,"mind" : return
if %BGM_Id == 35	mov $BGM_Title,"Worldend" : return
if %BGM_Id == 36	mov $BGM_Title,"play" : return
if %BGM_Id == 37	mov $BGM_Title,"system0" : return
if %BGM_Id == 38	mov $BGM_Title,"Voiceless" : return
if %BGM_Id == 39	mov $BGM_Title,"dead angle" : return
if %BGM_Id == 40	mov $BGM_Title,"Organ Short #600 Million in C Minor" : return
if %BGM_Id == 41	mov $BGM_Title,"Prison STRIP" : return
if %BGM_Id == 42	mov $BGM_Title,"String Quartet #1 in G Major — I.Allegro" : return
if %BGM_Id == 43	mov $BGM_Title,"cage" : return
if %BGM_Id == 44	mov $BGM_Title,"Golden Sneer" : return
if %BGM_Id == 45	mov $BGM_Title,"Scorpion Guts" : return
if %BGM_Id == 46	mov $BGM_Title,"Life's End (VerC)" : return
if %BGM_Id == 47	mov $BGM_Title,"Answer" : return
if %BGM_Id == 48	mov $BGM_Title,"Answer short" : return
if %BGM_Id == 49	mov $BGM_Title,"Melody inst.ver" : return
if %BGM_Id == 50	mov $BGM_Title,"Red Dread" : return
if %BGM_Id == 51	mov $BGM_Title,"moon" : return
if %BGM_Id == 52	mov $BGM_Title,"where" : return
if %BGM_Id == 53	mov $BGM_Title,"Dread of the grave" : return
if %BGM_Id == 54	mov $BGM_Title,"Worldend dominator" : return
if %BGM_Id == 55	mov $BGM_Title,"Black Liliana" : return
if %BGM_Id == 56	mov $BGM_Title,"Rest" : return
if %BGM_Id == 57	mov $BGM_Title,"End of a Daydream" : return
if %BGM_Id == 58	mov $BGM_Title,"Melody" : return
if %BGM_Id == 59	mov $BGM_Title,"Over the sky" : return
if %BGM_Id == 60	mov $BGM_Title,"sunny spot" : return
if %BGM_Id == 61	mov $BGM_Title,"The Candles Dance" : return
if %BGM_Id == 62	mov $BGM_Title,"Distant" : return
if %BGM_Id == 63	mov $BGM_Title,"psy-chorus" : return
if %BGM_Id == 64	mov $BGM_Title,"far" : return
if %BGM_Id == 65	mov $BGM_Title,"red shoes FAKE" : return
if %BGM_Id == 66	mov $BGM_Title,"mother" : return
if %BGM_Id == 67	mov $BGM_Title,"haze" : return
if %BGM_Id == 68	mov $BGM_Title,"Dancing Pipe" : return
if %BGM_Id == 69	mov $BGM_Title,"Dread of the grave -More fear-" : return
if %BGM_Id == 70	mov $BGM_Title,"Organ Short #200 Million in C Minor" : return
if %BGM_Id == 71	mov $BGM_Title,"rhythm-changer" : return
if %BGM_Id == 72	mov $BGM_Title,"happiness of marionette bonus" : return
if %BGM_Id == 73	mov $BGM_Title,"happiness of marionette" : return
if %BGM_Id == 74	mov $BGM_Title,"Dance of the Moon Rabbits" : return
if %BGM_Id == 75	mov $BGM_Title,"Melting away" : return
if %BGM_Id == 76	mov $BGM_Title,"soul of soul" : return
if %BGM_Id == 77	mov $BGM_Title,"miragecoordinator" : return
if %BGM_Id == 78	mov $BGM_Title,"prison" : return
if %BGM_Id == 79	mov $BGM_Title,"Thanks for being born" : return
if %BGM_Id == 80	mov $BGM_Title,"Wings" : return
if %BGM_Id == 81	mov $BGM_Title,"Paradise Lost" : return
if %BGM_Id == 82	mov $BGM_Title,"wingless" : return
if %BGM_Id == 83	mov $BGM_Title,"activepain" : return
if %BGM_Id == 84	mov $BGM_Title,"Dread of the grave -rhythm ver-" : return
if %BGM_Id == 85	mov $BGM_Title,"Eternity" : return
if %BGM_Id == 86	mov $BGM_Title,"over" : return
if %BGM_Id == 87	mov $BGM_Title,"Like the gale" : return
if %BGM_Id == 88	mov $BGM_Title,"F Style" : return
if %BGM_Id == 89	mov $BGM_Title,"Monochrome Clock" : return
if %BGM_Id == 90	mov $BGM_Title,"apathy" : return
if %BGM_Id == 91	mov $BGM_Title,"Mystic Forest" : return
if %BGM_Id == 92	mov $BGM_Title,"Sakutarou's Adventure" : return
if %BGM_Id == 93	mov $BGM_Title,"Parallel" : return
if %BGM_Id == 95	mov $BGM_Title,"599 million ruins" : return
if %BGM_Id == 96	mov $BGM_Title,"Happy Maria!(Instrumental)" : return
if %BGM_Id == 97	mov $BGM_Title,"Surrounding" : return
if %BGM_Id == 98	mov $BGM_Title,"open fire" : return
if %BGM_Id == 99	mov $BGM_Title,"death(from stupefaction)" : return
if %BGM_Id == 100	mov $BGM_Title,"mortal stampede" : return
if %BGM_Id == 101	mov $BGM_Title,"Victima propiciatoria" : return
if %BGM_Id == 102	mov $BGM_Title,"Revolt" : return
if %BGM_Id == 103	mov $BGM_Title,"Purgatory Catastrophe Rhapsodie" : return
if %BGM_Id == 104	mov $BGM_Title,"Happy Maria!" : return
if %BGM_Id == 105	mov $BGM_Title,"dive to emergency" : return
if %BGM_Id == 106	mov $BGM_Title,"dir" : return
if %BGM_Id == 107	mov $BGM_Title,"Endless Nine" : return
if %BGM_Id == 108	mov $BGM_Title,"dreamenddischarger" : return
if %BGM_Id == 109	mov $BGM_Title,"Discode" : return
if %BGM_Id == 110	mov $BGM_Title,"twirl"  : return
if %BGM_Id == 111 	mov $BGM_Title,"Future" : return
if %BGM_Id == 112 	mov $BGM_Title,"Deep Blue Jeer" : return
if %BGM_Id == 113 	mov $BGM_Title,"The Great Detective Knows" : return
if %BGM_Id == 114 	mov $BGM_Title,"Smileless Soirée" : return
if %BGM_Id == 115 	mov $BGM_Title,"one" : return
if %BGM_Id == 116 	mov $BGM_Title,"Spiral" : return
if %BGM_Id == 117 	mov $BGM_Title,"String Trio #600 Million in F-Sharp Minor" : return
if %BGM_Id == 118 	mov $BGM_Title,"Totenblume" : return
if %BGM_Id == 119 	mov $BGM_Title,"JUSTICE" : return
if %BGM_Id == 120 	mov $BGM_Title,"ACI-L" : return
if %BGM_Id == 121 	mov $BGM_Title,"Predator" : return
if %BGM_Id == 122 	mov $BGM_Title,"Proud-dust" : return
if %BGM_Id == 123 	mov $BGM_Title,"hello your dream" : return
if %BGM_Id == 124 	mov $BGM_Title,"A Lonely Deep-Sea Fish" : return
if %BGM_Id == 125 	mov $BGM_Title,"The Girls’ Witch Hunt" : return
if %BGM_Id == 126 	mov $BGM_Title,"Patchwork Chimera" : return
if %BGM_Id == 127 	mov $BGM_Title,"discolor" : return
if %BGM_Id == 128 	mov $BGM_Title,"resurrectedreplayer" : return
if %BGM_Id == 129 	mov $BGM_Title,"Final Answer" : return
if %BGM_Id == 130 	mov $BGM_Title,"light" : return
if %BGM_Id == 131 	mov $BGM_Title,"Bread of Life" : return
if %BGM_Id == 132 	mov $BGM_Title,"Promise" : return
if %BGM_Id == 133 	mov $BGM_Title,"Tomorrow" : return
if %BGM_Id == 134 	mov $BGM_Title,"WINGS(Ver hope)" : return
if %BGM_Id == 135 	mov $BGM_Title,"Fake Gray Smile" : return
if %BGM_Id == 136 	mov $BGM_Title,"Eternal Chains" : return
if %BGM_Id == 137 	mov $BGM_Title,"Love Examination" : return
if %BGM_Id == 138 	mov $BGM_Title,"Instant" : return
if %BGM_Id == 139 	mov $BGM_Title,"Look Back" : return
if %BGM_Id == 140 	mov $BGM_Title,"Blue Butterfly" : return
if %BGM_Id == 141 	mov $BGM_Title,"my dear" : return
if %BGM_Id == 142 	mov $BGM_Title,"Something’s Up & Going Down" : return
if %BGM_Id == 143 	mov $BGM_Title,"rog-limitation" : return
if %BGM_Id == 144 	mov $BGM_Title,"Waltz Op.34" : return
if %BGM_Id == 145 	mov $BGM_Title,"ALIVE" : return
if %BGM_Id == 146 	mov $BGM_Title,"birth of new witch(inst)" : return
if %BGM_Id == 147 	mov $BGM_Title,"ruriair" : return
if %BGM_Id == 148 	mov $BGM_Title,"Engage of marionette" : return
if %BGM_Id == 149 	mov $BGM_Title,"Life" : return
if %BGM_Id == 150 	mov $BGM_Title,"Loreley" : return
if %BGM_Id == 151 	mov $BGM_Title,"The Sin" : return
if %BGM_Id == 152 	mov $BGM_Title,"The first and The last" : return
if %BGM_Id == 153 	mov $BGM_Title,"Anti-Demon Sequentia" : return
if %BGM_Id == 154 	mov $BGM_Title,"battle field" : return
if %BGM_Id == 155 	mov $BGM_Title,"Rebirth" : return
if %BGM_Id == 156 	mov $BGM_Title,"The Way" : return
if %BGM_Id == 157 	mov $BGM_Title,"liberatedliberator" : return
if %BGM_Id == 158 	mov $BGM_Title,"Thanks for all people" : return
if %BGM_Id == 159 	mov $BGM_Title,"Infant Queen Bee" : return
if %BGM_Id == 160 	mov $BGM_Title,"birth of new witch(Short Ver)" : return
if %BGM_Id == 161 	mov $BGM_Title,"FISHYAROMA" : return
if %BGM_Id == 162 	mov $BGM_Title,"le4-octobre" : return
if %BGM_Id == 163 	mov $BGM_Title,"l&d-circulation" : return
if %BGM_Id == 164 	mov $BGM_Title,"reflection-call" : return
if %BGM_Id == 165 	mov $BGM_Title,"rain" : return
if %BGM_Id == 166 	mov $BGM_Title,"7-weights" : return
if %BGM_Id == 167 	mov $BGM_Title,"fall" : return
if %BGM_Id == 168 	mov $BGM_Title,"bore-ral" : return
if %BGM_Id == 169 	mov $BGM_Title,"ballade-continuer" : return
if %BGM_Id == 170 	mov $BGM_Title,"Song without a name ver.2007 inst" : return
if %BGM_Id == 171 	mov $BGM_Title,"lie-alaia" : return
if %BGM_Id == 172 	mov $BGM_Title,"Golden Nocturne(inst)" : return
if %BGM_Id == 173 	mov $BGM_Title,"far(flat)" : return
if %BGM_Id == 174 	mov $BGM_Title,"Toybox" : return
if %BGM_Id == 175 	mov $BGM_Title,"terminal entrance" : return
if %BGM_Id == 176 	mov $BGM_Title,"Puppet Show" : return
if %BGM_Id == 177 	mov $BGM_Title,"s/he-end" : return
if %BGM_Id == 179 	mov $BGM_Title,"Song without a name full-inst" : return
if %BGM_Id == 180 	mov $BGM_Title,"The End Of The World" : return
if %BGM_Id == 181 	mov $BGM_Title,"goddess-gardena" : return
if %BGM_Id == 183 	mov $BGM_Title,"ridicule" : return
if %BGM_Id == 184 	mov $BGM_Title,"Yomotsu Hirasaka Corruption" : return
if %BGM_Id == 185 	mov $BGM_Title,"the executioner" : return
if %BGM_Id == 186 	mov $BGM_Title,"Song without a name ver.sakura ED-size" : return
if %BGM_Id == 187 	mov $BGM_Title,"Stuffed Animal" : return
if %BGM_Id == 188 	mov $BGM_Title,"Bizarre Divertimento" : return
if %BGM_Id == 190 	mov $BGM_Title,"en-counse" : return
if %BGM_Id == 191 	mov $BGM_Title,"lixAxil" : return
if %BGM_Id == 192 	mov $BGM_Title,"Revelations(inst)" : return
if %BGM_Id == 193 	mov $BGM_Title,"Flying" : return
if %BGM_Id == 194 	mov $BGM_Title,"lastendconductor" : return
if %BGM_Id == 195 	mov $BGM_Title,"Revelations" : return
if %BGM_Id == 240 	mov $BGM_Title,"Cocoon of White Dreams -Ricordando il passato-" : return
if %BGM_Id == 241 	mov $BGM_Title,"When the Seagulls Cry" : return
if %BGM_Id == 1000	mov $BGM_Title,"SuiSui☆SWEETS(^-^)" : return
if %BGM_Id == 1010	mov $BGM_Title,"Bring The Fate" : return
if %BGM_Id == 1013  mov $BGM_Title,"Bring The Fate(Ver chiru)" : return
;Extra
if %BGM_Id == 94	mov $BGM_Title,"Tsurupettan" : return
if %BGM_Id == 1011	mov $BGM_Title,"system0(Original Version)" : return
if %legacy_op == off && %BGM_Id == 1012	mov $BGM_Title,"Igreja of Echoing Vows" : return
if %legacy_op == on  && %BGM_Id == 1012	mov $BGM_Title,"When the Seagulls Cry" : return
if %BGM_Id == 1014	mov $BGM_Title,"Inanna’s Dream" : return
if %BGM_Id == 1017  mov $BGM_Title,"The Witch of Occultics" : return
if %BGM_Id == 1018  mov $BGM_Title,"The Pithos in the Fog" : return
~
;translatiob
if %bgm_title_language != 2 jumpf 
gosub *bgm_locale_title
~
;jp
if %bgm_title_language != 3 jumpf
if %BGM_Id == 1	mov $BGM_Title,"透百合" : return
if %BGM_Id == 2	mov $BGM_Title,"夏の扉" : return
if %BGM_Id == 3	mov $BGM_Title,"HANE" : return
if %BGM_Id == 4	mov $BGM_Title,"Ride on" : return
if %BGM_Id == 5	mov $BGM_Title,"sea" : return
if %BGM_Id == 6	mov $BGM_Title,"暗闇の刻" : return
if %BGM_Id == 7	mov $BGM_Title,"Novelette" : return
if %BGM_Id == 8	mov $BGM_Title,"hope" : return
if %BGM_Id == 9	mov $BGM_Title,"白い影" : return
if %BGM_Id == 10	mov $BGM_Title,"てくてく" : return
if %BGM_Id == 11	mov $BGM_Title,"Towering cloud in summer" : return
if %BGM_Id == 12 	mov $BGM_Title,"月夜" : return
if %BGM_Id == 13	mov $BGM_Title,"薔薇" : return
if %BGM_Id == 14	mov $BGM_Title,"隣死" : return
if %BGM_Id == 15	mov $BGM_Title,"煉沙回廊" : return
if %BGM_Id == 16	mov $BGM_Title,"Fortitude" : return
if %BGM_Id == 17	mov $BGM_Title,"witch in gold(cembalo)" : return
if %BGM_Id == 18	mov $BGM_Title,"誘い" : return
if %BGM_Id == 19	mov $BGM_Title,"胡散の香り" : return
if %BGM_Id == 20	mov $BGM_Title,"stupefaction" : return
if %BGM_Id == 21	mov $BGM_Title,"praise" : return
if %BGM_Id == 22	mov $BGM_Title,"Pass" : return
if %BGM_Id == 23	mov $BGM_Title,"ageha" : return
if %BGM_Id == 24	mov $BGM_Title,"goldenslaughterer" : return
if %BGM_Id == 25	mov $BGM_Title,"Worldend(bp)" : return
if %BGM_Id == 26	mov $BGM_Title,"絵画の魔女" : return
if %BGM_Id == 27	mov $BGM_Title,"suspicion" : return
if %BGM_Id == 28	mov $BGM_Title,"痕音" : return
if %BGM_Id == 29	mov $BGM_Title,"Core" : return
if %BGM_Id == 30	mov $BGM_Title,"Minute darkness" : return
if %BGM_Id == 31	mov $BGM_Title,"nighteyes" : return
if %BGM_Id == 32	mov $BGM_Title,"Closed My Heart" : return
if %BGM_Id == 33	mov $BGM_Title,"Requiem" : return
if %BGM_Id == 34	mov $BGM_Title,"mind" : return
if %BGM_Id == 35	mov $BGM_Title,"Worldend" : return
if %BGM_Id == 36	mov $BGM_Title,"play" : return
if %BGM_Id == 37	mov $BGM_Title,"システム零" : return
if %BGM_Id == 38	mov $BGM_Title,"Voiceless" : return
if %BGM_Id == 39	mov $BGM_Title,"dead angle" : return
if %BGM_Id == 40	mov $BGM_Title,"オルガン小曲　第６億番　ハ単調" : return
if %BGM_Id == 41	mov $BGM_Title,"牢獄STRIP" : return
if %BGM_Id == 42	mov $BGM_Title,"弦楽四重奏曲第１番ト長調 — I.Allegro" : return
if %BGM_Id == 43	mov $BGM_Title,"cage" : return
if %BGM_Id == 44	mov $BGM_Title,"金色の嘲笑" : return
if %BGM_Id == 45	mov $BGM_Title,"サソリのハラワタ" : return
if %BGM_Id == 46	mov $BGM_Title,"終焉 VerC" : return
if %BGM_Id == 47	mov $BGM_Title,"Answer" : return
if %BGM_Id == 48	mov $BGM_Title,"Answer short" : return
if %BGM_Id == 49	mov $BGM_Title,"施律（シラベ）inst.ver" : return
if %BGM_Id == 50	mov $BGM_Title,"Red Dread" : return
if %BGM_Id == 51	mov $BGM_Title,"moon" : return
if %BGM_Id == 52	mov $BGM_Title,"where" : return
if %BGM_Id == 53	mov $BGM_Title,"Dread of the grave" : return
if %BGM_Id == 54	mov $BGM_Title,"Worldend dominator" : return
if %BGM_Id == 55	mov $BGM_Title,"黒のリリアナ" : return
if %BGM_Id == 56	mov $BGM_Title,"休息" : return
if %BGM_Id == 57	mov $BGM_Title,"白日夢の果て" : return
if %BGM_Id == 58	mov $BGM_Title,"施律（シラベ）" : return
if %BGM_Id == 59	mov $BGM_Title,"Over the sky" : return
if %BGM_Id == 60	mov $BGM_Title,"ひだまり" : return
if %BGM_Id == 61	mov $BGM_Title,"ロウソクたちが踊る" : return
if %BGM_Id == 62	mov $BGM_Title,"Haruka" : return
if %BGM_Id == 63	mov $BGM_Title,"psy-chorus" : return
if %BGM_Id == 64	mov $BGM_Title,"far" : return
if %BGM_Id == 65	mov $BGM_Title,"あかいくつ偽" : return
if %BGM_Id == 66	mov $BGM_Title,"mother" : return
if %BGM_Id == 67	mov $BGM_Title,"haze" : return
if %BGM_Id == 68	mov $BGM_Title,"踊る煙管" : return
if %BGM_Id == 69	mov $BGM_Title,"Dread of the grave -More fear-" : return
if %BGM_Id == 70	mov $BGM_Title,"オルガン小曲　第２億番　ハ単調" : return
if %BGM_Id == 71	mov $BGM_Title,"rhythm-changer" : return
if %BGM_Id == 72	mov $BGM_Title,"happiness of marionette omake" : return
if %BGM_Id == 73	mov $BGM_Title,"happiness of marionette" : return
if %BGM_Id == 74	mov $BGM_Title,"月うさぎの舞踏" : return
if %BGM_Id == 75	mov $BGM_Title,"Melting away" : return
if %BGM_Id == 76	mov $BGM_Title,"soul of soul" : return
if %BGM_Id == 77	mov $BGM_Title,"miragecoordinator" : return
if %BGM_Id == 78	mov $BGM_Title,"prison" : return
if %BGM_Id == 79	mov $BGM_Title,"生まれてきてくれてありがとう" : return
if %BGM_Id == 80	mov $BGM_Title,"翼" : return
if %BGM_Id == 81	mov $BGM_Title,"失楽園" : return
if %BGM_Id == 82	mov $BGM_Title,"wingless" : return
if %BGM_Id == 83	mov $BGM_Title,"activepain" : return
if %BGM_Id == 84	mov $BGM_Title,"Dread of the grave -rhythm ver-" : return
if %BGM_Id == 85	mov $BGM_Title,"久遠" : return
if %BGM_Id == 86	mov $BGM_Title,"over" : return
if %BGM_Id == 87	mov $BGM_Title,"Like the gale" : return
if %BGM_Id == 88	mov $BGM_Title,"F Style" : return
if %BGM_Id == 89	mov $BGM_Title,"Monochrome Clock" : return
if %BGM_Id == 90	mov $BGM_Title,"apathy" : return
if %BGM_Id == 91	mov $BGM_Title,"神秘の森" : return
if %BGM_Id == 92	mov $BGM_Title,"さくたろうの頑張り物語" : return
if %BGM_Id == 93	mov $BGM_Title,"Parallel" : return
if %BGM_Id == 95	mov $BGM_Title,"599 million ruins" : return
if %BGM_Id == 96	mov $BGM_Title,"Happy Maria!(Instrumental)" : return
if %BGM_Id == 97	mov $BGM_Title,"Surrounding" : return
if %BGM_Id == 98	mov $BGM_Title,"hibuta" : return
if %BGM_Id == 99	mov $BGM_Title,"death(from stupefaction)" : return
if %BGM_Id == 100	mov $BGM_Title,"mortal stampede" : return
if %BGM_Id == 101	mov $BGM_Title,"Victima propiciatoria" : return
if %BGM_Id == 102	mov $BGM_Title,"Revolt" : return
if %BGM_Id == 103	mov $BGM_Title,"煉獄凶狂葬曲" : return
if %BGM_Id == 104	mov $BGM_Title,"Happy Maria!" : return
if %BGM_Id == 105	mov $BGM_Title,"dive to emergency" : return
if %BGM_Id == 106	mov $BGM_Title,"dir" : return
if %BGM_Id == 107	mov $BGM_Title,"エンドレスナイン" : return
if %BGM_Id == 108	mov $BGM_Title,"dreamenddischarger" : return
if %BGM_Id == 109	mov $BGM_Title,"Discode" : return
if %BGM_Id == 110	mov $BGM_Title,"くるり"  : return
if %BGM_Id == 111 	mov $BGM_Title,"Future" : return
if %BGM_Id == 112 	mov $BGM_Title,"蒼色の冷笑" : return
if %BGM_Id == 113 	mov $BGM_Title,"名探偵は知っている" : return
if %BGM_Id == 114 	mov $BGM_Title,"笑み亡きソワレ" : return
if %BGM_Id == 115 	mov $BGM_Title,"one" : return
if %BGM_Id == 116 	mov $BGM_Title,"螺旋" : return
if %BGM_Id == 117 	mov $BGM_Title,"弦楽三重奏曲 第６億番 嬰ヘ短調" : return
if %BGM_Id == 118 	mov $BGM_Title,"トーテンブルーメ" : return
if %BGM_Id == 119 	mov $BGM_Title,"JUSTICE" : return
if %BGM_Id == 120 	mov $BGM_Title,"ACI-L" : return
if %BGM_Id == 121 	mov $BGM_Title,"喰那" : return
if %BGM_Id == 122 	mov $BGM_Title,"Proud-dust" : return
if %BGM_Id == 123 	mov $BGM_Title,"hello your dream" : return
if %BGM_Id == 124 	mov $BGM_Title,"孤独な深海魚" : return
if %BGM_Id == 125 	mov $BGM_Title,"少女たちの魔女狩り" : return
if %BGM_Id == 126 	mov $BGM_Title,"継接キメラ" : return
if %BGM_Id == 127 	mov $BGM_Title,"discolor" : return
if %BGM_Id == 128 	mov $BGM_Title,"resurrectedreplayer" : return
if %BGM_Id == 129 	mov $BGM_Title,"Final Answer" : return
if %BGM_Id == 130 	mov $BGM_Title,"hikari" : return
if %BGM_Id == 131 	mov $BGM_Title,"命のパン" : return
if %BGM_Id == 132 	mov $BGM_Title,"約束" : return
if %BGM_Id == 133 	mov $BGM_Title,"Tomorrow" : return
if %BGM_Id == 134 	mov $BGM_Title,"TSUBASA(Ver hope)" : return
if %BGM_Id == 135 	mov $BGM_Title,"鈍色の空笑" : return
if %BGM_Id == 136 	mov $BGM_Title,"永遠の鎖" : return
if %BGM_Id == 137 	mov $BGM_Title,"Love Examination" : return
if %BGM_Id == 138 	mov $BGM_Title,"刹那" : return
if %BGM_Id == 139 	mov $BGM_Title,"Look Back" : return
if %BGM_Id == 140 	mov $BGM_Title,"青い蝶" : return
if %BGM_Id == 141 	mov $BGM_Title,"my dear" : return
if %BGM_Id == 142 	mov $BGM_Title,"キ・ナの香り" : return
if %BGM_Id == 143 	mov $BGM_Title,"rog-limitation" : return
if %BGM_Id == 144 	mov $BGM_Title,"ワルツOp.34" : return
if %BGM_Id == 145 	mov $BGM_Title,"ALIVE" : return
if %BGM_Id == 146 	mov $BGM_Title,"birth of new witch(inst)" : return
if %BGM_Id == 147 	mov $BGM_Title,"ruriair" : return
if %BGM_Id == 148 	mov $BGM_Title,"Engage of marionette" : return
if %BGM_Id == 149 	mov $BGM_Title,"Life" : return
if %BGM_Id == 150 	mov $BGM_Title,"Loreley" : return
if %BGM_Id == 151 	mov $BGM_Title,"罪" : return
if %BGM_Id == 152 	mov $BGM_Title,"The first and The last" : return
if %BGM_Id == 153 	mov $BGM_Title,"反魔セクエンツィア" : return
if %BGM_Id == 154 	mov $BGM_Title,"battle field" : return
if %BGM_Id == 155 	mov $BGM_Title,"Rebirth" : return
if %BGM_Id == 156 	mov $BGM_Title,"道" : return
if %BGM_Id == 157 	mov $BGM_Title,"liberatedliberator" : return
if %BGM_Id == 158 	mov $BGM_Title,"Thanks for all people" : return
if %BGM_Id == 159 	mov $BGM_Title,"嬰児クインビー" : return
if %BGM_Id == 160 	mov $BGM_Title,"birth of new witch(Short Ver)" : return
if %BGM_Id == 161 	mov $BGM_Title,"ウサンノカオリ" : return
if %BGM_Id == 162 	mov $BGM_Title,"le4-octobre" : return
if %BGM_Id == 163 	mov $BGM_Title,"l&d-circulation" : return
if %BGM_Id == 164 	mov $BGM_Title,"reflection-call" : return
if %BGM_Id == 165 	mov $BGM_Title,"rain" : return
if %BGM_Id == 166 	mov $BGM_Title,"7-weights" : return
if %BGM_Id == 167 	mov $BGM_Title,"fall" : return
if %BGM_Id == 168 	mov $BGM_Title,"bore-ral" : return
if %BGM_Id == 169 	mov $BGM_Title,"ballade-continuer" : return
if %BGM_Id == 170 	mov $BGM_Title,"なまえのないうた ver.2007 inst" : return
if %BGM_Id == 171 	mov $BGM_Title,"lie-alaia" : return
if %BGM_Id == 172 	mov $BGM_Title,"Golden Nocturne(inst)" : return
if %BGM_Id == 173 	mov $BGM_Title,"far(flat)" : return
if %BGM_Id == 174 	mov $BGM_Title,"おもちゃ箱" : return
if %BGM_Id == 175 	mov $BGM_Title,"terminal entrance" : return
if %BGM_Id == 176 	mov $BGM_Title,"人形劇" : return
if %BGM_Id == 177 	mov $BGM_Title,"s/he-end" : return
if %BGM_Id == 179 	mov $BGM_Title,"なまえのないうた full-inst" : return
if %BGM_Id == 180 	mov $BGM_Title,"The End Of The World" : return
if %BGM_Id == 181 	mov $BGM_Title,"goddess-gardena" : return
if %BGM_Id == 183 	mov $BGM_Title,"ridicule" : return
if %BGM_Id == 184 	mov $BGM_Title,"黄泉津比良坂Corruption" : return
if %BGM_Id == 185 	mov $BGM_Title,"the executioner" : return
if %BGM_Id == 186 	mov $BGM_Title,"なまえのないうた ver.sakura EDサイズ" : return
if %BGM_Id == 187 	mov $BGM_Title,"ぬいぐるみ" : return
if %BGM_Id == 188 	mov $BGM_Title,"怪奇ディヴェルティメント" : return
if %BGM_Id == 190 	mov $BGM_Title,"en-counse" : return
if %BGM_Id == 191 	mov $BGM_Title,"lixAxil" : return
if %BGM_Id == 192 	mov $BGM_Title,"Revelations(inst)" : return
if %BGM_Id == 193 	mov $BGM_Title,"飛翔" : return
if %BGM_Id == 194 	mov $BGM_Title,"lastendconductor" : return
if %BGM_Id == 195 	mov $BGM_Title,"Revelations" : return
if %BGM_Id == 240 	mov $BGM_Title,"白夢の繭 -Ricordando il passato-" : return
if %BGM_Id == 241 	mov $BGM_Title,"うみねこのなく頃に" : return
if %BGM_Id == 1000	mov $BGM_Title,"SuiSui☆SWEETS(^-^)" : return
if %BGM_Id == 1010	mov $BGM_Title,"Bring The Fate" : return
if %BGM_Id == 1013  mov $BGM_Title,"Bring The Fate(Ver chiru)" : return
;Extra
if %BGM_Id == 94	mov $BGM_Title,"つるぺったん" : return
if %BGM_Id == 1011	mov $BGM_Title,"システム零 (Original Version)" : return
if %legacy_op == off && %BGM_Id == 1012	mov $BGM_Title,"誓響のイグレージャ" : return
if %legacy_op == on  && %BGM_Id == 1012	mov $BGM_Title,"うみねこのなく頃に" : return
if %BGM_Id == 1014	mov $BGM_Title,"イナンナの見た夢" : return
if %BGM_Id == 1017  mov $BGM_Title,"オカルティクスの魔女" : return
if %BGM_Id == 1018  mov $BGM_Title,"霧のピトス" : return
~
;rom
if %bgm_title_language != 4 jumpf
if %BGM_Id == 1	mov $BGM_Title,"Sukashiyuri" : return
if %BGM_Id == 2	mov $BGM_Title,"Natsu no Tobira" : return
if %BGM_Id == 3	mov $BGM_Title,"HANE" : return
if %BGM_Id == 4	mov $BGM_Title,"Ride on" : return
if %BGM_Id == 5	mov $BGM_Title,"sea" : return
if %BGM_Id == 6	mov $BGM_Title,"Kurayami no Koku" : return
if %BGM_Id == 7	mov $BGM_Title,"Novelette" : return
if %BGM_Id == 8	mov $BGM_Title,"hope" : return
if %BGM_Id == 9	mov $BGM_Title,"Shiroi Kage" : return
if %BGM_Id == 10	mov $BGM_Title,"tekuteku" : return
if %BGM_Id == 11	mov $BGM_Title,"Towering cloud in summer" : return
if %BGM_Id == 12 	mov $BGM_Title,"Tsukiyo" : return
if %BGM_Id == 13	mov $BGM_Title,"Bara" : return
if %BGM_Id == 14	mov $BGM_Title,"Rinshi" : return
if %BGM_Id == 15	mov $BGM_Title,"Rensa Kairou" : return
if %BGM_Id == 16	mov $BGM_Title,"Fortitude" : return
if %BGM_Id == 17	mov $BGM_Title,"witch in gold(cembalo)" : return
if %BGM_Id == 18	mov $BGM_Title,"Izanai" : return
if %BGM_Id == 19	mov $BGM_Title,"Usan no Kaori" : return
if %BGM_Id == 20	mov $BGM_Title,"stupefaction" : return
if %BGM_Id == 21	mov $BGM_Title,"praise" : return
if %BGM_Id == 22	mov $BGM_Title,"Pass" : return
if %BGM_Id == 23	mov $BGM_Title,"ageha" : return
if %BGM_Id == 24	mov $BGM_Title,"goldenslaughterer" : return
if %BGM_Id == 25	mov $BGM_Title,"Worldend(bp)" : return
if %BGM_Id == 26	mov $BGM_Title,"Kaiga no Majo" : return
if %BGM_Id == 27	mov $BGM_Title,"suspicion" : return
if %BGM_Id == 28	mov $BGM_Title,"Kizuoto" : return
if %BGM_Id == 29	mov $BGM_Title,"Core" : return
if %BGM_Id == 30	mov $BGM_Title,"Minute darkness" : return
if %BGM_Id == 31	mov $BGM_Title,"nighteyes" : return
if %BGM_Id == 32	mov $BGM_Title,"Closed My Heart" : return
if %BGM_Id == 33	mov $BGM_Title,"Requiem" : return
if %BGM_Id == 34	mov $BGM_Title,"mind" : return
if %BGM_Id == 35	mov $BGM_Title,"Worldend" : return
if %BGM_Id == 36	mov $BGM_Title,"play" : return
if %BGM_Id == 37	mov $BGM_Title,"system0" : return
if %BGM_Id == 38	mov $BGM_Title,"Voiceless" : return
if %BGM_Id == 39	mov $BGM_Title,"dead angle" : return
if %BGM_Id == 40	mov $BGM_Title,"Organ shoukyoku dai6okuban hatanchou" : return
if %BGM_Id == 41	mov $BGM_Title,"Rougoku STRIP" : return
if %BGM_Id == 42	mov $BGM_Title,"Gengaku shijuu soukyoku dai1ban tochouchou — I.Allegro" : return
if %BGM_Id == 43	mov $BGM_Title,"cage" : return
if %BGM_Id == 44	mov $BGM_Title,"Kin-iro no Choushou" : return
if %BGM_Id == 45	mov $BGM_Title,"Sasori no Harawata" : return
if %BGM_Id == 46	mov $BGM_Title,"Shuuen VerC" : return
if %BGM_Id == 47	mov $BGM_Title,"Answer" : return
if %BGM_Id == 48	mov $BGM_Title,"Answer short" : return
if %BGM_Id == 49	mov $BGM_Title,"Shirabe inst.ver" : return
if %BGM_Id == 50	mov $BGM_Title,"Red Dread" : return
if %BGM_Id == 51	mov $BGM_Title,"moon" : return
if %BGM_Id == 52	mov $BGM_Title,"where" : return
if %BGM_Id == 53	mov $BGM_Title,"Dread of the grave" : return
if %BGM_Id == 54	mov $BGM_Title,"Worldend dominator" : return
if %BGM_Id == 55	mov $BGM_Title,"Kuro no Liliana" : return
if %BGM_Id == 56	mov $BGM_Title,"Kyuusoku" : return
if %BGM_Id == 57	mov $BGM_Title,"Hakujitsumu no Hate" : return
if %BGM_Id == 58	mov $BGM_Title,"Shirabe" : return
if %BGM_Id == 59	mov $BGM_Title,"Over the sky" : return
if %BGM_Id == 60	mov $BGM_Title,"Hidamari" : return
if %BGM_Id == 61	mov $BGM_Title,"Rousoku-tachi ga Odoru" : return
if %BGM_Id == 62	mov $BGM_Title,"Haruka" : return
if %BGM_Id == 63	mov $BGM_Title,"psy-chorus" : return
if %BGM_Id == 64	mov $BGM_Title,"far" : return
if %BGM_Id == 65	mov $BGM_Title,"Akai Kutsu NISE" : return
if %BGM_Id == 66	mov $BGM_Title,"mother" : return
if %BGM_Id == 67	mov $BGM_Title,"haze" : return
if %BGM_Id == 68	mov $BGM_Title,"Odoru Kiseru" : return
if %BGM_Id == 69	mov $BGM_Title,"Dread of the grave -More fear-" : return
if %BGM_Id == 70	mov $BGM_Title,"Organ shoukyoku dai2okuban hatanchou" : return
if %BGM_Id == 71	mov $BGM_Title,"rhythm-changer" : return
if %BGM_Id == 72	mov $BGM_Title,"happiness of marionette omake" : return
if %BGM_Id == 73	mov $BGM_Title,"happiness of marionette" : return
if %BGM_Id == 74	mov $BGM_Title,"Tsuki Usagi no Butou" : return
if %BGM_Id == 75	mov $BGM_Title,"Melting away" : return
if %BGM_Id == 76	mov $BGM_Title,"soul of soul" : return
if %BGM_Id == 77	mov $BGM_Title,"miragecoordinator" : return
if %BGM_Id == 78	mov $BGM_Title,"prison" : return
if %BGM_Id == 79	mov $BGM_Title,"Umarete kite kurete arigatou" : return
if %BGM_Id == 80	mov $BGM_Title,"Tsubasa" : return
if %BGM_Id == 81	mov $BGM_Title,"Shitsurakuen" : return
if %BGM_Id == 82	mov $BGM_Title,"wingless" : return
if %BGM_Id == 83	mov $BGM_Title,"activepain" : return
if %BGM_Id == 84	mov $BGM_Title,"Dread of the grave -rhythm ver-" : return
if %BGM_Id == 85	mov $BGM_Title,"Kuon" : return
if %BGM_Id == 86	mov $BGM_Title,"over" : return
if %BGM_Id == 87	mov $BGM_Title,"Like the gale" : return
if %BGM_Id == 88	mov $BGM_Title,"F Style" : return
if %BGM_Id == 89	mov $BGM_Title,"Monochrome Clock" : return
if %BGM_Id == 90	mov $BGM_Title,"apathy" : return
if %BGM_Id == 91	mov $BGM_Title,"Shinpi no Mori" : return
if %BGM_Id == 92	mov $BGM_Title,"Sakutarou no Ganbari Monogatari" : return
if %BGM_Id == 93	mov $BGM_Title,"Parallel" : return
if %BGM_Id == 95	mov $BGM_Title,"599 million ruins" : return
if %BGM_Id == 96	mov $BGM_Title,"Happy Maria!(Instrumental)" : return
if %BGM_Id == 97	mov $BGM_Title,"Surrounding" : return
if %BGM_Id == 98	mov $BGM_Title,"hibuta" : return
if %BGM_Id == 99	mov $BGM_Title,"death(from stupefaction)" : return
if %BGM_Id == 100	mov $BGM_Title,"mortal stampede" : return
if %BGM_Id == 101	mov $BGM_Title,"Victima propiciatoria" : return
if %BGM_Id == 102	mov $BGM_Title,"Revolt" : return
if %BGM_Id == 103	mov $BGM_Title,"Rengoku Magatsu Kyousoukyoku" : return
if %BGM_Id == 104	mov $BGM_Title,"Happy Maria!" : return
if %BGM_Id == 105	mov $BGM_Title,"dive to emergency" : return
if %BGM_Id == 106	mov $BGM_Title,"dir" : return
if %BGM_Id == 107	mov $BGM_Title,"Endless Nine" : return
if %BGM_Id == 108	mov $BGM_Title,"dreamenddischarger" : return
if %BGM_Id == 109	mov $BGM_Title,"Discode" : return
if %BGM_Id == 110	mov $BGM_Title,"kururi"  : return
if %BGM_Id == 111 	mov $BGM_Title,"Future" : return
if %BGM_Id == 112 	mov $BGM_Title,"Ao-iro no Reishou" : return
if %BGM_Id == 113 	mov $BGM_Title,"Meitantei wa Shitte Iru" : return
if %BGM_Id == 114 	mov $BGM_Title,"Eminaki Soirée" : return
if %BGM_Id == 115 	mov $BGM_Title,"one" : return
if %BGM_Id == 116 	mov $BGM_Title,"Rasen" : return
if %BGM_Id == 117 	mov $BGM_Title,"Gengaku sanjuu soukyoku dai6okuban eihetanchou" : return
if %BGM_Id == 118 	mov $BGM_Title,"Totenblume" : return
if %BGM_Id == 119 	mov $BGM_Title,"JUSTICE" : return
if %BGM_Id == 120 	mov $BGM_Title,"ACI-L" : return
if %BGM_Id == 121 	mov $BGM_Title,"Kuina" : return
if %BGM_Id == 122 	mov $BGM_Title,"Proud-dust" : return
if %BGM_Id == 123 	mov $BGM_Title,"hello your dream" : return
if %BGM_Id == 124 	mov $BGM_Title,"Kodoku na Shinkaigyo" : return
if %BGM_Id == 125 	mov $BGM_Title,"Shoujo-tachi no Majo-gari" : return
if %BGM_Id == 126 	mov $BGM_Title,"Tsugihagi Chimera" : return
if %BGM_Id == 127 	mov $BGM_Title,"discolor" : return
if %BGM_Id == 128 	mov $BGM_Title,"resurrectedreplayer" : return
if %BGM_Id == 129 	mov $BGM_Title,"Final Answer" : return
if %BGM_Id == 130 	mov $BGM_Title,"hikari" : return
if %BGM_Id == 131 	mov $BGM_Title,"Inochi no Pan" : return
if %BGM_Id == 132 	mov $BGM_Title,"Yakusoku" : return
if %BGM_Id == 133 	mov $BGM_Title,"Tomorrow" : return
if %BGM_Id == 134 	mov $BGM_Title,"TSUBASA(Ver hope)" : return
if %BGM_Id == 135 	mov $BGM_Title,"Nibiiro no Kuushou" : return
if %BGM_Id == 136 	mov $BGM_Title,"Eien no Kusari" : return
if %BGM_Id == 137 	mov $BGM_Title,"Love Examination" : return
if %BGM_Id == 138 	mov $BGM_Title,"Setsuna" : return
if %BGM_Id == 139 	mov $BGM_Title,"Look Back" : return
if %BGM_Id == 140 	mov $BGM_Title,"Aoi Chou" : return
if %BGM_Id == 141 	mov $BGM_Title,"my dear" : return
if %BGM_Id == 142 	mov $BGM_Title,"Ki-Na no Kaori" : return
if %BGM_Id == 143 	mov $BGM_Title,"rog-limitation" : return
if %BGM_Id == 144 	mov $BGM_Title,"Waltz Op.34" : return
if %BGM_Id == 145 	mov $BGM_Title,"ALIVE" : return
if %BGM_Id == 146 	mov $BGM_Title,"birth of new witch(inst)" : return
if %BGM_Id == 147 	mov $BGM_Title,"ruriair" : return
if %BGM_Id == 148 	mov $BGM_Title,"Engage of marionette" : return
if %BGM_Id == 149 	mov $BGM_Title,"Life" : return
if %BGM_Id == 150 	mov $BGM_Title,"Loreley" : return
if %BGM_Id == 151 	mov $BGM_Title,"Tsumi" : return
if %BGM_Id == 152 	mov $BGM_Title,"The first and The last" : return
if %BGM_Id == 153 	mov $BGM_Title,"Han-ma Sequentia" : return
if %BGM_Id == 154 	mov $BGM_Title,"battle field" : return
if %BGM_Id == 155 	mov $BGM_Title,"Rebirth" : return
if %BGM_Id == 156 	mov $BGM_Title,"Michi" : return
if %BGM_Id == 157 	mov $BGM_Title,"liberatedliberator" : return
if %BGM_Id == 158 	mov $BGM_Title,"Thanks for all people" : return
if %BGM_Id == 159 	mov $BGM_Title,"Eiji Queen Bee" : return
if %BGM_Id == 160 	mov $BGM_Title,"birth of new witch(Short Ver)" : return
if %BGM_Id == 161 	mov $BGM_Title,"USANNOKAORI" : return
if %BGM_Id == 162 	mov $BGM_Title,"le4-octobre" : return
if %BGM_Id == 163 	mov $BGM_Title,"l&d-circulation" : return
if %BGM_Id == 164 	mov $BGM_Title,"reflection-call" : return
if %BGM_Id == 165 	mov $BGM_Title,"rain" : return
if %BGM_Id == 166 	mov $BGM_Title,"7-weights" : return
if %BGM_Id == 167 	mov $BGM_Title,"fall" : return
if %BGM_Id == 168 	mov $BGM_Title,"bore-ral" : return
if %BGM_Id == 169 	mov $BGM_Title,"ballade-continuer" : return
if %BGM_Id == 170 	mov $BGM_Title,"Namae no nai uta ver.2007 inst" : return
if %BGM_Id == 171 	mov $BGM_Title,"lie-alaia" : return
if %BGM_Id == 172 	mov $BGM_Title,"Golden Nocturne(inst)" : return
if %BGM_Id == 173 	mov $BGM_Title,"far(flat)" : return
if %BGM_Id == 174 	mov $BGM_Title,"Omochabako" : return
if %BGM_Id == 175 	mov $BGM_Title,"terminal entrance" : return
if %BGM_Id == 176 	mov $BGM_Title,"Ningyougeki" : return
if %BGM_Id == 177 	mov $BGM_Title,"s/he-end" : return
if %BGM_Id == 179 	mov $BGM_Title,"Namae no nai uta full-inst" : return
if %BGM_Id == 180 	mov $BGM_Title,"The End Of The World" : return
if %BGM_Id == 181 	mov $BGM_Title,"goddess-gardena" : return
if %BGM_Id == 183 	mov $BGM_Title,"ridicule" : return
if %BGM_Id == 184 	mov $BGM_Title,"Yomotsu Hirasaka Corruption" : return
if %BGM_Id == 185 	mov $BGM_Title,"the executioner" : return
if %BGM_Id == 186 	mov $BGM_Title,"Namae no nai uta ver.sakura ED-size" : return
if %BGM_Id == 187 	mov $BGM_Title,"Nuigurumi" : return
if %BGM_Id == 188 	mov $BGM_Title,"Kaiki Divertimento" : return
if %BGM_Id == 190 	mov $BGM_Title,"en-counse" : return
if %BGM_Id == 191 	mov $BGM_Title,"lixAxil" : return
if %BGM_Id == 192 	mov $BGM_Title,"Revelations(inst)" : return
if %BGM_Id == 193 	mov $BGM_Title,"Hishou" : return
if %BGM_Id == 194 	mov $BGM_Title,"lastendconductor" : return
if %BGM_Id == 195 	mov $BGM_Title,"Revelations" : return
if %BGM_Id == 240 	mov $BGM_Title,"Byakumu no Mayu -Ricordando il passato-" : return
if %BGM_Id == 241 	mov $BGM_Title,"Umineko no Naku Koro ni" : return
if %BGM_Id == 1000	mov $BGM_Title,"SuiSui☆SWEETS(^-^)" : return
if %BGM_Id == 1010	mov $BGM_Title,"Bring The Fate" : return
if %BGM_Id == 1013  mov $BGM_Title,"Bring The Fate(Ver chiru)" : return
;Extra
if %BGM_Id == 94	mov $BGM_Title,"Tsurupettan" : return
if %BGM_Id == 1011	mov $BGM_Title,"system0 (Original Version)" : return
if %legacy_op == off && %BGM_Id == 1012	mov $BGM_Title,"Senkyou no Igreja" : return
if %legacy_op == on  && %BGM_Id == 1012	mov $BGM_Title,"Umineko no Naku Koro ni" : return
if %BGM_Id == 1014	mov $BGM_Title,"Inanna no Mita Yume" : return
if %BGM_Id == 1017  mov $BGM_Title,"Occultics no Majo" : return
if %BGM_Id == 1018  mov $BGM_Title,"Kiri no Pithos" : return
~

return

*Sub_List

mov $track_id,""

if %op_ed_song_subtitles = 2 goto *sub_get_translation
if %op_ed_song_subtitles = 3 goto *sub_get_romaji
if %op_ed_song_subtitles = 4 goto *sub_get_both 
if %op_ed_song_subtitles = 5 goto *sub_get_tr 

return

*Me_List

if %Me_Number =  0   mov $Me_Play,"off" : return
if %Me_Number =  1   mov $Me_Play,"sound\se\umilse_001.ogg" : return
if %Me_Number =  2   mov $Me_Play,"sound\se\umilse_002.ogg" : return
if %Me_Number =  3   mov $Me_Play,"sound\se\umilse_003.ogg" : return
if %Me_Number =  4   mov $Me_Play,"sound\se\umilse_004.ogg" : return
if %Me_Number =  5   mov $Me_Play,"sound\se\umilse_005.ogg" : return
if %Me_Number =  6   mov $Me_Play,"sound\se\umilse_006.ogg" : return
if %Me_Number =  7   mov $Me_Play,"sound\se\umilse_007.ogg" : return
if %Me_Number =  8   mov $Me_Play,"sound\se\umilse_008.ogg" : return
if %Me_Number =  9   mov $Me_Play,"sound\se\umilse_009.ogg" : return
if %Me_Number = 10   mov $Me_Play,"sound\se\umilse_010.ogg" : return
if %Me_Number = 11   mov $Me_Play,"sound\se\umilse_011.ogg" : return
if %Me_Number = 12   mov $Me_Play,"sound\se\umilse_012.ogg" : return
if %Me_Number = 13   mov $Me_Play,"sound\se\umilse_013.ogg" : return
if %Me_Number = 14   mov $Me_Play,"sound\se\umilse_014.ogg" : return
if %Me_Number = 15   mov $Me_Play,"sound\se\umilse_015.ogg" : return
if %Me_Number = 16   mov $Me_Play,"sound\se\umilse_016.ogg" : return
if %Me_Number = 17   mov $Me_Play,"sound\se\umilse_017.ogg" : return
if %Me_Number = 18   mov $Me_Play,"sound\se\umilse_018.ogg" : return
if %Me_Number = 19   mov $Me_Play,"sound\se\umilse_019.ogg" : return
if %Me_Number = 20   mov $Me_Play,"sound\se\umilse_020.ogg" : return
if %Me_Number = 21   mov $Me_Play,"sound\se\umilse_021.ogg" : return
if %Me_Number = 22   mov $Me_Play,"sound\se\umilse_022.ogg" : return
if %Me_Number = 23   mov $Me_Play,"sound\se\umilse_023.ogg" : return
if %Me_Number = 24   mov $Me_Play,"sound\se\umilse_024.ogg" : return
if %Me_Number = 25   mov $Me_Play,"sound\se\umilse_025.ogg" : return
if %Me_Number = 26   mov $Me_Play,"sound\se\umilse_026.ogg" : return
if %Me_Number = 27   mov $Me_Play,"sound\se\umilse_027.ogg" : return
if %Me_Number = 28   mov $Me_Play,"sound\se\umilse_028.ogg" : return
if %Me_Number = 29   mov $Me_Play,"sound\se\umilse_029.ogg" : return
if %Me_Number = 30   mov $Me_Play,"sound\se\umilse_030.ogg" : return

if %Me_Number = 31   mov $Me_Play,"sound\se\umilse_026.ogg" : return
if %Me_Number = 32   mov $Me_Play,"sound\se\umilse_026.ogg" : return
if %Me_Number = 33   mov $Me_Play,"sound\se\umilse_026.ogg" : return
if %Me_Number = 34   mov $Me_Play,"sound\se\umilse_026.ogg" : return

if %Me_Number = 1050 mov $Me_Play,"sound\se\umilse_1050.ogg" : return
if %Me_Number = 1051 mov $Me_Play,"sound\se\umilse_1051.ogg" : return
if %Me_Number = 1052 mov $Me_Play,"sound\se\umilse_1052.ogg" : return
if %Me_Number = 1053 mov $Me_Play,"sound\se\umilse_1053.ogg" : return

if %Me_Number = 1054 mov $Me_Play,"sound\se\maria_v.ogg" : return
if %Me_Number = 1055 mov $Me_Play,"sound\se\maria_v2.ogg" : return

if %Me_Number = 1137 mov $Me_Play,"sound\se\umise_037.ogg" : return
if %Me_Number = 1155 mov $Me_Play,"sound\se\umise_055.ogg" : return
if %Me_Number = 1166 mov $Me_Play,"sound\se\umise_066.ogg" : return

error "ME not found"

return

*lv_generate
	tree_clear 3

	tree_set 3,"01","kin"
	tree_set 3,"02","cla"
	tree_set 3,"03","nat"
	tree_set 3,"04","jes"
	tree_set 3,"05","eva"
	tree_set 3,"06","hid"
	tree_set 3,"07","geo"
	tree_set 3,"08","rud"
	tree_set 3,"09","kir"
	tree_set 3,"10","but"
	tree_set 3,"11","enj"
	tree_set 3,"12","ros"
	tree_set 3,"13","mar"
	tree_set 3,"14","gen"
	tree_set 3,"15","sha"
	tree_set 3,"16","kan"
	tree_set 3,"17","goh"
	tree_set 3,"18","kum"
	tree_set 3,"19","nan"
	tree_set 3,"20","ama"
	tree_set 3,"21","oko"
	tree_set 3,"22","kas"
	tree_set 3,"23","pro"
	tree_set 3,"24","kaw"
	tree_set 3,"25","na2"
	tree_set 3,"26","ku2"
	tree_set 3,"27","bea"
	tree_set 3,"28","ber"
	tree_set 3,"29","lam"
	tree_set 3,"30","wal"
	tree_set 3,"31","ron"
	tree_set 3,"32","gap"
	tree_set 3,"33","sak"
	tree_set 3,"34","ev2"
	tree_set 3,"35","s45"
	tree_set 3,"36","s41"
	tree_set 3,"37","s00"
	tree_set 3,"38","rg1"
	tree_set 3,"39","rg2"
	tree_set 3,"40","rg3"
	tree_set 3,"41","rg4"
	tree_set 3,"42","rg5"
	tree_set 3,"43","rg6"
	tree_set 3,"44","rg7"
	tree_set 3,"45","goa"
	if %CHIRU_MODE = 1 tree_set 3,"46","eri"
	if %CHIRU_MODE = 0 tree_set 3,"46","kan"
	tree_set 3,"47","dla"
	tree_set 3,"48","ger"
	tree_set 3,"49","cor"
	tree_set 3,"50","fea"
	tree_set 3,"51","zep"
	tree_set 3,"52","fur"
	tree_set 3,"53","rio"
	tree_set 3,"54","wil"
	tree_set 3,"55","cur"
	tree_set 3,"56","fea"
	tree_set 3,"57","bu3"
	tree_set 3,"58","ki2"
	tree_set 3,"59","bea"
	tree_set 3,"60","be3"
	tree_set 3,"99","non"
	tree_set 3,"00","non"
return

*se_generate
	tree_clear 4

	for %Se_Number = 1 to 81
		gosub *Se_Play_List
		tree_set 4,%Se_Number,$Se_Play
	next

	mov %Se_Number,1000 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1001 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1005 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1006 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1010 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1020 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1021 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1022 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1023 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1030 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1031 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1040 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1052 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1060 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1061 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1062 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1063 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1064 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1065 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
	mov %Se_Number,1066 : gosub *Se_Play_List : tree_set 4,%Se_Number,$Se_Play
return

*me_generate
	tree_clear 5

	tree_set 5,"0","off"
	for %Me_Number = 1 to 30
		gosub *Me_List
		tree_set 5,%Me_Number,$Me_Play
	next

	tree_set 5,"31","sound\se\umilse_026.ogg"
	tree_set 5,"32","sound\se\umilse_026.ogg"
	tree_set 5,"33","sound\se\umilse_026.ogg"
	tree_set 5,"34","sound\se\umilse_026.ogg"
	tree_set 5,"1050","sound\se\umilse_1050.ogg"
	tree_set 5,"1051","sound\se\umilse_1051.ogg"
	tree_set 5,"1052","sound\se\umilse_1052.ogg"
	tree_set 5,"1053","sound\se\umilse_1053.ogg"
	tree_set 5,"1054","sound\se\maria_v.ogg"
	tree_set 5,"1055","sound\se\maria_v2.ogg"
	tree_set 5,"1137","sound\se\umise_037.ogg"
	tree_set 5,"1155","sound\se\umise_055.ogg"
	tree_set 5,"1166","sound\se\umise_066.ogg"
return

*Se_Play_List

;Random glasss breaking sound is returned for 1100 sfx
notif %Se_Number = 1100 jumpf
	rnd2 %ran,1,6
	if %ran = 1 mov $Se_Play,"sound\se\umise_1006.ogg" : return
	if %ran = 2 mov $Se_Play,"sound\se\umise_1102.ogg" : return
	if %ran = 3 mov $Se_Play,"sound\se\umise_1103.ogg" : return
	if %ran = 4 mov $Se_Play,"sound\se\umise_1104.ogg" : return
	if %ran = 5 mov $Se_Play,"sound\se\umise_1105.ogg" : return
	if %ran = 6 mov $Se_Play,"sound\se\umise_1106.ogg" : return
~

if %Se_Number =  1 mov $Se_Play,"sound\se\umise_001.ogg" : return
if %Se_Number =  2 mov $Se_Play,"sound\se\umise_002.ogg" : return
if %Se_Number =  3 mov $Se_Play,"sound\se\umise_003.ogg" : return
if %Se_Number =  4 mov $Se_Play,"sound\se\umise_004.ogg" : return
if %Se_Number =  5 mov $Se_Play,"sound\se\umise_005.ogg" : return
if %Se_Number =  6 mov $Se_Play,"sound\se\umise_006.ogg" : return
if %Se_Number =  7 mov $Se_Play,"sound\se\umise_007.ogg" : return
if %Se_Number =  8 mov $Se_Play,"sound\se\umise_008.ogg" : return
if %Se_Number =  9 mov $Se_Play,"sound\se\umise_009.ogg" : return
if %Se_Number = 10 mov $Se_Play,"sound\se\umise_010.ogg" : return
if %Se_Number = 11 mov $Se_Play,"sound\se\umise_011.ogg" : return
if %Se_Number = 12 mov $Se_Play,"sound\se\umise_012.ogg" : return
if %Se_Number = 13 mov $Se_Play,"sound\se\umise_013.ogg" : return
if %Se_Number = 14 mov $Se_Play,"sound\se\umise_014.ogg" : return
if %Se_Number = 15 mov $Se_Play,"sound\se\umise_015.ogg" : return
if %Se_Number = 16 mov $Se_Play,"sound\se\umise_016.ogg" : return
if %Se_Number = 17 mov $Se_Play,"sound\se\umise_017.ogg" : return
if %Se_Number = 18 mov $Se_Play,"sound\se\umise_018.ogg" : return
if %Se_Number = 19 mov $Se_Play,"sound\se\umise_019.ogg" : return
if %Se_Number = 20 mov $Se_Play,"sound\se\umise_020.ogg" : return
if %Se_Number = 21 mov $Se_Play,"sound\se\umise_021.ogg" : return
if %Se_Number = 22 mov $Se_Play,"sound\se\umise_022.ogg" : return
if %Se_Number = 23 mov $Se_Play,"sound\se\umise_023.ogg" : return
if %Se_Number = 24 mov $Se_Play,"sound\se\umise_024.ogg" : return
if %Se_Number = 25 mov $Se_Play,"sound\se\umise_025.ogg" : return
if %Se_Number = 26 mov $Se_Play,"sound\se\umise_026.ogg" : return
if %Se_Number = 27 mov $Se_Play,"sound\se\umise_027.ogg" : return
if %Se_Number = 28 mov $Se_Play,"sound\se\umise_028.ogg" : return
if %Se_Number = 29 mov $Se_Play,"sound\se\umilse_022.ogg" : return
if %Se_Number = 30 mov $Se_Play,"sound\se\umise_030.ogg" : return
if %Se_Number = 31 mov $Se_Play,"sound\se\umise_031.ogg" : return
if %Se_Number = 32 mov $Se_Play,"sound\se\umise_032.ogg" : return
if %Se_Number = 33 mov $Se_Play,"sound\se\umise_033.ogg" : return
if %Se_Number = 34 mov $Se_Play,"sound\se\umise_034.ogg" : return
if %Se_Number = 35 mov $Se_Play,"sound\se\umise_035.ogg" : return
if %Se_Number = 36 mov $Se_Play,"sound\se\umise_036.ogg" : return
if %Se_Number = 37 mov $Se_Play,"sound\se\umise_037.ogg" : return
if %Se_Number = 38 mov $Se_Play,"sound\se\umise_038.ogg" : return
if %Se_Number = 39 mov $Se_Play,"sound\se\umise_039.ogg" : return
if %Se_Number = 40 mov $Se_Play,"sound\se\umise_040.ogg" : return
if %Se_Number = 41 mov $Se_Play,"sound\se\umise_041.ogg" : return
if %Se_Number = 42 mov $Se_Play,"sound\se\umise_042.ogg" : return
if %Se_Number = 43 mov $Se_Play,"sound\se\umise_043.ogg" : return
if %Se_Number = 44 mov $Se_Play,"sound\se\umise_044.ogg" : return
if %Se_Number = 45 mov $Se_Play,"sound\se\umise_045.ogg" : return
if %Se_Number = 46 mov $Se_Play,"sound\se\umise_046.ogg" : return
if %Se_Number = 47 mov $Se_Play,"sound\se\umise_047.ogg" : return
if %Se_Number = 48 mov $Se_Play,"sound\se\umise_048.ogg" : return
if %Se_Number = 49 mov $Se_Play,"sound\se\umise_049.ogg" : return
if %Se_Number = 50 mov $Se_Play,"sound\se\umise_050.ogg" : return
if %Se_Number = 51 mov $Se_Play,"sound\se\umise_051.ogg" : return
if %Se_Number = 52 mov $Se_Play,"sound\se\umise_052.ogg" : return
if %Se_Number = 53 mov $Se_Play,"sound\se\umise_053.ogg" : return
if %Se_Number = 54 mov $Se_Play,"sound\se\umise_054.ogg" : return
if %Se_Number = 55 mov $Se_Play,"sound\se\umise_055.ogg" : return
if %Se_Number = 56 mov $Se_Play,"sound\se\umise_056.ogg" : return
if %Se_Number = 57 mov $Se_Play,"sound\se\umise_057.ogg" : return
if %Se_Number = 58 mov $Se_Play,"sound\se\umise_058.ogg" : return
if %Se_Number = 59 mov $Se_Play,"sound\se\umise_059.ogg" : return
if %Se_Number = 60 mov $Se_Play,"sound\se\umise_060.ogg" : return
if %Se_Number = 61 mov $Se_Play,"sound\se\umise_061.ogg" : return
if %Se_Number = 62 mov $Se_Play,"sound\se\umise_062.ogg" : return
if %Se_Number = 63 mov $Se_Play,"sound\se\umise_063.ogg" : return
if %Se_Number = 64 mov $Se_Play,"sound\se\umise_064.ogg" : return
if %Se_Number = 65 mov $Se_Play,"sound\se\umise_065.ogg" : return
if %Se_Number = 66 mov $Se_Play,"sound\se\umise_066.ogg" : return
if %Se_Number = 67 mov $Se_Play,"sound\se\umise_067.ogg" : return
if %Se_Number = 68 mov $Se_Play,"sound\se\umise_068.ogg" : return
if %Se_Number = 69 mov $Se_Play,"sound\se\umise_069.ogg" : return
if %Se_Number = 70 mov $Se_Play,"sound\se\umise_070.ogg" : return
if %Se_Number = 71 mov $Se_Play,"sound\se\umise_071.ogg" : return
if %Se_Number = 72 mov $Se_Play,"sound\se\umise_072.ogg" : return
if %Se_Number = 73 mov $Se_Play,"sound\se\umise_073.ogg" : return
if %Se_Number = 74 mov $Se_Play,"sound\se\umise_074.ogg" : return
if %Se_Number = 75 mov $Se_Play,"sound\se\umise_075.ogg" : return
if %Se_Number = 76 mov $Se_Play,"sound\se\umise_076.ogg" : return
if %Se_Number = 77 mov $Se_Play,"sound\se\umise_077.ogg" : return
if %Se_Number = 78 mov $Se_Play,"sound\se\umise_078.ogg" : return
if %Se_Number = 79 mov $Se_Play,"sound\se\umise_079.ogg" : return
if %Se_Number = 80 mov $Se_Play,"sound\se\umise_080.ogg" : return
if %Se_Number = 81 mov $Se_Play,"sound\se\umise_081.ogg" : return
if %Se_Number = 1000 mov $Se_Play,"sound\se\umise_1000.ogg" : return
if %Se_Number = 1001 mov $Se_Play,"sound\se\umise_1001.ogg" : return
if %Se_Number = 1005 mov $Se_Play,"sound\se\umise_1005.ogg" : return
if %Se_Number = 1006 mov $Se_Play,"sound\se\umise_1006.ogg" : return
if %Se_Number = 1010 mov $Se_Play,"sound\se\umise_1010.ogg" : return
if %Se_Number = 1020 mov $Se_Play,"sound\se\umise_1006.ogg" : return
if %Se_Number = 1021 mov $Se_Play,"sound\se\umise_1021.ogg" : return
if %Se_Number = 1022 mov $Se_Play,"sound\se\umise_1006.ogg" : return
if %Se_Number = 1023 mov $Se_Play,"sound\se\umise_1023.ogg" : return
if %Se_Number = 1030 mov $Se_Play,"sound\se\umise_1030.ogg" : return
if %Se_Number = 1031 mov $Se_Play,"sound\se\umise_1031.ogg" : return
if %Se_Number = 1040 mov $Se_Play,"sound\se\umise_1040.ogg" : return
if %Se_Number = 1052 mov $Se_Play,"sound\se\umise_1052.ogg" : return
if %Se_Number = 1060 mov $Se_Play,"sound\se\umise_1060.ogg" : return
if %Se_Number = 1061 mov $Se_Play,"sound\se\umise_1061.ogg" : return
if %Se_Number = 1062 mov $Se_Play,"sound\se\umise_1060.ogg" : return
if %Se_Number = 1063 mov $Se_Play,"sound\se\umise_1061.ogg" : return
if %Se_Number = 1064 mov $Se_Play,"sound\se\umise_ex01.ogg" : return
if %Se_Number = 1065 mov $Se_Play,"sound\se\umise_ex02.ogg" : return
if %Se_Number = 1066 mov $Se_Play,"sound\se\umise_ex03.ogg" : return

error "SE not found"

return

*load_saved_cgs
	for %music_box_tmp = 8600 to 8659
		if %%music_box_tmp == 1 mov ?cg_list[0][%music_box_tmp-8600],1
	next
	
	for %music_box_tmp = 8800 to 8877
		if %%music_box_tmp == 1 mov ?cg_list[1][%music_box_tmp-8800],1
	next
	

	operate_config u_read,$music_box_tmp,"cg_unlock"
	if $music_box_tmp == "8" goto *load_cgs_8
	if $music_box_tmp == "7" goto *load_cgs_7
	if $music_box_tmp == "6" goto *load_cgs_6
	if $music_box_tmp == "5" goto *load_cgs_5
	if $music_box_tmp == "4" goto *load_cgs_4
	if $music_box_tmp == "3" goto *load_cgs_3
	if $music_box_tmp == "2" goto *load_cgs_2
	if $music_box_tmp == "1" goto *load_cgs_1
return

*load_saved_bgms
	for %music_box_tmp = music_box_count+1 to music_box_count+1018
		;Fixes a reckless numeration for some tracks overlapping with temp variables
		if %%music_box_tmp != 1 && %%music_box_tmp != 0 mov %%music_box_tmp,0
		if %%music_box_tmp == 1 mov ?bgm_list[%music_box_tmp-music_box_count],1
	next

	operate_config u_read,$music_box_tmp,"bgm_unlock"
	if $music_box_tmp == "8" goto *load_bgms_8
	if $music_box_tmp == "7" goto *load_bgms_7
	if $music_box_tmp == "6" goto *load_bgms_6
	if $music_box_tmp == "5" goto *load_bgms_5
	if $music_box_tmp == "4" goto *load_bgms_4
	if $music_box_tmp == "3" goto *load_bgms_3
	if $music_box_tmp == "2" goto *load_bgms_2
	if $music_box_tmp == "1" goto *load_bgms_1
return

*load_bgms_8
	;ep
	mov ?bgm_list[187],1
	mov ?bgm_list[188],1
	mov ?bgm_list[190],1
	mov ?bgm_list[191],1
	mov ?bgm_list[192],1
	mov ?bgm_list[195],1
	mov ?bgm_list[193],1
	mov ?bgm_list[194],1
	mov ?bgm_list[240],1
	mov ?bgm_list[241],1

*load_bgms_7
	;ura
	mov ?bgm_list[186],1

	;tea
	mov ?bgm_list[183],1
	mov ?bgm_list[184],1
	mov ?bgm_list[185],1

	;ep
	mov ?bgm_list[162],1
	mov ?bgm_list[163],1
	mov ?bgm_list[164],1
	mov ?bgm_list[165],1
	mov ?bgm_list[166],1
	mov ?bgm_list[167],1
	mov ?bgm_list[168],1
	mov ?bgm_list[169],1
	mov ?bgm_list[170],1
	mov ?bgm_list[171],1
	mov ?bgm_list[172],1
	mov ?bgm_list[173],1
	mov ?bgm_list[174],1
	mov ?bgm_list[175],1
	mov ?bgm_list[176],1
	mov ?bgm_list[177],1
	mov ?bgm_list[1013],1
	mov ?bgm_list[179],1
	mov ?bgm_list[180],1
	mov ?bgm_list[181],1
	mov ?bgm_list[1018],1

*load_bgms_6
	;ura
	mov ?bgm_list[161],1

	;tea
	mov ?bgm_list[158],1

	;ep
	mov ?bgm_list[135],1
	mov ?bgm_list[136],1
	mov ?bgm_list[137],1
	mov ?bgm_list[138],1
	mov ?bgm_list[139],1
	mov ?bgm_list[140],1
	mov ?bgm_list[141],1
	mov ?bgm_list[142],1
	mov ?bgm_list[143],1
	mov ?bgm_list[144],1
	mov ?bgm_list[159],1
	mov ?bgm_list[148],1
	mov ?bgm_list[145],1
	mov ?bgm_list[146],1
	mov ?bgm_list[147],1
	mov ?bgm_list[149],1
	mov ?bgm_list[150],1
	mov ?bgm_list[151],1
	mov ?bgm_list[152],1
	mov ?bgm_list[153],1
	mov ?bgm_list[154],1
	mov ?bgm_list[155],1
	mov ?bgm_list[156],1
	mov ?bgm_list[157],1
	mov ?bgm_list[160],1

*load_bgms_5
	;ura
	mov ?bgm_list[132],1
	mov ?bgm_list[133],1
	mov ?bgm_list[134],1

	;ep
	mov ?bgm_list[111],1
	mov ?bgm_list[112],1
	mov ?bgm_list[113],1
	mov ?bgm_list[114],1
	mov ?bgm_list[115],1
	mov ?bgm_list[116],1
	mov ?bgm_list[117],1
	mov ?bgm_list[118],1
	mov ?bgm_list[119],1
	mov ?bgm_list[120],1
	mov ?bgm_list[121],1
	mov ?bgm_list[122],1
	mov ?bgm_list[123],1
	mov ?bgm_list[124],1
	mov ?bgm_list[125],1
	mov ?bgm_list[126],1
	mov ?bgm_list[127],1
	mov ?bgm_list[128],1
	mov ?bgm_list[129],1
	mov ?bgm_list[130],1
	mov ?bgm_list[131],1
	mov ?bgm_list[1017],1

*load_bgms_4
	;chiru op
	mov ?bgm_list[1014],1

	;ura
	mov ?bgm_list[110],1

	;tea
	mov ?bgm_list[108],1
	mov ?bgm_list[109],1

	;ep
	mov ?bgm_list[89],1
	mov ?bgm_list[85],1
	mov ?bgm_list[91],1
	mov ?bgm_list[90],1
	mov ?bgm_list[92],1
	mov ?bgm_list[86],1
	mov ?bgm_list[87],1
	mov ?bgm_list[93],1
	mov ?bgm_list[97],1
	mov ?bgm_list[95],1
	mov ?bgm_list[88],1
	mov ?bgm_list[96],1
	mov ?bgm_list[98],1
	mov ?bgm_list[99],1
	mov ?bgm_list[100],1
	mov ?bgm_list[101],1
	mov ?bgm_list[102],1
	mov ?bgm_list[103],1
	mov ?bgm_list[104],1
	mov ?bgm_list[105],1
	mov ?bgm_list[106],1
	mov ?bgm_list[107],1

*load_bgms_3
	;ura
	mov ?bgm_list[82],1
	mov ?bgm_list[83],1

	;ep
	mov ?bgm_list[60],1
	mov ?bgm_list[61],1
	mov ?bgm_list[62],1
	mov ?bgm_list[63],1
	mov ?bgm_list[64],1
	mov ?bgm_list[65],1
	mov ?bgm_list[66],1
	mov ?bgm_list[67],1
	mov ?bgm_list[68],1
	mov ?bgm_list[69],1
	mov ?bgm_list[70],1
	mov ?bgm_list[71],1
	mov ?bgm_list[72],1
	mov ?bgm_list[73],1
	mov ?bgm_list[74],1
	mov ?bgm_list[75],1
	mov ?bgm_list[76],1
	mov ?bgm_list[78],1
	mov ?bgm_list[79],1
	mov ?bgm_list[80],1
	mov ?bgm_list[81],1
	mov ?bgm_list[77],1
	mov ?bgm_list[84],1

*load_bgms_2
	;ura
	mov ?bgm_list[59],1

	;tea
	mov ?bgm_list[56],1
	mov ?bgm_list[57],1
	mov ?bgm_list[58],1	

	;ep
	mov ?bgm_list[43],1
	mov ?bgm_list[44],1
	mov ?bgm_list[1000],1
	mov ?bgm_list[45],1
	mov ?bgm_list[46],1
	mov ?bgm_list[47],1
	mov ?bgm_list[48],1
	mov ?bgm_list[49],1
	mov ?bgm_list[50],1
	mov ?bgm_list[51],1
	mov ?bgm_list[52],1
	mov ?bgm_list[53],1
	mov ?bgm_list[54],1
	mov ?bgm_list[55],1

*load_bgms_1
	;tea
	mov ?bgm_list[42],1
	mov ?bgm_list[40],1
	mov ?bgm_list[41],1

	;ep
	mov ?bgm_list[13],1
	mov ?bgm_list[2],1
	mov ?bgm_list[3],1
	mov ?bgm_list[4],1
	mov ?bgm_list[11],1
	mov ?bgm_list[5],1
	mov ?bgm_list[6],1
	mov ?bgm_list[7],1
	mov ?bgm_list[8],1
	mov ?bgm_list[9],1
	mov ?bgm_list[10],1
	mov ?bgm_list[12],1
	mov ?bgm_list[1],1
	mov ?bgm_list[14],1
	mov ?bgm_list[15],1
	mov ?bgm_list[16],1
	mov ?bgm_list[17],1
	mov ?bgm_list[18],1
	mov ?bgm_list[19],1
	mov ?bgm_list[20],1
	mov ?bgm_list[21],1
	mov ?bgm_list[22],1
	mov ?bgm_list[23],1
	mov ?bgm_list[24],1
	mov ?bgm_list[25],1
	mov ?bgm_list[26],1
	mov ?bgm_list[27],1
	mov ?bgm_list[28],1
	mov ?bgm_list[29],1
	mov ?bgm_list[30],1
	mov ?bgm_list[31],1
	mov ?bgm_list[32],1
	mov ?bgm_list[33],1
	mov ?bgm_list[34],1
	mov ?bgm_list[35],1
	mov ?bgm_list[36],1
	mov ?bgm_list[37],1
	mov ?bgm_list[38],1
	mov ?bgm_list[39],1
	mov ?bgm_list[1010],1
	mov ?bgm_list[1012],1

return


*load_cgs_8
	mov $lbg_name,"ep801" : gosub *load_cg
	mov $lbg_name,"ep802" : gosub *load_cg
	mov $lbg_name,"c_e0102_a" : gosub *load_cg
	mov $lbg_name,"ep803" : gosub *load_cg
	mov $lbg_name,"c_e0103_la" : gosub *load_cg
	mov $lbg_name,"erc_ra" : gosub *load_cg
	mov $lbg_name,"c0406" : gosub *load_cg
	mov $lbg_name,"ep810_a1" : gosub *load_cg
	mov $lbg_name,"lac_a3" : gosub *load_cg
	mov $lbg_name,"ep805" : gosub *load_cg
	mov $lbg_name,"ep806" : gosub *load_cg
	mov $lbg_name,"ep807_a" : gosub *load_cg
	mov $lbg_name,"ep808" : gosub *load_cg
	mov $lbg_name,"ep809_b" : gosub *load_cg
	mov $lbg_name,"c_c0205_a" : gosub *load_cg
	mov $lbg_name,"dlc_d1" : gosub *load_cg
	mov $lbg_name,"bec_a" : gosub *load_cg
	mov $lbg_name,"fec_a" : gosub *load_cg
	mov $lbg_name,"ep811" : gosub *load_cg
	mov $lbg_name,"ep812" : gosub *load_cg
	mov $lbg_name,"brc_er" : gosub *load_cg
	mov $lbg_name,"enc_a1" : gosub *load_cg
	mov $lbg_name,"ep814_d2" : gosub *load_cg
	mov $lbg_name,"ep815_1_" : gosub *load_cg
	mov $lbg_name,"ep815_2_" : gosub *load_cg
	mov $lbg_name,"ep816" : gosub *load_cg
	mov $lbg_name,"ep817" : gosub *load_cg
	mov $lbg_name,"ep818" : gosub *load_cg
	mov $lbg_name,"e0401_b" : gosub *load_cg
	mov $lbg_name,"eve_last2" : gosub *load_cg
	mov $lbg_name,"portrait_ep8" : gosub *load_cg

*load_cgs_7
	mov $lbg_name,"ep701" : gosub *load_cg
	mov $lbg_name,"g0101" : gosub *load_cg
	mov $lbg_name,"g0102" : gosub *load_cg
	mov $lbg_name,"no64_00000" : gosub *load_cg
	mov $lbg_name,"g0103" : gosub *load_cg
	mov $lbg_name,"g0201" : gosub *load_cg
	mov $lbg_name,"g0202" : gosub *load_cg
	mov $lbg_name,"wic_c" : gosub *load_cg
	mov $lbg_name,"g0301" : gosub *load_cg
	mov $lbg_name,"g0302" : gosub *load_cg
	mov $lbg_name,"g0401" : gosub *load_cg
	mov $lbg_name,"g0402" : gosub *load_cg
	mov $lbg_name,"g0404" : gosub *load_cg
	mov $lbg_name,"g0403" : gosub *load_cg
	mov $lbg_name,"ep702" : gosub *load_cg
	mov $lbg_name,"e0104_d" : gosub *load_cg
	mov $lbg_name,"ep703_b" : gosub *load_cg
	mov $lbg_name,"c_c0902_a" : gosub *load_cg
	mov $lbg_name,"ep704_b" : gosub *load_cg
	mov $lbg_name,"ep705_4" : gosub *load_cg
	mov $lbg_name,"c0201_b" : gosub *load_cg
	mov $lbg_name,"g0203_a" : gosub *load_cg
	mov $lbg_name,"portrait_ep7" : gosub *load_cg

*load_cgs_6
	mov $lbg_name,"ex02" : gosub *load_cg
	mov $lbg_name,"evc_c" : gosub *load_cg
	mov $lbg_name,"c_c0401_la" : gosub *load_cg
	mov $lbg_name,"ep602_b" : gosub *load_cg
	mov $lbg_name,"ep603" : gosub *load_cg
	mov $lbg_name,"ep601_nd2" : gosub *load_cg
	mov $lbg_name,"ep604_2" : gosub *load_cg
	mov $lbg_name,"ep605_c2" : gosub *load_cg
	mov $lbg_name,"wrc_a" : gosub *load_cg
	mov $lbg_name,"c_e0305_c" : gosub *load_cg
	mov $lbg_name,"ep606" : gosub *load_cg
	mov $lbg_name,"ep607" : gosub *load_cg
	mov $lbg_name,"portrait6" : gosub *load_cg

*load_cgs_5
	mov $lbg_name,"ep501" : gosub *load_cg
	mov $lbg_name,"ep502" : gosub *load_cg
	mov $lbg_name,"ep503_b" : gosub *load_cg
	mov $lbg_name,"ep504" : gosub *load_cg
	mov $lbg_name,"ep505" : gosub *load_cg
	mov $lbg_name,"portrait5" : gosub *load_cg
	mov $lbg_name,"e0901_b" : gosub *load_cg
	mov $lbg_name,"c_c0404_b" : gosub *load_cg
	mov $lbg_name,"bac_ga2n" : gosub *load_cg

*load_cgs_4
	;ura
	mov $lbg_name,"e0902" : gosub *load_cg

	;tea
	mov $lbg_name,"g0401" : gosub *load_cg
	mov $lbg_name,"g0404" : gosub *load_cg
	mov $lbg_name,"no60_00179" : gosub *load_cg
	mov $lbg_name,"e0901_a" : gosub *load_cg
	mov $lbg_name,"e0901_c" : gosub *load_cg

	;ep
	mov $lbg_name,"e0405" : gosub *load_cg
	mov $lbg_name,"e0404" : gosub *load_cg
	mov $lbg_name,"e0401_a" : gosub *load_cg
	mov $lbg_name,"e0401_b" : gosub *load_cg
	mov $lbg_name,"e0904_b" : gosub *load_cg
	mov $lbg_name,"c_c0402_ld" : gosub *load_cg
	mov $lbg_name,"c_c0203_lb" : gosub *load_cg
	mov $lbg_name,"c_c0404_lf" : gosub *load_cg
	mov $lbg_name,"c_c0403_f" : gosub *load_cg
	mov $lbg_name,"c_c0401_lb" : gosub *load_cg
	mov $lbg_name,"g0403" : gosub *load_cg
	mov $lbg_name,"g0402" : gosub *load_cg
	mov $lbg_name,"e0406" : gosub *load_cg
	mov $lbg_name,"c_e0406_f" : gosub *load_cg
	mov $lbg_name,"e0407" : gosub *load_cg

*load_cgs_3
	;ura
	mov $lbg_name,"c0406" : gosub *load_cg

	;ep
	mov $lbg_name,"e0301_a" : gosub *load_cg
	mov $lbg_name,"e0301_b" : gosub *load_cg
	mov $lbg_name,"e0301_c" : gosub *load_cg
	mov $lbg_name,"c0201_f" : gosub *load_cg
	mov $lbg_name,"c0301" : gosub *load_cg
	mov $lbg_name,"no55_00059" : gosub *load_cg
	mov $lbg_name,"no01_00119" : gosub *load_cg
	mov $lbg_name,"c_e0903_b" : gosub *load_cg
	mov $lbg_name,"portrait4" : gosub *load_cg
	mov $lbg_name,"c0302_b" : gosub *load_cg
	mov $lbg_name,"c_e0103_c" : gosub *load_cg
	mov $lbg_name,"g0301" : gosub *load_cg
	mov $lbg_name,"c_c0902_a" : gosub *load_cg
	mov $lbg_name,"c_c0901_b" : gosub *load_cg
	mov $lbg_name,"g0302" : gosub *load_cg
	mov $lbg_name,"c_e0305_d" : gosub *load_cg
	mov $lbg_name,"e0903_c" : gosub *load_cg
	mov $lbg_name,"c0303" : gosub *load_cg
	mov ?cg_list[0][35],1 ;no64 video

*load_cgs_2
	;ep
	mov $lbg_name,"c0202_b" : gosub *load_cg
	mov $lbg_name,"portrait3" : gosub *load_cg
	mov $lbg_name,"e0104_d" : gosub *load_cg
	mov $lbg_name,"g0201" : gosub *load_cg
	mov $lbg_name,"g0202" : gosub *load_cg
	mov $lbg_name,"c_c0205_b" : gosub *load_cg
	mov $lbg_name,"c_c0204_b" : gosub *load_cg
	mov $lbg_name,"g0203_b" : gosub *load_cg
	mov $lbg_name,"e0201" : gosub *load_cg

*load_cgs_1
	;ep
	mov $lbg_name,"portrait1" : gosub *load_cg
	mov $lbg_name,"g0101" : gosub *load_cg
	mov $lbg_name,"c0101_c" : gosub *load_cg
	mov $lbg_name,"c_e0102_b" : gosub *load_cg
	mov $lbg_name,"g0102" : gosub *load_cg
	mov $lbg_name,"c_e0101_a" : gosub *load_cg
	mov $lbg_name,"g0103" : gosub *load_cg

return




;*********************************************************
;Click & Wait text system
;*********************************************************

*skip_cw
ispage %Textcc12Flag ;Next page or not
if %TextCC12Flag != 1 jumpf 
	voice_vol 
	gosub *text_tagsave 
	mov %skip_clicks,off
	ignore_voicedelay off
	mov %unjumpable,off
	saveoff
~
return

*text_cw
ispage %Textcc12Flag ;Next page or not
if %skip_clicks = on goto *text_cw_next2

gptwait extension
getcursorpos %x,%y 	 ;Pick up the x and y positions of the cursor
;Adjust cursor positions and display it
if %TextCC12Flag = 0 amsp TextCC1SpNum,%x,%y-33
if %TextCC12Flag = 1 amsp TextCC2SpNum,%x,%y-33

if %autom_no_cur = 1 jauto
	if %TextCC12Flag = 0 vsp TextCC1SpNum,1
	if %TextCC12Flag = 1 vsp TextCC2SpNum,1
~

print 1

btndef clear

*text_cwlp

getzxc
gettab
textbtnwait %BtnRes

if %BtnRes = 0 goto *text_cw_next
if %BtnRes = -3 && %hide_textbox = 0 goto *text_cw_next ; wheel_down_hides_textbox
if %BtnRes = -11 goto *text_cw_next
if %BtnRes = -19 goto *text_cw_next
if %BtnRes = -20 gosub *log_jump_next_chapter

if %BtnRes = -1 && %r_mode_flg = 0  gosub *text_cw_rclk : goto *text_cw
if %BtnRes = -3 && %r_mode_flg = 0  gosub *text_cw_hide : goto *text_cw
if %BtnRes = -10 && %r_mode_flg = 0  gosub *text_cw_hide : goto *text_cw
if %BtnRes = -51 && %r_mode_flg = 0  gosub *text_cw_rclk : goto *text_cw

if %BtnRes = -2 && %r_mode_flg = 0 gosub *text_cw_lookback_go : goto *text_cw

goto *text_cwlp

*text_cw_next

;Remove the cursors
vsp TextCC1SpNum,0 : vsp TextCC2SpNum,0
print 1

*text_cw_next2

;text log after cursor TextCC2SpNum
if %TextCC12Flag = 1 gosub *text_tagsave 

;Trophy coding (count clicks and hours)
if %skip_clicks = off gosub *trophy_session_clicks
if %ts_session > 20 gosub *trophy_session_reset
inc %ts_session

dwavestop 0
dwavestop 1
dwavestop 2
dwavestop 43
dwavestop 44
dwavestop 45
dwavestop 46
waitlips

;Reset volume, autoclicks and save data
if %TextCC12Flag != 1 jumpf 
	voice_vol 
	mov %skip_clicks,off
	ignore_voicedelay off
	mov %unjumpable,off
	saveoff
~
return 

*text_cw_rclk
	gosub *trophy_session_reset
	;Get a screenshot image for savedata before entering the Bookmark unless we already have one
	if %disallow_saving == off getscreenshot 309,174

	vsp TextCC1SpNum,0 : vsp TextCC2SpNum,0
	print 1

	;texthide   ;Hide the text
	textoff 	;We need to hide the textbox either

	gosub *rmenu_custom

	;We don't need our screenshot any more unless it is an old one we cannot redo
	if %disallow_saving == off deletescreenshot

	;textshow
return

*text_cw_lookback_go
	;hide textbox
	vsp TextCC1SpNum,0
	vsp TextCC2SpNum,0
	print 1
	textoff

	blur 2000
	flush 1 
	gosub *menu_rain_pause
	gosub *text_cw_lookback
return

*text_cw_hide
	vsp TextCC1SpNum,0 : vsp TextCC2SpNum,0
	print 1

	;texthide   ;Hide the text
	textoff 	;We need to hide the textbox either

*text_cw_hide_again

	textbtnwait %BtnRes

	if %BtnRes = 0 goto *text_cw_hide_end ;lclick
	if %BtnRes = -1 goto *text_cw_hide_end ;rclick
	if %BtnRes = -10 goto *text_cw_hide_end ;esc
	if %BtnRes = -11 goto *text_cw_hide_end ;space

	goto *text_cw_hide_again

*text_cw_hide_end

	texton
return


;*********************************************************
;Log Viewing System
;*********************************************************

;Saves the dialogues into LogState
*text_tagsave
	if %no_log_gen == 0 jumpf 
		gosub *get_name
		if %unjumpable == 1 && $tmp5 != "" setlog 1,"","{p:0:【}"+$tmp5+"{p:0:】}{n}","",0 : return
		if %unjumpable == 1 && $tmp5 == "" setlog 1,"","","",0 : return
		if $tmp5 != "" setlog 1,"","{p:0:【}"+$tmp5+"{p:0:】}{n}" : return
		setlog 1
		return
	~
	mark_read
	savechoices $log_choices
return

;Returns the speaker's name
*get_name

if $cur_character = "non" mov $tmp5,""  : jumpf
if $cur_character = "ama" mov $tmp5,name_ama  : jumpf
if $cur_character = "bea" mov $tmp5,name_bea  : jumpf
if $cur_character = "ber" mov $tmp5,name_ber  : jumpf
if $cur_character = "but" mov $tmp5,name_but  : jumpf
if $cur_character = "cla" mov $tmp5,name_cla  : jumpf
if $cur_character = "enj" mov $tmp5,name_enj  : jumpf
if $cur_character = "ev2" mov $tmp5,name_ev2  : jumpf
if $cur_character = "eva" mov $tmp5,name_eva  : jumpf
if $cur_character = "gap" mov $tmp5,name_gap  : jumpf
if $cur_character = "gen" mov $tmp5,name_gen  : jumpf
if $cur_character = "geo" mov $tmp5,name_geo  : jumpf
if $cur_character = "go2" mov $tmp5,name_go2  : jumpf
if $cur_character = "goa" mov $tmp5,name_goa  : jumpf
if $cur_character = "goh" mov $tmp5,name_goh  : jumpf
if $cur_character = "hid" mov $tmp5,name_hid  : jumpf
if $cur_character = "jes" mov $tmp5,name_jes  : jumpf
if $cur_character = "kan" mov $tmp5,name_kan  : jumpf
if $cur_character = "kas" mov $tmp5,name_kas  : jumpf
if $cur_character = "kaw" mov $tmp5,name_kaw  : jumpf
if $cur_character = "kin" mov $tmp5,name_kin  : jumpf
if $cur_character = "kir" mov $tmp5,name_kir  : jumpf
if $cur_character = "ku2" mov $tmp5,name_ku2  : jumpf
if $cur_character = "kum" mov $tmp5,name_kum  : jumpf
if $cur_character = "lam" mov $tmp5,name_lam  : jumpf
if $cur_character = "mar" mov $tmp5,name_mar  : jumpf
if $cur_character = "na2" mov $tmp5,name_na2  : jumpf
if $cur_character = "nan" mov $tmp5,name_nan  : jumpf
if $cur_character = "nat" mov $tmp5,name_nat  : jumpf
if $cur_character = "oko" mov $tmp5,name_oko  : jumpf
if $cur_character = "pro" mov $tmp5,name_pro  : jumpf
if $cur_character = "rg1" mov $tmp5,name_rg1  : jumpf
if $cur_character = "rg2" mov $tmp5,name_rg2  : jumpf
if $cur_character = "rg3" mov $tmp5,name_rg3  : jumpf
if $cur_character = "rg4" mov $tmp5,name_rg4  : jumpf
if $cur_character = "rg5" mov $tmp5,name_rg5  : jumpf
if $cur_character = "rg6" mov $tmp5,name_rg6  : jumpf
if $cur_character = "rg7" mov $tmp5,name_rg7  : jumpf
if $cur_character = "ron" mov $tmp5,name_ron  : jumpf
if $cur_character = "ros" mov $tmp5,name_ros  : jumpf
if $cur_character = "rud" mov $tmp5,name_rud  : jumpf
if $cur_character = "s00" mov $tmp5,name_s00  : jumpf
if $cur_character = "s41" mov $tmp5,name_s41  : jumpf
if $cur_character = "s45" mov $tmp5,name_s45  : jumpf
if $cur_character = "s55" mov $tmp5,name_s55  : jumpf
if $cur_character = "s56" mov $tmp5,name_s56  : jumpf
if $cur_character = "sak" mov $tmp5,name_sak  : jumpf
if $cur_character = "sha" mov $tmp5,name_sha  : jumpf
if $cur_character = "wal" mov $tmp5,name_wal  : jumpf
if $cur_character = "fea" mov $tmp5,name_fea  : jumpf
if $cur_character = "zep" mov $tmp5,name_zep  : jumpf
if $cur_character = "fur" mov $tmp5,name_fur  : jumpf
if $cur_character = "rio" mov $tmp5,name_rio  : jumpf
if $cur_character = "wil" mov $tmp5,name_wil  : jumpf
if $cur_character = "cur" mov $tmp5,name_cur  : jumpf
if $cur_character = "fe2" mov $tmp5,name_fe2  : jumpf
if $cur_character = "bu3" mov $tmp5,name_bu3  : jumpf
if $cur_character = "be3" mov $tmp5,name_be3  : jumpf
if $cur_character = "be4" mov $tmp5,name_be4  : jumpf
if $cur_character = "en2" mov $tmp5,name_en2  : jumpf
if $cur_character = "en3" mov $tmp5,name_en3  : jumpf
if $cur_character = "eri" mov $tmp5,name_eri  : jumpf
if $cur_character = "dla" mov $tmp5,name_dla  : jumpf
if $cur_character = "ger" mov $tmp5,name_ger  : jumpf
if $cur_character = "cor" mov $tmp5,name_cor  : jumpf

mov $tmp5,"" : jumpf

~

return

*set_choice
	getparam %TextCC12Flag
	make_choice %TextCC12Flag
	main_label $log_build_start_location
	; We're about to generate log from a position just before the choice we just made,
	; so step the accept_choice pointer back 1 to make sure that loggen superskip can accept that choice
	get_cvs %Free1
	accept_choice_next_index %Free1-1
	; Unless screen flipping is disabled we may get previous dialogue flashback. Not fully certain why.
	screenflip 0
	; Now generate log
	gosub *log_generate
	set_name_window
	screenflip 1
return

;resets log variables
*log_reset
	clear_cache_img 1 ;clear bg cache
	clear_cache_img 2 ;clear ld cache
	clear_cache_snd 1 ;clear lv cache (only)
	moreram 2048 ; on mobiles clear everything
	gosub *log_generate
	jskip_s mark_all_read ~
	bg black,0
	mov %TextCC12Flag,1
	mov %disallow_saving,0
	set_name_window_non
	skip_on
	saveoff
	print 1 ;only commit the textbox?
return

*log_common_ignore
	ignore_cmd "lss","lsp","lbg","lbg2","rain_load","rain_pause","rain_resume","rain_params","rumble","pam","anim","flush","flush2","color_mod2","color_mod","snow","snow2"
	ignore_cmd "seplay","bgmplay","bgmplay2","ssa_stop","meplay","vol_bgm","vol_me","vol_se","vol_mix_fade","show_whirl","show_glass","gpt","agpt","gptwait","textoff"
	ignore_cmd "aspt","spt","aspt2","spt2","sptwait","sptwait2","csp_slot","waits","wait","wait2","z_order_override","z_order_override2","lv","csp","waitvideo"
	ignore_cmd "lips_sprite","gstc","gstt","gstg","break_glass","break_glass2","display_clock","display_clock2","skip_off","skip_on","trophy_open"
	ignore_cmd "spritesetptwait","aspritesetpt","spritesetpt","spriteset_enable","mask_set","texec3","ch_done","blend_mode","blend_mode2","ssa_load"
	ignore_cmd "saveoff","waittimer","flg_p","set_scale_center","waitvoice","show_characters","reset_set","drop_cache","freemem","systemcall","set_saving","moreram"
	;Do not ignore "get_response" commands -- these read from the saved choicepoints in superskip, and superskip needs to be able to follow the correct path
	;Also do not ignore "show_coin_counter" commands -- these do important work setting certain variables... instead we'll ignore some subfn of them
	ignore_cmd "click","break_glass3","break_glass4","show_coin_counter_real","show_coin_counter2_real","show_coin_counter3_real","cake","quiz","quiz2","all_presents_discarded","murder_story"
	ignore_inl_cmd "wait","delay","text_fade_t","gstg","text_speed_t"
return

*log_generate
	if %no_log_gen == 1 vsp TextCC3SpNum,0 : mov %skip_icon,off : return
	get_cvs %Free1
	if %log_is_generated_to_cvs == %Free1 return
	jnskip_s vsp TextCC3SpNum,0 : mov %skip_icon,off : return ~

	gosub *log_common_ignore

	;stopwatch "For the sake of lags"
	
	mov %no_log_gen,1

	;Backup loggen variables
	for %Free2 = 1 to 10
		mov %Free3,loggen_var_backup+%Free2
		mov ?loggen_var_backup[%Free2-1],%%Free3
	next

	;If you reach last quiz with enj and answer it,
	;loggen will proceed several chapters forward.
	;This must not affect the current displayed chapter in rmenu.
	mov $back_chapter_r_click,$name_chapter_r_click
	mov $back_chapter_save,$name_chapter_save

	; log generate no longer clears log.
	; log_reset is now improperly named.
	if %log_is_generated_to_cvs != -1 jumpf 
		accept_choice_next_index 0
		mov $log_build_start_location,""
		mov %total_coin_count,0
		mov %eva_hint_counter,0
	~

	;No logs for omakes
	past_label %TextCC12Flag,"*o1"
	if %TextCC12Flag == 1 goto *log_none

	if %CHIRU_MODE != 1 jumpf

	past_label %TextCC12Flag,"*ura_teatime_8"
	if %TextCC12Flag == 1 && $log_build_start_location != "" sskip $TextCC12Flag,$log_build_start_location,"*ura_8_end" : goto *log_none
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_8","*ura_8_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_8"
	if %TextCC12Flag == 1 && $log_build_start_location != "" sskip $TextCC12Flag,$log_build_start_location,"*teatime_8_end" : goto *log_none
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_8","*teatime_8_end" : goto *log_none
	past_label %TextCC12Flag,"*umi8_op"
	if %TextCC12Flag == 1 && $log_build_start_location != "" sskip $TextCC12Flag,$log_build_start_location,"*umi8_end" : goto *log_none
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi8_op","*umi8_end" : goto *log_none

	past_label %TextCC12Flag,"*ura_teatime_7"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_7","*ura_7_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_7"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_7","*teatime_7_end" : goto *log_none
	past_label %TextCC12Flag,"*umi7_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi7_op","*umi7_end" : goto *log_none

	past_label %TextCC12Flag,"*ura_teatime_6"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_6","*ura_6_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_6"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_6","*teatime_6_end" : goto *log_none
	past_label %TextCC12Flag,"*umi6_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi6_op","*umi6_end" : goto *log_none

	past_label %TextCC12Flag,"*ura_teatime_5"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_5","*ura_5_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_5"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_5","*teatime_5_end" : goto *log_none
	past_label %TextCC12Flag,"*umi5_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi5_op","*umi5_end" : goto *log_none

	~

	if %CHIRU_MODE != 0 jumpf

	past_label %TextCC12Flag,"*ura_teatime_4"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_4","*ura_4_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_4"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_4","*teatime_4_end" : goto *log_none
	past_label %TextCC12Flag,"*umi4_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi4_op","*umi4_end" : goto *log_none

	past_label %TextCC12Flag,"*ura_teatime_3"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_3","*ura_3_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_3"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_3","*teatime_3_end" : goto *log_none
	past_label %TextCC12Flag,"*umi3_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi3_op","*umi3_end" : goto *log_none

	past_label %TextCC12Flag,"*ura_teatime_2"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_2","*ura_2_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_2"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_2","*teatime_2_end" : goto *log_none
	past_label %TextCC12Flag,"*umi2_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi2_op","*umi2_end" : goto *log_none

	past_label %TextCC12Flag,"*ura_teatime_1"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*ura_teatime_1","*ura_1_end" : goto *log_none
	past_label %TextCC12Flag,"*teatime_1"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*teatime_1","*teatime_1_end" : goto *log_none
	past_label %TextCC12Flag,"*umi1_op"
	if %TextCC12Flag == 1 sskip $TextCC12Flag,"*umi1_op","*umi1_end" : goto *log_none

	~

*log_none
	ignore_cmd_clear
	ignore_inl_cmd_clear

	sskip_unset

	;stopwatch "Don't look at me"

	;Restore loggen variables from backup
	for %Free2 = 1 to 10
		mov %Free3,loggen_var_backup+%Free2
		mov %%Free3,?loggen_var_backup[%Free2-1]
	next
	mov $name_chapter_r_click,$back_chapter_r_click
	mov $name_chapter_save,$back_chapter_save

	mov %no_log_gen,0
	vsp TextCC3SpNum,0 
	mov %skip_icon,off
	get_cvs %Free1
	mov %log_is_generated_to_cvs,%Free1 
return

;Sprite cleaning system
*log_clean_section
	
	btndef ""
	_csp 320
	_csp backlogupbtn
	_csp backlogdownbtn
	_csp 399
	_csp 398
	_csp 306,314

	border_pad_pop

return

*log_jump_next_chapter
	if %scenario_Number != 8 jumpf
		if $name_chapter_save = "8_op" if %UMINEKOEND >= 81 || $flag_scenario_8_1 = "●"  : mov $log_ch_current,"*umi8_op" : mov $log_ch_next,"*umi8_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_01" if %UMINEKOEND >= 81 || $flag_scenario_8_2 = "●"  : mov $log_ch_current,"*umi8_1"  : mov $log_ch_next,"*umi8_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_02" if %UMINEKOEND >= 81 || $flag_scenario_8_3 = "●"  : mov $log_ch_current,"*umi8_2"  : mov $log_ch_next,"*umi8_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_03" if %UMINEKOEND >= 81 || $flag_scenario_8_4 = "●"  : mov $log_ch_current,"*umi8_3"  : mov $log_ch_next,"*umi8_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_04" if %UMINEKOEND >= 81 || $flag_scenario_8_5 = "●"  : mov $log_ch_current,"*umi8_4"  : mov $log_ch_next,"*umi8_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_05" if %UMINEKOEND >= 81 || $flag_scenario_8_6 = "●"  : mov $log_ch_current,"*umi8_5"  : mov $log_ch_next,"*umi8_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_06" if %UMINEKOEND >= 81 || $flag_scenario_8_7 = "●"  : mov $log_ch_current,"*umi8_6"  : mov $log_ch_next,"*umi8_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_07" if %UMINEKOEND >= 81 || $flag_scenario_8_8 = "●"  : mov $log_ch_current,"*umi8_7"  : mov $log_ch_next,"*umi8_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_08" if %UMINEKOEND >= 81 || $flag_scenario_8_9 = "●"  : mov $log_ch_current,"*umi8_8"  : mov $log_ch_next,"*umi8_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_09" if %UMINEKOEND >= 81 || $flag_scenario_8_10 = "●" : mov $log_ch_current,"*umi8_9"  : mov $log_ch_next,"*umi8_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_10" if %UMINEKOEND >= 81 || $flag_scenario_8_11 = "●" : mov $log_ch_current,"*umi8_10" : mov $log_ch_next,"*umi8_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_11" if %UMINEKOEND >= 81 || $flag_scenario_8_12 = "●" : mov $log_ch_current,"*umi8_11" : mov $log_ch_next,"*umi8_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_12" if %UMINEKOEND >= 81 || $flag_scenario_8_13 = "●" : mov $log_ch_current,"*umi8_12" : mov $log_ch_next,"*umi8_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_13" if %UMINEKOEND >= 81 || $flag_scenario_8_14 = "●" : mov $log_ch_current,"*umi8_13" : mov $log_ch_next,"*umi8_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_14" if %UMINEKOEND >= 81 || $flag_scenario_8_15 = "●" : mov $log_ch_current,"*umi8_14" : mov $log_ch_next,"*umi8_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "8_15" if %UMINEKOEND >= 81 || $flag_scenario_8_16 = "●" : mov $log_ch_current,"*umi8_15" : mov $log_ch_next,"*umi8_16" : goto *log_jump_next_chapter_ok
	~
	if %scenario_Number != 7 jumpf
		if $name_chapter_save = "7_op" if %UMINEKOEND >= 71 || $flag_scenario_7_1 = "●"  : mov $log_ch_current,"*umi7_op" : mov $log_ch_next,"*umi7_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_01" if %UMINEKOEND >= 71 || $flag_scenario_7_2 = "●"  : mov $log_ch_current,"*umi7_1"  : mov $log_ch_next,"*umi7_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_02" if %UMINEKOEND >= 71 || $flag_scenario_7_3 = "●"  : mov $log_ch_current,"*umi7_2"  : mov $log_ch_next,"*umi7_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_03" if %UMINEKOEND >= 71 || $flag_scenario_7_4 = "●"  : mov $log_ch_current,"*umi7_3"  : mov $log_ch_next,"*umi7_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_04" if %UMINEKOEND >= 71 || $flag_scenario_7_5 = "●"  : mov $log_ch_current,"*umi7_4"  : mov $log_ch_next,"*umi7_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_05" if %UMINEKOEND >= 71 || $flag_scenario_7_6 = "●"  : mov $log_ch_current,"*umi7_5"  : mov $log_ch_next,"*umi7_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_06" if %UMINEKOEND >= 71 || $flag_scenario_7_7 = "●"  : mov $log_ch_current,"*umi7_6"  : mov $log_ch_next,"*umi7_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_07" if %UMINEKOEND >= 71 || $flag_scenario_7_8 = "●"  : mov $log_ch_current,"*umi7_7"  : mov $log_ch_next,"*umi7_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_08" if %UMINEKOEND >= 71 || $flag_scenario_7_9 = "●"  : mov $log_ch_current,"*umi7_8"  : mov $log_ch_next,"*umi7_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_09" if %UMINEKOEND >= 71 || $flag_scenario_7_10 = "●" : mov $log_ch_current,"*umi7_9"  : mov $log_ch_next,"*umi7_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_10" if %UMINEKOEND >= 71 || $flag_scenario_7_11 = "●" : mov $log_ch_current,"*umi7_10" : mov $log_ch_next,"*umi7_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_11" if %UMINEKOEND >= 71 || $flag_scenario_7_12 = "●" : mov $log_ch_current,"*umi7_11" : mov $log_ch_next,"*umi7_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_12" if %UMINEKOEND >= 71 || $flag_scenario_7_13 = "●" : mov $log_ch_current,"*umi7_12" : mov $log_ch_next,"*umi7_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_13" if %UMINEKOEND >= 71 || $flag_scenario_7_14 = "●" : mov $log_ch_current,"*umi7_13" : mov $log_ch_next,"*umi7_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_14" if %UMINEKOEND >= 71 || $flag_scenario_7_15 = "●" : mov $log_ch_current,"*umi7_14" : mov $log_ch_next,"*umi7_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_15" if %UMINEKOEND >= 71 || $flag_scenario_7_16 = "●" : mov $log_ch_current,"*umi7_15" : mov $log_ch_next,"*umi7_16" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_16" if %UMINEKOEND >= 71 || $flag_scenario_7_17 = "●" : mov $log_ch_current,"*umi7_16" : mov $log_ch_next,"*umi7_17" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "7_17" if %UMINEKOEND >= 71 || $flag_scenario_7_18 = "●" : mov $log_ch_current,"*umi7_17" : mov $log_ch_next,"*umi7_18" : goto *log_jump_next_chapter_ok
	~
	if %scenario_Number != 6 jumpf
		if $name_chapter_save = "6_op" if %UMINEKOEND >= 61 || $flag_scenario_6_1 = "●"  : mov $log_ch_current,"*umi6_op" : mov $log_ch_next,"*umi6_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_01" if %UMINEKOEND >= 61 || $flag_scenario_6_2 = "●"  : mov $log_ch_current,"*umi6_1"  : mov $log_ch_next,"*umi6_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_02" if %UMINEKOEND >= 61 || $flag_scenario_6_3 = "●"  : mov $log_ch_current,"*umi6_2"  : mov $log_ch_next,"*umi6_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_03" if %UMINEKOEND >= 61 || $flag_scenario_6_4 = "●"  : mov $log_ch_current,"*umi6_3"  : mov $log_ch_next,"*umi6_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_04" if %UMINEKOEND >= 61 || $flag_scenario_6_5 = "●"  : mov $log_ch_current,"*umi6_4"  : mov $log_ch_next,"*umi6_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_05" if %UMINEKOEND >= 61 || $flag_scenario_6_6 = "●"  : mov $log_ch_current,"*umi6_5"  : mov $log_ch_next,"*umi6_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_06" if %UMINEKOEND >= 61 || $flag_scenario_6_7 = "●"  : mov $log_ch_current,"*umi6_6"  : mov $log_ch_next,"*umi6_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_07" if %UMINEKOEND >= 61 || $flag_scenario_6_8 = "●"  : mov $log_ch_current,"*umi6_7"  : mov $log_ch_next,"*umi6_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_08" if %UMINEKOEND >= 61 || $flag_scenario_6_9 = "●"  : mov $log_ch_current,"*umi6_8"  : mov $log_ch_next,"*umi6_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_09" if %UMINEKOEND >= 61 || $flag_scenario_6_10 = "●" : mov $log_ch_current,"*umi6_9"  : mov $log_ch_next,"*umi6_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_10" if %UMINEKOEND >= 61 || $flag_scenario_6_11 = "●" : mov $log_ch_current,"*umi6_10" : mov $log_ch_next,"*umi6_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_11" if %UMINEKOEND >= 61 || $flag_scenario_6_12 = "●" : mov $log_ch_current,"*umi6_11" : mov $log_ch_next,"*umi6_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_12" if %UMINEKOEND >= 61 || $flag_scenario_6_13 = "●" : mov $log_ch_current,"*umi6_12" : mov $log_ch_next,"*umi6_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_13" if %UMINEKOEND >= 61 || $flag_scenario_6_14 = "●" : mov $log_ch_current,"*umi6_13" : mov $log_ch_next,"*umi6_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_14" if %UMINEKOEND >= 61 || $flag_scenario_6_15 = "●" : mov $log_ch_current,"*umi6_14" : mov $log_ch_next,"*umi6_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_15" if %UMINEKOEND >= 61 || $flag_scenario_6_16 = "●" : mov $log_ch_current,"*umi6_15" : mov $log_ch_next,"*umi6_16" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_16" if %UMINEKOEND >= 61 || $flag_scenario_6_17 = "●" : mov $log_ch_current,"*umi6_16" : mov $log_ch_next,"*umi6_17" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "6_17" if %UMINEKOEND >= 61 || $flag_scenario_6_18 = "●" : mov $log_ch_current,"*umi6_17" : mov $log_ch_next,"*umi6_18" : goto *log_jump_next_chapter_ok
	~
	if %scenario_Number != 5 jumpf
		if $name_chapter_save = "5_op" if %UMINEKOEND >= 51 || $flag_scenario_5_1 = "●"  : mov $log_ch_current,"*umi5_op" : mov $log_ch_next,"*umi5_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_01" if %UMINEKOEND >= 51 || $flag_scenario_5_2 = "●"  : mov $log_ch_current,"*umi5_1"  : mov $log_ch_next,"*umi5_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_02" if %UMINEKOEND >= 51 || $flag_scenario_5_3 = "●"  : mov $log_ch_current,"*umi5_2"  : mov $log_ch_next,"*umi5_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_03" if %UMINEKOEND >= 51 || $flag_scenario_5_4 = "●"  : mov $log_ch_current,"*umi5_3"  : mov $log_ch_next,"*umi5_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_04" if %UMINEKOEND >= 51 || $flag_scenario_5_5 = "●"  : mov $log_ch_current,"*umi5_4"  : mov $log_ch_next,"*umi5_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_05" if %UMINEKOEND >= 51 || $flag_scenario_5_6 = "●"  : mov $log_ch_current,"*umi5_5"  : mov $log_ch_next,"*umi5_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_06" if %UMINEKOEND >= 51 || $flag_scenario_5_7 = "●"  : mov $log_ch_current,"*umi5_6"  : mov $log_ch_next,"*umi5_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_07" if %UMINEKOEND >= 51 || $flag_scenario_5_8 = "●"  : mov $log_ch_current,"*umi5_7"  : mov $log_ch_next,"*umi5_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_08" if %UMINEKOEND >= 51 || $flag_scenario_5_9 = "●"  : mov $log_ch_current,"*umi5_8"  : mov $log_ch_next,"*umi5_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_09" if %UMINEKOEND >= 51 || $flag_scenario_5_10 = "●" : mov $log_ch_current,"*umi5_9"  : mov $log_ch_next,"*umi5_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_10" if %UMINEKOEND >= 51 || $flag_scenario_5_11 = "●" : mov $log_ch_current,"*umi5_10" : mov $log_ch_next,"*umi5_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_11" if %UMINEKOEND >= 51 || $flag_scenario_5_12 = "●" : mov $log_ch_current,"*umi5_11" : mov $log_ch_next,"*umi5_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_12" if %UMINEKOEND >= 51 || $flag_scenario_5_13 = "●" : mov $log_ch_current,"*umi5_12" : mov $log_ch_next,"*umi5_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_13" if %UMINEKOEND >= 51 || $flag_scenario_5_14 = "●" : mov $log_ch_current,"*umi5_13" : mov $log_ch_next,"*umi5_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "5_14" if %UMINEKOEND >= 51 || $flag_scenario_5_15 = "●" : mov $log_ch_current,"*umi5_14" : mov $log_ch_next,"*umi5_15" : goto *log_jump_next_chapter_ok
	~
	if %scenario_Number != 4 jumpf
		if $name_chapter_save = "4_op" if %UMINEKOEND >= 41 || $flag_scenario_4_1 = "●"  : mov $log_ch_current,"*umi4_op" : mov $log_ch_next,"*umi4_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_01" if %UMINEKOEND >= 41 || $flag_scenario_4_2 = "●"  : mov $log_ch_current,"*umi4_1"  : mov $log_ch_next,"*umi4_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_02" if %UMINEKOEND >= 41 || $flag_scenario_4_3 = "●"  : mov $log_ch_current,"*umi4_2"  : mov $log_ch_next,"*umi4_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_03" if %UMINEKOEND >= 41 || $flag_scenario_4_4 = "●"  : mov $log_ch_current,"*umi4_3"  : mov $log_ch_next,"*umi4_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_04" if %UMINEKOEND >= 41 || $flag_scenario_4_5 = "●"  : mov $log_ch_current,"*umi4_4"  : mov $log_ch_next,"*umi4_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_05" if %UMINEKOEND >= 41 || $flag_scenario_4_6 = "●"  : mov $log_ch_current,"*umi4_5"  : mov $log_ch_next,"*umi4_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_06" if %UMINEKOEND >= 41 || $flag_scenario_4_7 = "●"  : mov $log_ch_current,"*umi4_6"  : mov $log_ch_next,"*umi4_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_07" if %UMINEKOEND >= 41 || $flag_scenario_4_8 = "●"  : mov $log_ch_current,"*umi4_7"  : mov $log_ch_next,"*umi4_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_08" if %UMINEKOEND >= 41 || $flag_scenario_4_9 = "●"  : mov $log_ch_current,"*umi4_8"  : mov $log_ch_next,"*umi4_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_09" if %UMINEKOEND >= 41 || $flag_scenario_4_10 = "●" : mov $log_ch_current,"*umi4_9"  : mov $log_ch_next,"*umi4_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_10" if %UMINEKOEND >= 41 || $flag_scenario_4_11 = "●" : mov $log_ch_current,"*umi4_10" : mov $log_ch_next,"*umi4_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_11" if %UMINEKOEND >= 41 || $flag_scenario_4_12 = "●" : mov $log_ch_current,"*umi4_11" : mov $log_ch_next,"*umi4_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_12" if %UMINEKOEND >= 41 || $flag_scenario_4_13 = "●" : mov $log_ch_current,"*umi4_12" : mov $log_ch_next,"*umi4_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_13" if %UMINEKOEND >= 41 || $flag_scenario_4_14 = "●" : mov $log_ch_current,"*umi4_13" : mov $log_ch_next,"*umi4_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_14" if %UMINEKOEND >= 41 || $flag_scenario_4_15 = "●" : mov $log_ch_current,"*umi4_14" : mov $log_ch_next,"*umi4_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_15" if %UMINEKOEND >= 41 || $flag_scenario_4_16 = "●" : mov $log_ch_current,"*umi4_15" : mov $log_ch_next,"*umi4_16" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_16" if %UMINEKOEND >= 41 || $flag_scenario_4_17 = "●" : mov $log_ch_current,"*umi4_16" : mov $log_ch_next,"*umi4_17" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_17" if %UMINEKOEND >= 41 || $flag_scenario_4_18 = "●" : mov $log_ch_current,"*umi4_17" : mov $log_ch_next,"*umi4_18" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "4_18" if %UMINEKOEND >= 41 || $flag_scenario_4_19 = "●" : mov $log_ch_current,"*umi4_18" : mov $log_ch_next,"*umi4_19" : goto *log_jump_next_chapter_ok
	~
	if %scenario_Number != 3 jumpf
		if $name_chapter_save = "3_op" if %UMINEKOEND >= 31 || $flag_scenario_3_1 = "●"  : mov $log_ch_current,"*umi3_op" : mov $log_ch_next,"*umi3_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_01" if %UMINEKOEND >= 31 || $flag_scenario_3_2 = "●"  : mov $log_ch_current,"*umi3_1"  : mov $log_ch_next,"*umi3_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_02" if %UMINEKOEND >= 31 || $flag_scenario_3_3 = "●"  : mov $log_ch_current,"*umi3_2"  : mov $log_ch_next,"*umi3_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_03" if %UMINEKOEND >= 31 || $flag_scenario_3_4 = "●"  : mov $log_ch_current,"*umi3_3"  : mov $log_ch_next,"*umi3_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_04" if %UMINEKOEND >= 31 || $flag_scenario_3_5 = "●"  : mov $log_ch_current,"*umi3_4"  : mov $log_ch_next,"*umi3_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_05" if %UMINEKOEND >= 31 || $flag_scenario_3_6 = "●"  : mov $log_ch_current,"*umi3_5"  : mov $log_ch_next,"*umi3_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_06" if %UMINEKOEND >= 31 || $flag_scenario_3_7 = "●"  : mov $log_ch_current,"*umi3_6"  : mov $log_ch_next,"*umi3_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_07" if %UMINEKOEND >= 31 || $flag_scenario_3_8 = "●"  : mov $log_ch_current,"*umi3_7"  : mov $log_ch_next,"*umi3_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_08" if %UMINEKOEND >= 31 || $flag_scenario_3_9 = "●"  : mov $log_ch_current,"*umi3_8"  : mov $log_ch_next,"*umi3_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_09" if %UMINEKOEND >= 31 || $flag_scenario_3_10 = "●" : mov $log_ch_current,"*umi3_9"  : mov $log_ch_next,"*umi3_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_10" if %UMINEKOEND >= 31 || $flag_scenario_3_11 = "●" : mov $log_ch_current,"*umi3_10" : mov $log_ch_next,"*umi3_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_11" if %UMINEKOEND >= 31 || $flag_scenario_3_12 = "●" : mov $log_ch_current,"*umi3_11" : mov $log_ch_next,"*umi3_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_12" if %UMINEKOEND >= 31 || $flag_scenario_3_13 = "●" : mov $log_ch_current,"*umi3_12" : mov $log_ch_next,"*umi3_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_13" if %UMINEKOEND >= 31 || $flag_scenario_3_14 = "●" : mov $log_ch_current,"*umi3_13" : mov $log_ch_next,"*umi3_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_14" if %UMINEKOEND >= 31 || $flag_scenario_3_15 = "●" : mov $log_ch_current,"*umi3_14" : mov $log_ch_next,"*umi3_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_15" if %UMINEKOEND >= 31 || $flag_scenario_3_16 = "●" : mov $log_ch_current,"*umi3_15" : mov $log_ch_next,"*umi3_16" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_16" if %UMINEKOEND >= 31 || $flag_scenario_3_17 = "●" : mov $log_ch_current,"*umi3_16" : mov $log_ch_next,"*umi3_17" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "3_17" if %UMINEKOEND >= 31 || $flag_scenario_3_18 = "●" : mov $log_ch_current,"*umi3_17" : mov $log_ch_next,"*umi3_18" : goto *log_jump_next_chapter_ok
	~
	if %scenario_Number != 2 jumpf
		if $name_chapter_save = "2_op" if %UMINEKOEND >= 21 || $flag_scenario_2_1 = "●"  : mov $log_ch_current,"*umi2_op" : mov $log_ch_next,"*umi2_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_01" if %UMINEKOEND >= 21 || $flag_scenario_2_2 = "●"  : mov $log_ch_current,"*umi2_1"  : mov $log_ch_next,"*umi2_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_02" if %UMINEKOEND >= 21 || $flag_scenario_2_3 = "●"  : mov $log_ch_current,"*umi2_2"  : mov $log_ch_next,"*umi2_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_03" if %UMINEKOEND >= 21 || $flag_scenario_2_4 = "●"  : mov $log_ch_current,"*umi2_3"  : mov $log_ch_next,"*umi2_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_04" if %UMINEKOEND >= 21 || $flag_scenario_2_5 = "●"  : mov $log_ch_current,"*umi2_4"  : mov $log_ch_next,"*umi2_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_05" if %UMINEKOEND >= 21 || $flag_scenario_2_6 = "●"  : mov $log_ch_current,"*umi2_5"  : mov $log_ch_next,"*umi2_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_06" if %UMINEKOEND >= 21 || $flag_scenario_2_7 = "●"  : mov $log_ch_current,"*umi2_6"  : mov $log_ch_next,"*umi2_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_07" if %UMINEKOEND >= 21 || $flag_scenario_2_8 = "●"  : mov $log_ch_current,"*umi2_7"  : mov $log_ch_next,"*umi2_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_08" if %UMINEKOEND >= 21 || $flag_scenario_2_9 = "●"  : mov $log_ch_current,"*umi2_8"  : mov $log_ch_next,"*umi2_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_09" if %UMINEKOEND >= 21 || $flag_scenario_2_10 = "●" : mov $log_ch_current,"*umi2_9"  : mov $log_ch_next,"*umi2_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_10" if %UMINEKOEND >= 21 || $flag_scenario_2_11 = "●" : mov $log_ch_current,"*umi2_10" : mov $log_ch_next,"*umi2_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_11" if %UMINEKOEND >= 21 || $flag_scenario_2_12 = "●" : mov $log_ch_current,"*umi2_11" : mov $log_ch_next,"*umi2_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_12" if %UMINEKOEND >= 21 || $flag_scenario_2_13 = "●" : mov $log_ch_current,"*umi2_12" : mov $log_ch_next,"*umi2_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_13" if %UMINEKOEND >= 21 || $flag_scenario_2_14 = "●" : mov $log_ch_current,"*umi2_13" : mov $log_ch_next,"*umi2_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_14" if %UMINEKOEND >= 21 || $flag_scenario_2_15 = "●" : mov $log_ch_current,"*umi2_14" : mov $log_ch_next,"*umi2_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_15" if %UMINEKOEND >= 21 || $flag_scenario_2_16 = "●" : mov $log_ch_current,"*umi2_15" : mov $log_ch_next,"*umi2_16" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_16" if %UMINEKOEND >= 21 || $flag_scenario_2_17 = "●" : mov $log_ch_current,"*umi2_16" : mov $log_ch_next,"*umi2_17" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "2_17" if %UMINEKOEND >= 21 || $flag_scenario_2_18 = "●" : mov $log_ch_current,"*umi2_17" : mov $log_ch_next,"*umi2_18" : goto *log_jump_next_chapter_ok

	if %scenario_Number != 1 jumpf
		if $name_chapter_save = "1_op" if %UMINEKOEND >= 11 || $flag_scenario_1_1 = "●"  : mov $log_ch_current,"*umi1_op" : mov $log_ch_next,"*umi1_1"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_01" if %UMINEKOEND >= 11 || $flag_scenario_1_2 = "●"  : mov $log_ch_current,"*umi1_1"  : mov $log_ch_next,"*umi1_2"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_02" if %UMINEKOEND >= 11 || $flag_scenario_1_3 = "●"  : mov $log_ch_current,"*umi1_2"  : mov $log_ch_next,"*umi1_3"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_03" if %UMINEKOEND >= 11 || $flag_scenario_1_4 = "●"  : mov $log_ch_current,"*umi1_3"  : mov $log_ch_next,"*umi1_4"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_04" if %UMINEKOEND >= 11 || $flag_scenario_1_5 = "●"  : mov $log_ch_current,"*umi1_4"  : mov $log_ch_next,"*umi1_5"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_05" if %UMINEKOEND >= 11 || $flag_scenario_1_6 = "●"  : mov $log_ch_current,"*umi1_5"  : mov $log_ch_next,"*umi1_6"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_06" if %UMINEKOEND >= 11 || $flag_scenario_1_7 = "●"  : mov $log_ch_current,"*umi1_6"  : mov $log_ch_next,"*umi1_7"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_07" if %UMINEKOEND >= 11 || $flag_scenario_1_8 = "●"  : mov $log_ch_current,"*umi1_7"  : mov $log_ch_next,"*umi1_8"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_08" if %UMINEKOEND >= 11 || $flag_scenario_1_9 = "●"  : mov $log_ch_current,"*umi1_8"  : mov $log_ch_next,"*umi1_9"  : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_09" if %UMINEKOEND >= 11 || $flag_scenario_1_10 = "●" : mov $log_ch_current,"*umi1_9"  : mov $log_ch_next,"*umi1_10" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_10" if %UMINEKOEND >= 11 || $flag_scenario_1_11 = "●" : mov $log_ch_current,"*umi1_10" : mov $log_ch_next,"*umi1_11" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_11" if %UMINEKOEND >= 11 || $flag_scenario_1_12 = "●" : mov $log_ch_current,"*umi1_11" : mov $log_ch_next,"*umi1_12" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_12" if %UMINEKOEND >= 11 || $flag_scenario_1_13 = "●" : mov $log_ch_current,"*umi1_12" : mov $log_ch_next,"*umi1_13" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_13" if %UMINEKOEND >= 11 || $flag_scenario_1_14 = "●" : mov $log_ch_current,"*umi1_13" : mov $log_ch_next,"*umi1_14" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_14" if %UMINEKOEND >= 11 || $flag_scenario_1_15 = "●" : mov $log_ch_current,"*umi1_14" : mov $log_ch_next,"*umi1_15" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_15" if %UMINEKOEND >= 11 || $flag_scenario_1_16 = "●" : mov $log_ch_current,"*umi1_15" : mov $log_ch_next,"*umi1_16" : goto *log_jump_next_chapter_ok
		if $name_chapter_save = "1_16" if %UMINEKOEND >= 11 || $flag_scenario_1_17 = "●" : mov $log_ch_current,"*umi1_16" : mov $log_ch_next,"*umi1_17" : goto *log_jump_next_chapter_ok
	~
	return
*log_jump_next_chapter_ok
	get_unique_log_entry_index %log_ch_next,$log_ch_next
	if %log_ch_next < 0 jumpf
		; when dst label is in the log, jump from next to next updating vars.
		get_log_data %log_ch_next,$log_ch_current,%log_src_cvs
		mov %log_dst_cvs,%log_src_cvs
		if $log_ch_current != $log_ch_next error "src must match dst"
	~
	if %log_ch_next >= jumpf
		; when dst label is not in the log (i.e. there is a choicepoint), jump
		; from current to last before choicepoint.
		get_unique_log_entry_index %log_src_cvs,$log_ch_current
		get_log_data %log_src_cvs,$log_ch_current,%log_src_cvs
		get_log_data -1,$log_ch_next,%log_dst_cvs
	~
	vsp TextCC1SpNum,0
	vsp TextCC2SpNum,0
	print 1
	textoff
	lsp 5,":c;graphics\colour\black.png",0,0
	seplay 9,1062,100
	flush 23 ;trapped
	_csp 5
	wait 1000
	goto *log_jump_execute
return

*log_current_chap

;EP8
if %scenario_Number != 8 jumpf
past_log $log_ch_current,320,"*ura_teatime_8","*teatime_8","*umi8_16","*umi8_15","*umi8_14","*umi8_13","*umi8_12","*umi8_11","*umi8_10","*umi8_9","*umi8_8","*umi8_7","*umi8_6","*umi8_5","*umi8_4","*umi8_3","*umi8_2","*umi8_1","*umi8_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP7
if %scenario_Number != 7 jumpf
past_log $log_ch_current,320,"*ura_teatime_7","*teatime_7","*umi7_18","*umi7_17","*umi7_16","*umi7_15","*umi7_14","*umi7_13","*umi7_12","*umi7_11","*umi7_10","*umi7_9","*umi7_8","*umi7_7","*umi7_6","*umi7_5","*umi7_4","*umi7_3","*umi7_2","*umi7_1","*umi7_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP6
if %scenario_Number != 6 jumpf
past_log $log_ch_current,320,"*ura_teatime_6","*teatime_6","*umi6_18","*umi6_17","*umi6_16","*umi6_15","*umi6_14","*umi6_13","*umi6_12","*umi6_11","*umi6_10","*umi6_9","*umi6_8","*umi6_7","*umi6_6","*umi6_5","*umi6_4","*umi6_3","*umi6_2","*umi6_1","*umi6_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP5
if %scenario_Number != 5 jumpf
past_log $log_ch_current,320,"*ura_teatime_5","*teatime_5","*umi5_15","*umi5_14","*umi5_13","*umi5_12","*umi5_11","*umi5_10","*umi5_9","*umi5_8","*umi5_7","*umi5_6","*umi5_5","*umi5_4","*umi5_3","*umi5_2","*umi5_1","*umi5_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP4
if %scenario_Number != 4 jumpf
past_log $log_ch_current,320,"*ura_teatime_4","*teatime_4","*umi4_19","*umi4_18","*umi4_17","*umi4_16","*umi4_15","*umi4_14","*umi4_13","*umi4_12","*umi4_11","*umi4_10","*umi4_9","*umi4_8","*umi4_7","*umi4_6","*umi4_5","*umi4_4","*umi4_3","*umi4_2","*umi4_1","*umi4_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP3
if %scenario_Number != 3 jumpf
past_log $log_ch_current,320,"*ura_teatime_3","*teatime_3","*umi3_18","*umi3_17","*umi3_16","*umi3_15","*umi3_14","*umi3_13","*umi3_12","*umi3_11","*umi3_10","*umi3_9","*umi3_8","*umi3_7","*umi3_6","*umi3_5","*umi3_4","*umi3_3","*umi3_2","*umi3_1","*umi3_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP2
if %scenario_Number != 2 jumpf
past_log $log_ch_current,320,"*ura_teatime_2","*teatime_2","*umi2_18","*umi2_17","*umi2_16","*umi2_15","*umi2_14","*umi2_13","*umi2_12","*umi2_11","*umi2_10","*umi2_9","*umi2_8","*umi2_7","*umi2_6","*umi2_5","*umi2_4","*umi2_3","*umi2_2","*umi2_1","*umi2_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

;EP1
if %scenario_Number != 1 jumpf
past_log $log_ch_current,320,"*ura_teatime_1","*teatime_1","*umi1_17","*umi1_16","*umi1_15","*umi1_14","*umi1_13","*umi1_12","*umi1_11","*umi1_10","*umi1_9","*umi1_8","*umi1_7","*umi1_6","*umi1_5","*umi1_4","*umi1_3","*umi1_2","*umi1_1","*umi1_op"
if $log_ch_current != "" gosub *log_near_chap : return
~

return

*log_near_chap

if $log_ch_current == "" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return

;EP8
if $log_ch_current == "*ura_teatime_8" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_8" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi8_16" : mov $log_ch_prev,"*umi8_15" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi8_15" : mov $log_ch_prev,"*umi8_14" : mov $log_ch_next,"*umi8_16" : return
if $log_ch_current == "*umi8_14" : mov $log_ch_prev,"*umi8_13" : mov $log_ch_next,"*umi8_15" : return
if $log_ch_current == "*umi8_13" : mov $log_ch_prev,"*umi8_12" : mov $log_ch_next,"*umi8_14" : return
if $log_ch_current == "*umi8_12" : mov $log_ch_prev,"*umi8_11" : mov $log_ch_next,"*umi8_13" : return
if $log_ch_current == "*umi8_11" : mov $log_ch_prev,"*umi8_10" : mov $log_ch_next,"*umi8_12" : return
if $log_ch_current == "*umi8_10" : mov $log_ch_prev,"*umi8_9" : mov $log_ch_next,"*umi8_11" : return
if $log_ch_current == "*umi8_9" : mov $log_ch_prev,"*umi8_8" : mov $log_ch_next,"*umi8_10" : return
if $log_ch_current == "*umi8_8" : mov $log_ch_prev,"*umi8_7" : mov $log_ch_next,"*umi8_9" : return
if $log_ch_current == "*umi8_7" : mov $log_ch_prev,"*umi8_6" : mov $log_ch_next,"*umi8_8" : return
if $log_ch_current == "*umi8_6" : mov $log_ch_prev,"*umi8_5" : mov $log_ch_next,"*umi8_7" : return
if $log_ch_current == "*umi8_5" : mov $log_ch_prev,"*umi8_4" : mov $log_ch_next,"*umi8_6" : return
if $log_ch_current == "*umi8_4" : mov $log_ch_prev,"*umi8_3" : mov $log_ch_next,"*umi8_5" : return
if $log_ch_current == "*umi8_3" : mov $log_ch_prev,"*umi8_2" : mov $log_ch_next,"*umi8_4" : return
if $log_ch_current == "*umi8_2" : mov $log_ch_prev,"*umi8_1" : mov $log_ch_next,"*umi8_3" : return
if $log_ch_current == "*umi8_1" : mov $log_ch_prev,"*umi8_op" : mov $log_ch_next,"*umi8_2" : return
if $log_ch_current == "*umi8_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi8_1" : return

;EP7
if $log_ch_current == "*ura_teatime_7" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_7" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi7_18" : mov $log_ch_prev,"*umi7_17" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi7_17" : mov $log_ch_prev,"*umi7_16" : mov $log_ch_next,"*umi7_18" : return
if $log_ch_current == "*umi7_16" : mov $log_ch_prev,"*umi7_15" : mov $log_ch_next,"*umi7_17" : return
if $log_ch_current == "*umi7_15" : mov $log_ch_prev,"*umi7_14" : mov $log_ch_next,"*umi7_16" : return
if $log_ch_current == "*umi7_14" : mov $log_ch_prev,"*umi7_13" : mov $log_ch_next,"*umi7_15" : return
if $log_ch_current == "*umi7_13" : mov $log_ch_prev,"*umi7_12" : mov $log_ch_next,"*umi7_14" : return
if $log_ch_current == "*umi7_12" : mov $log_ch_prev,"*umi7_11" : mov $log_ch_next,"*umi7_13" : return
if $log_ch_current == "*umi7_11" : mov $log_ch_prev,"*umi7_10" : mov $log_ch_next,"*umi7_12" : return
if $log_ch_current == "*umi7_10" : mov $log_ch_prev,"*umi7_9" : mov $log_ch_next,"*umi7_11" : return
if $log_ch_current == "*umi7_9" : mov $log_ch_prev,"*umi7_8" : mov $log_ch_next,"*umi7_10" : return
if $log_ch_current == "*umi7_8" : mov $log_ch_prev,"*umi7_7" : mov $log_ch_next,"*umi7_9" : return
if $log_ch_current == "*umi7_7" : mov $log_ch_prev,"*umi7_6" : mov $log_ch_next,"*umi7_8" : return
if $log_ch_current == "*umi7_6" : mov $log_ch_prev,"*umi7_5" : mov $log_ch_next,"*umi7_7" : return
if $log_ch_current == "*umi7_5" : mov $log_ch_prev,"*umi7_4" : mov $log_ch_next,"*umi7_6" : return
if $log_ch_current == "*umi7_4" : mov $log_ch_prev,"*umi7_3" : mov $log_ch_next,"*umi7_5" : return
if $log_ch_current == "*umi7_3" : mov $log_ch_prev,"*umi7_2" : mov $log_ch_next,"*umi7_4" : return
if $log_ch_current == "*umi7_2" : mov $log_ch_prev,"*umi7_1" : mov $log_ch_next,"*umi7_3" : return
if $log_ch_current == "*umi7_1" : mov $log_ch_prev,"*umi7_op" : mov $log_ch_next,"*umi7_2" : return
if $log_ch_current == "*umi7_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi7_1" : return

;EP6
if $log_ch_current == "*ura_teatime_6" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_6" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi6_18" : mov $log_ch_prev,"*umi6_17" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi6_17" : mov $log_ch_prev,"*umi6_16" : mov $log_ch_next,"*umi6_18" : return
if $log_ch_current == "*umi6_16" : mov $log_ch_prev,"*umi6_15" : mov $log_ch_next,"*umi6_17" : return
if $log_ch_current == "*umi6_15" : mov $log_ch_prev,"*umi6_14" : mov $log_ch_next,"*umi6_16" : return
if $log_ch_current == "*umi6_14" : mov $log_ch_prev,"*umi6_13" : mov $log_ch_next,"*umi6_15" : return
if $log_ch_current == "*umi6_13" : mov $log_ch_prev,"*umi6_12" : mov $log_ch_next,"*umi6_14" : return
if $log_ch_current == "*umi6_12" : mov $log_ch_prev,"*umi6_11" : mov $log_ch_next,"*umi6_13" : return
if $log_ch_current == "*umi6_11" : mov $log_ch_prev,"*umi6_10" : mov $log_ch_next,"*umi6_12" : return
if $log_ch_current == "*umi6_10" : mov $log_ch_prev,"*umi6_9" : mov $log_ch_next,"*umi6_11" : return
if $log_ch_current == "*umi6_9" : mov $log_ch_prev,"*umi6_8" : mov $log_ch_next,"*umi6_10" : return
if $log_ch_current == "*umi6_8" : mov $log_ch_prev,"*umi6_7" : mov $log_ch_next,"*umi6_9" : return
if $log_ch_current == "*umi6_7" : mov $log_ch_prev,"*umi6_6" : mov $log_ch_next,"*umi6_8" : return
if $log_ch_current == "*umi6_6" : mov $log_ch_prev,"*umi6_5" : mov $log_ch_next,"*umi6_7" : return
if $log_ch_current == "*umi6_5" : mov $log_ch_prev,"*umi6_4" : mov $log_ch_next,"*umi6_6" : return
if $log_ch_current == "*umi6_4" : mov $log_ch_prev,"*umi6_3" : mov $log_ch_next,"*umi6_5" : return
if $log_ch_current == "*umi6_3" : mov $log_ch_prev,"*umi6_2" : mov $log_ch_next,"*umi6_4" : return
if $log_ch_current == "*umi6_2" : mov $log_ch_prev,"*umi6_1" : mov $log_ch_next,"*umi6_3" : return
if $log_ch_current == "*umi6_1" : mov $log_ch_prev,"*umi6_op" : mov $log_ch_next,"*umi6_2" : return
if $log_ch_current == "*umi6_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi6_1" : return

;EP5
if $log_ch_current == "*ura_teatime_5" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_5" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi5_15" : mov $log_ch_prev,"*umi5_14" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi5_14" : mov $log_ch_prev,"*umi5_13" : mov $log_ch_next,"*umi5_15" : return
if $log_ch_current == "*umi5_13" : mov $log_ch_prev,"*umi5_12" : mov $log_ch_next,"*umi5_14" : return
if $log_ch_current == "*umi5_12" : mov $log_ch_prev,"*umi5_11" : mov $log_ch_next,"*umi5_13" : return
if $log_ch_current == "*umi5_11" : mov $log_ch_prev,"*umi5_10" : mov $log_ch_next,"*umi5_12" : return
if $log_ch_current == "*umi5_10" : mov $log_ch_prev,"*umi5_9" : mov $log_ch_next,"*umi5_11" : return
if $log_ch_current == "*umi5_9" : mov $log_ch_prev,"*umi5_8" : mov $log_ch_next,"*umi5_10" : return
if $log_ch_current == "*umi5_8" : mov $log_ch_prev,"*umi5_7" : mov $log_ch_next,"*umi5_9" : return
if $log_ch_current == "*umi5_7" : mov $log_ch_prev,"*umi5_6" : mov $log_ch_next,"*umi5_8" : return
if $log_ch_current == "*umi5_6" : mov $log_ch_prev,"*umi5_5" : mov $log_ch_next,"*umi5_7" : return
if $log_ch_current == "*umi5_5" : mov $log_ch_prev,"*umi5_4" : mov $log_ch_next,"*umi5_6" : return
if $log_ch_current == "*umi5_4" : mov $log_ch_prev,"*umi5_3" : mov $log_ch_next,"*umi5_5" : return
if $log_ch_current == "*umi5_3" : mov $log_ch_prev,"*umi5_2" : mov $log_ch_next,"*umi5_4" : return
if $log_ch_current == "*umi5_2" : mov $log_ch_prev,"*umi5_1" : mov $log_ch_next,"*umi5_3" : return
if $log_ch_current == "*umi5_1" : mov $log_ch_prev,"*umi5_op" : mov $log_ch_next,"*umi5_2" : return
if $log_ch_current == "*umi5_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi5_1" : return

;EP4
if $log_ch_current == "*ura_teatime_4" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_4" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi4_19" : mov $log_ch_prev,"*umi4_18" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi4_18" : mov $log_ch_prev,"*umi4_17" : mov $log_ch_next,"*umi4_19" : return
if $log_ch_current == "*umi4_17" : mov $log_ch_prev,"*umi4_16" : mov $log_ch_next,"*umi4_18" : return
if $log_ch_current == "*umi4_16" : mov $log_ch_prev,"*umi4_15" : mov $log_ch_next,"*umi4_17" : return
if $log_ch_current == "*umi4_15" : mov $log_ch_prev,"*umi4_14" : mov $log_ch_next,"*umi4_16" : return
if $log_ch_current == "*umi4_14" : mov $log_ch_prev,"*umi4_13" : mov $log_ch_next,"*umi4_15" : return
if $log_ch_current == "*umi4_13" : mov $log_ch_prev,"*umi4_12" : mov $log_ch_next,"*umi4_14" : return
if $log_ch_current == "*umi4_12" : mov $log_ch_prev,"*umi4_11" : mov $log_ch_next,"*umi4_13" : return
if $log_ch_current == "*umi4_11" : mov $log_ch_prev,"*umi4_10" : mov $log_ch_next,"*umi4_12" : return
if $log_ch_current == "*umi4_10" : mov $log_ch_prev,"*umi4_9" : mov $log_ch_next,"*umi4_11" : return
if $log_ch_current == "*umi4_9" : mov $log_ch_prev,"*umi4_8" : mov $log_ch_next,"*umi4_10" : return
if $log_ch_current == "*umi4_8" : mov $log_ch_prev,"*umi4_7" : mov $log_ch_next,"*umi4_9" : return
if $log_ch_current == "*umi4_7" : mov $log_ch_prev,"*umi4_6" : mov $log_ch_next,"*umi4_8" : return
if $log_ch_current == "*umi4_6" : mov $log_ch_prev,"*umi4_5" : mov $log_ch_next,"*umi4_7" : return
if $log_ch_current == "*umi4_5" : mov $log_ch_prev,"*umi4_4" : mov $log_ch_next,"*umi4_6" : return
if $log_ch_current == "*umi4_4" : mov $log_ch_prev,"*umi4_3" : mov $log_ch_next,"*umi4_5" : return
if $log_ch_current == "*umi4_3" : mov $log_ch_prev,"*umi4_2" : mov $log_ch_next,"*umi4_4" : return
if $log_ch_current == "*umi4_2" : mov $log_ch_prev,"*umi4_1" : mov $log_ch_next,"*umi4_3" : return
if $log_ch_current == "*umi4_1" : mov $log_ch_prev,"*umi4_op" : mov $log_ch_next,"*umi4_2" : return
if $log_ch_current == "*umi4_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi4_1" : return

;EP3
if $log_ch_current == "*ura_teatime_3" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_3" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi3_18" : mov $log_ch_prev,"*umi3_17" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi3_17" : mov $log_ch_prev,"*umi3_16" : mov $log_ch_next,"*umi3_18" : return
if $log_ch_current == "*umi3_16" : mov $log_ch_prev,"*umi3_15" : mov $log_ch_next,"*umi3_17" : return
if $log_ch_current == "*umi3_15" : mov $log_ch_prev,"*umi3_14" : mov $log_ch_next,"*umi3_16" : return
if $log_ch_current == "*umi3_14" : mov $log_ch_prev,"*umi3_13" : mov $log_ch_next,"*umi3_15" : return
if $log_ch_current == "*umi3_13" : mov $log_ch_prev,"*umi3_12" : mov $log_ch_next,"*umi3_14" : return
if $log_ch_current == "*umi3_12" : mov $log_ch_prev,"*umi3_11" : mov $log_ch_next,"*umi3_13" : return
if $log_ch_current == "*umi3_11" : mov $log_ch_prev,"*umi3_10" : mov $log_ch_next,"*umi3_12" : return
if $log_ch_current == "*umi3_10" : mov $log_ch_prev,"*umi3_9" : mov $log_ch_next,"*umi3_11" : return
if $log_ch_current == "*umi3_9" : mov $log_ch_prev,"*umi3_8" : mov $log_ch_next,"*umi3_10" : return
if $log_ch_current == "*umi3_8" : mov $log_ch_prev,"*umi3_7" : mov $log_ch_next,"*umi3_9" : return
if $log_ch_current == "*umi3_7" : mov $log_ch_prev,"*umi3_6" : mov $log_ch_next,"*umi3_8" : return
if $log_ch_current == "*umi3_6" : mov $log_ch_prev,"*umi3_5" : mov $log_ch_next,"*umi3_7" : return
if $log_ch_current == "*umi3_5" : mov $log_ch_prev,"*umi3_4" : mov $log_ch_next,"*umi3_6" : return
if $log_ch_current == "*umi3_4" : mov $log_ch_prev,"*umi3_3" : mov $log_ch_next,"*umi3_5" : return
if $log_ch_current == "*umi3_3" : mov $log_ch_prev,"*umi3_2" : mov $log_ch_next,"*umi3_4" : return
if $log_ch_current == "*umi3_2" : mov $log_ch_prev,"*umi3_1" : mov $log_ch_next,"*umi3_3" : return
if $log_ch_current == "*umi3_1" : mov $log_ch_prev,"*umi3_op" : mov $log_ch_next,"*umi3_2" : return
if $log_ch_current == "*umi3_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi3_1" : return

;EP2
if $log_ch_current == "*ura_teatime_2" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_2" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi2_18" : mov $log_ch_prev,"*umi2_17" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi2_17" : mov $log_ch_prev,"*umi2_16" : mov $log_ch_next,"*umi2_18" : return
if $log_ch_current == "*umi2_16" : mov $log_ch_prev,"*umi2_15" : mov $log_ch_next,"*umi2_17" : return
if $log_ch_current == "*umi2_15" : mov $log_ch_prev,"*umi2_14" : mov $log_ch_next,"*umi2_16" : return
if $log_ch_current == "*umi2_14" : mov $log_ch_prev,"*umi2_13" : mov $log_ch_next,"*umi2_15" : return
if $log_ch_current == "*umi2_13" : mov $log_ch_prev,"*umi2_12" : mov $log_ch_next,"*umi2_14" : return
if $log_ch_current == "*umi2_12" : mov $log_ch_prev,"*umi2_11" : mov $log_ch_next,"*umi2_13" : return
if $log_ch_current == "*umi2_11" : mov $log_ch_prev,"*umi2_10" : mov $log_ch_next,"*umi2_12" : return
if $log_ch_current == "*umi2_10" : mov $log_ch_prev,"*umi2_9" : mov $log_ch_next,"*umi2_11" : return
if $log_ch_current == "*umi2_9" : mov $log_ch_prev,"*umi2_8" : mov $log_ch_next,"*umi2_10" : return
if $log_ch_current == "*umi2_8" : mov $log_ch_prev,"*umi2_7" : mov $log_ch_next,"*umi2_9" : return
if $log_ch_current == "*umi2_7" : mov $log_ch_prev,"*umi2_6" : mov $log_ch_next,"*umi2_8" : return
if $log_ch_current == "*umi2_6" : mov $log_ch_prev,"*umi2_5" : mov $log_ch_next,"*umi2_7" : return
if $log_ch_current == "*umi2_5" : mov $log_ch_prev,"*umi2_4" : mov $log_ch_next,"*umi2_6" : return
if $log_ch_current == "*umi2_4" : mov $log_ch_prev,"*umi2_3" : mov $log_ch_next,"*umi2_5" : return
if $log_ch_current == "*umi2_3" : mov $log_ch_prev,"*umi2_2" : mov $log_ch_next,"*umi2_4" : return
if $log_ch_current == "*umi2_2" : mov $log_ch_prev,"*umi2_1" : mov $log_ch_next,"*umi2_3" : return
if $log_ch_current == "*umi2_1" : mov $log_ch_prev,"*umi2_op" : mov $log_ch_next,"*umi2_2" : return
if $log_ch_current == "*umi2_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi2_1" : return

;EP1
if $log_ch_current == "*ura_teatime_1" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*teatime_1" : mov $log_ch_prev,"" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi1_17" : mov $log_ch_prev,"*umi1_16" : mov $log_ch_next,"" : return
if $log_ch_current == "*umi1_16" : mov $log_ch_prev,"*umi1_15" : mov $log_ch_next,"*umi1_17" : return
if $log_ch_current == "*umi1_15" : mov $log_ch_prev,"*umi1_14" : mov $log_ch_next,"*umi1_16" : return
if $log_ch_current == "*umi1_14" : mov $log_ch_prev,"*umi1_13" : mov $log_ch_next,"*umi1_15" : return
if $log_ch_current == "*umi1_13" : mov $log_ch_prev,"*umi1_12" : mov $log_ch_next,"*umi1_14" : return
if $log_ch_current == "*umi1_12" : mov $log_ch_prev,"*umi1_11" : mov $log_ch_next,"*umi1_13" : return
if $log_ch_current == "*umi1_11" : mov $log_ch_prev,"*umi1_10" : mov $log_ch_next,"*umi1_12" : return
if $log_ch_current == "*umi1_10" : mov $log_ch_prev,"*umi1_9" : mov $log_ch_next,"*umi1_11" : return
if $log_ch_current == "*umi1_9" : mov $log_ch_prev,"*umi1_8" : mov $log_ch_next,"*umi1_10" : return
if $log_ch_current == "*umi1_8" : mov $log_ch_prev,"*umi1_7" : mov $log_ch_next,"*umi1_9" : return
if $log_ch_current == "*umi1_7" : mov $log_ch_prev,"*umi1_6" : mov $log_ch_next,"*umi1_8" : return
if $log_ch_current == "*umi1_6" : mov $log_ch_prev,"*umi1_5" : mov $log_ch_next,"*umi1_7" : return
if $log_ch_current == "*umi1_5" : mov $log_ch_prev,"*umi1_4" : mov $log_ch_next,"*umi1_6" : return
if $log_ch_current == "*umi1_4" : mov $log_ch_prev,"*umi1_3" : mov $log_ch_next,"*umi1_5" : return
if $log_ch_current == "*umi1_3" : mov $log_ch_prev,"*umi1_2" : mov $log_ch_next,"*umi1_4" : return
if $log_ch_current == "*umi1_2" : mov $log_ch_prev,"*umi1_1" : mov $log_ch_next,"*umi1_3" : return
if $log_ch_current == "*umi1_1" : mov $log_ch_prev,"*umi1_op" : mov $log_ch_next,"*umi1_2" : return
if $log_ch_current == "*umi1_op" : mov $log_ch_prev,"" : mov $log_ch_next,"*umi1_1" : return

return

*log_chapter_prev
	gosub *log_current_chap
	if $log_ch_prev == "" scrollable_scroll 320,-2147483648 : return
	mov $log_ch_current,$log_ch_prev
	snaplog 320,$log_ch_current,1,0,1
return

*log_chapter_next
	gosub *log_current_chap
	if $log_ch_next == "" scrollable_scroll 320,2147483647 : return
	mov $log_ch_current,$log_ch_next
	snaplog 320,$log_ch_current,1,0,1,1
return

*log_jump_request
	lsp 5,":c;graphics\colour\black.png",0,0,180

	lsp 2,jump_hint_text,0,0
	lsp 3,action_yes,0,0
	lsp 4,action_no,0,0
	align_message_l 2,3,4
	
	btndef ""

	spbtn 3,503
	spbtn 4,504
	scrollable_cfg mousectrl,320,0

	*log_jump_request_loop
	btnwait2 %btnRes

	if %btnRes = 503 _csp 2,5 : goto *log_jump
	if %btnRes = 504 _csp 2,5 : scrollable_cfg mousectrl,320,1 : goto *log_button_setup
	if %btnRes = -1 _csp 2,5 : scrollable_cfg mousectrl,320,1 : goto *log_button_setup
	if %btnRes = -10 _csp 2,5 : scrollable_cfg mousectrl,320,1 : goto *log_button_setup

	goto *log_jump_request_loop

*log_jump
	;stopwatch "log_jump_start"

	; Returns the lookup key for the currently hovered element on the specified scrollable.
	scrollable_get_hovered_elem %log_ch_next,320 ;get the target (Element ID)

	; Should now use that lookup key to look up that element and get the log entry index from it.
	; But, the log entry index is now equal to the lookup key for simplicity, so we do not need to (no tree_get is required).
	; Now that we have the log entry index, we should call a fn to get the nearest jumpable log entry index.
	nearest_log %log_ch_next,%log_ch_next ; There is no longer a need to supply the tree index as this operates on LogState and not on a tree structure. Tree is just for rendering.

	; And then we should find out what label and Choice Vector Size that log entry index corresponds to. (I'll call this log_dst_CVS)
	; We use a new fn get_log_data that returns both label and choice vector size for a given log entry index.
	; get_log_data INPUT_logentryindex,OUTPUT_label,OUTPUT_cvs
	get_log_data %log_ch_next,$log_ch_next,%log_dst_cvs

	if %scenario_Number == 8 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_8","*teatime_8","*umi8_16","*umi8_15","*umi8_14","*umi8_13","*umi8_12","*umi8_11","*umi8_10","*umi8_9","*umi8_8","*umi8_7","*umi8_6","*umi8_5","*umi8_4","*umi8_3","*umi8_2","*umi8_1","*umi8_op"
	if %scenario_Number == 7 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_7","*teatime_7","*umi7_18","*umi7_17","*umi7_16","*umi7_15","*umi7_14","*umi7_13","*umi7_12","*umi7_11","*umi7_10","*umi7_9","*umi7_8","*umi7_7","*umi7_6","*umi7_5","*umi7_4","*umi7_3","*umi7_2","*umi7_1","*umi7_op"
	if %scenario_Number == 6 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_6","*teatime_6","*umi6_18","*umi6_17","*umi6_16","*umi6_15","*umi6_14","*umi6_13","*umi6_12","*umi6_11","*umi6_10","*umi6_9","*umi6_8","*umi6_7","*umi6_6","*umi6_5","*umi6_4","*umi6_3","*umi6_2","*umi6_1","*umi6_op"
	if %scenario_Number == 5 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_5","*teatime_5","*umi5_15","*umi5_14","*umi5_13","*umi5_12","*umi5_11","*umi5_10","*umi5_9","*umi5_8","*umi5_7","*umi5_6","*umi5_5","*umi5_4","*umi5_3","*umi5_2","*umi5_1","*umi5_op"
	if %scenario_Number == 4 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_4","*teatime_4","*umi4_19","*umi4_18","*umi4_17","*umi4_16","*umi4_15","*umi4_14","*umi4_13","*umi4_12","*umi4_11","*umi4_10","*umi4_9","*umi4_8","*umi4_7","*umi4_6","*umi4_5","*umi4_4","*umi4_3","*umi4_2","*umi4_1","*umi4_op"
	if %scenario_Number == 3 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_3","*teatime_3","*umi3_18","*umi3_17","*umi3_16","*umi3_15","*umi3_14","*umi3_13","*umi3_12","*umi3_11","*umi3_10","*umi3_9","*umi3_8","*umi3_7","*umi3_6","*umi3_5","*umi3_4","*umi3_3","*umi3_2","*umi3_1","*umi3_op"
	if %scenario_Number == 2 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_2","*teatime_2","*umi2_18","*umi2_17","*umi2_16","*umi2_15","*umi2_14","*umi2_13","*umi2_12","*umi2_11","*umi2_10","*umi2_9","*umi2_8","*umi2_7","*umi2_6","*umi2_5","*umi2_4","*umi2_3","*umi2_2","*umi2_1","*umi2_op"
	if %scenario_Number == 1 past_label2 $log_ch_current,$log_ch_next,"*ura_teatime_1","*teatime_1","*umi1_17","*umi1_16","*umi1_15","*umi1_14","*umi1_13","*umi1_12","*umi1_11","*umi1_10","*umi1_9","*umi1_8","*umi1_7","*umi1_6","*umi1_5","*umi1_4","*umi1_3","*umi1_2","*umi1_1","*umi1_op"

	;Knowing the nearest label is no longer enough. We need to look up the log entry index of the above label (any occurrence will do, there will only be one)	
	; get_unique_log_entry_index OUTPUT_log_entry_index,INPUT_label
	get_unique_log_entry_index %log_src_cvs,$log_ch_current
	
	; and then find out what CVS it corresponds to using get_log_data. I'll call this src_CVS.
	; get_log_data INPUT_logentryindex,OUTPUT_label,OUTPUT_cvs
	get_log_data %log_src_cvs,$log_ch_current,%log_src_cvs

	gosub *log_clean_section
*log_jump_execute
	csp -10
	csp -11
	csp -12
	csp -13
	csp2 flg_sp2 
	csp2 flg_sp3
	d_dispose
	blur 0
	agpt quakexamp,0,0,0,1
	agpt quakeyamp,0,0,0,1

	; _flags will call varset sskip for ep8. We must not sskip beyond the choice vector size of the chapter start label.
	accept_choice_vector_size %log_src_cvs

	mov $log_ch_prev,$log_ch_current+"_flags"
	gosub $log_ch_prev ;does the print

	if %skip_flg_bak == on skip_on
	ignore_cmd "click","pam","rumble","skip_on","skip_off","waits","wait","wait2","waitvoice","ak","lv","waittimer","saveoff","trophy_open","texec3","seplay","textoff","async_cache_img","async_cache_snd","show_characters"
	ignore_inl_cmd "wait","delay","text_fade_t","ak","text_speed_t","lv","vv"

	E_A
	lv_stop
	scriptmute 1
	mov %r_display_cha,0
	mov %r_display_cha_enj,0
	mov %r_display_cha_ma,0

	; Before we sskip, we want to update the current choice vector lookup index position used by accept_choice and set it to the src_CVS.
	accept_choice_next_index %log_src_cvs
	accept_choice_vector_size %log_dst_cvs
	; Delete any log and choice vector entries after the dst choicepoint.
	clearlog 1,%log_dst_cvs
	mov %log_is_generated_to_cvs,%log_dst_cvs
	; And now sskip, last param allows us not to load images until late.
	sskip $log_ch_prev,$log_ch_current,$log_ch_next,%sskip_turbo

	ignore_cmd_clear
	ignore_inl_cmd_clear

	mov %r_display,0
	;stopwatch "log_jump_end"
	scriptmute 0

	sskip_unset
	savechoices $log_choices

	; Now do some final loading work
	; BGM
	if %bgm_current_id != 0 bgmplay %bgm_current_id,%bgm_current_vol,0
	; ME
	if %me_enable_1 = 1 meplay 1,%me_num_1,%me_current_vol_1
	if %me_enable_2 = 1 meplay 2,%me_num_2,%me_current_vol_2
	if %me_enable_3 = 1 meplay 3,%me_num_3,%me_current_vol_3
	if %me_enable_4 = 1 meplay 4,%me_num_4,%me_current_vol_4
	if %me_enable_5 = 1 meplay 5,%me_num_5,%me_current_vol_5
	if %me_enable_6 = 1 meplay 6,%me_num_6,%me_current_vol_6
	if %me_enable_7 = 1 meplay 7,%me_num_7,%me_current_vol_7

	if %cur_wndmode == off gosub *update_msgwnd
	if %cur_wndmode == on set_window_simple %log_sw_x,%log_sw_y
	; So that we save after jumping
	mov %TextCC12Flag,1
	main_goto $log_ch_next
return

*ep8_varset_sskip
	; EP8 uses a two-phase superskip model for logjump:
	; Episode Start (umi8_op) ----Phase 1----> Chapter Start ($log_ch_current at choice vector size %log_src_cvs) ----Phase 2----> Destination Line ($log_ch_next at choice vector size %log_dst_cvs)
	; The point of this function is to implement phase 1,
	; which initializes the following two variables to the values they should have at the label $log_ch_current according to the route specified by the choice vector.
	; Then, the phase 2 (usual) superskip will take the variables from that state to whatever they need to be at the destination line.
	; NOTE: These two variables are set here since the game does not initialise them. Normally it should, like e.g. with bern_game_mode.
	mov %total_coin_count,0
	mov %eva_hint_counter,0	

	; In addition to all the ordinary ignore_cmds, also ignore d and d2. We don't want to add anything to log. This superskip is solely for setting variables.
	ignore_cmd "d", "d2", "d_continue", "wait_for_d"
	gosub *log_common_ignore

	; Before we sskip, we must make sure that accept_choice starts looking up choicepoints from index zero (since we're starting from the beginning of the episode).
	accept_choice_next_index 0
	sskip $TextCC12Flag,"*umi8_op",$log_ch_current

	; Done. The variables should now be correctly set.
	ignore_cmd_clear
	ignore_inl_cmd_clear
	sskip_unset
return 

;Main viewing section
*text_cw_lookback

;stopwatch "text_cw_lookback show start"

;Close textwindow
if %r_display == 3 jumpf
	vsp TextCC1SpNum,0
	vsp TextCC2SpNum,0
	print 1
	textoff
~

border_pad_push 7

;Design
lsp 310,logview_caption,20,0
lsp 311,":a;graphics\menu\SystemBtn\black_buttons.png",0,0
lsp 398,":c;graphics\colour\black.png",0,0,100
lsp 399,":c;graphics\menu\logview\mes_bg.png",0,0

lsp 307,log_prev,0,0
lsp 308,log_next,0,0
lsp 309,set_exit,0,0

align_buttons_r 309,308,307

lsp 306,set_ctrl,65,990 ;65

;Control
lsp 312,":a;graphics\menu\logview\bar.png",1832,242
lsp 313,":a;graphics\menu\logview\sel.png",1832,255
lsp backlogupbtn,":a/2,0,3;graphics\system\wnd\uoncur.png",1827,210
lsp backlogdownbtn,":a/2,0,3;graphics\system\wnd\uoffcur.png",1827,839
lsph 314,":a;graphics\menu\logview\sep.png",0,0

scrollable 320,1,0,0,1785,1080 ;900 causes a line bug, explore it
scrollable_cfg firstmargin,320,150
scrollable_cfg lastmargin,320,150
scrollable_cfg divider,320,314
scrollable_cfg elemwidth,320,1845
scrollable_cfg textmarginwidth,320,85
scrollable_cfg textmargintop,320,10
scrollable_cfg scrollbar,320,313,255,785
scrollable_cfg tightfit,320,2 ;top only
scrollable_cfg hovertext,320,#FFFFFF,1
scrollable_cfg normaltext,320,#999999,0
;stopwatch "scrollable render start"
scrollable_display 320
;stopwatch "scrollable render end"
snaplog 320

*log_button_setup

btndef ""

spbtn backlogupbtn,backlogupbtn
spbtn backlogdownbtn,backlogdownbtn
spbtn 309,1
spbtn 307,2
spbtn 308,3
spbtn 306,4

bgmvol %Rel_vol_bgm*30/100
chvol 3,%sfx_vol*%me_current_vol_1*30/10000
chvol 4,%sfx_vol*%me_current_vol_2*30/10000
chvol 5,%sfx_vol*%me_current_vol_3*30/10000
chvol 6,%sfx_vol*%me_current_vol_4*30/10000
chvol 7,%sfx_vol*%me_current_vol_5*30/10000
chvol 8,%sfx_vol*%me_current_vol_6*30/10000
chvol 9,%sfx_vol*%me_current_vol_7*30/10000
E_SA

if %did_loghint = 0 gosub *log_hint

print 1

;stopwatch "text_cw_lookback show end"

*log_button_loop

	getpage
	getcursor
	getmclick
	getzxc

	btnwait2 %BtnRes

	if %BtnRes = 1 jumpf                   ;Exit by clicking the button
	if %BtnRes = -1  jumpf                 ;Exit by right-clicking
	if %BtnRes = -10 jumpf                 ;Exit by ESC
	;if %BtnRes = 0   jumpf                ;Exit by left-clicking
	if %BtnRes = -81 jumpf 
	
	if %BtnRes = -12 			scrollable_scroll 320,-10	;Page up
	if %BtnRes = -13 			scrollable_scroll 320,10	;Page down	
	if %BtnRes = backlogupbtn	scrollable_scroll 320,-1	;button up
	if %BtnRes = backlogdownbtn	scrollable_scroll 320,1		;button down
	if %BtnRes = 2 gosub *log_chapter_prev
	if %BtnRes = 3 gosub *log_chapter_next
	if %BtnRes = 4 gosub *log_hint
	if %BtnRes = -80  lv_play 320,%dlg_vol
	if %BtnRes = -11  lv_play 320,%dlg_vol
	if %BtnRes = 0    lv_play 320,%dlg_vol
	if %BtnRes = -70  goto *log_jump_request
	if %BtnRes = -51  goto *log_jump_request

	goto *log_button_loop

~

gosub *menu_rain_unpause
gosub *log_clean_section
lv_stop
bgmvol %Rel_vol_bgm
chvol 3,%sfx_vol*%me_current_vol_1/100
chvol 4,%sfx_vol*%me_current_vol_2/100
chvol 5,%sfx_vol*%me_current_vol_3/100
chvol 6,%sfx_vol*%me_current_vol_4/100
chvol 7,%sfx_vol*%me_current_vol_5/100
chvol 8,%sfx_vol*%me_current_vol_6/100
chvol 9,%sfx_vol*%me_current_vol_7/100
blur 0 ;this is not a perfect place but only logs can be seen with a direct button press
print 1
texton

return

*log_hint
	scrollable_cfg mousectrl,320,0
	lsp 4,":c;graphics\colour\black.png",0,0,220
	print 23
	lsp 2,log_hint_text,0,0
	align_message_l 2
	seplay 9,1062,100
	print 23
	wait 7000
	_csp 2
	_csp 4
	if %did_loghint = 0 mov %did_loghint,1
	scrollable_cfg mousectrl,320,1	
return

;*********************************************************
;Initialization of the characters
;*********************************************************
*character_def
	
if %CHIRU_MODE != 0 jumpf
	for %Free1 = 1 to 40
		mov ?r_cha_text[2][%free1][1],1
		mov ?r_cha_text[3][%free1][1],1
		mov ?r_cha_text[4][%free1][1],1
		mov ?r_cha_text[4][%free1][2],1
	next
	

	mov %cha_text_page,1	;Page setup
	;ssssssss
	mov ?r_cha_text[2][ma_sha][1],2
	mov ?r_cha_text[2][ma_lam][1],2
	mov ?r_cha_text[3][ma3_lam][1],2
	mov ?r_cha_text[3][ma3_enj][1],2
	mov ?r_cha_text[3][ma3_ron][1],2
	mov ?r_cha_text[3][ma3_wal][1],2
	mov ?r_cha_text[3][ma3_goa][1],2
	mov ?r_cha_text[4][ma4_kin][1],2
	mov ?r_cha_text[4][ma4_goa][1],2
	mov ?r_cha_text[4][ma4_wal][1],2
	mov ?r_cha_text[4][ma4_ron][1],2
	mov ?r_cha_text[4][enj_eva][2],2
	mov ?r_cha_text[4][enj_kas][2],2
	mov ?r_cha_text[4][enj_ama][2],2
~

if %CHIRU_MODE != 1 jumpf
	for %Free1 = 1 to 40
		mov ?r_cha_text[5][%free1][1],1
		mov ?r_cha_text[5][%free1][2],1
		mov ?r_cha_text[5][%free1][3],1
		mov ?r_cha_text[6][%free1][1],1
		mov ?r_cha_text[6][%free1][2],1
		mov ?r_cha_text[6][%free1][3],1
	next
	
	mov %cha_text_page,1

	mov ?r_cha_text[5][ma5_ger][1],2
	mov ?r_cha_text[5][ma5_dla][1],2
	mov ?r_cha_text[5][ma5_cor][1],2
	mov ?r_cha_text[5][ma5_eri][1],2

	mov ?r_cha_text[6][ma5_ger][1],2
	mov ?r_cha_text[6][ma5_dla][1],2
	mov ?r_cha_text[6][ma5_cor][1],2

	mov ?r_cha_text[8][ma5_ger][1],2
	mov ?r_cha_text[8][ma5_dla][1],2
	mov ?r_cha_text[8][ma5_cor][1],2
~

return

;*************************************
;Interrupt the routine before displaying text
;*************************************
*pretext
	if %TextCC12Flag = 1 texec3 : mov %TextCC12Flag,0
	if %disallow_saving = 0 saveon
return

;****************************
; Main config function
;****************************

*settings
	;stopwatch "config start"
 	
 	;9th for chiru		
	trophy_open 10-%CHIRU_MODE
	mov %mcurrent_page,1
	mov %meffect_right,0
	mov %meffect_left,0
	mov %mmove_right,0
	mov %mmove_left,0
	
	gosub *update_textspeed

	getscriptnum %Free5

	for %Free2 = 0 to %Free5-1
		getscriptpath $Free3,%Free2,1
		if localisation == $Free3 mov %Free4,%Free2 ;: debug_var %Free4,"curent language num"
	next
	getscriptpath $Free3,%Free4,1
	mov %Free5,%Free4
	dec %Free2

	getrenderernum %Free9
	for %Free6 = 0 to %Free9-1
		getrenderername $Free7,%Free6
	next
	getrenderername $Free7,-1 ;save current renderer in $Free7
	mov %Free9,%Free8
	dec %Free6

	border_pad_push 4

*settings_elems

	lsp 105,config_caption,20,0
	lsp 451,":c;graphics\menu\config\bg_config.png",0,0
	lbsp2 config_main_lsp2,config_main,2880,540,100,100,0
	lsp 440,":a;graphics\menu\SystemBtn\black_buttons.png",0,0
	;FIXME: lsp 100,":a;graphics\menu_en\config\gamepad_buttons.png",862,990
	
	
	;page 1
	lsp 301,set_game_language,135,226 ;1
	lsp 302,set_bgm_title_language,135,313 ;2
	lsp 319,set_render,135,400 ;3
	lsp 303,set_window_size,135,487 ;4
	lsp 317,set_display_mode,135,574 ;5
	lsp 304,set_video_resolution,135,661 ;6
	lsp 305,set_interface,135,748 ;7
	lsp 306,set_object_caching,135,835 ;8
	;page 2
	lsp 307,set_bgm_volume,135+1920,226 
	lsp 308,set_effect_volume,135+1920,313 ;+87
	lsp 309,set_voice_volume,135+1920,400
	;page 3
	lsp 310,set_rumble_strength,135+3840,226 
	lsp 311,set_text_speed,135+3840,313 ;+87
	lsp 318,set_automode_speed,135+3840,400
	lsp 312,set_textbox_window,135+3840,487
	lsp 313,set_lip_synchronization,135+3840,574
	lsp 314,set_bgm_chapter_display,135+3840,661
	lsp 315,set_song_subtitles,135+3840,748
	;lsp 316,set_alchemist_wording_edits,135+3840,835
	
	lsp 103,set_exit,0,0
	lsp 101,set_back,0,0
	lsp 102,set_next,0,0
	lsp 104,set_reset,0,0
	
	align_buttons_l 104
	align_buttons_r 103,102,101

		;page 1
		gosub *settings_bgm_title_language
		gosub *settings_interface_kb_dual
		gosub *settings_game_language
		gosub *settings_image_cache
		gosub *settings_video_res
		gosub *settings_window_size
		gosub *settings_full_window_auto
		gosub *settings_render
		
		;page 2
		mov %mcoord_add,1920 ;additional coordinates for buttons
		gosub *settings_bgm_vol
		gosub *settings_sfx_vol
		gosub *settings_voice_vol		
		if %CHIRU_MODE = 0 gosub *settings_voice_vol_chars
		if %CHIRU_MODE = 1 gosub *settings_voice_vol_chars_chiru
		
		;page 3
		mov %mcoord_add,3840 ;additional coordinates for buttons
		gosub *settings_op_ed_song_subtitles ;7
		gosub *settings_lips ;5
		gosub *settings_textspeed ;2
		gosub *settings_textbox ;4
		gosub *settings_rumble_strength ;1
		gosub *settings_bgm_chapter_display ;6
		gosub *settings_automode_speed ;3
		
		mov %mcoord_add,0 ;additional coordinates for buttons
		;vsp 100,0
		;vsp 371,0
		;vsp 372,0

		lsp 2,":c;graphics\colour\black.png",0,0
		print 10,500
		_csp 2
		print 10,100

		;stopwatch "config end"

*settings_loop
	; We are to redefine buttons after every action
		
	btndef ""
	
	spbtn 101,371
	spbtn 102,372
	spbtn 103,373
	spbtn 104,374

	;Voice vol button
	spbtn 201,1
	spbtn 202,2
	spbtn 203,3
	spbtn 204,4
	spbtn 205,5
	spbtn 206,6
	spbtn 207,7
	spbtn 208,8
	spbtn 209,9
	spbtn 210,10
	spbtn 211,11
	;End

	;Effect vol button
	spbtn 212,12
	spbtn 213,13
	spbtn 214,14
	spbtn 215,15
	spbtn 216,16
	spbtn 217,17
	spbtn 218,18
	spbtn 219,19
	spbtn 220,20
	spbtn 221,21
	spbtn 222,22
	;End

	;BGM vol button
	spbtn 223,23
	spbtn 224,24
	spbtn 225,25
	spbtn 226,26
	spbtn 227,27
	spbtn 228,28
	spbtn 229,29
	spbtn 230,30
	spbtn 231,31
	spbtn 232,32
	spbtn 233,33
	;End

	;vol all button
	spbtn 234,34
	spbtn 235,35
	spbtn 236,36
	spbtn 237,37
	spbtn 238,38
	spbtn 239,39
	spbtn 240,40
	spbtn 241,41
	spbtn 242,42
	spbtn 243,43
	spbtn 244,44
	;End

	;1080p or 720p button
	spbtn 245,45
	spbtn 246,46
	;End

	;Type button
	spbtn 247,47
	spbtn 248,48
	spbtn 249,49
	spbtn 250,50
	;End

	;Speed button
	spbtn 251,51
	spbtn 252,52
	spbtn 253,53
	spbtn 254,54
	spbtn 255,55
	spbtn 256,56
	spbtn 257,57
	spbtn 258,58
	spbtn 259,59
	spbtn 260,60
	spbtn 261,61
	;End

	;Moving lips button
	spbtn 264,64
	spbtn 265,65
	;end

	;Image cache button
	spbtn 266,66
	spbtn 267,67
	;end
	
	;Game language button
	spbtn 380,68
	spbtn 381,69
	;end
	
	;Interface kb dual button
	spbtn 270,70
	spbtn 271,71
	;end
	
	;Game render button
	spbtn 382,72
	spbtn 383,73
	;end
	
	;Op/Ed song subtitles button
	spbtn 276,76
	spbtn 277,77
	;end
	
	;Display mode button
	spbtn 279,79
	spbtn 280,80
	spbtn 281,81
	;end
	
	;Bgm title language button
	spbtn 282,82
	spbtn 283,83
	;end
	
	;Rumble strength button
	spbtn 284,84
	spbtn 285,85
	spbtn 286,86
	spbtn 287,87
	spbtn 288,88
	spbtn 289,89
	spbtn 290,90
	spbtn 291,91
	spbtn 292,92
	spbtn 293,93
	spbtn 294,94
	;end
	
	;Bgm chapter display button
	spbtn 295,95
	spbtn 296,96
	;end
	
	;Window size button
	spbtn 297,97
	spbtn 298,98
	;end
	
	;Voice vol chars button
	spbtn 320,100
	spbtn 321,101
	spbtn 322,102
	spbtn 323,103
	spbtn 324,104
	spbtn 325,105
	spbtn 326,106
	spbtn 327,107
	spbtn 328,108
	spbtn 329,109
	spbtn 330,110
	spbtn 331,111
	spbtn 332,112
	spbtn 333,113
	spbtn 334,114
	spbtn 335,115
	spbtn 336,116
	spbtn 337,117
	spbtn 338,118
	spbtn 339,119
	spbtn 340,120
	spbtn 341,121
	spbtn 342,122
	spbtn 343,123
	spbtn 344,124
	spbtn 345,125
	spbtn 346,126
	spbtn 347,127
	spbtn 348,128
	spbtn 349,129
	spbtn 350,130
	spbtn 351,131
	spbtn 352,132
	spbtn 353,133
	spbtn 354,134
	spbtn 355,135
	spbtn 356,136
	spbtn 357,137
	spbtn 358,138
	spbtn 359,139
	spbtn 360,140
	spbtn 361,141
	spbtn 362,142
	spbtn 363,143
	spbtn 364,144
	spbtn 365,145
	spbtn 366,146
	spbtn 367,147
	spbtn 368,148
	spbtn 369,149
	spbtn 370,150
	;end

	;Automode button
	spbtn 190,160
	spbtn 191,161
	spbtn 192,162
	spbtn 193,163
	spbtn 194,164
	spbtn 195,165
	spbtn 196,166
	spbtn 197,167
	spbtn 198,168
	spbtn 199,169
	spbtn 200,170
	;End
	
	btnwait %BtnRes

	if %BtnRes = -1 goto *settings_end ;Exit by right-clicking
	if %BtnRes = -10 goto *settings_end ;Exit by ESC
	if %BtnRes = 373 goto *settings_end 
	if %BtnRes = 374 gosub *settings_full_reset
	if %BtnRes = 0  goto *settings_loop
	if %BtnRes=-2  dec %mcurrent_page : gosub *settings_move
	if %BtnRes=-3  inc %mcurrent_page : gosub *settings_move
	
	if %BtnRes = 371 dec %mcurrent_page : gosub *settings_move
	if %BtnRes = 372 inc %mcurrent_page : gosub *settings_move
	
	;Voice vol chars button
	if %CHIRU_MODE == 0 gosub *settings_voice_chr_rondo
	if %CHIRU_MODE == 1 gosub *settings_voice_chr_chiru
	;end
	
	;Voice vol button
	if %BtnRes = 1 mov %dlg_vol,100 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 2 mov %dlg_vol,90 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 3 mov %dlg_vol,80 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 4 mov %dlg_vol,70 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 5 mov %dlg_vol,60 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 6 mov %dlg_vol,50 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 7 mov %dlg_vol,40 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 8 mov %dlg_vol,30 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 9 mov %dlg_vol,20 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 10 mov %dlg_vol,10 : voice_vol : gosub *settings_voice_vol
	if %BtnRes = 11 mov %dlg_vol,0 : voice_vol : gosub *settings_voice_vol
	;End

	;Effect vol button
	if %BtnRes = 12 mov %sfx_vol,100 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 13 mov %sfx_vol,90 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 14 mov %sfx_vol,80 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 15 mov %sfx_vol,70 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 16 mov %sfx_vol,60 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 17 mov %sfx_vol,50 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 18 mov %sfx_vol,40 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 19 mov %sfx_vol,30 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 20 mov %sfx_vol,20 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 21 mov %sfx_vol,10 : effect_vol : gosub *settings_sfx_vol
	if %BtnRes = 22 mov %sfx_vol,0 : effect_vol : gosub *settings_sfx_vol
	;End

	;BGM vol button
	if %BtnRes = 23 mov %bgm_vol,100 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 24 mov %bgm_vol,90 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 25 mov %bgm_vol,80 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 26 mov %bgm_vol,70 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 27 mov %bgm_vol,60 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 28 mov %bgm_vol,50 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 29 mov %bgm_vol,40 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 30 mov %bgm_vol,30 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 31 mov %bgm_vol,20 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 32 mov %bgm_vol,10 : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	if %BtnRes = 33 mov %bgm_vol,0  : vol_bgm %bgm_current_vol : gosub *settings_bgm_vol
	;End

	;1080p or 720p button
	if %BtnRes = 46 mov %video_res,0 : gosub *settings_video_res
	if %BtnRes = 45 mov %video_res,1 : gosub *settings_video_res
	;End

	;Moving lips button
	if %BtnRes = 64 mov %animated_lips,1 : gosub *settings_lips
	if %BtnRes = 65 mov %animated_lips,0 : lips_channel 0,"non" : lips_channel 1,"non" : lips_channel 2,"non" : lips_channel 43,"non" : lips_channel 44,"non" : lips_channel 45,"non" : lips_channel 46,"non" : gosub *settings_lips
	;end

	;Image cache button
	if %BtnRes = 66 mov %enable_cache,1 : gosub *settings_image_cache
	if %BtnRes = 67 mov %enable_cache,0 : clear_cache_img 1 : clear_cache_img 2 : clear_cache_snd 1 : clear_cache_snd 2 : gosub *settings_image_cache
	;end

	;Type button
	if %BtnRes = 47 mov %msgwnd_type,2 : gosub *settings_textbox
	if %BtnRes = 48 mov %msgwnd_type,1 : gosub *settings_textbox
	if %BtnRes = 49 mov %msgwnd_type,0 : gosub *settings_textbox
	if %BtnRes = 50 mov %msgwnd_type,3 : gosub *settings_textbox
	;End

	;Speed button
	if %BtnRes = 51 mov %textspeed2,0 : gosub *settings_textspeed
	if %BtnRes = 52 mov %textspeed2,1 : gosub *settings_textspeed
	if %BtnRes = 53 mov %textspeed2,2 : gosub *settings_textspeed
	if %BtnRes = 54 mov %textspeed2,3 : gosub *settings_textspeed
	if %BtnRes = 55 mov %textspeed2,4 : gosub *settings_textspeed
	if %BtnRes = 56 mov %textspeed2,5 : gosub *settings_textspeed
	if %BtnRes = 57 mov %textspeed2,6 : gosub *settings_textspeed
	if %BtnRes = 58 mov %textspeed2,7 : gosub *settings_textspeed
	if %BtnRes = 59 mov %textspeed2,8 : gosub *settings_textspeed
	if %BtnRes = 60 mov %textspeed2,9 : gosub *settings_textspeed
	if %BtnRes = 61 mov %textspeed2,10 : gosub *settings_textspeed
	;End
	
	;automode speed button
	;-116, -90, -70, -55, -43, -33, -26, -20, -16, -12, -9
	if %BtnRes = 160 mov %automodespeed,-116 : gosub *settings_automode_speed2
	if %BtnRes = 161 mov %automodespeed,-90 : gosub *settings_automode_speed2
	if %BtnRes = 162 mov %automodespeed,-70 : gosub *settings_automode_speed2
	if %BtnRes = 163 mov %automodespeed,-55 : gosub *settings_automode_speed2
	if %BtnRes = 164 mov %automodespeed,-43 : gosub *settings_automode_speed2
	if %BtnRes = 165 mov %automodespeed,-33 : gosub *settings_automode_speed2
	if %BtnRes = 166 mov %automodespeed,-26 : gosub *settings_automode_speed2
	if %BtnRes = 167 mov %automodespeed,-20 : gosub *settings_automode_speed2
	if %BtnRes = 168 mov %automodespeed,-16 : gosub *settings_automode_speed2
	if %BtnRes = 169 mov %automodespeed,-12 : gosub *settings_automode_speed2
	if %BtnRes = 170 mov %automodespeed,-9 : gosub *settings_automode_speed2
	;end
	
	;Game language button
	if %BtnRes != 68 jumpf ;left
		if %Free5 <= 0 getscriptnum %Free5
		dec %Free5
		goto *settings_game_language2
	~
	if %BtnRes != 69 jumpf ;right
		if %Free5 >= %Free2 mov %Free5,-1
		inc %Free5
		goto *settings_game_language2
		
		*settings_game_language2
			getscriptpath $Free4,%Free5
			getscriptpath $Free3,%Free5,1
			operate_config write,$Free4,"game-script"
			operate_config unset,"root"
			operate_config save 
			lsp 373,set_restarted_apply,0,910
		gosub *settings_game_language
	~
	;end
	
	;Interface kb dual button
	if %BtnRes != 70 jumpf
	vsp 100,0
	vsp 371,1
	vsp 372,1
	mov %interface_kb_dual,0 : gosub *settings_interface_kb_dual
	~
	if %BtnRes != 71 jumpf
	vsp 371,0
	vsp 372,0
	vsp 100,1
	mov %interface_kb_dual,1 : gosub *settings_interface_kb_dual
	~
	;end
	
	;Op/Ed song subtitles button
	if %BtnRes != 76 jumpf
		if %op_ed_song_subtitles = 1 mov %op_ed_song_subtitles,6
		dec %op_ed_song_subtitles : gosub *settings_op_ed_song_subtitles
	~	
	if %BtnRes != 77 jumpf
		if %op_ed_song_subtitles = 5 mov %op_ed_song_subtitles,0
		inc %op_ed_song_subtitles : gosub *settings_op_ed_song_subtitles
	~
	;end
	
	;Display mode button
	if %full_window_auto = 1 jumpf	
		if %BtnRes != 79 jumpf 
			operate_config unset,"fullscreen"
			operate_config write,"noval","window"
			operate_config write,"noval","scale"
			operate_config save
			menu_window
			mov %full_window_auto,1
			gosub *settings_full_window_auto
	~
	if %full_window_auto = 2 jumpf
		if %BtnRes != 80 jumpf
			operate_config unset,"window"
			operate_config write,"noval","fullscreen"
			operate_config write,"noval","scale"
			operate_config save
			menu_full
			mov %full_window_auto,2
			gosub *settings_full_window_auto
	~
	if %full_window_auto = 0 jumpf
		if %BtnRes != 81 jumpf
			operate_config unset,"fullscreen"
			operate_config unset,"window"
			operate_config write,"noval","scale"
			operate_config save
			lsp 373,set_restarted_apply,0,910
			mov %full_window_auto,0
			gosub *settings_full_window_auto
	~
	;end
	
	;Bgm title language button
	if %BtnRes != 82 jumpf
		if %bgm_title_language = 1 mov %bgm_title_language,5
		;spt xpos,278,-100,1000,3
		;click
		dec %bgm_title_language : gosub *settings_bgm_title_language
	~
	if %BtnRes != 83 jumpf
		if %bgm_title_language = 4 mov %bgm_title_language,0
		inc %bgm_title_language : gosub *settings_bgm_title_language
	~
	;end
	
	;Rumble strength button
	if %BtnRes = 84 mov %rumble_strength,0 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 85 mov %rumble_strength,4 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 86 mov %rumble_strength,8 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 87 mov %rumble_strength,12 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 88 mov %rumble_strength,16 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 89 mov %rumble_strength,20 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 90 mov %rumble_strength,26 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 91 mov %rumble_strength,32 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 92 mov %rumble_strength,38 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 93 mov %rumble_strength,44 : gosub *settings_rumble_strength : rumble 63,500
	if %BtnRes = 94 mov %rumble_strength,50 : gosub *settings_rumble_strength : rumble 63,500
	;end
	
	;Bgm chapter display button
	if %BtnRes = 95 mov %bgm_chapter_display,1 : gosub *settings_bgm_chapter_display
	if %BtnRes = 96 mov %bgm_chapter_display,0 : gosub *settings_bgm_chapter_display
	;end
	
	;Window size button

	if %BtnRes != 97 jumpf ;<
		if $window_size = "1280" mov $window_size,"2560" : goto *settings_window_size2
		if $window_size = "1366" mov $window_size,"1280" : goto *settings_window_size2
		if $window_size = "1440" mov $window_size,"1366" : goto *settings_window_size2
		if $window_size = "1600" mov $window_size,"1440" : goto *settings_window_size2
		if $window_size = "1920" mov $window_size,"1600" : goto *settings_window_size2
		if $window_size = "2560" mov $window_size,"1920" : goto *settings_window_size2
		;For Custom
		mov $window_size,"1920" : goto *settings_window_size2
	~
	if %BtnRes != 98 jumpf ;>
		if $window_size = "2560" mov $window_size,"1280" : goto *settings_window_size2
		if $window_size = "1920" mov $window_size,"2560" : goto *settings_window_size2
		if $window_size = "1600" mov $window_size,"1920" : goto *settings_window_size2
		if $window_size = "1440" mov $window_size,"1600" : goto *settings_window_size2
		if $window_size = "1366" mov $window_size,"1440" : goto *settings_window_size2
		if $window_size = "1280" mov $window_size,"1366" : goto *settings_window_size2
		;For Custom
		mov $window_size,"1920" : goto *settings_window_size2

		*settings_window_size2
			operate_config write,$window_size,"window-width"
			operate_config save
			lsp 373,set_restarted_apply,0,910
			gosub *settings_window_size
	~
	;end
	
	;Render button
	if %BtnRes != 72 jumpf ;left
		if %Free9 <= 0 getrenderernum %Free9
		dec %Free9
		goto *settings_render2
	~
	if %BtnRes != 73 jumpf ;right
		getrenderernum %Free6
		dec %Free6
		if %Free9 < 0 mov %Free9,0
		if %Free9 >= %Free6 mov %Free9,-1
		inc %Free9
		goto *settings_render2

		*settings_render2
			getrenderername $Free7,%Free9
			operate_config write,$Free7,"prefer-renderer"
			operate_config unset,"root"
			operate_config save
			lsp 373,set_restarted_apply,0,910
			gosub *settings_render
	~
	;end
	
	goto *settings_loop
	
*settings_move

if %mcurrent_page!=1 jumpf
	aspt2 xpos,config_main_lsp2,2880,1000,3
if %mmove_right!=1 jumpf
	for %Free1 = 190 to 384
		spt xpos,%Free1,1920,1000,3
		spt2 xpos,%Free1,1920,1000,3
	next
	mov %mmove_right,0
	mov %mmove_left,0
~
		
if %mcurrent_page!=4 jumpf
	aspt2 xpos,config_main_lsp2,2880,1000,3
if %mmove_left!=1 jumpf
	for %Free1 = 190 to 384
		spt xpos,%Free1,3840,1000,3
		spt2 xpos,%Free1,3840,1000,3
	next
	mov %mmove_right,0
	mov %mmove_left,0
	mov %mcurrent_page,1
~

if %mcurrent_page!=2 jumpf
	aspt2 xpos,config_main_lsp2,960,1000,3
if %mmove_right!=0 jumpf
	for %Free1 = 190 to 384
		spt xpos,%Free1,-1920,1000,3
		spt2 xpos,%Free1,-1920,1000,3
	next
	mov %mmove_right,1
~
if %mmove_right!=2 jumpf
	for %Free1 = 190 to 384
		spt xpos,%Free1,1920,1000,3
		aspt2 xpos,%Free1,1920,1000,3
	next
	mov %mmove_right,1
~

if %mcurrent_page!=3 jumpf
	aspt2 xpos,config_main_lsp2,-960,1000,3
if %mmove_right!=1 jumpf
	for %Free1 = 190 to 384
		spt xpos,%Free1,-1920,1000,3
		spt2 xpos,%Free1,-1920,1000,3
	next
	mov %mmove_right,2
	mov %mmove_left,1
~

if %mcurrent_page!=0 jumpf
	aspt2 xpos,config_main_lsp2,-960,1000,3
if %mmove_left!=0 jumpf
	for %Free1 = 190 to 384
		spt xpos,%Free1,-3840,1000,3
		spt2 xpos,%Free1,-3840,1000,3
	next
	mov %mmove_right,2
	mov %mmove_left,1
	mov %mcurrent_page,3
~

; might need a very slight wait if the rest move longer, that is not expected though
sptwait2 xpos,config_main_lsp2

return

*settings_voice_chr_rondo
	if %BtnRes != 100 jumpf
		if %vv_cla = 1 mov %vv_cla,2:goto *settings_vv_btn
		if %vv_cla = 2 mov %vv_cla,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\02\50800292.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 101 jumpf
		if %vv_nat = 1 mov %vv_nat,2:goto *settings_vv_btn
		if %vv_nat = 2 mov %vv_nat,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\03\50900927.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 102 jumpf
		if %vv_jes = 1 mov %vv_jes,2:goto *settings_vv_btn
		if %vv_jes = 2 mov %vv_jes,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\04\50200034.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 103 jumpf
		if %vv_eva = 1 mov %vv_eva,2:goto *settings_vv_btn
		if %vv_eva = 2 mov %vv_eva,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\05\51000334.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 104 jumpf
		if %vv_hid = 1 mov %vv_hid,2:goto *settings_vv_btn
		if %vv_hid = 2 mov %vv_hid,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\06\51100191.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 105 jumpf
		if %vv_geo = 1 mov %vv_geo,2:goto *settings_vv_btn
		if %vv_geo = 2 mov %vv_geo,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\07\50300029.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 106 jumpf
		if %vv_rud = 1 mov %vv_rud,2:goto *settings_vv_btn
		if %vv_rud = 2 mov %vv_rud,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\08\51200233.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 107 jumpf
		if %vv_kir = 1 mov %vv_kir,2:goto *settings_vv_btn
		if %vv_kir = 2 mov %vv_kir,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\09\51300152.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 108 jumpf
		if %vv_but = 1 mov %vv_but,2:goto *settings_vv_btn
		if %vv_but = 2 mov %vv_but,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\10\40100556.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 109 jumpf
		if %vv_ros = 1 mov %vv_ros,2:goto *settings_vv_btn
		if %vv_ros = 2 mov %vv_ros,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\12\51400112.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 110 jumpf
		if %vv_mar = 1 mov %vv_mar,2:goto *settings_vv_btn
		if %vv_mar = 2 mov %vv_mar,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\13\50400034.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 111 jumpf
		if %vv_kin = 1 mov %vv_kin,2:mov %vv_ki2,2:goto *settings_vv_btn
		if %vv_kin = 2 mov %vv_kin,1:mov %vv_ki2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\01\51500238.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 112 jumpf
		if %vv_nan = 1 mov %vv_nan,2:goto *settings_vv_btn
		if %vv_nan = 2 mov %vv_nan,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\19\51900077.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 113 jumpf
		if %vv_gen = 1 mov %vv_gen,2:goto *settings_vv_btn
		if %vv_gen = 2 mov %vv_gen,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\14\51600110.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 114 jumpf
		if %vv_kum = 1 mov %vv_kum,2:goto *settings_vv_btn
		if %vv_kum = 2 mov %vv_kum,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\18\51800076.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 115 jumpf
		if %vv_goh = 1 mov %vv_goh,2:goto *settings_vv_btn
		if %vv_goh = 2 mov %vv_goh,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\17\51700095.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 116 jumpf
		if %vv_sha = 1 mov %vv_sha,2:goto *settings_vv_btn
		if %vv_sha = 2 mov %vv_sha,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\15\50500065.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 117 jumpf
		if %vv_kan = 1 mov %vv_kan,2:goto *settings_vv_btn
		if %vv_kan = 2 mov %vv_kan,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\16\50600081.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 118 jumpf
		if %vv_bea = 1 mov %vv_bea,2:mov %vv_be2,2:mov %vv_be3,2:goto *settings_vv_btn
		if %vv_bea = 2 mov %vv_bea,1:mov %vv_be2,1:mov %vv_be3,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\27\20700021.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 119 jumpf
		if %vv_ber = 1 mov %vv_ber,2:goto *settings_vv_btn
		if %vv_ber = 2 mov %vv_ber,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\28\92100252.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 120 jumpf
		if %vv_lam = 1 mov %vv_lam,2:goto *settings_vv_btn
		if %vv_lam = 2 mov %vv_lam,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\29\52200497.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 121 jumpf
		if %vv_enj = 1 mov %vv_enj,2:goto *settings_vv_btn
		if %vv_enj = 2 mov %vv_enj,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\11\42001574.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 122 jumpf
		if %vv_wal = 1 mov %vv_wal,2:goto *settings_vv_btn
		if %vv_wal = 2 mov %vv_wal,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\30\53200236.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 123 jumpf
		if %vv_ev2 = 1 mov %vv_ev2,2:goto *settings_vv_btn
		if %vv_ev2 = 2 mov %vv_ev2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\34\33300003.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 124 jumpf
		if %vv_ron = 1 mov %vv_ron,2:goto *settings_vv_btn
		if %vv_ron = 2 mov %vv_ron,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\31\53100157.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 125 jumpf
		if %vv_rg1 = 1 mov %vv_rg1,2:goto *settings_vv_btn
		if %vv_rg1 = 2 mov %vv_rg1,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\38\32300041.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 126 jumpf
		if %vv_rg2 = 1 mov %vv_rg2,2:goto *settings_vv_btn
		if %vv_rg2 = 2 mov %vv_rg2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\39\32400048.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 127 jumpf
		if %vv_rg3 = 1 mov %vv_rg3,2:goto *settings_vv_btn
		if %vv_rg3 = 2 mov %vv_rg3,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\40\42500001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 128 jumpf
		if %vv_rg4 = 1 mov %vv_rg4,2:goto *settings_vv_btn
		if %vv_rg4 = 2 mov %vv_rg4,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\41\32600026.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 129 jumpf
		if %vv_rg5 = 1 mov %vv_rg5,2:goto *settings_vv_btn
		if %vv_rg5 = 2 mov %vv_rg5,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\42\42700385.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 130 jumpf
		if %vv_rg6 = 1 mov %vv_rg6,2:goto *settings_vv_btn
		if %vv_rg6 = 2 mov %vv_rg6,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\43\42800016.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 131 jumpf
		if %vv_rg7 = 1 mov %vv_rg7,2:goto *settings_vv_btn
		if %vv_rg7 = 2 mov %vv_rg7,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\44\42900001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 132 jumpf
		if %vv_sak = 1 mov %vv_sak,2:goto *settings_vv_btn
		if %vv_sak = 2 mov %vv_sak,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\33\44200009.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 133 jumpf
		if %vv_gap = 1 mov %vv_gap,2:goto *settings_vv_btn
		if %vv_gap = 2 mov %vv_gap,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\32\53700161.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 134 jumpf
		if %vv_s00 = 1 mov %vv_s00,2:goto *settings_vv_btn
		if %vv_s00 = 2 mov %vv_s00,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\37\43600001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 135 jumpf
		if %vv_s41 = 1 mov %vv_s41,2:goto *settings_vv_btn
		if %vv_s41 = 2 mov %vv_s41,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\36\43500001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 136 jumpf
		if %vv_s45 = 1 mov %vv_s45,2:goto *settings_vv_btn
		if %vv_s45 = 2 mov %vv_s45,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\35\43400001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 137 jumpf
		if %vv_kas = 1 mov %vv_kas,2:goto *settings_vv_btn
		if %vv_kas = 2 mov %vv_kas,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\22\44300054.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 138 jumpf
		if %vv_ama = 1 mov %vv_ama,2:goto *settings_vv_btn
		if %vv_ama = 2 mov %vv_ama,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\20\43000047.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 139 jumpf
		if %vv_oko = 1 mov %vv_oko,2:goto *settings_vv_btn
		if %vv_oko = 2 mov %vv_oko,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\21\44100146.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 140 jumpf
		if %vv_ku2 = 1 mov %vv_ku2,2:goto *settings_vv_btn
		if %vv_ku2 = 2 mov %vv_ku2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\26\44000020.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 141 jumpf
		if %vv_pro = 1 mov %vv_pro,2:goto *settings_vv_btn
		if %vv_pro = 2 mov %vv_pro,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\23\44400089.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 142 jumpf
		if %vv_kaw = 1 mov %vv_kaw,2:goto *settings_vv_btn
		if %vv_kaw = 2 mov %vv_kaw,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\24\43800106.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 143 jumpf
		if %vv_na2 = 1 mov %vv_na2,2:goto *settings_vv_btn
		if %vv_na2 = 2 mov %vv_na2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\25\43900007.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 144 jumpf
		if %vv_goa = 1 mov %vv_goa,2:goto *settings_vv_btn
		if %vv_goa = 2 mov %vv_goa,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\45\yagim2001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 145 jumpf
		if %vv_99 = 1 mov %vv_99,2:mov %vv_0,2:goto *settings_vv_btn
		if %vv_99 = 2 mov %vv_99,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\99\anaf1001.ogg":mov %vv_0,1:goto *settings_vv_btn
	*settings_vv_btn
		if %CHIRU_MODE = 0 gosub *settings_voice_vol_chars
		if %CHIRU_MODE = 1 gosub *settings_voice_vol_chars_chiru
	~
return

*settings_voice_chr_chiru
	if %BtnRes != 100 jumpf
		if %vv_cla = 1 mov %vv_cla,2:goto *settings_vv_btn
		if %vv_cla = 2 mov %vv_cla,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\02\50800292.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 101 jumpf
		if %vv_nat = 1 mov %vv_nat,2:goto *settings_vv_btn
		if %vv_nat = 2 mov %vv_nat,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\03\50900927.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 102 jumpf
		if %vv_jes = 1 mov %vv_jes,2:goto *settings_vv_btn
		if %vv_jes = 2 mov %vv_jes,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\04\50200034.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 103 jumpf
		if %vv_eva = 1 mov %vv_eva,2:goto *settings_vv_btn
		if %vv_eva = 2 mov %vv_eva,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\05\51000334.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 104 jumpf
		if %vv_hid = 1 mov %vv_hid,2:goto *settings_vv_btn
		if %vv_hid = 2 mov %vv_hid,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\06\51100191.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 105 jumpf
		if %vv_geo = 1 mov %vv_geo,2:goto *settings_vv_btn
		if %vv_geo = 2 mov %vv_geo,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\07\50300029.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 106 jumpf
		if %vv_rud = 1 mov %vv_rud,2:goto *settings_vv_btn
		if %vv_rud = 2 mov %vv_rud,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\08\51200233.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 107 jumpf
		if %vv_kir = 1 mov %vv_kir,2:goto *settings_vv_btn
		if %vv_kir = 2 mov %vv_kir,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\09\51300152.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 108 jumpf
		if %vv_but = 1 mov %vv_but,2:goto *settings_vv_btn
		if %vv_but = 2 mov %vv_but,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\10\40100556.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 109 jumpf
		if %vv_ros = 1 mov %vv_ros,2:goto *settings_vv_btn
		if %vv_ros = 2 mov %vv_ros,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\12\51400112.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 110 jumpf
		if %vv_mar = 1 mov %vv_mar,2:goto *settings_vv_btn
		if %vv_mar = 2 mov %vv_mar,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\13\50400034.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 111 jumpf
		if %vv_kin = 1 mov %vv_kin,2:mov %vv_ki2,2:goto *settings_vv_btn
		if %vv_kin = 2 mov %vv_kin,1:mov %vv_ki2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\01\51500238.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 112 jumpf
		if %vv_nan = 1 mov %vv_nan,2:goto *settings_vv_btn
		if %vv_nan = 2 mov %vv_nan,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\19\51900077.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 113 jumpf
		if %vv_gen = 1 mov %vv_gen,2:goto *settings_vv_btn
		if %vv_gen = 2 mov %vv_gen,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\14\51600110.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 114 jumpf
		if %vv_kum = 1 mov %vv_kum,2:goto *settings_vv_btn
		if %vv_kum = 2 mov %vv_kum,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\18\51800076.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 115 jumpf
		if %vv_goh = 1 mov %vv_goh,2:goto *settings_vv_btn
		if %vv_goh = 2 mov %vv_goh,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\17\51700095.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 116 jumpf
		if %vv_sha = 1 mov %vv_sha,2:goto *settings_vv_btn
		if %vv_sha = 2 mov %vv_sha,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\15\50500065.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 117 jumpf
		if %vv_kan = 1 mov %vv_kan,2:goto *settings_vv_btn
		if %vv_kan = 2 mov %vv_kan,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\16\50600081.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 118 jumpf
		if %vv_bea = 1 mov %vv_bea,2:mov %vv_be2,2:mov %vv_be3,2:goto *settings_vv_btn
		if %vv_bea = 2 mov %vv_bea,1:mov %vv_be2,1:mov %vv_be3,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\27\20700021.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 119 jumpf
		if %vv_ber = 1 mov %vv_ber,2:goto *settings_vv_btn
		if %vv_ber = 2 mov %vv_ber,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\28\92100252.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 120 jumpf
		if %vv_eri = 1 mov %vv_eri,2:goto *settings_vv_btn
		if %vv_eri = 2 mov %vv_eri,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\46\54500010.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 121 jumpf
		if %vv_lam = 1 mov %vv_lam,2:goto *settings_vv_btn
		if %vv_lam = 2 mov %vv_lam,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\29\52200497.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 122 jumpf
		if %vv_enj = 1 mov %vv_enj,2:goto *settings_vv_btn
		if %vv_enj = 2 mov %vv_enj,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\11\42001574.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 123 jumpf
		if %vv_wal = 1 mov %vv_wal,2:goto *settings_vv_btn
		if %vv_wal = 2 mov %vv_wal,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\30\53200236.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 124 jumpf
		if %vv_ev2 = 1 mov %vv_ev2,2:goto *settings_vv_btn
		if %vv_ev2 = 2 mov %vv_ev2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\34\33300003.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 125 jumpf
		if %vv_ron = 1 mov %vv_ron,2:goto *settings_vv_btn
		if %vv_ron = 2 mov %vv_ron,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\31\53100157.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 126 jumpf
		if %vv_rg1 = 1 mov %vv_rg1,2:goto *settings_vv_btn
		if %vv_rg1 = 2 mov %vv_rg1,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\38\32300041.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 127 jumpf
		if %vv_rg2 = 1 mov %vv_rg2,2:goto *settings_vv_btn
		if %vv_rg2 = 2 mov %vv_rg2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\39\32400048.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 128 jumpf
		if %vv_rg3 = 1 mov %vv_rg3,2:goto *settings_vv_btn
		if %vv_rg3 = 2 mov %vv_rg3,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\40\42500001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 129 jumpf
		if %vv_rg4 = 1 mov %vv_rg4,2:goto *settings_vv_btn
		if %vv_rg4 = 2 mov %vv_rg4,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\41\32600026.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 130 jumpf
		if %vv_rg5 = 1 mov %vv_rg5,2:goto *settings_vv_btn
		if %vv_rg5 = 2 mov %vv_rg5,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\42\42700385.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 131 jumpf
		if %vv_rg6 = 1 mov %vv_rg6,2:goto *settings_vv_btn
		if %vv_rg6 = 2 mov %vv_rg6,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\43\42800016.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 132 jumpf
		if %vv_rg7 = 1 mov %vv_rg7,2:goto *settings_vv_btn
		if %vv_rg7 = 2 mov %vv_rg7,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\44\42900001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 133 jumpf
		if %vv_sak = 1 mov %vv_sak,2:goto *settings_vv_btn
		if %vv_sak = 2 mov %vv_sak,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\33\44200009.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 134 jumpf
		if %vv_gap = 1 mov %vv_gap,2:goto *settings_vv_btn
		if %vv_gap = 2 mov %vv_gap,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\32\53700161.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 135 jumpf
		if %vv_s00 = 1 mov %vv_s00,2:goto *settings_vv_btn
		if %vv_s00 = 2 mov %vv_s00,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\37\43600001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 136 jumpf
		if %vv_s41 = 1 mov %vv_s41,2:goto *settings_vv_btn
		if %vv_s41 = 2 mov %vv_s41,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\36\43500001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 137 jumpf
		if %vv_s45 = 1 mov %vv_s45,2:goto *settings_vv_btn
		if %vv_s45 = 2 mov %vv_s45,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\35\43400001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 138 jumpf
		if %vv_dla = 1 mov %vv_dla,2:goto *settings_vv_btn
		if %vv_dla = 2 mov %vv_dla,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\47\54600002.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 139 jumpf
		if %vv_cor = 1 mov %vv_cor,2:goto *settings_vv_btn
		if %vv_cor = 2 mov %vv_cor,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\49\54700056.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 140 jumpf
		if %vv_ger = 1 mov %vv_ger,2:goto *settings_vv_btn
		if %vv_ger = 2 mov %vv_ger,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\48\54800049.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 141 jumpf
		if %vv_zep = 1 mov %vv_zep,2:goto *settings_vv_btn
		if %vv_zep = 2 mov %vv_zep,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\51\65100042.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 142 jumpf
		if %vv_fur = 1 mov %vv_fur,2:goto *settings_vv_btn
		if %vv_fur = 2 mov %vv_fur,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\52\65200038.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 143 jumpf
		if %vv_ama = 1 mov %vv_ama,2:goto *settings_vv_btn
		if %vv_ama = 2 mov %vv_ama,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\20\43000047.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 144 jumpf
		if %vv_bu3 = 1 mov %vv_bu3,2:goto *settings_vv_btn
		if %vv_bu3 = 2 mov %vv_bu3,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\56\64900002.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 145 jumpf
		if %vv_fea = 1 mov %vv_fea,2:mov %vv_fe2,2:goto *settings_vv_btn
		if %vv_fea = 2 mov %vv_fea,1:mov %vv_fe2,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\50\65000057.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 146 jumpf
		if %vv_wil = 1 mov %vv_wil,2:goto *settings_vv_btn
		if %vv_wil = 2 mov %vv_wil,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\54\75400183.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 147 jumpf
		if %vv_rio = 1 mov %vv_rio,2:goto *settings_vv_btn
		if %vv_rio = 2 mov %vv_rio,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\53\75300002.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 148 jumpf
		if %vv_cur = 1 mov %vv_cur,2:goto *settings_vv_btn
		if %vv_cur = 2 mov %vv_cur,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\55\75500003.ogg":goto *settings_vv_btn
		goto *settings_vv_btn
	~
	if %BtnRes != 149 jumpf
		if %vv_goa = 1 mov %vv_goa,2:goto *settings_vv_btn
		if %vv_goa = 2 mov %vv_goa,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\45\yagim2001.ogg":goto *settings_vv_btn
	~
	if %BtnRes != 150 jumpf
		if %vv_99 = 1 mov %vv_99,2:mov %vv_0,2:goto *settings_vv_btn
		if %vv_99 = 2 mov %vv_99,1:chvol 0,%dlg_vol:dwave 0,"sound\voice\99\anaf1001.ogg":mov %vv_0,1:goto *settings_vv_btn
		goto *settings_vv_btn
	~
return

*settings_voice_vol
	;Voice vol
	notif %dlg_vol = 100 lsp 201,":a/2,0,3;graphics\menu\SystemBtn\circle_100.png",1650+%mcoord_add,405 
	notif %dlg_vol = 90 lsp 202,":a/2,0,3;graphics\menu\SystemBtn\circle_90.png",1610+%mcoord_add,405 ; x:-40 от 100%
	notif %dlg_vol = 80 lsp 203,":a/2,0,3;graphics\menu\SystemBtn\circle_80.png",1570+%mcoord_add,405
	notif %dlg_vol = 70 lsp 204,":a/2,0,3;graphics\menu\SystemBtn\circle_70.png",1530+%mcoord_add,405
	notif %dlg_vol = 60 lsp 205,":a/2,0,3;graphics\menu\SystemBtn\circle_60.png",1490+%mcoord_add,405
	notif %dlg_vol = 50 lsp 206,":a/2,0,3;graphics\menu\SystemBtn\circle_50.png",1450+%mcoord_add,405
	notif %dlg_vol = 40 lsp 207,":a/2,0,3;graphics\menu\SystemBtn\circle_40.png",1410+%mcoord_add,405
	notif %dlg_vol = 30 lsp 208,":a/2,0,3;graphics\menu\SystemBtn\circle_30.png",1370+%mcoord_add,405
	notif %dlg_vol = 20 lsp 209,":a/2,0,3;graphics\menu\SystemBtn\circle_20.png",1330+%mcoord_add,405
	notif %dlg_vol = 10 lsp 210,":a/2,0,3;graphics\menu\SystemBtn\circle_10.png",1290+%mcoord_add,405
	notif %dlg_vol = 0 lsp 211,":a/2,0,3;graphics\menu\SystemBtn\circle_0.png",1250+%mcoord_add,405
	if %dlg_vol = 100 lsp 201,":a/2,0,3;graphics\menu\SystemBtn\circle_100_b.png",1650+%mcoord_add,405
	if %dlg_vol = 90 lsp 202,":a/2,0,3;graphics\menu\SystemBtn\circle_90_b.png",1610+%mcoord_add,405
	if %dlg_vol = 80 lsp 203,":a/2,0,3;graphics\menu\SystemBtn\circle_80_b.png",1570+%mcoord_add,405
	if %dlg_vol = 70 lsp 204,":a/2,0,3;graphics\menu\SystemBtn\circle_70_b.png",1530+%mcoord_add,405
	if %dlg_vol = 60 lsp 205,":a/2,0,3;graphics\menu\SystemBtn\circle_60_b.png",1490+%mcoord_add,405
	if %dlg_vol = 50 lsp 206,":a/2,0,3;graphics\menu\SystemBtn\circle_50_b.png",1450+%mcoord_add,405
	if %dlg_vol = 40 lsp 207,":a/2,0,3;graphics\menu\SystemBtn\circle_40_b.png",1410+%mcoord_add,405
	if %dlg_vol = 30 lsp 208,":a/2,0,3;graphics\menu\SystemBtn\circle_30_b.png",1370+%mcoord_add,405
	if %dlg_vol = 20 lsp 209,":a/2,0,3;graphics\menu\SystemBtn\circle_20_b.png",1330+%mcoord_add,405
	if %dlg_vol = 10 lsp 210,":a/2,0,3;graphics\menu\SystemBtn\circle_10_b.png",1290+%mcoord_add,405
	if %dlg_vol = 0 lsp 211,":a/2,0,3;graphics\menu\SystemBtn\circle_0_b.png",1250+%mcoord_add,405
	;End
return
	
*settings_sfx_vol
	;Effect vol
	notif %sfx_vol = 100 lsp 212,":a/2,0,3;graphics\menu\SystemBtn\circle_100.png",1650+%mcoord_add,325 ; x:-40 от 100% y:-80 от нижней
	notif %sfx_vol = 90 lsp 213,":a/2,0,3;graphics\menu\SystemBtn\circle_90.png",1610+%mcoord_add,325 
	notif %sfx_vol = 80 lsp 214,":a/2,0,3;graphics\menu\SystemBtn\circle_80.png",1570+%mcoord_add,325
	notif %sfx_vol = 70 lsp 215,":a/2,0,3;graphics\menu\SystemBtn\circle_70.png",1530+%mcoord_add,325
	notif %sfx_vol = 60 lsp 216,":a/2,0,3;graphics\menu\SystemBtn\circle_60.png",1490+%mcoord_add,325
	notif %sfx_vol = 50 lsp 217,":a/2,0,3;graphics\menu\SystemBtn\circle_50.png",1450+%mcoord_add,325
	notif %sfx_vol = 40 lsp 218,":a/2,0,3;graphics\menu\SystemBtn\circle_40.png",1410+%mcoord_add,325
	notif %sfx_vol = 30 lsp 219,":a/2,0,3;graphics\menu\SystemBtn\circle_30.png",1370+%mcoord_add,325
	notif %sfx_vol = 20 lsp 220,":a/2,0,3;graphics\menu\SystemBtn\circle_20.png",1330+%mcoord_add,325
	notif %sfx_vol = 10 lsp 221,":a/2,0,3;graphics\menu\SystemBtn\circle_10.png",1290+%mcoord_add,325
	notif %sfx_vol = 0 lsp 222,":a/2,0,3;graphics\menu\SystemBtn\circle_0.png",1250+%mcoord_add,325
	if %sfx_vol = 100 lsp 212,":a/2,0,3;graphics\menu\SystemBtn\circle_100_b.png",1650+%mcoord_add,325
	if %sfx_vol = 90 lsp 213,":a/2,0,3;graphics\menu\SystemBtn\circle_90_b.png",1610+%mcoord_add,325
	if %sfx_vol = 80 lsp 214,":a/2,0,3;graphics\menu\SystemBtn\circle_80_b.png",1570+%mcoord_add,325
	if %sfx_vol = 70 lsp 215,":a/2,0,3;graphics\menu\SystemBtn\circle_70_b.png",1530+%mcoord_add,325
	if %sfx_vol = 60 lsp 216,":a/2,0,3;graphics\menu\SystemBtn\circle_60_b.png",1490+%mcoord_add,325
	if %sfx_vol = 50 lsp 217,":a/2,0,3;graphics\menu\SystemBtn\circle_50_b.png",1450+%mcoord_add,325
	if %sfx_vol = 40 lsp 218,":a/2,0,3;graphics\menu\SystemBtn\circle_40_b.png",1410+%mcoord_add,325
	if %sfx_vol = 30 lsp 219,":a/2,0,3;graphics\menu\SystemBtn\circle_30_b.png",1370+%mcoord_add,325
	if %sfx_vol = 20 lsp 220,":a/2,0,3;graphics\menu\SystemBtn\circle_20_b.png",1330+%mcoord_add,325
	if %sfx_vol = 10 lsp 221,":a/2,0,3;graphics\menu\SystemBtn\circle_10_b.png",1290+%mcoord_add,325
	if %sfx_vol = 0 lsp 222,":a/2,0,3;graphics\menu\SystemBtn\circle_0_b.png",1250+%mcoord_add,325
	;End
return

*settings_bgm_vol
	;BGM vol
	notif %bgm_vol = 100 lsp 223,":a/2,0,3;graphics\menu\SystemBtn\circle_100.png",1650+%mcoord_add,245 ; x:-40 от 100% y:-80 от нижней
	notif %bgm_vol = 90 lsp 224,":a/2,0,3;graphics\menu\SystemBtn\circle_90.png",1610+%mcoord_add,245 
	notif %bgm_vol = 80 lsp 225,":a/2,0,3;graphics\menu\SystemBtn\circle_80.png",1570+%mcoord_add,245
	notif %bgm_vol = 70 lsp 226,":a/2,0,3;graphics\menu\SystemBtn\circle_70.png",1530+%mcoord_add,245
	notif %bgm_vol = 60 lsp 227,":a/2,0,3;graphics\menu\SystemBtn\circle_60.png",1490+%mcoord_add,245
	notif %bgm_vol = 50 lsp 228,":a/2,0,3;graphics\menu\SystemBtn\circle_50.png",1450+%mcoord_add,245
	notif %bgm_vol = 40 lsp 229,":a/2,0,3;graphics\menu\SystemBtn\circle_40.png",1410+%mcoord_add,245
	notif %bgm_vol = 30 lsp 230,":a/2,0,3;graphics\menu\SystemBtn\circle_30.png",1370+%mcoord_add,245
	notif %bgm_vol = 20 lsp 231,":a/2,0,3;graphics\menu\SystemBtn\circle_20.png",1330+%mcoord_add,245
	notif %bgm_vol = 10 lsp 232,":a/2,0,3;graphics\menu\SystemBtn\circle_10.png",1290+%mcoord_add,245
	notif %bgm_vol = 0 lsp 233,":a/2,0,3;graphics\menu\SystemBtn\circle_0.png",1250+%mcoord_add,245 ;1385
	if %bgm_vol = 100 lsp 223,":a/2,0,3;graphics\menu\SystemBtn\circle_100_b.png",1650+%mcoord_add,245
	if %bgm_vol = 90 lsp 224,":a/2,0,3;graphics\menu\SystemBtn\circle_90_b.png",1610+%mcoord_add,245
	if %bgm_vol = 80 lsp 225,":a/2,0,3;graphics\menu\SystemBtn\circle_80_b.png",1570+%mcoord_add,245
	if %bgm_vol = 70 lsp 226,":a/2,0,3;graphics\menu\SystemBtn\circle_70_b.png",1530+%mcoord_add,245
	if %bgm_vol = 60 lsp 227,":a/2,0,3;graphics\menu\SystemBtn\circle_60_b.png",1490+%mcoord_add,245
	if %bgm_vol = 50 lsp 228,":a/2,0,3;graphics\menu\SystemBtn\circle_50_b.png",1450+%mcoord_add,245
	if %bgm_vol = 40 lsp 229,":a/2,0,3;graphics\menu\SystemBtn\circle_40_b.png",1410+%mcoord_add,245
	if %bgm_vol = 30 lsp 230,":a/2,0,3;graphics\menu\SystemBtn\circle_30_b.png",1370+%mcoord_add,245
	if %bgm_vol = 20 lsp 231,":a/2,0,3;graphics\menu\SystemBtn\circle_20_b.png",1330+%mcoord_add,245
	if %bgm_vol = 10 lsp 232,":a/2,0,3;graphics\menu\SystemBtn\circle_10_b.png",1290+%mcoord_add,245
	if %bgm_vol = 0 lsp 233,":a/2,0,3;graphics\menu\SystemBtn\circle_0_b.png",1250+%mcoord_add,245
	;End
return

*settings_chars_refresh
	if %vv_inc == 0 return ;nothing added

	if %x2 == 0 mov %x2,%vv_inc ;first sprite in a row
	mov %x3,%vv_inc ;last sprite in a row
	
	add %x,95 ;cell width
	inc %y3

	if %x < %y2*95+%Free1 jumpf
		;rondo has smaller second row
		if %CHIRU_MODE = 0 && %y2 == 17 dec %y2 : add %Free1,47
		mov %x,%Free1
		add %y,107 ;cell height
		mov %x2,0
		mov %x3,0
		mov %y3,0
	~

	mov %vv_inc,0
return

*settings_chars_realign
	;do not align first line or complete table
	if %x2 == 0 || %y == 520 return
	;the line is complete
	if %x >= %y2*95+%Free1 return

	;deltax = длина_ряда - (ширина_ячейки * (endSp - startSp)) / 2;

	mul %y3,95
	mov %x,%y2*95-%y3
	div %x,2

	~
		if %x2 > %x3 return
		msp %x2,%x,0
		inc %x2
		jumpb
return

*settings_voice_vol_chars
	mov %vv_inc,0
	mov %Free1,135+%mcoord_add
	mov %x,%Free1
	mov %y,520
	mov %y2,17 ;first row has 17
	mov %x2,0 ;start sprite
	mov %x3,0 ;end sprite
	mov %y3,0 ;row sprite count

	if %vv_cla = 1 lsp 320,":c/1,0,3;graphics\chars\chars_kla0.png",%x,%y : mov %vv_inc,320
	if %vv_cla = 2 lsp 320,":c/1,0,3;graphics\chars\chars_kla0.png",%x,%y,90 : mov %vv_inc,320
	gosub *settings_chars_refresh
	if %vv_nat = 1 lsp 321,":c/1,0,3;graphics\chars\chars_nat0.png",%x,%y : mov %vv_inc,321
	if %vv_nat = 2 lsp 321,":c/1,0,3;graphics\chars\chars_nat0.png",%x,%y,90 : mov %vv_inc,321
	gosub *settings_chars_refresh
	if %vv_jes = 1 lsp 322,":c/1,0,3;graphics\chars\chars_jes0.png",%x,%y : mov %vv_inc,322
	if %vv_jes = 2 lsp 322,":c/1,0,3;graphics\chars\chars_jes0.png",%x,%y,90 : mov %vv_inc,322
	gosub *settings_chars_refresh
	if %vv_eva = 1 lsp 323,":c/1,0,3;graphics\chars\chars_eva0.png",%x,%y : mov %vv_inc,323
	if %vv_eva = 2 lsp 323,":c/1,0,3;graphics\chars\chars_eva0.png",%x,%y,90 : mov %vv_inc,323
	gosub *settings_chars_refresh
	if %vv_hid = 1 lsp 324,":c/1,0,3;graphics\chars\chars_hid0.png",%x,%y : mov %vv_inc,324
	if %vv_hid = 2 lsp 324,":c/1,0,3;graphics\chars\chars_hid0.png",%x,%y,90 : mov %vv_inc,324
	gosub *settings_chars_refresh
	if %vv_geo = 1 lsp 325,":c/1,0,3;graphics\chars\chars_geo0.png",%x,%y : mov %vv_inc,325
	if %vv_geo = 2 lsp 325,":c/1,0,3;graphics\chars\chars_geo0.png",%x,%y,90 : mov %vv_inc,325
	gosub *settings_chars_refresh
	if %vv_rud = 1 lsp 326,":c/1,0,3;graphics\chars\chars_rud0.png",%x,%y : mov %vv_inc,326
	if %vv_rud = 2 lsp 326,":c/1,0,3;graphics\chars\chars_rud0.png",%x,%y,90 : mov %vv_inc,326
	gosub *settings_chars_refresh
	if %vv_kir = 1 lsp 327,":c/1,0,3;graphics\chars\chars_kir0.png",%x,%y : mov %vv_inc,327
	if %vv_kir = 2 lsp 327,":c/1,0,3;graphics\chars\chars_kir0.png",%x,%y,90 : mov %vv_inc,327
	gosub *settings_chars_refresh
	if %vv_but = 1 lsp 328,":c/1,0,3;graphics\chars\chars_but0.png",%x,%y : mov %vv_inc,328
	if %vv_but = 2 lsp 328,":c/1,0,3;graphics\chars\chars_but0.png",%x,%y,90 : mov %vv_inc,328
	gosub *settings_chars_refresh
	if %vv_ros = 1 lsp 329,":c/1,0,3;graphics\chars\chars_ros0.png",%x,%y : mov %vv_inc,329
	if %vv_ros = 2 lsp 329,":c/1,0,3;graphics\chars\chars_ros0.png",%x,%y,90 : mov %vv_inc,329
	gosub *settings_chars_refresh
	if %vv_mar = 1 lsp 330,":c/1,0,3;graphics\chars\chars_mar0.png",%x,%y : mov %vv_inc,330
	if %vv_mar = 2 lsp 330,":c/1,0,3;graphics\chars\chars_mar0.png",%x,%y,90 : mov %vv_inc,330
	gosub *settings_chars_refresh
	if %vv_kin = 1 lsp 331,":c/1,0,3;graphics\chars\chars_kin0.png",%x,%y : mov %vv_inc,331
	if %vv_kin = 2 lsp 331,":c/1,0,3;graphics\chars\chars_kin0.png",%x,%y,90 : mov %vv_inc,331
	gosub *settings_chars_refresh
	if %vv_nan = 1 lsp 332,":c/1,0,3;graphics\chars\chars_nan0.png",%x,%y : mov %vv_inc,332
	if %vv_nan = 2 lsp 332,":c/1,0,3;graphics\chars\chars_nan0.png",%x,%y,90 : mov %vv_inc,332
	gosub *settings_chars_refresh
	if %vv_gen = 1 lsp 333,":c/1,0,3;graphics\chars\chars_gen0.png",%x,%y : mov %vv_inc,333
	if %vv_gen = 2 lsp 333,":c/1,0,3;graphics\chars\chars_gen0.png",%x,%y,90 : mov %vv_inc,333
	gosub *settings_chars_refresh
	if %vv_kum = 1 lsp 334,":c/1,0,3;graphics\chars\chars_kum0.png",%x,%y : mov %vv_inc,334
	if %vv_kum = 2 lsp 334,":c/1,0,3;graphics\chars\chars_kum0.png",%x,%y,90 : mov %vv_inc,334
	gosub *settings_chars_refresh
	if %vv_goh = 1 lsp 335,":c/1,0,3;graphics\chars\chars_goh0.png",%x,%y : mov %vv_inc,335
	if %vv_goh = 2 lsp 335,":c/1,0,3;graphics\chars\chars_goh0.png",%x,%y,90 : mov %vv_inc,335
	gosub *settings_chars_refresh
	if %vv_sha = 1 lsp 336,":c/1,0,3;graphics\chars\chars_sha0.png",%x,%y : mov %vv_inc,336
	if %vv_sha = 2 lsp 336,":c/1,0,3;graphics\chars\chars_sha0.png",%x,%y,90 : mov %vv_inc,336
	gosub *settings_chars_refresh
	if %vv_kan = 1 lsp 337,":c/1,0,3;graphics\chars\chars_kan0.png",%x,%y : mov %vv_inc,337
	if %vv_kan = 2 lsp 337,":c/1,0,3;graphics\chars\chars_kan0.png",%x,%y,90 : mov %vv_inc,337
	gosub *settings_chars_refresh
	if %vv_bea = 1 lsp 338,":c/1,0,3;graphics\chars\chars_bea0.png",%x,%y : mov %vv_inc,338
	if %vv_bea = 2 lsp 338,":c/1,0,3;graphics\chars\chars_bea0.png",%x,%y,90 : mov %vv_inc,338
	gosub *settings_chars_refresh
	if %vv_ber = 1 lsp 339,":c/1,0,3;graphics\chars\chars_ber0.png",%x,%y : mov %vv_inc,339
	if %vv_ber = 2 lsp 339,":c/1,0,3;graphics\chars\chars_ber0.png",%x,%y,90 : mov %vv_inc,339
	gosub *settings_chars_refresh
	if %vv_lam = 1 lsp 340,":c/1,0,3;graphics\chars\chars_lam0.png",%x,%y : mov %vv_inc,340
	if %vv_lam = 2 lsp 340,":c/1,0,3;graphics\chars\chars_lam0.png",%x,%y,90 : mov %vv_inc,340
	gosub *settings_chars_refresh
	if %vv_enj = 1 lsp 341,":c/1,0,3;graphics\chars\chars_enj0.png",%x,%y : mov %vv_inc,341
	if %vv_enj = 2 lsp 341,":c/1,0,3;graphics\chars\chars_enj0.png",%x,%y,90 : mov %vv_inc,341
	gosub *settings_chars_refresh
	if %vv_wal = 1 lsp 342,":c/1,0,3;graphics\chars\chars_wal0.png",%x,%y : mov %vv_inc,342
	if %vv_wal = 2 lsp 342,":c/1,0,3;graphics\chars\chars_wal0.png",%x,%y,90 : mov %vv_inc,342
	gosub *settings_chars_refresh
	if %vv_ev2 = 1 lsp 343,":c/1,0,3;graphics\chars\chars_evb0.png",%x,%y : mov %vv_inc,343
	if %vv_ev2 = 2 lsp 343,":c/1,0,3;graphics\chars\chars_evb0.png",%x,%y,90 : mov %vv_inc,343
	gosub *settings_chars_refresh
	if %vv_ron = 1 lsp 344,":c/1,0,3;graphics\chars\chars_ron0.png",%x,%y : mov %vv_inc,344
	if %vv_ron = 2 lsp 344,":c/1,0,3;graphics\chars\chars_ron0.png",%x,%y,90 : mov %vv_inc,344
	gosub *settings_chars_refresh
	if %vv_rg1 = 1 lsp 345,":c/1,0,3;graphics\chars\chars_rgk0.png",%x,%y : mov %vv_inc,345
	if %vv_rg1 = 2 lsp 345,":c/1,0,3;graphics\chars\chars_rgk0.png",%x,%y,90 : mov %vv_inc,345
	gosub *settings_chars_refresh
	if %vv_rg2 = 1 lsp 346,":c/1,0,3;graphics\chars\chars_rgk1.png",%x,%y : mov %vv_inc,346
	if %vv_rg2 = 2 lsp 346,":c/1,0,3;graphics\chars\chars_rgk1.png",%x,%y,90 : mov %vv_inc,346
	gosub *settings_chars_refresh
	if %vv_rg3 = 1 lsp 347,":c/1,0,3;graphics\chars\chars_rgk2.png",%x,%y : mov %vv_inc,347
	if %vv_rg3 = 2 lsp 347,":c/1,0,3;graphics\chars\chars_rgk2.png",%x,%y,90 : mov %vv_inc,347
	gosub *settings_chars_refresh
	if %vv_rg4 = 1 lsp 348,":c/1,0,3;graphics\chars\chars_rgk3.png",%x,%y : mov %vv_inc,348
	if %vv_rg4 = 2 lsp 348,":c/1,0,3;graphics\chars\chars_rgk3.png",%x,%y,90 : mov %vv_inc,348
	gosub *settings_chars_refresh
	if %vv_rg5 = 1 lsp 349,":c/1,0,3;graphics\chars\chars_rgk4.png",%x,%y : mov %vv_inc,349
	if %vv_rg5 = 2 lsp 349,":c/1,0,3;graphics\chars\chars_rgk4.png",%x,%y,90 : mov %vv_inc,349
	gosub *settings_chars_refresh
	if %vv_rg6 = 1 lsp 350,":c/1,0,3;graphics\chars\chars_rgk5.png",%x,%y : mov %vv_inc,350
	if %vv_rg6 = 2 lsp 350,":c/1,0,3;graphics\chars\chars_rgk5.png",%x,%y,90 : mov %vv_inc,350
	gosub *settings_chars_refresh
	if %vv_rg7 = 1 lsp 351,":c/1,0,3;graphics\chars\chars_rgk6.png",%x,%y : mov %vv_inc,351
	if %vv_rg7 = 2 lsp 351,":c/1,0,3;graphics\chars\chars_rgk6.png",%x,%y,90 : mov %vv_inc,351
	gosub *settings_chars_refresh
	if %vv_sak = 1 lsp 352,":c/1,0,3;graphics\chars\chars_sak0.png",%x,%y : mov %vv_inc,352
	if %vv_sak = 2 lsp 352,":c/1,0,3;graphics\chars\chars_sak0.png",%x,%y,90 : mov %vv_inc,352
	gosub *settings_chars_refresh
	if %vv_gap = 1 lsp 353,":c/1,0,3;graphics\chars\chars_gap0.png",%x,%y : mov %vv_inc,353
	if %vv_gap = 2 lsp 353,":c/1,0,3;graphics\chars\chars_gap0.png",%x,%y,90 : mov %vv_inc,353
	gosub *settings_chars_refresh
	if %vv_s00 = 1 lsp 354,":c/1,0,3;graphics\chars\chars_sie0.png",%x,%y : mov %vv_inc,354
	if %vv_s00 = 2 lsp 354,":c/1,0,3;graphics\chars\chars_sie0.png",%x,%y,90 : mov %vv_inc,354
	gosub *settings_chars_refresh
	if %vv_s41 = 1 lsp 355,":c/1,0,3;graphics\chars\chars_sie1.png",%x,%y : mov %vv_inc,355
	if %vv_s41 = 2 lsp 355,":c/1,0,3;graphics\chars\chars_sie1.png",%x,%y,90 : mov %vv_inc,355
	gosub *settings_chars_refresh
	if %vv_s45 = 1 lsp 356,":c/1,0,3;graphics\chars\chars_sie2.png",%x,%y : mov %vv_inc,356
	if %vv_s45 = 2 lsp 356,":c/1,0,3;graphics\chars\chars_sie2.png",%x,%y,90 : mov %vv_inc,356
	gosub *settings_chars_refresh
	if %vv_kas = 1 lsp 357,":c/1,0,3;graphics\chars\chars_kas0.png",%x,%y : mov %vv_inc,357
	if %vv_kas = 2 lsp 357,":c/1,0,3;graphics\chars\chars_kas0.png",%x,%y,90 : mov %vv_inc,357
	gosub *settings_chars_refresh
	if %vv_ama = 1 lsp 358,":c/1,0,3;graphics\chars\chars_ama0.png",%x,%y : mov %vv_inc,358
	if %vv_ama = 2 lsp 358,":c/1,0,3;graphics\chars\chars_ama0.png",%x,%y,90 : mov %vv_inc,358
	gosub *settings_chars_refresh
	if %vv_oko = 1 lsp 359,":c/1,0,3;graphics\chars\chars_oko0.png",%x,%y : mov %vv_inc,359
	if %vv_oko = 2 lsp 359,":c/1,0,3;graphics\chars\chars_oko0.png",%x,%y,90 : mov %vv_inc,359
	gosub *settings_chars_refresh
	if %vv_ku2 = 1 lsp 360,":c/1,0,3;graphics\chars\chars_sab0.png",%x,%y : mov %vv_inc,360
	if %vv_ku2 = 2 lsp 360,":c/1,0,3;graphics\chars\chars_sab0.png",%x,%y,90 : mov %vv_inc,360
	gosub *settings_chars_refresh
	if %vv_pro = 1 lsp 361,":c/1,0,3;graphics\chars\chars_pro0.png",%x,%y : mov %vv_inc,361
	if %vv_pro = 2 lsp 361,":c/1,0,3;graphics\chars\chars_pro0.png",%x,%y,90 : mov %vv_inc,361
	gosub *settings_chars_refresh
	if %vv_kaw = 1 lsp 362,":c/1,0,3;graphics\chars\chars_kwa0.png",%x,%y : mov %vv_inc,362
	if %vv_kaw = 2 lsp 362,":c/1,0,3;graphics\chars\chars_kwa0.png",%x,%y,90 : mov %vv_inc,362
	gosub *settings_chars_refresh
	if %vv_na2 = 1 lsp 363,":c/1,0,3;graphics\chars\chars_mas0.png",%x,%y : mov %vv_inc,363
	if %vv_na2 = 2 lsp 363,":c/1,0,3;graphics\chars\chars_mas0.png",%x,%y,90 : mov %vv_inc,363
	gosub *settings_chars_refresh
	if %vv_goa = 1 lsp 364,":c/1,0,3;graphics\chars\chars_goa0.png",%x,%y : mov %vv_inc,364
	if %vv_goa = 2 lsp 364,":c/1,0,3;graphics\chars\chars_goa0.png",%x,%y,90 : mov %vv_inc,364
	gosub *settings_chars_refresh
	if %vv_99 = 1 lsp 365,":c/1,0,3;graphics\chars\chars_99.png",%x,%y : mov %vv_inc,365
	if %vv_99 = 2 lsp 365,":c/1,0,3;graphics\chars\chars_99.png",%x,%y,90 : mov %vv_inc,365
	gosub *settings_chars_refresh
	gosub *settings_chars_realign
return

*settings_voice_vol_chars_chiru
	mov %vv_inc,0
	mov %Free1,135+%mcoord_add
	mov %x,%Free1
	mov %y,520
	mov %y2,17 ;first row has 17
	mov %x2,0 ;start sprite
	mov %x3,0 ;end sprite
	mov %y3,0 ;row sprite count

	if %vv_cla = 1 lsp 320,":c/1,0,3;graphics\chars\chars_kla0.png",%x,%y : mov %vv_inc,320
	if %vv_cla = 2 lsp 320,":c/1,0,3;graphics\chars\chars_kla0.png",%x,%y,90 : mov %vv_inc,320
	gosub *settings_chars_refresh
	if %vv_nat = 1 lsp 321,":c/1,0,3;graphics\chars\chars_nat0.png",%x,%y : mov %vv_inc,321
	if %vv_nat = 2 lsp 321,":c/1,0,3;graphics\chars\chars_nat0.png",%x,%y,90 : mov %vv_inc,321
	gosub *settings_chars_refresh
	if %vv_jes = 1 lsp 322,":c/1,0,3;graphics\chars\chars_jes0.png",%x,%y : mov %vv_inc,322
	if %vv_jes = 2 lsp 322,":c/1,0,3;graphics\chars\chars_jes0.png",%x,%y,90 : mov %vv_inc,322
	gosub *settings_chars_refresh
	if %vv_eva = 1 lsp 323,":c/1,0,3;graphics\chars\chars_eva0.png",%x,%y : mov %vv_inc,323
	if %vv_eva = 2 lsp 323,":c/1,0,3;graphics\chars\chars_eva0.png",%x,%y,90 : mov %vv_inc,323
	gosub *settings_chars_refresh
	if %vv_hid = 1 lsp 324,":c/1,0,3;graphics\chars\chars_hid0.png",%x,%y : mov %vv_inc,324
	if %vv_hid = 2 lsp 324,":c/1,0,3;graphics\chars\chars_hid0.png",%x,%y,90 : mov %vv_inc,324
	gosub *settings_chars_refresh
	if %vv_geo = 1 lsp 325,":c/1,0,3;graphics\chars\chars_geo0.png",%x,%y : mov %vv_inc,325
	if %vv_geo = 2 lsp 325,":c/1,0,3;graphics\chars\chars_geo0.png",%x,%y,90 : mov %vv_inc,325
	gosub *settings_chars_refresh
	if %vv_rud = 1 lsp 326,":c/1,0,3;graphics\chars\chars_rud0.png",%x,%y : mov %vv_inc,326
	if %vv_rud = 2 lsp 326,":c/1,0,3;graphics\chars\chars_rud0.png",%x,%y,90 : mov %vv_inc,326
	gosub *settings_chars_refresh
	if %vv_kir = 1 lsp 327,":c/1,0,3;graphics\chars\chars_kir0.png",%x,%y : mov %vv_inc,327
	if %vv_kir = 2 lsp 327,":c/1,0,3;graphics\chars\chars_kir0.png",%x,%y,90 : mov %vv_inc,327
	gosub *settings_chars_refresh
	if %vv_but = 1 lsp 328,":c/1,0,3;graphics\chars\chars_but0.png",%x,%y : mov %vv_inc,328
	if %vv_but = 2 lsp 328,":c/1,0,3;graphics\chars\chars_but0.png",%x,%y,90 : mov %vv_inc,328
	gosub *settings_chars_refresh
	if %vv_ros = 1 lsp 329,":c/1,0,3;graphics\chars\chars_ros0.png",%x,%y : mov %vv_inc,329
	if %vv_ros = 2 lsp 329,":c/1,0,3;graphics\chars\chars_ros0.png",%x,%y,90 : mov %vv_inc,329
	gosub *settings_chars_refresh
	if %vv_mar = 1 lsp 330,":c/1,0,3;graphics\chars\chars_mar0.png",%x,%y : mov %vv_inc,330
	if %vv_mar = 2 lsp 330,":c/1,0,3;graphics\chars\chars_mar0.png",%x,%y,90 : mov %vv_inc,330
	gosub *settings_chars_refresh
	if %vv_kin = 1 lsp 331,":c/1,0,3;graphics\chars\chars_kin0.png",%x,%y : mov %vv_inc,331
	if %vv_kin = 2 lsp 331,":c/1,0,3;graphics\chars\chars_kin0.png",%x,%y,90 : mov %vv_inc,331
	gosub *settings_chars_refresh
	if %vv_nan = 1 lsp 332,":c/1,0,3;graphics\chars\chars_nan0.png",%x,%y : mov %vv_inc,332
	if %vv_nan = 2 lsp 332,":c/1,0,3;graphics\chars\chars_nan0.png",%x,%y,90 : mov %vv_inc,332
	gosub *settings_chars_refresh
	if %vv_gen = 1 lsp 333,":c/1,0,3;graphics\chars\chars_gen0.png",%x,%y : mov %vv_inc,333
	if %vv_gen = 2 lsp 333,":c/1,0,3;graphics\chars\chars_gen0.png",%x,%y,90 : mov %vv_inc,333
	gosub *settings_chars_refresh
	if %vv_kum = 1 lsp 334,":c/1,0,3;graphics\chars\chars_kum0.png",%x,%y : mov %vv_inc,334
	if %vv_kum = 2 lsp 334,":c/1,0,3;graphics\chars\chars_kum0.png",%x,%y,90 : mov %vv_inc,334
	gosub *settings_chars_refresh
	if %vv_goh = 1 lsp 335,":c/1,0,3;graphics\chars\chars_goh0.png",%x,%y : mov %vv_inc,335
	if %vv_goh = 2 lsp 335,":c/1,0,3;graphics\chars\chars_goh0.png",%x,%y,90 : mov %vv_inc,335
	gosub *settings_chars_refresh
	if %vv_sha = 1 lsp 336,":c/1,0,3;graphics\chars\chars_sha0.png",%x,%y : mov %vv_inc,336
	if %vv_sha = 2 lsp 336,":c/1,0,3;graphics\chars\chars_sha0.png",%x,%y,90 : mov %vv_inc,336
	gosub *settings_chars_refresh
	if %vv_kan = 1 lsp 337,":c/1,0,3;graphics\chars\chars_kan0.png",%x,%y : mov %vv_inc,337
	if %vv_kan = 2 lsp 337,":c/1,0,3;graphics\chars\chars_kan0.png",%x,%y,90 : mov %vv_inc,337
	gosub *settings_chars_refresh
	if %vv_bea = 1 lsp 338,":c/1,0,3;graphics\chars\chars_bea0.png",%x,%y : mov %vv_inc,338
	if %vv_bea = 2 lsp 338,":c/1,0,3;graphics\chars\chars_bea0.png",%x,%y,90 : mov %vv_inc,338
	gosub *settings_chars_refresh
	if %vv_ber = 1 lsp 339,":c/1,0,3;graphics\chars\chars_ber0.png",%x,%y : mov %vv_inc,339
	if %vv_ber = 2 lsp 339,":c/1,0,3;graphics\chars\chars_ber0.png",%x,%y,90 : mov %vv_inc,339
	gosub *settings_chars_refresh
	if %vv_eri = 1 lsp 340,":c/1,0,3;graphics\chars\chiru\chars_eri0.png",%x,%y : mov %vv_inc,340
	if %vv_eri = 2 lsp 340,":c/1,0,3;graphics\chars\chiru\chars_eri0.png",%x,%y,90 : mov %vv_inc,340
	gosub *settings_chars_refresh
	if %vv_lam = 1 lsp 341,":c/1,0,3;graphics\chars\chars_lam0.png",%x,%y : mov %vv_inc,341
	if %vv_lam = 2 lsp 341,":c/1,0,3;graphics\chars\chars_lam0.png",%x,%y,90 : mov %vv_inc,341
	gosub *settings_chars_refresh
	if %vv_enj = 1 lsp 342,":c/1,0,3;graphics\chars\chars_enj0.png",%x,%y : mov %vv_inc,342
	if %vv_enj = 2 lsp 342,":c/1,0,3;graphics\chars\chars_enj0.png",%x,%y,90 : mov %vv_inc,342
	gosub *settings_chars_refresh
	if %vv_wal = 1 lsp 343,":c/1,0,3;graphics\chars\chars_wal0.png",%x,%y : mov %vv_inc,343
	if %vv_wal = 2 lsp 343,":c/1,0,3;graphics\chars\chars_wal0.png",%x,%y,90 : mov %vv_inc,343
	gosub *settings_chars_refresh
	if %vv_ev2 = 1 lsp 344,":c/1,0,3;graphics\chars\chars_evb0.png",%x,%y : mov %vv_inc,344
	if %vv_ev2 = 2 lsp 344,":c/1,0,3;graphics\chars\chars_evb0.png",%x,%y,90 : mov %vv_inc,344
	gosub *settings_chars_refresh
	if %vv_ron = 1 lsp 345,":c/1,0,3;graphics\chars\chars_ron0.png",%x,%y : mov %vv_inc,345
	if %vv_ron = 2 lsp 345,":c/1,0,3;graphics\chars\chars_ron0.png",%x,%y,90 : mov %vv_inc,345
	gosub *settings_chars_refresh
	if %vv_rg1 = 1 lsp 346,":c/1,0,3;graphics\chars\chars_rgk0.png",%x,%y : mov %vv_inc,346
	if %vv_rg1 = 2 lsp 346,":c/1,0,3;graphics\chars\chars_rgk0.png",%x,%y,90 : mov %vv_inc,346
	gosub *settings_chars_refresh
	if %vv_rg2 = 1 lsp 347,":c/1,0,3;graphics\chars\chars_rgk1.png",%x,%y : mov %vv_inc,347
	if %vv_rg2 = 2 lsp 347,":c/1,0,3;graphics\chars\chars_rgk1.png",%x,%y,90 : mov %vv_inc,347
	gosub *settings_chars_refresh
	if %vv_rg3 = 1 lsp 348,":c/1,0,3;graphics\chars\chars_rgk2.png",%x,%y : mov %vv_inc,348
	if %vv_rg3 = 2 lsp 348,":c/1,0,3;graphics\chars\chars_rgk2.png",%x,%y,90 : mov %vv_inc,348
	gosub *settings_chars_refresh
	if %vv_rg4 = 1 lsp 349,":c/1,0,3;graphics\chars\chars_rgk3.png",%x,%y : mov %vv_inc,349
	if %vv_rg4 = 2 lsp 349,":c/1,0,3;graphics\chars\chars_rgk3.png",%x,%y,90 : mov %vv_inc,349
	gosub *settings_chars_refresh
	if %vv_rg5 = 1 lsp 350,":c/1,0,3;graphics\chars\chars_rgk4.png",%x,%y : mov %vv_inc,350
	if %vv_rg5 = 2 lsp 350,":c/1,0,3;graphics\chars\chars_rgk4.png",%x,%y,90 : mov %vv_inc,350
	gosub *settings_chars_refresh
	if %vv_rg6 = 1 lsp 351,":c/1,0,3;graphics\chars\chars_rgk5.png",%x,%y : mov %vv_inc,351
	if %vv_rg6 = 2 lsp 351,":c/1,0,3;graphics\chars\chars_rgk5.png",%x,%y,90 : mov %vv_inc,351
	gosub *settings_chars_refresh
	if %vv_rg7 = 1 lsp 352,":c/1,0,3;graphics\chars\chars_rgk6.png",%x,%y : mov %vv_inc,352
	if %vv_rg7 = 2 lsp 352,":c/1,0,3;graphics\chars\chars_rgk6.png",%x,%y,90 : mov %vv_inc,352
	gosub *settings_chars_refresh	
	if %vv_sak = 1 lsp 353,":c/1,0,3;graphics\chars\chars_sak0.png",%x,%y : mov %vv_inc,353
	if %vv_sak = 2 lsp 353,":c/1,0,3;graphics\chars\chars_sak0.png",%x,%y,90 : mov %vv_inc,353
	gosub *settings_chars_refresh
	if %vv_gap = 1 lsp 354,":c/1,0,3;graphics\chars\chars_gap0.png",%x,%y : mov %vv_inc,354
	if %vv_gap = 2 lsp 354,":c/1,0,3;graphics\chars\chars_gap0.png",%x,%y,90 : mov %vv_inc,354
	gosub *settings_chars_refresh
	if %vv_s00 = 1 lsp 355,":c/1,0,3;graphics\chars\chars_sie0.png",%x,%y : mov %vv_inc,355
	if %vv_s00 = 2 lsp 355,":c/1,0,3;graphics\chars\chars_sie0.png",%x,%y,90 : mov %vv_inc,355
	gosub *settings_chars_refresh
	if %vv_s41 = 1 lsp 356,":c/1,0,3;graphics\chars\chars_sie1.png",%x,%y : mov %vv_inc,356
	if %vv_s41 = 2 lsp 356,":c/1,0,3;graphics\chars\chars_sie1.png",%x,%y,90 : mov %vv_inc,356
	gosub *settings_chars_refresh
	if %vv_s45 = 1 lsp 357,":c/1,0,3;graphics\chars\chars_sie2.png",%x,%y : mov %vv_inc,357
	if %vv_s45 = 2 lsp 357,":c/1,0,3;graphics\chars\chars_sie2.png",%x,%y,90 : mov %vv_inc,357
	gosub *settings_chars_refresh
	if %vv_dla = 1 lsp 358,":c/1,0,3;graphics\chars\chiru\chars_dla1.png",%x,%y : mov %vv_inc,358
	if %vv_dla = 2 lsp 358,":c/1,0,3;graphics\chars\chiru\chars_dla1.png",%x,%y,90 : mov %vv_inc,358
	gosub *settings_chars_refresh
	if %vv_cor = 1 lsp 359,":c/1,0,3;graphics\chars\chiru\chars_cor0.png",%x,%y : mov %vv_inc,359
	if %vv_cor = 2 lsp 359,":c/1,0,3;graphics\chars\chiru\chars_cor0.png",%x,%y,90 : mov %vv_inc,359
	gosub *settings_chars_refresh
	if %vv_ger = 1 lsp 360,":c/1,0,3;graphics\chars\chiru\chars_gur0.png",%x,%y : mov %vv_inc,360
	if %vv_ger = 2 lsp 360,":c/1,0,3;graphics\chars\chiru\chars_gur0.png",%x,%y,90 : mov %vv_inc,360
	gosub *settings_chars_refresh
	if %vv_zep = 1 lsp 361,":c/1,0,3;graphics\chars\chiru\chars_zep0.png",%x,%y : mov %vv_inc,361
	if %vv_zep = 2 lsp 361,":c/1,0,3;graphics\chars\chiru\chars_zep0.png",%x,%y,90 : mov %vv_inc,361
	gosub *settings_chars_refresh
	if %vv_fur = 1 lsp 362,":c/1,0,3;graphics\chars\chiru\chars_ful0.png",%x,%y : mov %vv_inc,362
	if %vv_fur = 2 lsp 362,":c/1,0,3;graphics\chars\chiru\chars_ful0.png",%x,%y,90 : mov %vv_inc,362
	gosub *settings_chars_refresh
	if %vv_ama = 1 lsp 363,":c/1,0,3;graphics\chars\chars_ama0.png",%x,%y : mov %vv_inc,363
	if %vv_ama = 2 lsp 363,":c/1,0,3;graphics\chars\chars_ama0.png",%x,%y,90 : mov %vv_inc,363
	gosub *settings_chars_refresh
	if %vv_bu3 = 1 lsp 364,":c/1,0,3;graphics\chars\chiru\chars_fea0.png",%x,%y : mov %vv_inc,364
	if %vv_bu3 = 2 lsp 364,":c/1,0,3;graphics\chars\chiru\chars_fea0.png",%x,%y,90 : mov %vv_inc,364
	gosub *settings_chars_refresh
	if %vv_fea = 1 lsp 365,":c/1,0,3;graphics\chars\chiru\chars_fea1.png",%x,%y : mov %vv_inc,365
	if %vv_fea = 2 lsp 365,":c/1,0,3;graphics\chars\chiru\chars_fea1.png",%x,%y,90 : mov %vv_inc,365
	gosub *settings_chars_refresh
	if %vv_wil = 1 lsp 366,":c/1,0,3;graphics\chars\chiru\chars_wil0.png",%x,%y : mov %vv_inc,366
	if %vv_wil = 2 lsp 366,":c/1,0,3;graphics\chars\chiru\chars_wil0.png",%x,%y,90 : mov %vv_inc,366
	gosub *settings_chars_refresh
	if %vv_rio = 1 lsp 367,":c/1,0,3;graphics\chars\chiru\chars_rio0.png",%x,%y : mov %vv_inc,367
	if %vv_rio = 2 lsp 367,":c/1,0,3;graphics\chars\chiru\chars_rio0.png",%x,%y,90 : mov %vv_inc,367
	gosub *settings_chars_refresh
	if %vv_cur = 1 lsp 368,":c/1,0,3;graphics\chars\chiru\chars_cur0.png",%x,%y : mov %vv_inc,368
	if %vv_cur = 2 lsp 368,":c/1,0,3;graphics\chars\chiru\chars_cur0.png",%x,%y,90 : mov %vv_inc,368
	gosub *settings_chars_refresh
	if %vv_goa = 1 lsp 369,":c/1,0,3;graphics\chars\chars_goa0.png",%x,%y : mov %vv_inc,369
	if %vv_goa = 2 lsp 369,":c/1,0,3;graphics\chars\chars_goa0.png",%x,%y,90 : mov %vv_inc,369
	gosub *settings_chars_refresh
	if %vv_99 = 1 lsp 370,":c/1,0,3;graphics\chars\chars_99.png",%x,%y : mov %vv_inc,370
	if %vv_99 = 2 lsp 370,":c/1,0,3;graphics\chars\chars_99.png",%x,%y,90 : mov %vv_inc,370
	gosub *settings_chars_refresh
	gosub *settings_chars_realign
return

*settings_video_res
	;1080p or 720p
	; Disable 1080p playback for iOS
	fileexist %Free1,"video\1080p\no46.mp4"
	if %Free1==0 mov %video_res,1
	notif %video_res = 1 lsp 245,":s;#C7C7C7#FFFFFF`{p:8:720p}",1330,661 ; no 720p
	if %video_res = 1 lsp 245,":s;#FFFFFF`{p:8:720p}",1330,661 ; yes 720p
	notif %video_res = 0 lsp 246,":s;#C7C7C7#FFFFFF`{p:8:1080p}",1520,661 ; no 1080p
	if %video_res = 0 lsp 246,":s;#FFFFFF`{p:8:1080p}",1520,661 ; yes 1080p
	;End
return

*settings_textbox
	;Type
	notif %msgwnd_type = 2 lsp 247,":s;#C7C7C7#FFFFFF`{p:9:TypeN}",925+%mcoord_add,497
	if %msgwnd_type = 2 lsp 247,":s;#FFFFFF`{p:9:TypeN}",925+%mcoord_add,497
	notif %msgwnd_type = 1 lsp 248,":s;#C7C7C7#FFFFFF`{p:9:TypeB}",1135+%mcoord_add,497
	if %msgwnd_type = 1 lsp 248,":s;#FFFFFF`{p:9:TypeB}",1135+%mcoord_add,497
	notif %msgwnd_type = 0 lsp 249,":s;#C7C7C7#FFFFFF`{p:9:TypeL}",1335+%mcoord_add,497
	if %msgwnd_type = 0 lsp 249,":s;#FFFFFF`{p:9:TypeL}",1335+%mcoord_add,497
	notif %msgwnd_type = 3 lsp 250,":s;#C7C7C7#FFFFFF`{p:9:TypeT}",1530+%mcoord_add,497
	if %msgwnd_type = 3 lsp 250,":s;#FFFFFF`{p:9:TypeT}",1530+%mcoord_add,497
	;End
return

*settings_textspeed
	;Speed
	if %textspeed2 >= 0 lsp 251,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1250+%mcoord_add,340
	if %textspeed2 < 0 lsp 251,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1250+%mcoord_add,340
	if %textspeed2 >= 1 lsp 252,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1290+%mcoord_add,340
	if %textspeed2 < 1 lsp 252,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1290+%mcoord_add,340
	if %textspeed2 >= 2 lsp 253,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1330+%mcoord_add,340
	if %textspeed2 < 2 lsp 253,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1330+%mcoord_add,340
	if %textspeed2 >= 3 lsp 254,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1370+%mcoord_add,340
	if %textspeed2 < 3 lsp 254,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1370+%mcoord_add,340
	if %textspeed2 >= 4 lsp 255,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1410+%mcoord_add,340
	if %textspeed2 < 4 lsp 255,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1410+%mcoord_add,340
	if %textspeed2 >= 5 lsp 256,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1450+%mcoord_add,340
	if %textspeed2 < 5 lsp 256,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1450+%mcoord_add,340
	if %textspeed2 >= 6 lsp 257,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1490+%mcoord_add,340
	if %textspeed2 < 6 lsp 257,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1490+%mcoord_add,340
	if %textspeed2 >= 7 lsp 258,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1530+%mcoord_add,340
	if %textspeed2 < 7 lsp 258,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1530+%mcoord_add,340
	if %textspeed2 >= 8 lsp 259,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1570+%mcoord_add,340
	if %textspeed2 < 8 lsp 259,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1570+%mcoord_add,340
	if %textspeed2 >= 9 lsp 260,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1610+%mcoord_add,340
	if %textspeed2 < 9 lsp 260,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1610+%mcoord_add,340
	if %textspeed2 >= 10 lsp 261,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1650+%mcoord_add,340
	if %textspeed2 < 10 lsp 261,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1650+%mcoord_add,340
	gosub *update_textspeed
	;End
return

*settings_automode_speed
	if %automodespeed >= -116 lsp 190,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1250+%mcoord_add,427
	if %automodespeed < -116 lsp 190,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1250+%mcoord_add,427
	if %automodespeed >= -90 lsp 191,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1290+%mcoord_add,427
	if %automodespeed < -90 lsp 191,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1290+%mcoord_add,427
	if %automodespeed >= -70 lsp 192,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1330+%mcoord_add,427
	if %automodespeed < -70 lsp 192,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1330+%mcoord_add,427
	if %automodespeed >= -55 lsp 193,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1370+%mcoord_add,427
	if %automodespeed < -55 lsp 193,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1370+%mcoord_add,427
	if %automodespeed >= -43 lsp 194,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1410+%mcoord_add,427
	if %automodespeed < -43 lsp 194,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1410+%mcoord_add,427
	if %automodespeed >= -33 lsp 195,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1450+%mcoord_add,427
	if %automodespeed < -33 lsp 195,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1450+%mcoord_add,427
	if %automodespeed >= -26 lsp 196,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1490+%mcoord_add,427
	if %automodespeed < -26 lsp 196,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1490+%mcoord_add,427
	if %automodespeed >= -20 lsp 197,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1530+%mcoord_add,427
	if %automodespeed < -20 lsp 197,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1530+%mcoord_add,427
	if %automodespeed >= -16 lsp 198,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1570+%mcoord_add,427
	if %automodespeed < -16 lsp 198,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1570+%mcoord_add,427
	if %automodespeed >= -12 lsp 199,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1610+%mcoord_add,427
	if %automodespeed < -12 lsp 199,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1610+%mcoord_add,427
	if %automodespeed >= -9 lsp 200,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1650+%mcoord_add,427
	if %automodespeed < -9 lsp 200,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1650+%mcoord_add,427
return

*settings_automode_speed2
	automode_time %automodespeed
	gosub *settings_automode_speed
return

*settings_lips
	notif %animated_lips = 1 lsp 264,set_on,settings_base_off1+%mcoord_add,574
	if %animated_lips = 1 lsp 264,set_on2,settings_base_off1+%mcoord_add,574
	notif %animated_lips = 0 lsp 265,set_off,settings_base_off2+%mcoord_add,574
	if %animated_lips = 0 lsp 265,set_off2,settings_base_off2+%mcoord_add,574
return

*settings_image_cache
	notif %enable_cache = 1 lsp 266,set_on,settings_base_off1,835
	if %enable_cache = 1 lsp 266,set_on2,settings_base_off1,835
	notif %enable_cache = 0 lsp 267,set_off,settings_base_off2,835
	if %enable_cache = 0 lsp 267,set_off2,settings_base_off2,835
return

*settings_game_language
	if $Free3 == "en" mov $Free3,"English"
	if $Free3 == "ru" mov $Free3,"Русская"
	if $Free3 == "pt" mov $Free3,"Português"
	if $Free3 == "wh" mov $Free3,"Witch-Hunt"
	if $Free3 == "cn" mov $Free3,"Chinese Simp."
	if $Free3 == "cht" mov $Free3,"Chinese Trad."
	if $Free3 == "it" mov $Free3,"Italiano"
	if $Free3 == "tr" mov $Free3,"Witch Love"
	lsp 268,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}" + $Free3 + "}",1280,226
	lsp 380,":a/2,0,3;graphics\menu_en\config\config_left.png",1210,226
	lsp 381,":a/2,0,3;graphics\menu_en\config\config_right.png",1640,226
return

*settings_interface_kb_dual
	notif %interface_kb_dual = 0 lsp 270,set_interface_kb_mouse,settings_base_off3,748
	if %interface_kb_dual = 0 lsp 270,set_interface_kb_mouse_on,settings_base_off3,748 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,set_interface_dualshock,settings_base_off4,748
	if %interface_kb_dual = 1 lsp 271,set_interface_dualshock_on,settings_base_off4,748
return
	
*settings_op_ed_song_subtitles
	if %op_ed_song_subtitles = 1 lsp 272,set_song_subtitles_no,1260+%mcoord_add,748 ;lsp 2 1455+%mcoord_add,745
	if %op_ed_song_subtitles = 2 lsp 272,set_song_subtitles_trans,1260+%mcoord_add,748
	if %op_ed_song_subtitles = 3 lsp 272,set_song_subtitles_rom,1260+%mcoord_add,748
	if %op_ed_song_subtitles = 4 lsp 272,set_song_subtitles_both,1260+%mcoord_add,748
	if %op_ed_song_subtitles = 5 lsp 272,set_song_subtitles_tr,1260+%mcoord_add,748
	lsp 276,":a/2,0,3;graphics\menu_en\config\config_left.png",1210+%mcoord_add,759
	lsp 277,":a/2,0,3;graphics\menu_en\config\config_right.png",1640+%mcoord_add,759
return

*settings_full_window_auto
	notif %full_window_auto = 1 lsp 279,set_display_mode_win,settings_base_off5,574
	if %full_window_auto = 1 lsp 279,set_display_mode_win_on,settings_base_off5,574
	notif %full_window_auto = 2 lsp 280,set_display_mode_full,settings_base_off6,574
	if %full_window_auto = 2 lsp 280,set_display_mode_full_on,settings_base_off6,574
	notif %full_window_auto = 0 lsp 281,set_display_mode_auto,settings_base_off7,574
	if %full_window_auto = 0 lsp 281,set_display_mode_auto_on,settings_base_off7,574
return

*settings_bgm_title_language
	if %bgm_title_language = 1 lsp 278,set_bgm_title_language_en,1260,313
	if %bgm_title_language = 2 lsp 278,set_bgm_title_language_tl,1260,313
	if %bgm_title_language = 3 lsp 278,set_bgm_title_language_jp,1260,313
	if %bgm_title_language = 4 lsp 278,set_bgm_title_language_rom,1260,313
	lsp 282,":a/2,0,3;graphics\menu_en\config\config_left.png",1210,325
	lsp 283,":a/2,0,3;graphics\menu_en\config\config_right.png",1640,325
return

*settings_render
	if $Free7 == "GL2" mov $Free7,"OpenGL 2.1"
	if $Free7 == "GLES2" mov $Free7,"OpenGLES 2"
	if $Free7 == "GLES3" mov $Free7,"OpenGLES 3"
	if $Free7 == "ANGLE2" mov $Free7,"ANGLE 2"
	if $Free7 == "ANGLE3" mov $Free7,"ANGLE 3"
	lsp 384,":s;#FFFFFF`{p:8:{w:375:}{a:c:}{fit}" + $Free7 + "}",1260,400
	lsp 382,":a/2,0,3;graphics\menu_en\config\config_left.png",1210,412
	lsp 383,":a/2,0,3;graphics\menu_en\config\config_right.png",1640,412
return

*settings_rumble_strength
	lsp 284,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1250+%mcoord_add,250
	notif %rumble_strength >= 4 lsp 285,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1290+%mcoord_add,250
	if %rumble_strength >= 4 lsp 285,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1290+%mcoord_add,250
	notif %rumble_strength >= 8 lsp 286,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1330+%mcoord_add,250
	if %rumble_strength >= 8 lsp 286,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1330+%mcoord_add,250
	notif %rumble_strength >= 12 lsp 287,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1370+%mcoord_add,250
	if %rumble_strength >= 12 lsp 287,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1370+%mcoord_add,250
	notif %rumble_strength >= 16 lsp 288,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1410+%mcoord_add,250
	if %rumble_strength >= 16 lsp 288,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1410+%mcoord_add,250
	notif %rumble_strength >= 20 lsp 289,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1450+%mcoord_add,250
	if %rumble_strength >= 20 lsp 289,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1450+%mcoord_add,250
	notif %rumble_strength >= 26 lsp 290,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1490+%mcoord_add,250
	if %rumble_strength >= 26 lsp 290,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1490+%mcoord_add,250
	notif %rumble_strength >= 32 lsp 291,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1530+%mcoord_add,250
	if %rumble_strength >= 32 lsp 291,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1530+%mcoord_add,250
	notif %rumble_strength >= 38 lsp 292,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1570+%mcoord_add,250
	if %rumble_strength >= 38 lsp 292,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1570+%mcoord_add,250
	notif %rumble_strength >= 44 lsp 293,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1610+%mcoord_add,250
	if %rumble_strength >= 44 lsp 293,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1610+%mcoord_add,250
	notif %rumble_strength >= 50 lsp 294,":a/2,0,3;graphics\menu\SystemBtn\speed.png",1650+%mcoord_add,250
	if %rumble_strength >= 50 lsp 294,":a/2,0,3;graphics\menu\SystemBtn\speed_b.png",1650+%mcoord_add,250
return

*settings_bgm_chapter_display
	notif %bgm_chapter_display = 1 lsp 295,set_on,settings_base_off1+%mcoord_add,661
	if %bgm_chapter_display = 1 lsp 295,set_on2,settings_base_off1+%mcoord_add,661
	notif %bgm_chapter_display = 0 lsp 296,set_off,settings_base_off2+%mcoord_add,661
	if %bgm_chapter_display = 0 lsp 296,set_off2,settings_base_off2+%mcoord_add,661
return

*settings_window_size
	if $window_size = "1280" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1280x720}",1280,487 : jumpf
	if $window_size = "1366" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1366x768}",1280,487 : jumpf
	if $window_size = "1440" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1440х810}",1280,487 : jumpf
	if $window_size = "1600" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1600x900}",1280,487 : jumpf
	if $window_size = "1920" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1920x1080}",1280,487 : jumpf
	if $window_size = "2560" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}2560x1440}",1280,487 : jumpf
	lsp 299,set_window_size_custom,1280,487
	~
	lsp 297,":a/2,0,3;graphics\menu_en\config\config_left.png",1210,499
	lsp 298,":a/2,0,3;graphics\menu_en\config\config_right.png",1640,499
return

*settings_end
	for %tmp = 100 to config_main_lsp2 : _csp %tmp : _csp2 %tmp next
	seplay 9,1005,100 : wait 50
	border_pad_pop
	dwavestop 0
	gosub *apply_msgwnd_settings
return

*settings_full_reset
	lsp 5,":c;graphics\colour\black.png",0,0,180

	lsp 2,reset_hint_text,0,0
	lsp 3,action_yes,0,0
	lsp 4,action_no,0,0
	align_message_l 2,3,4
	
	btndef ""

	spbtn 3,503
	spbtn 4,504

	*settings_full_reset_loop

	btnwait2 %btnRes

	if %btnRes = 503 _csp 2,5 : savereset
	if %btnRes = 504 _csp 2,5 : return

	goto *settings_full_reset_loop

;***********************************************************************
; Picture Box
;***********************************************************************
*cg_gui ;Кнопки Выход, следующая страничка, предыдущая страничка
	lsp 601,set_exit,0,0
	lsp 602,set_back,0,0
	lsp 603,set_next,0,0
	
	align_buttons_r 601,603,602
return

*cg_mode_ps3
	;E_A   		;Stop the currently playing song
 	
	csp_rst
	bg black,10,500

	gosub *trophy_update_cg
	gosub *load_saved_cgs

	bg $tmp10,0
 
 	mov %mcurrent_page,1 ;Ставим в начало первую страничку

	if %UMINEKOEND_CG_FLG = 1 mov %UMINEKOEND_CG_FLG,0

*cg_loop ;Лобби т.е. главное меню Picture Box

 	btndef ""

 	csp_rst
 	bg $tmp10 ;Фон

*cg_loop2 ;Возврат в Picture Box

	if %CHIRU_MODE != 0 jumpf
	if %mcurrent_page=1 gosub *cg_page_1 ;Страница 1
	if %mcurrent_page=2 gosub *cg_page_2 ;Страница 2
	if %mcurrent_page=3 gosub *cg_page_3 ;Страница 3
	if %mcurrent_page=4 gosub *cg_page_4 ;Страница 4
	if %mcurrent_page=5 gosub *cg_page_5 ;Страница 5
	~
	
	if %CHIRU_MODE != 1 jumpf
	if %mcurrent_page=1 gosub *cg_page_chiru_1 ;Страница 1
	if %mcurrent_page=2 gosub *cg_page_chiru_2 ;Страница 2
	if %mcurrent_page=3 gosub *cg_page_chiru_3 ;Страница 3
	if %mcurrent_page=4 gosub *cg_page_chiru_4 ;Страница 4
	if %mcurrent_page=5 gosub *cg_page_chiru_5 ;Страница 5
	if %mcurrent_page=6 gosub *cg_page_chiru_6 ;Страница 6
	if %mcurrent_page=7 gosub *cg_page_chiru_7 ;Страница 7
	~

		lsp 309, cgmode_caption,20,0
		lsp 700,":a;graphics\menu\SystemBtn\black_buttons.png",0,0

	gosub *cg_gui ;Берем кнопки
		
		spbtn 601,1

		if %mcurrent_page=1 lsp 602,set_back_s,%msg_x,%msg_y
		if %CHIRU_MODE == 0 && %mcurrent_page=5 lsp 603,set_next_s,%msg_x+%msg_tmp_w+30,%msg_y
		if %CHIRU_MODE == 1 && %mcurrent_page=7 lsp 603,set_next_s,%msg_x+%msg_tmp_w+30,%msg_y
		
		if %mcurrent_page>1 vsp 602,1:spbtn 602,2 ;Если больше 1 то срабатывает
		if %CHIRU_MODE == 0 && %mcurrent_page<5 vsp 603,1:spbtn 603,3 ;Если меньше 5 то срабатывает
		if %CHIRU_MODE == 1 && %mcurrent_page<7 vsp 603,1:spbtn 603,3
 
 	if %meffect_right <> 1 jumpf
		for %Free1 = 612 to 623
			spt xpos,%Free1,1920
		next
		~
	
	if %meffect_left <> 1 jumpf
		for %Free1 = 612 to 623
			spt xpos,%Free1,-1920
		next
		~
	
	if %meffect_left == 1 print 1 : jumpf
	if %meffect_right == 1 print 1 : jumpf
	print 10,250
	~

	if %meffect_right <> 1 jumpf
		for %Free1 = 612 to 623
			spt xpos,%Free1,-1920,300
			if %Free1 = 615 wait 30
			if %Free1 = 619 wait 30
		next
		wait2 350
		~
	
	if %meffect_left <> 1 jumpf
		for %Free1 = 612 to 623
			spt xpos,%Free1,1920,300
			if %Free1 = 615 wait 30
			if %Free1 = 619 wait 30
		next
		wait2 350
		~

	mov %meffect_right,0
	mov %meffect_left,0
 	
	btnwait2 %BtnRes

	if %BtnRes=-1 seplay 9,1005,100 : goto *cg_end ;Правая кнопка мыши
	if %BtnRes=-10 seplay 9,1005,100 : goto *cg_end ;Exit by ESC
	if %BtnRes=0  goto *cg_loop2 ;Левая кнопка мыши

	if %BtnRes=1 seplay 9,1005,100 : goto *cg_end
	if %BtnRes=2 dec %mcurrent_page : seplay 9,1010,100 : inc %meffect_left ;Уменьшает %mcurrent_page на 1
 	if %BtnRes=3 inc %mcurrent_page : seplay 9,1010,100 : inc %meffect_right ;Увеличивает %mcurrent_page на 1
	if %BtnRes=-2 && %mcurrent_page>1  dec %mcurrent_page : seplay 9,1010,100 : inc %meffect_left
	if %CHIRU_MODE == 0 && %BtnRes=-3 && %mcurrent_page<5  inc %mcurrent_page : seplay 9,1010,100 : inc %meffect_right
	if %CHIRU_MODE == 1 && %BtnRes=-3 && %mcurrent_page<7  inc %mcurrent_page : seplay 9,1010,100 : inc %meffect_right
	
	if %meffect_right <> 1 jumpf
		for %Free1 = 612 to 623
			aspt xpos,%Free1,-1920,300
			if %Free1 = 615 wait 30
			if %Free1 = 619 wait 30
		next
		wait2 350
		~
	
	if %meffect_left <> 1 jumpf
		for %Free1 = 612 to 623
			aspt xpos,%Free1,1920,300
			if %Free1 = 615 wait 30
			if %Free1 = 619 wait 30
		next
		wait2 350
		~
	
	if %CHIRU_MODE != 0 jumpf
	if %BtnRes=612 seplay 9,1001,100 : goto *cg_101
	if %BtnRes=613 seplay 9,1001,100 : goto *cg_102
	if %BtnRes=614 seplay 9,1001,100 : goto *cg_103
	if %BtnRes=615 seplay 9,1001,100 : goto *cg_104
	if %BtnRes=616 seplay 9,1001,100 : goto *cg_105
	if %BtnRes=617 seplay 9,1001,100 : goto *cg_106
	if %BtnRes=618 seplay 9,1001,100 : goto *cg_107
	if %BtnRes=619 seplay 9,1001,100 : goto *cg_108
	if %BtnRes=620 seplay 9,1001,100 : goto *cg_109
	if %BtnRes=621 seplay 9,1001,100 : goto *cg_110
	if %BtnRes=622 seplay 9,1001,100 : goto *cg_111
	if %BtnRes=623 seplay 9,1001,100 : goto *cg_112
	~
	
	if %CHIRU_MODE != 1 jumpf
	if %BtnRes=612 seplay 9,1001,100 : goto *cg_201
	if %BtnRes=613 seplay 9,1001,100 : goto *cg_202
	if %BtnRes=614 seplay 9,1001,100 : goto *cg_203
	if %BtnRes=615 seplay 9,1001,100 : goto *cg_204
	if %BtnRes=616 seplay 9,1001,100 : goto *cg_205
	if %BtnRes=617 seplay 9,1001,100 : goto *cg_206
	if %BtnRes=618 seplay 9,1001,100 : goto *cg_207
	if %BtnRes=619 seplay 9,1001,100 : goto *cg_208
	if %BtnRes=620 seplay 9,1001,100 : goto *cg_209
	if %BtnRes=621 seplay 9,1001,100 : goto *cg_210
	if %BtnRes=622 seplay 9,1001,100 : goto *cg_211
	if %BtnRes=623 seplay 9,1001,100 : goto *cg_212
	~
	
	goto *cg_loop2


		*cg_101
 		csp_rst
		if %mcurrent_page=1 goto *bg_101
  		if %mcurrent_page=2 goto *bg_201
  		if %mcurrent_page=3 goto *bg_301
  		if %mcurrent_page=4 goto *bg_401
		if %mcurrent_page=5 goto *bg_501

		*cg_102
 		csp_rst
		if %mcurrent_page=1 goto *bg_102
  		if %mcurrent_page=2 goto *bg_202
  		if %mcurrent_page=3 goto *bg_302
  		if %mcurrent_page=4 goto *bg_402
		if %mcurrent_page=5 goto *bg_502

		*cg_103
 		csp_rst
		if %mcurrent_page=1 goto *bg_103
  		if %mcurrent_page=2 goto *bg_203
  		if %mcurrent_page=3 goto *bg_303
  		if %mcurrent_page=4 goto *bg_403
		if %mcurrent_page=5 goto *bg_503

		*cg_104
 		csp_rst
		if %mcurrent_page=1 goto *bg_104
  		if %mcurrent_page=2 goto *bg_204
  		if %mcurrent_page=3 goto *bg_304
  		if %mcurrent_page=4 goto *bg_404
		if %mcurrent_page=5 goto *bg_504

		*cg_105
 		csp_rst
		if %mcurrent_page=1 goto *bg_105
  		if %mcurrent_page=2 goto *bg_205
  		if %mcurrent_page=3 goto *bg_305 
  		if %mcurrent_page=4 goto *bg_405
		if %mcurrent_page=5 goto *bg_505

		*cg_106
 		csp_rst
		if %mcurrent_page=1 goto *bg_106
  		if %mcurrent_page=2 goto *bg_206
  		if %mcurrent_page=3 goto *bg_306
  		if %mcurrent_page=4 goto *bg_406
		if %mcurrent_page=5 goto *bg_506

		*cg_107
 		csp_rst
		if %mcurrent_page=1 goto *bg_107
  		if %mcurrent_page=2 goto *bg_207
  		if %mcurrent_page=3 goto *bg_307
  		if %mcurrent_page=4 goto *bg_407
		if %mcurrent_page=5 goto *bg_507

		*cg_108
 		csp_rst
		if %mcurrent_page=1 goto *bg_108
  		if %mcurrent_page=2 goto *bg_208
  		if %mcurrent_page=3 goto *bg_308
  		if %mcurrent_page=4 goto *bg_408
		if %mcurrent_page=5 goto *bg_508
		
		*cg_109
 		csp_rst
		if %mcurrent_page=1 goto *bg_109
  		if %mcurrent_page=2 goto *bg_209
  		if %mcurrent_page=3 goto *bg_309
  		if %mcurrent_page=4 goto *bg_409
		if %mcurrent_page=5 goto *bg_509
		
		*cg_110
 		csp_rst
		if %mcurrent_page=1 goto *bg_110
  		if %mcurrent_page=2 goto *bg_210
  		if %mcurrent_page=3 goto *bg_310
  		if %mcurrent_page=4 goto *bg_410
		if %mcurrent_page=5 goto *bg_510
		
		*cg_111
 		csp_rst
		if %mcurrent_page=1 goto *bg_111
  		if %mcurrent_page=2 goto *bg_211
  		if %mcurrent_page=3 goto *bg_311
  		if %mcurrent_page=4 goto *bg_411
		if %mcurrent_page=5 goto *bg_511

		*cg_112
 		csp_rst
		if %mcurrent_page=1 goto *bg_112
  		if %mcurrent_page=2 goto *bg_212
  		if %mcurrent_page=3 goto *bg_312
  		if %mcurrent_page=4 goto *bg_412
		if %mcurrent_page=5 goto *bg_512
		
		;Chiru
		*cg_201
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_101
		if %mcurrent_page=2 goto *bg_108
		if %mcurrent_page=3 goto *bg_307
		if %mcurrent_page=4 goto *bg_chir_401
		if %mcurrent_page=5 goto *bg_chir_501
		if %mcurrent_page=6 goto *bg_chir_601
		if %mcurrent_page=7 goto *bg_chir_701

		*cg_202
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_102
		if %mcurrent_page=2 goto *bg_chir_202
		if %mcurrent_page=3 goto *bg_308
		if %mcurrent_page=4 goto *bg_chir_402
		if %mcurrent_page=5 goto *bg_chir_502
		if %mcurrent_page=6 goto *bg_chir_602
		if %mcurrent_page=7 goto *bg_chir_702

		*cg_203
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_103
		if %mcurrent_page=2 goto *bg_chir_203
		if %mcurrent_page=3 goto *bg_309
		if %mcurrent_page=4 goto *bg_chir_403
		if %mcurrent_page=5 goto *bg_chir_503
		if %mcurrent_page=6 goto *bg_chir_603
		if %mcurrent_page=7 goto *bg_chir_703

		*cg_204
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_104
		if %mcurrent_page=2 goto *bg_102
		if %mcurrent_page=3 goto *bg_410
		if %mcurrent_page=4 goto *bg_chir_404
		if %mcurrent_page=5 goto *bg_205
		if %mcurrent_page=6 goto *bg_chir_604
		if %mcurrent_page=7 goto *bg_chir_704

		*cg_205
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_105
		if %mcurrent_page=2 goto *bg_chir_205
		if %mcurrent_page=3 goto *bg_412
		if %mcurrent_page=4 goto *bg_chir_405
		if %mcurrent_page=5 goto *bg_chir_505
		if %mcurrent_page=6 goto *bg_chir_605
		if %mcurrent_page=7 goto *bg_chir_705

		*cg_206
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_106
		if %mcurrent_page=2 goto *bg_301
		if %mcurrent_page=3 goto *bg_411
		if %mcurrent_page=4 goto *bg_chir_406
		if %mcurrent_page=5 goto *bg_chir_506
		if %mcurrent_page=6 goto *bg_403
		if %mcurrent_page=7 goto *bg_chir_706

		*cg_207
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_107
		if %mcurrent_page=2 goto *bg_302
		if %mcurrent_page=3 goto *bg_chir_307
		if %mcurrent_page=4 goto *bg_chir_407
		if %mcurrent_page=5 goto *bg_chir_507
		if %mcurrent_page=6 goto *bg_404

		*cg_208
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_108
		if %mcurrent_page=2 goto *bg_312
		if %mcurrent_page=3 goto *bg_chir_308
		if %mcurrent_page=4 goto *bg_chir_408
		if %mcurrent_page=5 goto *bg_chir_508
		if %mcurrent_page=6 goto *bg_407
			
		*cg_209
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_109
		if %mcurrent_page=2 goto *bg_303
		if %mcurrent_page=3 goto *bg_chir_309
		if %mcurrent_page=4 goto *bg_chir_409
		if %mcurrent_page=5 goto *bg_chir_509
		if %mcurrent_page=6 goto *bg_409
			
		*cg_210
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_110
		if %mcurrent_page=2 goto *bg_304
		if %mcurrent_page=3 goto *bg_chir_310
		if %mcurrent_page=4 goto *bg_107
		if %mcurrent_page=5 goto *bg_chir_510
		if %mcurrent_page=6 goto *bg_502
		
		*cg_211
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_111
		if %mcurrent_page=2 goto *bg_305
		if %mcurrent_page=3 goto *bg_chir_311
		if %mcurrent_page=4 goto *bg_chir_411
		if %mcurrent_page=5 goto *bg_chir_511
		if %mcurrent_page=6 goto *bg_503
		
		*cg_212
		csp_rst
		if %mcurrent_page=1 goto *bg_chir_112
		if %mcurrent_page=2 goto *bg_306
		if %mcurrent_page=3 goto *bg_chir_312
		if %mcurrent_page=4 goto *bg_chir_412
		if %mcurrent_page=5 goto *bg_chir_512
		if %mcurrent_page=6 goto *bg_504
		;end chiru

			*cg_player ;Начало показа Picture
				csp_rst

				*bg_101
				;btnwait %BtnRes waiting for button if %BtnRes=-1 r_clicked, return to main screen
				bg ":c;graphics\cg\cg_box\c0101_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100 
				bg ":c;graphics\cg\cg_box\c0101_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0101_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_102
				bg ":c;graphics\cg\cg_box\c0201_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0201_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0201_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0201_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0201_e.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0201_f.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_103
				bg ":c;graphics\cg\cg_box\c0202_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0202_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_104
				bg ":c;graphics\cg\cg_box\c0301.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_105
				bg ":c;graphics\cg\cg_box\c0302_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\c0302_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_106
				bg ":c;graphics\cg\cg_box\c0303.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_107
				bg ":c;graphics\cg\cg_box\c0406.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_108
				bg ":c;graphics\cg\cg_box\e0104_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0104_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0104_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0104_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0104_e.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_109
				bg ":c;graphics\cg\cg_box\e0201.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return

				*bg_110
				bg ":c;graphics\cg\cg_box\e0404.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_111
				bg ":c;graphics\cg\cg_box\e0903_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0903_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0903_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return
				
				*bg_112
				bg ":c;graphics\cg\cg_box\e0904_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0904_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
 				goto *cg_loop
				return

				*bg_201
				bg ":c;graphics\cg\cg_box\e0301_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_202
				bg ":c;graphics\cg\cg_box\e0301_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_203
				bg ":c;graphics\cg\cg_box\e0301_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_204
				bg ":c;graphics\cg\cg_box\e0401_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_205
				bg ":c;graphics\cg\cg_box\e0401_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_206
				bg ":c;graphics\cg\cg_box\e0405.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_207
				bg ":c;graphics\cg\cg_box\e0406.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_208
				bg ":c;graphics\cg\cg_box\e0407.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_209
				bg ":c;graphics\cg\cg_box\e0901_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				;bg ":c;graphics\cg\cg_box\e0901_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				;seplay 9,1001,100
				goto *cg_loop
				return

				*bg_210
				bg ":c;graphics\cg\cg_box\e0901_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_211
				bg ":c;graphics\cg\cg_box\e0902.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_212
				bg ":c;graphics\efe\no55_00000.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\efe\no55_00059.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_301
				bg ":c;graphics\cg\cg_box\g0101.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return

				*bg_302
				bg ":c;graphics\cg\cg_box\g0102.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_303
				bg ":c;graphics\cg\cg_box\g0103.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_304
				bg ":c;graphics\cg\cg_box\g0201.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_305
				bg ":c;graphics\cg\cg_box\g0202.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_306
				bg ":c;graphics\cg\cg_box\g0203_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\g0203_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_307
				bg ":c;graphics\cg\cg_box\g0301.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_308
				bg ":c;graphics\cg\cg_box\g0302.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_309
				bg ":c;graphics\cg\cg_box\g0401.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_310
				;bg ":c;graphics\efe\no01_00000.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				;seplay 9,1001,100
				bg ":c;graphics\efe\no01_00119.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				;bg ":c;graphics\efe\no01_00209.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				;seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_311
				bg ":c;graphics\efe\no60_00179.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\efe\no61_00089.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\efe\no60_00000.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				goto *cg_loop
				return
				
				*bg_312
				bg ":c;graphics\efe\no64_00000.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\efe\no64_00119.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100				
				goto *cg_loop
				return
				
				*bg_401
				bg ":c;graphics\cg\cg_box\cg_c0203_la.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0203_lb.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0203_lc.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_402
				bg black
				bg ":c;graphics\cg\cg_box\cg_c0204_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0204_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0204_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0204_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				goto *cg_loop
				return
				
				*bg_403
				bg black
				bg ":c;graphics\cg\cg_box\cg_c0205_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0205_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0205_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_404
				bg black
				bg ":c;graphics\cg\cg_box\cg_c0401_la.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0401_lb.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_405
				bg black
				bg ":c;graphics\cg\cg_box\cg_c0402_la.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0402_lb.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0402_lc.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0402_ld.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0402_le.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return		

				*bg_406
				bg ":c;graphics\cg\cg_box\cg_c0403_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0403_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0403_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0403_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0403_e.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0403_f.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_407
				bg ":c;graphics\cg\cg_box\cg_c0404_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0404_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0404_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0404_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0404_e.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0404_f.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_408
				bg ":c;graphics\cg\cg_box\cg_c0901_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_c0901_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_409
				bg ":c;graphics\cg\cg_box\cg_c0902_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_410
				bg ":c;graphics\cg\cg_box\g0402.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_411
				bg ":c;graphics\cg\cg_box\g0403.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_412
				bg ":c;graphics\cg\cg_box\g0404.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_501
				bg ":c;graphics\cg\cg_box\cg_e0101_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0101_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0101_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_502
				bg ":c;graphics\cg\cg_box\cg_e0102_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0102_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0102_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0102_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_503
				bg ":c;graphics\cg\cg_box\cg_e0103_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0103_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0103_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0103_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_504
				bg ":c;graphics\cg\cg_box\cg_e0305_la.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0305_lb.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0305_lc.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0305_ld.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_505
				bg ":c;graphics\cg\cg_box\cg_e0406_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0406_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0406_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0406_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0406_e.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0406_f.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				;cg_e0406_t нарисовал сам, ибо нет такой
				bg ":c;graphics\cg\cg_box\cg_e0406_t.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_506
				bg ":c;graphics\cg\cg_box\cg_e0903_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0903_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0903_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\cg_e0903_d.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_507
				bg black
				bg ":c;graphics\cg\cg_box\portrait_ep1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_508
				bg black
				bg ":c;graphics\cg\cg_box\portrait_ep2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_509
				bg black
				bg ":c;graphics\cg\cg_box\portrait_ep3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_510
				bg black
				bg ":c;graphics\cg\cg_box\portrait_ep4.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_511
				bg ":c;graphics\locale\congra.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg project_logo,10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg circle_logo,10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				if localisation == "ru" bg circle_logo_ga,10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				if localisation == "ru" seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_512
				bg ":c;graphics\cg\cg_box\package01.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\package02.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				;Chiru
				*bg_chir_101
				bg ":c;graphics\cg\cg_box\ep501.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_102
				bg ":c;graphics\cg\cg_box\ep502.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_103
				bg ":c;graphics\cg\cg_box\ep503_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep503_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_104
				bg ":c;graphics\cg\cg_box\ep504.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_105
				bg black
				bg ":c;graphics\cg\cg_box\ep505_cgbox.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_106
				bg ":c;graphics\cg\cg_box\e0901_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\e0901_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop 
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_107
				bg ":c;graphics\cg\cg_box\ep601_a2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep601_d2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep601_nd2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_108
				bg ":c;graphics\cg\cg_box\ep602_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep602_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_109
				bg ":c;graphics\cg\cg_box\ep603.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_110
				bg ":c;graphics\cg\cg_box\ep604_2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep604_3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep604_1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_111
				bg ":c;graphics\cg\cg_box\ep605_a1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep605_c1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep605_c2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_112
				bg ":c;graphics\cg\cg_box\ep606.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep606_1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep606_2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep606_3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_202
				bg ":c;graphics\cg\cg_box\ex01.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ex02.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_203
				bg ":c;graphics\cg\cg_box\ep607.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_205
				bg ":c;graphics\cg\cg_box\ep701.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_307
				bg ":c;graphics\cg\cg_box\ep702.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_308
				bg ":c;graphics\cg\cg_box\ep703_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep703_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_309
				bg ":c;graphics\cg\cg_box\ep704_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep704_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_310
				bg ":c;graphics\cg\cg_box\ep705.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep705_1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep705_1n.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep705_2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep705_3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep705_4.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_311
				bg ":c;graphics\cg\cg_box\ep801.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_312
				bg ":c;graphics\cg\cg_box\ep802.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_401
				bg ":c;graphics\cg\cg_box\ep803.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_402
				bg ":c;graphics\cg\cg_box\ep805.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_403
				bg ":c;graphics\cg\cg_box\ep806.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_404
				bg ":c;graphics\cg\cg_box\ep807_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_405
				bg ":c;graphics\cg\cg_box\ep808.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_406
				bg ":c;graphics\cg\cg_box\ep809_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep809_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_407
				bg ":c;graphics\cg\cg_box\ep810_a1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_408
				bg ":c;graphics\cg\cg_box\ep811.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_409
				bg black
				bg ":c;graphics\cg\cg_box\ep812_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep812_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				;*bg_chir_410
				;bg ":c;graphics\cg\cg_box\.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				;seplay 9,1001,100
				;goto *cg_loop
				;return
				
				*bg_chir_411
				bg ":c;graphics\cg\cg_box\ep814_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep814_a2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep814_b2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep814_c3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\cg_box\ep814_d2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_412
				bg ":c;graphics\cg\cg_box\ep815_1_cgbox.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_501
				bg ":c;graphics\cg\cg_box\ep815_2_cgbox.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_502
				bg ":c;graphics\cg\cg_box\ep816.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_503
				bg ":c;graphics\cg\cg_box\ep817.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				;*bg_chir_504
				;bg ":c;graphics\cg\cg_box\.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				;seplay 9,1001,100
				;goto *cg_loop
				;return
				
				*bg_chir_505
				bg ":c;graphics\cg\cg_box\ep818.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_506
				bg ":c;graphics\cg\cg_box\eve_last.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_507
				bg ":c;graphics\cg\wil\wic_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\wil\wic_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_508
				bg ":c;graphics\cg\ev2\evc_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ev2\evc_c.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_509
				bg ":c;graphics\cg\dla\dlc_a1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\dla\dlc_d1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_510
				bg ":c;graphics\cg\fea\fec_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\fea\fec_b.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_511
				bg ":c;graphics\cg\bea\bec_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\bea\bec_c2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_512
				bg ":c;graphics\cg\ber\brc_ag.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_bg.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_br.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_cg.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_cr.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_dg.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_dr.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\ber\brc_er.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_601
				bg ":c;graphics\cg\lam\lac_a1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\lam\lac_a3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\lam\lac_b1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\lam\lac_b3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_602
				bg ":c;graphics\cg\wal\wrc_a.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_603
				bg ":c;graphics\cg\eri\erc_ba.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\eri\erc_bc.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\eri\erc_ra.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_604
				bg ":c;graphics\cg\enj\enc_a1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\enj\enc_a2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\enj\enc_a3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\enj\enc_b1.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\enj\enc_b2.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\enj\enc_b3.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_605
				bg ":c;graphics\cg\but\bac_ba2n.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				bg ":c;graphics\cg\but\bac_ga2n.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
					
				*bg_chir_701
				bg ":c;graphics\cg\cg_box\portrait_ep5.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_702
				bg ":c;graphics\cg\cg_box\portrait_ep6.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_703
				bg ":c;graphics\cg\cg_box\portrait_ep7.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_704
				bg ":c;graphics\cg\cg_box\portrait_ep8.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_705
				bg ":c;graphics\cg\cg_box\package03.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return
				
				*bg_chir_706
				bg ":c;graphics\cg\cg_box\package04.png",10,500:btnwait %BtnRes:if %BtnRes=-1 seplay 9,1005,100 : goto *cg_loop
				seplay 9,1001,100
				goto *cg_loop
				return

	*cg_end ;Выход в главное меню
 	csp_rst
	return

*cg_page_1 ;Картинки в странице
csp_rst

;Row1
if ?cg_list[0][0] = 0 lsp 612,cgmode_logo,115,178     ;1 250
	if ?cg_list[0][0] = 1 lsp 612,":c/2,0,3;graphics\thumb\00_C0101_a.png",115,178:spbtn 612,612  ;1
if ?cg_list[0][1] = 0 lsp 613,cgmode_logo,540,178 ;2
	if ?cg_list[0][1] = 1 lsp 613,":c/2,0,3;graphics\thumb\00_C0201_a.png",540,178:spbtn 613,613  ;2
if ?cg_list[0][2] = 0 lsp 614,cgmode_logo,965,178  ;3
	if ?cg_list[0][2] = 1 lsp 614,":c/2,0,3;graphics\thumb\00_C0202_a.png",965,178:spbtn 614,614  ;3
if ?cg_list[0][3] = 0 lsp 615,cgmode_logo,1390,178   ;4	
	if ?cg_list[0][3] = 1 lsp 615,":c/2,0,3;graphics\thumb\00_C0301.png",1390,178:spbtn 615,615   ;4
;Row2
if ?cg_list[0][4] = 0 lsp 616,cgmode_logo,115,428  ;5 540-112=428
	if ?cg_list[0][4] = 1 lsp 616,":c/2,0,3;graphics\thumb\00_C0302_a.png",115,428:spbtn 616,616  ;5
if ?cg_list[0][5] = 0 lsp 617,cgmode_logo,540,428    ;6	
	if ?cg_list[0][5] = 1 lsp 617,":c/2,0,3;graphics\thumb\00_C0303.png",540,428:spbtn 617,617    ;6
if ?cg_list[0][6] = 0 lsp 618,cgmode_logo,965,428    ;7	
	if ?cg_list[0][6] = 1 lsp 618,":c/2,0,3;graphics\thumb\00_C0406.png",965,428:spbtn 618,618    ;7
if ?cg_list[0][7] = 0 lsp 619,cgmode_logo,1390,428 ;8	
	if ?cg_list[0][7] = 1 lsp 619,":c/2,0,3;graphics\thumb\00_E0104_a.png",1390,428:spbtn 619,619 ;8
;Row3
if ?cg_list[0][8] = 0 lsp 620,cgmode_logo,115,678    ;9
	if ?cg_list[0][8] = 1 lsp 620,":c/2,0,3;graphics\thumb\00_E0201.png",115,678:spbtn 620,620    ;9
if ?cg_list[0][9] = 0 lsp 621,cgmode_logo,540,678    ;10
	if ?cg_list[0][9] = 1 lsp 621,":c/2,0,3;graphics\thumb\00_E0404.png",540,678:spbtn 621,621    ;10
if ?cg_list[0][10] = 0 lsp 622,cgmode_logo,965,678  ;11
	if ?cg_list[0][10] = 1 lsp 622,":c/2,0,3;graphics\thumb\00_E0903_a.png",965,678:spbtn 622,622  ;11
if ?cg_list[0][11] = 0 lsp 623,cgmode_logo,1390,678 ;12
	if ?cg_list[0][11] = 1 lsp 623,":c/2,0,3;graphics\thumb\00_E0904_a.png",1390,678:spbtn 623,623 ;12

return

*cg_page_2 ;Картинки в странице
csp_rst

if ?cg_list[0][12] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[0][13] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[0][14] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[0][15] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[0][16] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[0][17] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[0][18] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[0][19] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[0][20] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[0][21] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[0][22] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[0][23] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[0][12] = 1 lsp 612,":c/2,0,3;graphics\thumb\01_E0301_a.png",115,178:spbtn 612,612     ;13
if ?cg_list[0][13] = 1 lsp 613,":c/2,0,3;graphics\thumb\01_E0301_b.png",540,178:spbtn 613,613     ;14
if ?cg_list[0][14] = 1 lsp 614,":c/2,0,3;graphics\thumb\01_E0301_c.png",965,178:spbtn 614,614     ;15
if ?cg_list[0][15] = 1 lsp 615,":c/2,0,3;graphics\thumb\01_E0401_a.png",1390,178:spbtn 615,615    ;16
;Row2
if ?cg_list[0][16] = 1 lsp 616,":c/2,0,3;graphics\thumb\01_E0401_b.png",115,428:spbtn 616,616     ;17
if ?cg_list[0][17] = 1 lsp 617,":c/2,0,3;graphics\thumb\01_E0405.png",540,428:spbtn 617,617       ;18
if ?cg_list[0][18] = 1 lsp 618,":c/2,0,3;graphics\thumb\01_E0406.png",965,428:spbtn 618,618       ;19
if ?cg_list[0][19] = 1 lsp 619,":c/2,0,3;graphics\thumb\01_E0407.png",1390,428:spbtn 619,619      ;20
;Row3
if ?cg_list[0][20] = 1 lsp 620,":c/2,0,3;graphics\thumb\01_E0901_a.png",115,678:spbtn 620,620     ;21
if ?cg_list[0][21] = 1 lsp 621,":c/2,0,3;graphics\thumb\01_E0901_c.png",540,678:spbtn 621,621     ;22
if ?cg_list[0][22] = 1 lsp 622,":c/2,0,3;graphics\thumb\01_E0902.png",965,678:spbtn 622,622  	   ;23
if ?cg_list[0][23] = 1 lsp 623,":c/2,0,3;graphics\thumb\01_no55_00059.png",1390,678:spbtn 623,623 ;24

return

*cg_page_3 ;Картинки в странице
csp_rst

if ?cg_list[0][24] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[0][25] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[0][26] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[0][27] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[0][28] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[0][29] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[0][30] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[0][31] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[0][32] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[0][33] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[0][34] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[0][35] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[0][24] = 1 lsp 612,":c/2,0,3;graphics\thumb\02_G0101.png",115,178:spbtn 612,612       ;25
if ?cg_list[0][25] = 1 lsp 613,":c/2,0,3;graphics\thumb\02_G0102.png",540,178:spbtn 613,613       ;26
if ?cg_list[0][26] = 1 lsp 614,":c/2,0,3;graphics\thumb\02_G0103.png",965,178:spbtn 614,614       ;27
if ?cg_list[0][27] = 1 lsp 615,":c/2,0,3;graphics\thumb\02_G0201.png",1390,178:spbtn 615,615      ;28
;Row2
if ?cg_list[0][28] = 1 lsp 616,":c/2,0,3;graphics\thumb\02_G0202.png",115,428:spbtn 616,616       ;29
if ?cg_list[0][29] = 1 lsp 617,":c/2,0,3;graphics\thumb\02_G0203_a.png",540,428:spbtn 617,617     ;30
if ?cg_list[0][30] = 1 lsp 618,":c/2,0,3;graphics\thumb\02_G0301.png",965,428:spbtn 618,618       ;31
if ?cg_list[0][31] = 1 lsp 619,":c/2,0,3;graphics\thumb\02_G0302.png",1390,428:spbtn 619,619      ;32
;Row3
if ?cg_list[0][32] = 1 lsp 620,":c/2,0,3;graphics\thumb\02_G0401.png",115,678:spbtn 620,620       ;33
if ?cg_list[0][33] = 1 lsp 621,":c/2,0,3;graphics\thumb\02_no01_00119.png",540,678:spbtn 621,621  ;34
if ?cg_list[0][34] = 1 lsp 622,":c/2,0,3;graphics\thumb\02_no60_00179.png",965,678:spbtn 622,622  ;35
if ?cg_list[0][35] = 1 lsp 623,":c/2,0,3;graphics\thumb\02_no64_00000.png",1390,678:spbtn 623,623 ;36

return

*cg_page_4 ;Картинки в странице
csp_rst

if ?cg_list[0][36] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[0][37] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[0][38] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[0][39] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[0][40] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[0][41] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[0][42] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[0][43] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[0][44] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[0][45] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[0][46] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[0][47] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[0][36] = 1 lsp 612,":c/2,0,3;graphics\thumb\03_CG_C0203_LA.png",115,178:spbtn 612,612   ;37
if ?cg_list[0][37] = 1 lsp 613,":c/2,0,3;graphics\thumb\03_CG_C0204_A.png",540,178:spbtn 613,613    ;38
if ?cg_list[0][38] = 1 lsp 614,":c/2,0,3;graphics\thumb\03_CG_C0205_A.png",965,178:spbtn 614,614    ;39
if ?cg_list[0][39] = 1 lsp 615,":c/2,0,3;graphics\thumb\03_CG_C0401_LA.png",1390,178:spbtn 615,615  ;40
;Row2
if ?cg_list[0][40] = 1 lsp 616,":c/2,0,3;graphics\thumb\03_CG_C0402_LA.png",115,428:spbtn 616,616   ;41
if ?cg_list[0][41] = 1 lsp 617,":c/2,0,3;graphics\thumb\03_CG_C0403_A.png",540,428:spbtn 617,617    ;42
if ?cg_list[0][42] = 1 lsp 618,":c/2,0,3;graphics\thumb\03_CG_C0404_A.png",965,428:spbtn 618,618    ;43
if ?cg_list[0][43] = 1 lsp 619,":c/2,0,3;graphics\thumb\03_CG_C0901_A.png",1390,428:spbtn 619,619   ;44
;Row3
if ?cg_list[0][44] = 1 lsp 620,":c/2,0,3;graphics\thumb\03_CG_C0902_A.png",115,678:spbtn 620,620    ;45
if ?cg_list[0][45] = 1 lsp 621,":c/2,0,3;graphics\thumb\03_G0402.png",540,678:spbtn 621,621 		 ;46
if ?cg_list[0][46] = 1 lsp 622,":c/2,0,3;graphics\thumb\03_G0403.png",965,678:spbtn 622,622  		 ;47
if ?cg_list[0][47] = 1 lsp 623,":c/2,0,3;graphics\thumb\03_G0404.png",1390,678:spbtn 623,623 		 ;48

return

*cg_page_5 ;Картинки в странице
csp_rst

if ?cg_list[0][48] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[0][49] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[0][50] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[0][51] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[0][52] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[0][53] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[0][54] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[0][55] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[0][56] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[0][57] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[0][58] = 0 lsp 622,cgmode_logox,965,678  ;11
if ?cg_list[0][59] = 0 lsp 623,cgmode_logox,1390,678 ;12

;Row1
if ?cg_list[0][48] = 1 lsp 612,":c/2,0,3;graphics\thumb\04_CG_E0101_A.png",115,178:spbtn 612,612    ;49
if ?cg_list[0][49] = 1 lsp 613,":c/2,0,3;graphics\thumb\04_CG_E0102_A.png",540,178:spbtn 613,613    ;50
if ?cg_list[0][50] = 1 lsp 614,":c/2,0,3;graphics\thumb\04_CG_E0103_A.png",965,178:spbtn 614,614    ;51
if ?cg_list[0][51] = 1 lsp 615,":c/2,0,3;graphics\thumb\04_CG_E0305_LA.png",1390,178:spbtn 615,615  ;52
;Row2
if ?cg_list[0][52] = 1 lsp 616,":c/2,0,3;graphics\thumb\04_CG_E0406_t.png",115,428:spbtn 616,616    ;53
if ?cg_list[0][53] = 1 lsp 617,":c/2,0,3;graphics\thumb\04_CG_E0903_A.png",540,428:spbtn 617,617    ;54
if ?cg_list[0][54] = 1 lsp 618,":c/2,0,3;graphics\thumb\04_PORTRAIT_EP1.png",965,428:spbtn 618,618  ;55
if ?cg_list[0][55] = 1 lsp 619,":c/2,0,3;graphics\thumb\04_PORTRAIT_EP2.png",1390,428:spbtn 619,619  ;56
;Row3
if ?cg_list[0][56] = 1 lsp 620,":c/2,0,3;graphics\thumb\04_PORTRAIT_EP3.png",115,678:spbtn 620,620  ;57
if ?cg_list[0][57] = 1 lsp 621,":c/2,0,3;graphics\thumb\04_PORTRAIT_EP4.png",540,678:spbtn 621,621 ;58
if ?cg_list[0][58] = 1 lsp 622,":c/2,0,3;graphics\thumb\04_congra_t.png",965,678:spbtn 622,622      ;59
if ?cg_list[0][59] = 1 lsp 623,":c/2,0,3;graphics\thumb\04_PACKAGE01.png",1390,678:spbtn 623,623    ;60

return

;Chiru
*cg_page_chiru_1 ;Картинки в странице
csp_rst

;Row1
if ?cg_list[1][0] = 0 lsp 612,cgmode_logo,115,178     ;1 250
if ?cg_list[1][1] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][2] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][3] = 0 lsp 615,cgmode_logo,1390,178   ;4	

if ?cg_list[1][4] = 0 lsp 616,cgmode_logo,115,428  ;5 540-112=428
if ?cg_list[1][5] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[1][6] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[1][7] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[1][8] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[1][9] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[1][10] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[1][11] = 0 lsp 623,cgmode_logo,1390,678 ;12
	
;Row1
if ?cg_list[1][0] = 1 lsp 612,":c/2,0,3;graphics\thumb\chiru\ep501.png",115,178:spbtn 612,612  ;1
if ?cg_list[1][1] = 1 lsp 613,":c/2,0,3;graphics\thumb\chiru\ep502.png",540,178:spbtn 613,613  ;2
if ?cg_list[1][2] = 1 lsp 614,":c/2,0,3;graphics\thumb\chiru\ep503.png",965,178:spbtn 614,614  ;3
if ?cg_list[1][3] = 1 lsp 615,":c/2,0,3;graphics\thumb\chiru\ep504.png",1390,178:spbtn 615,615   ;4
;Row2
if ?cg_list[1][4] = 1 lsp 616,":c/2,0,3;graphics\thumb\chiru\ep505.png",115,428:spbtn 616,616  ;5
if ?cg_list[1][5] = 1 lsp 617,":c/2,0,3;graphics\thumb\01_E0901_a.png",540,428:spbtn 617,617    ;6
if ?cg_list[1][6] = 1 lsp 618,":c/2,0,3;graphics\thumb\chiru\ep601.png",965,428:spbtn 618,618    ;7
if ?cg_list[1][7] = 1 lsp 619,":c/2,0,3;graphics\thumb\chiru\ep602.png",1390,428:spbtn 619,619 ;8
;Row3
if ?cg_list[1][8] = 1 lsp 620,":c/2,0,3;graphics\thumb\chiru\ep603.png",115,678:spbtn 620,620    ;9
if ?cg_list[1][9] = 1 lsp 621,":c/2,0,3;graphics\thumb\chiru\ep604.png",540,678:spbtn 621,621    ;10
if ?cg_list[1][10] = 1 lsp 622,":c/2,0,3;graphics\thumb\chiru\ep605.png",965,678:spbtn 622,622  ;11
if ?cg_list[1][11] = 1 lsp 623,":c/2,0,3;graphics\thumb\chiru\ep606.png",1390,678:spbtn 623,623 ;12

return

*cg_page_chiru_2 ;Картинки в странице
csp_rst

if ?cg_list[1][12] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[1][13] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][14] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][15] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[1][16] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[1][17] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[1][18] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[1][19] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[1][20] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[1][21] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[1][22] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[1][23] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[1][12] = 1 lsp 612,":c/2,0,3;graphics\thumb\chiru\e0104.png",115,178:spbtn 612,612     ;13
if ?cg_list[1][13] = 1 lsp 613,":c/2,0,3;graphics\thumb\chiru\ex1.png",540,178:spbtn 613,613     ;14
if ?cg_list[1][14] = 1 lsp 614,":c/2,0,3;graphics\thumb\chiru\ep607.png",965,178:spbtn 614,614     ;15
if ?cg_list[1][15] = 1 lsp 615,":c/2,0,3;graphics\thumb\chiru\c0201.png",1390,178:spbtn 615,615    ;16
;Row2
if ?cg_list[1][16] = 1 lsp 616,":c/2,0,3;graphics\thumb\chiru\ep701.png",115,428:spbtn 616,616     ;17
if ?cg_list[1][17] = 1 lsp 617,":c/2,0,3;graphics\thumb\02_G0101.png",540,428:spbtn 617,617       ;18
if ?cg_list[1][18] = 1 lsp 618,":c/2,0,3;graphics\thumb\02_G0102.png",965,428:spbtn 618,618       ;19
if ?cg_list[1][19] = 1 lsp 619,":c/2,0,3;graphics\thumb\02_no64_00000.png",1390,428:spbtn 619,619      ;20
;Row3
if ?cg_list[1][20] = 1 lsp 620,":c/2,0,3;graphics\thumb\02_G0103.png",115,678:spbtn 620,620     ;21
if ?cg_list[1][21] = 1 lsp 621,":c/2,0,3;graphics\thumb\02_G0201.png",540,678:spbtn 621,621     ;22
if ?cg_list[1][22] = 1 lsp 622,":c/2,0,3;graphics\thumb\02_G0202.png",965,678:spbtn 622,622  	   ;23
if ?cg_list[1][23] = 1 lsp 623,":c/2,0,3;graphics\thumb\02_G0203_a.png",1390,678:spbtn 623,623 ;24

return

*cg_page_chiru_3 ;Картинки в странице
csp_rst

if ?cg_list[1][24] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[1][25] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][26] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][27] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[1][28] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[1][29] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[1][30] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[1][31] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[1][32] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[1][33] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[1][34] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[1][35] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[1][24] = 1 lsp 612,":c/2,0,3;graphics\thumb\02_G0301.png",115,178:spbtn 612,612       ;25
if ?cg_list[1][25] = 1 lsp 613,":c/2,0,3;graphics\thumb\02_G0302.png",540,178:spbtn 613,613       ;26
if ?cg_list[1][26] = 1 lsp 614,":c/2,0,3;graphics\thumb\02_G0401.png",965,178:spbtn 614,614       ;27
if ?cg_list[1][27] = 1 lsp 615,":c/2,0,3;graphics\thumb\03_G0402.png",1390,178:spbtn 615,615      ;28
;Row2
if ?cg_list[1][28] = 1 lsp 616,":c/2,0,3;graphics\thumb\03_G0404.png",115,428:spbtn 616,616       ;29
if ?cg_list[1][29] = 1 lsp 617,":c/2,0,3;graphics\thumb\03_G0403.png",540,428:spbtn 617,617     ;30
if ?cg_list[1][30] = 1 lsp 618,":c/2,0,3;graphics\thumb\chiru\ep702.png",965,428:spbtn 618,618       ;31
if ?cg_list[1][31] = 1 lsp 619,":c/2,0,3;graphics\thumb\chiru\ep703.png",1390,428:spbtn 619,619      ;32
;Row3
if ?cg_list[1][32] = 1 lsp 620,":c/2,0,3;graphics\thumb\chiru\ep704.png",115,678:spbtn 620,620       ;33
if ?cg_list[1][33] = 1 lsp 621,":c/2,0,3;graphics\thumb\chiru\ep705.png",540,678:spbtn 621,621  ;34
if ?cg_list[1][34] = 1 lsp 622,":c/2,0,3;graphics\thumb\chiru\ep801.png",965,678:spbtn 622,622  ;35
if ?cg_list[1][35] = 1 lsp 623,":c/2,0,3;graphics\thumb\chiru\ep802.png",1390,678:spbtn 623,623 ;36

return

*cg_page_chiru_4 ;Картинки в странице
csp_rst

if ?cg_list[1][36] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[1][37] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][38] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][39] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[1][40] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[1][41] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[1][42] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[1][43] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[1][44] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[1][45] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[1][46] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[1][47] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[1][36] = 1 lsp 612,":c/2,0,3;graphics\thumb\chiru\ep803.png",115,178:spbtn 612,612   ;37
if ?cg_list[1][37] = 1 lsp 613,":c/2,0,3;graphics\thumb\chiru\ep805.png",540,178:spbtn 613,613    ;38
if ?cg_list[1][38] = 1 lsp 614,":c/2,0,3;graphics\thumb\chiru\ep806.png",965,178:spbtn 614,614    ;39
if ?cg_list[1][39] = 1 lsp 615,":c/2,0,3;graphics\thumb\chiru\ep807.png",1390,178:spbtn 615,615  ;40
;Row2
if ?cg_list[1][40] = 1 lsp 616,":c/2,0,3;graphics\thumb\chiru\ep808.png",115,428:spbtn 616,616   ;41
if ?cg_list[1][41] = 1 lsp 617,":c/2,0,3;graphics\thumb\chiru\ep809.png",540,428:spbtn 617,617    ;42
if ?cg_list[1][42] = 1 lsp 618,":c/2,0,3;graphics\thumb\chiru\ep810.png",965,428:spbtn 618,618    ;43
if ?cg_list[1][43] = 1 lsp 619,":c/2,0,3;graphics\thumb\chiru\ep811.png",1390,428:spbtn 619,619   ;44
;Row3
if ?cg_list[1][44] = 1 lsp 620,":c/2,0,3;graphics\thumb\chiru\ep812_c.png",115,678:spbtn 620,620    ;45
if ?cg_list[1][45] = 1 lsp 621,":c/2,0,3;graphics\thumb\00_C0406.png",540,678:spbtn 621,621 		 ;46
if ?cg_list[1][46] = 1 lsp 622,":c/2,0,3;graphics\thumb\chiru\ep814.png",965,678:spbtn 622,622  		 ;47
if ?cg_list[1][47] = 1 lsp 623,":c/2,0,3;graphics\thumb\chiru\ep815_1.png",1390,678:spbtn 623,623 		 ;48

return

*cg_page_chiru_5 ;Картинки в странице
csp_rst

if ?cg_list[1][48] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[1][49] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][50] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][51] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[1][52] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[1][53] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[1][54] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[1][55] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[1][56] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[1][57] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[1][58] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[1][59] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[1][48] = 1 lsp 612,":c/2,0,3;graphics\thumb\chiru\ep815_2.png",115,178:spbtn 612,612    ;49
if ?cg_list[1][49] = 1 lsp 613,":c/2,0,3;graphics\thumb\chiru\ep816.png",540,178:spbtn 613,613    ;50
if ?cg_list[1][50] = 1 lsp 614,":c/2,0,3;graphics\thumb\chiru\ep817.png",965,178:spbtn 614,614    ;51
if ?cg_list[1][51] = 1 lsp 615,":c/2,0,3;graphics\thumb\01_E0401_b.png",1390,178:spbtn 615,615  ;52
;Row2
if ?cg_list[1][52] = 1 lsp 616,":c/2,0,3;graphics\thumb\chiru\ep818.png",115,428:spbtn 616,616    ;53
if ?cg_list[1][53] = 1 lsp 617,":c/2,0,3;graphics\thumb\chiru\eve_last.png",540,428:spbtn 617,617    ;54
if ?cg_list[1][54] = 1 lsp 618,":c/2,0,3;graphics\thumb\chiru\wic_c.png",965,428:spbtn 618,618  ;55
if ?cg_list[1][55] = 1 lsp 619,":c/2,0,3;graphics\thumb\chiru\evc_c.png",1390,428:spbtn 619,619  ;56
;Row3
if ?cg_list[1][56] = 1 lsp 620,":c/2,0,3;graphics\thumb\chiru\dlc_a1.png",115,678:spbtn 620,620  ;57
if ?cg_list[1][57] = 1 lsp 621,":c/2,0,3;graphics\thumb\chiru\fec_a.png",540,678:spbtn 621,621 ;58
if ?cg_list[1][58] = 1 lsp 622,":c/2,0,3;graphics\thumb\chiru\bec_a.png",965,678:spbtn 622,622      ;59
if ?cg_list[1][59] = 1 lsp 623,":c/2,0,3;graphics\thumb\chiru\brc_cg.png",1390,678:spbtn 623,623    ;60

return

*cg_page_chiru_6 ;Картинки в странице
csp_rst

if ?cg_list[1][60] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[1][61] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][62] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][63] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[1][64] = 0 lsp 616,cgmode_logo,115,428  ;5
if ?cg_list[1][65] = 0 lsp 617,cgmode_logo,540,428    ;6	
if ?cg_list[1][66] = 0 lsp 618,cgmode_logo,965,428    ;7	
if ?cg_list[1][67] = 0 lsp 619,cgmode_logo,1390,428 ;8	

if ?cg_list[1][68] = 0 lsp 620,cgmode_logo,115,678    ;9
if ?cg_list[1][69] = 0 lsp 621,cgmode_logo,540,678    ;10
if ?cg_list[1][70] = 0 lsp 622,cgmode_logo,965,678  ;11
if ?cg_list[1][71] = 0 lsp 623,cgmode_logo,1390,678 ;12

;Row1
if ?cg_list[1][60] = 1 lsp 612,":c/2,0,3;graphics\thumb\chiru\lac_a1.png",115,178:spbtn 612,612    ;49
if ?cg_list[1][61] = 1 lsp 613,":c/2,0,3;graphics\thumb\chiru\wrc_a.png",540,178:spbtn 613,613    ;50
if ?cg_list[1][62] = 1 lsp 614,":c/2,0,3;graphics\thumb\chiru\erc_ba.png",965,178:spbtn 614,614    ;51
if ?cg_list[1][63] = 1 lsp 615,":c/2,0,3;graphics\thumb\chiru\enc_a1.png",1390,178:spbtn 615,615  ;52
;Row2
if ?cg_list[1][64] = 1 lsp 616,":c/2,0,3;graphics\thumb\chiru\bac_ba2n.png",115,428:spbtn 616,616    ;53
if ?cg_list[1][65] = 1 lsp 617,":c/2,0,3;graphics\thumb\03_CG_C0205_A.png",540,428:spbtn 617,617    ;54
if ?cg_list[1][66] = 1 lsp 618,":c/2,0,3;graphics\thumb\03_CG_C0401_LA.png",965,428:spbtn 618,618  ;55
if ?cg_list[1][67] = 1 lsp 619,":c/2,0,3;graphics\thumb\03_CG_C0404_A.png",1390,428:spbtn 619,619  ;56
;Row3
if ?cg_list[1][68] = 1 lsp 620,":c/2,0,3;graphics\thumb\03_CG_C0902_A.png",115,678:spbtn 620,620  ;57
if ?cg_list[1][69] = 1 lsp 621,":c/2,0,3;graphics\thumb\04_CG_E0102_A.png",540,678:spbtn 621,621 ;58
if ?cg_list[1][70] = 1 lsp 622,":c/2,0,3;graphics\thumb\04_CG_E0103_A.png",965,678:spbtn 622,622      ;59
if ?cg_list[1][71] = 1 lsp 623,":c/2,0,3;graphics\thumb\04_CG_E0305_LA.png",1390,678:spbtn 623,623    ;60

return

*cg_page_chiru_7 ;Картинки в странице
csp_rst

if ?cg_list[1][72] = 0 lsp 612,cgmode_logo,115,178     ;1
if ?cg_list[1][73] = 0 lsp 613,cgmode_logo,540,178 ;2
if ?cg_list[1][74] = 0 lsp 614,cgmode_logo,965,178  ;3
if ?cg_list[1][75] = 0 lsp 615,cgmode_logo,1390,178   ;4

if ?cg_list[1][76] = 0 lsp 616,cgmode_logox,115,428  ;5
if ?cg_list[1][77] = 0 lsp 617,cgmode_logox,540,428    ;6	

;Row1
if ?cg_list[1][72] = 1 lsp 612,":c/2,0,3;graphics\thumb\chiru\portrait_ep5.png",115,178:spbtn 612,612    ;49
if ?cg_list[1][73] = 1 lsp 613,":c/2,0,3;graphics\thumb\chiru\portrait_ep6.png",540,178:spbtn 613,613    ;50
if ?cg_list[1][74] = 1 lsp 614,":c/2,0,3;graphics\thumb\chiru\portrait_ep7.png",965,178:spbtn 614,614    ;51
if ?cg_list[1][75] = 1 lsp 615,":c/2,0,3;graphics\thumb\chiru\portrait_ep8.png",1390,178:spbtn 615,615  ;52
;Row2
if ?cg_list[1][76] = 1 lsp 616,":c/2,0,3;graphics\thumb\chiru\package03.png",115,428:spbtn 616,616    ;53
if ?cg_list[1][77] = 1 lsp 617,":c/2,0,3;graphics\thumb\chiru\package04.png",540,428:spbtn 617,617    ;54

return

;***********************************************************************
; Music Box
;***********************************************************************

*bgm_mode_ps3

btndef ""

csp_rst
if %UMINEKOEND_MUSIC_FLG = 1 mov %UMINEKOEND_MUSIC_FLG,0

bg black,10,500

gosub *trophy_update_bgm
gosub *load_saved_bgms

bg $tmp10,0

lsp 310,bgmmode_caption,20,0 ;для лого
lsp 700,":c;graphics\colour\black.png",0,0,black_toukaritu
lsp 316,":a;graphics\menu\SystemBtn\black_buttons.png",0,0
lsp 315,set_exit,0,0
lsp 314,":a;graphics\menu\logview\bar.png",1832,242
lsp 313,":a;graphics\menu\logview\sel.png",1832,255
lsp 312,":a/2,0,3;graphics\system\wnd\uoncur.png",1827,210
lsp 311,":a/2,0,3;graphics\system\wnd\uoffcur.png",1827,839
lsph2 317,":a/2,0,3;graphics\menu\bgmmode\bgmmode_plate_grey.png",0,0,0,0,0
lsph2 318,":a/2,0,3;graphics\menu\bgmmode\bgmmode_plate_normal.png",0,0,0,0,0
lsph2 319,":a/2,0,3;graphics\menu\bgmmode\bgmmode_plate_hovered.png",0,0,0,0,0

align_buttons_r 315

tree_clear 2
mov %Free3,-1

;Unlock in MusicBox
for %BGM_Id = 1 to 110
	gosub *bgm_gen_box
next

mov %BGM_Id, 1000 : gosub *bgm_gen_box
mov %BGM_Id, 1010 : gosub *bgm_gen_box
mov %BGM_Id, 1011 : gosub *bgm_gen_box
mov %BGM_Id, 1012 : gosub *bgm_gen_box

if %CHIRU_MODE != 1 jumpf
	for %BGM_Id = 111 to 195
		if %BGM_Id != 178 && %BGM_Id != 182 && %BGM_Id != 189 gosub *bgm_gen_box
	next
	mov %BGM_Id, 240 : gosub *bgm_gen_box
	mov %BGM_Id, 241 : gosub *bgm_gen_box
	mov %BGM_Id, 1013 : gosub *bgm_gen_box
	mov %BGM_Id, 1014 : gosub *bgm_gen_box
	mov %BGM_Id, 1017 : gosub *bgm_gen_box
	mov %BGM_Id, 1018 : gosub *bgm_gen_box
~

scrollable 320,2,135,0,1650,1080
scrollable_cfg firstmargin,320,150
scrollable_cfg lastmargin,320,150
scrollable_cfg cols,320,2
scrollable_cfg colgap,320,50
scrollable_cfg elembg,320,317
scrollable_cfg elemwidth,320,800
scrollable_cfg elemheight,320,80
scrollable_cfg textmarginwidth,320,55
scrollable_cfg textmargintop,320,13
scrollable_cfg scrollbar,320,313,255,785
scrollable_display 320

spbtn 315,4
spbtn 311,5 ;up
spbtn 312,6 ;down

E_A

print 80

*bgm_button_loop

getpage
getcursor

btnwait2 %BtnRes

if %BtnRes = -1	  seplay 9,1005,100 : goto *bgm_end				;Exit by right-clicking
if %BtnRes = 4	  seplay 9,1005,100 : goto *bgm_end				;Exit by clicking the exit button
if %BtnRes = -10  seplay 9,1005,100 : goto *bgm_end             ;Exit by ESC
if %BtnRes = -80  gosub *bgm_play_file
if %BtnRes = -11  gosub *bgm_play_file
if %BtnRes = 0    gosub *bgm_play_file

if %BtnRes = -12 scrollable_scroll 320,-10	;Page up
if %BtnRes = -13 scrollable_scroll 320,10	;Page down	
if %BtnRes = 5 	 scrollable_scroll 320,1	;button up
if %BtnRes = 6	 scrollable_scroll 320,-1	;button down

if %BtnRes = -81 goto *bgm_end

;print 1

goto *bgm_button_loop

goto *bgm_end

;***********************************************

*bgm_gen_box
	gosub *BGM_List
	tree_seta %Free1,2,"auto","text","{p:6:{a:c:{fit:"+$BGM_Title+"}}}"
	tree_set 2,%Free1,"bgm",$BGM_Play
	if ?bgm_list[%BGM_Id] == 1 tree_set 2,%Free1,"bg","318"
	if ?bgm_list[%BGM_Id] == 0 tree_set 2,%Free1,"text","{p:6:{a:c:????}}" : tree_set 2,%Free1,"bgm",""
return


;***********************************************

*bgm_play_file
	scrollable_get_hovered_elem %Free2,320
	tree_get $Free2,2,%Free2,"bgm"
	; Exit if disabled
	if $Free2 == "" return
	if %Free3 != -1 && %Free3 == %Free2 return
	
	if $Free2 == "sound\bgm\op.ogg" || $Free2 == "legacy\bgm\op.ogg" jumpf
	if $Free2 == "sound\bgm\tiruop.ogg" || $Free2 == "sound\bgm\ep5_op.ogg" || $Free2 == "sound\bgm\ep7_op.ogg" jumpf
		; Set the background
		if %Free3 != -1 tree_set 2,%Free3,"bg","318"
		tree_set 2,%Free2,"bg","319"
		mov %Free3,%Free2
		; Play the bgm
		vol_bgm 100
		bgm $Free2
		return
	~

	if %Free3 != -1 tree_set 2,%Free3,"bg","318"
	mov %Free3,-1
	scrollable_cfg mousectrl,320,0
	stop
	loopbgmstop
	if $Free2 == "sound\bgm\op.ogg" || $Free2 == "legacy\bgm\op.ogg" pam 100,"op",1
	if $Free2 == "sound\bgm\tiruop.ogg" pam 100,"op4",1
	if $Free2 == "sound\bgm\ep5_op.ogg" pam 100,"op56",1
	if $Free2 == "sound\bgm\ep7_op.ogg" pam 100,"op78",1
	if %anim_mode == on flush 23 ;trapped
	if %anim_mode == off flush 1
	scrollable_cfg mousectrl,320,1
return

;***********************************************

*bgm_end
	seplay 9,1005,100
	csp_rst
return

;***********************************************************************
; Trophies
;***********************************************************************

*trophy_ps3

	gosub *trophy_update

	csp_rst

	bg ":c;graphics\efe\butterfly_4a.png",18,1500,msk_1 ;Фон
 
 	btndef ""

	gosub *trophy_page_new

	lsp 309, trophy_caption,20,0
	lsp 319,":a;graphics\menu\SystemBtn\black_buttons.png",0,0
	lsp 310,set_exit,0,0

	align_buttons_r 310
	
	spbtn 310,1
 
	print 10,250
	
	*trophy_loop
	
	getpage
	getcursor
	;getmclick
	;getzxc

	btnwait2 %BtnRes

	if %BtnRes=-1 seplay 9,1005,100 : goto *trophy_end ;Правая кнопка мыши
	if %BtnRes=-10 seplay 9,1005,100 : goto *trophy_end ;Exit by ESC
	if %BtnRes=-81 seplay 9,1005,100 : goto *trophy_end ;Правая кнопка мыши внутри
	if %BtnRes=1 seplay 9,1005,100 : goto *trophy_end
	if %BtnRes=backlogupbtn scrollable_scroll 320,-1	;button up
	if %BtnRes=backlogdownbtn scrollable_scroll 320,1	;button down
	if %BtnRes=-12 scrollable_scroll 320,-10	;Page up
	if %BtnRes=-13 scrollable_scroll 320,10	;Page down	
	
	;gosub *trophy_grab
	goto *trophy_loop

	*trophy_end ;Выход в главное меню
 	csp_rst
	bg $tmp10,0
	return

*trophy_page_new

lsp 312,":a;graphics\menu\logview\bar.png",1832,242
lsp 313,":a;graphics\menu\logview\sel.png",1832,255
lsp backlogupbtn,":a/2,0,3;graphics\system\wnd\uoncur.png",1827,210
lsp backlogdownbtn,":a/2,0,3;graphics\system\wnd\uoffcur.png",1827,839
lsph 317,":a/2,0,3;graphics\menu\trophy\bgs\lock.png",0,0
if %CHIRU_MODE != 0 jumpf
lsph2 400,":a/2,0,3;graphics\menu\trophy\bgs\000.png",0,0
lsph2 401,":a/2,0,3;graphics\menu\trophy\bgs\001.png",0,0
lsph2 402,":a/2,0,3;graphics\menu\trophy\bgs\002.png",0,0
lsph2 403,":a/2,0,3;graphics\menu\trophy\bgs\003.png",0,0
lsph2 404,":a/2,0,3;graphics\menu\trophy\bgs\004.png",0,0
lsph2 405,":a/2,0,3;graphics\menu\trophy\bgs\005.png",0,0
lsph2 406,":a/2,0,3;graphics\menu\trophy\bgs\006.png",0,0
lsph2 407,":a/2,0,3;graphics\menu\trophy\bgs\007.png",0,0
lsph2 408,":a/2,0,3;graphics\menu\trophy\bgs\008.png",0,0
lsph2 409,":a/2,0,3;graphics\menu\trophy\bgs\009.png",0,0
lsph2 410,":a/2,0,3;graphics\menu\trophy\bgs\010.png",0,0
lsph2 411,":a/2,0,3;graphics\menu\trophy\bgs\011.png",0,0
lsph2 412,":a/2,0,3;graphics\menu\trophy\bgs\012.png",0,0
lsph2 413,":a/2,0,3;graphics\menu\trophy\bgs\013.png",0,0
lsph2 414,":a/2,0,3;graphics\menu\trophy\bgs\014.png",0,0
lsph2 415,":a/2,0,3;graphics\menu\trophy\bgs\015.png",0,0
lsph2 416,":a/2,0,3;graphics\menu\trophy\bgs\016.png",0,0
lsph2 417,":a/2,0,3;graphics\menu\trophy\bgs\017.png",0,0
lsph2 418,":a/2,0,3;graphics\menu\trophy\bgs\018.png",0,0
lsph2 419,":a/2,0,3;graphics\menu\trophy\bgs\019.png",0,0
lsph2 420,":a/2,0,3;graphics\menu\trophy\bgs\020.png",0,0
lsph2 421,":a/2,0,3;graphics\menu\trophy\bgs\021.png",0,0
lsph2 422,":a/2,0,3;graphics\menu\trophy\bgs\022.png",0,0
lsph2 423,":a/2,0,3;graphics\menu\trophy\bgs\023.png",0,0
lsph2 424,":a/2,0,3;graphics\menu\trophy\bgs\024.png",0,0
lsph2 425,":a/2,0,3;graphics\menu\trophy\bgs\025.png",0,0
lsph2 426,":a/2,0,3;graphics\menu\trophy\bgs\026.png",0,0
lsph2 427,":a/2,0,3;graphics\menu\trophy\bgs\027.png",0,0
~
if %CHIRU_MODE != 1 jumpf
lsph2 400,":a/2,0,3;graphics\menu\trophy\bgs\chiru\000.png",0,0
lsph2 401,":a/2,0,3;graphics\menu\trophy\bgs\chiru\001.png",0,0
lsph2 402,":a/2,0,3;graphics\menu\trophy\bgs\chiru\002.png",0,0
lsph2 403,":a/2,0,3;graphics\menu\trophy\bgs\chiru\003.png",0,0
lsph2 404,":a/2,0,3;graphics\menu\trophy\bgs\chiru\004.png",0,0
lsph2 405,":a/2,0,3;graphics\menu\trophy\bgs\chiru\005.png",0,0
lsph2 406,":a/2,0,3;graphics\menu\trophy\bgs\chiru\006.png",0,0
lsph2 407,":a/2,0,3;graphics\menu\trophy\bgs\chiru\007.png",0,0
lsph2 408,":a/2,0,3;graphics\menu\trophy\bgs\chiru\008.png",0,0
lsph2 409,":a/2,0,3;graphics\menu\trophy\bgs\chiru\009.png",0,0
lsph2 410,":a/2,0,3;graphics\menu\trophy\bgs\chiru\010.png",0,0
lsph2 411,":a/2,0,3;graphics\menu\trophy\bgs\chiru\011.png",0,0
lsph2 412,":a/2,0,3;graphics\menu\trophy\bgs\chiru\012.png",0,0
lsph2 413,":a/2,0,3;graphics\menu\trophy\bgs\chiru\013.png",0,0
lsph2 414,":a/2,0,3;graphics\menu\trophy\bgs\chiru\014.png",0,0
lsph2 415,":a/2,0,3;graphics\menu\trophy\bgs\chiru\015.png",0,0
lsph2 416,":a/2,0,3;graphics\menu\trophy\bgs\chiru\016.png",0,0
lsph2 417,":a/2,0,3;graphics\menu\trophy\bgs\chiru\017.png",0,0
lsph2 418,":a/2,0,3;graphics\menu\trophy\bgs\chiru\018.png",0,0
lsph2 419,":a/2,0,3;graphics\menu\trophy\bgs\chiru\019.png",0,0
lsph2 420,":a/2,0,3;graphics\menu\trophy\bgs\chiru\020.png",0,0
lsph2 421,":a/2,0,3;graphics\menu\trophy\bgs\chiru\021.png",0,0
lsph2 422,":a/2,0,3;graphics\menu\trophy\bgs\chiru\022.png",0,0
lsph2 423,":a/2,0,3;graphics\menu\trophy\bgs\chiru\023.png",0,0
lsph2 424,":a/2,0,3;graphics\menu\trophy\bgs\chiru\024.png",0,0
lsph2 425,":a/2,0,3;graphics\menu\trophy\bgs\chiru\025.png",0,0
lsph2 426,":a/2,0,3;graphics\menu\trophy\bgs\chiru\026.png",0,0
lsph2 427,":a/2,0,3;graphics\menu\trophy\bgs\chiru\027.png",0,0
lsph2 428,":a/2,0,3;graphics\menu\trophy\bgs\chiru\028.png",0,0
lsph2 429,":a/2,0,3;graphics\menu\trophy\bgs\chiru\029.png",0,0
lsph2 430,":a/2,0,3;graphics\menu\trophy\bgs\chiru\030.png",0,0
lsph2 431,":a/2,0,3;graphics\menu\trophy\bgs\chiru\031.png",0,0
lsph2 432,":a/2,0,3;graphics\menu\trophy\bgs\chiru\032.png",0,0
lsph2 433,":a/2,0,3;graphics\menu\trophy\bgs\chiru\033.png",0,0
lsph2 434,":a/2,0,3;graphics\menu\trophy\bgs\chiru\034.png",0,0
lsph2 435,":a/2,0,3;graphics\menu\trophy\bgs\chiru\035.png",0,0
lsph2 436,":a/2,0,3;graphics\menu\trophy\bgs\chiru\036.png",0,0
lsph2 437,":a/2,0,3;graphics\menu\trophy\bgs\chiru\037.png",0,0
lsph2 438,":a/2,0,3;graphics\menu\trophy\bgs\chiru\038.png",0,0
lsph2 439,":a/2,0,3;graphics\menu\trophy\bgs\chiru\039.png",0,0
lsph2 440,":a/2,0,3;graphics\menu\trophy\bgs\chiru\040.png",0,0
lsph2 441,":a/2,0,3;graphics\menu\trophy\bgs\chiru\041.png",0,0
lsph2 442,":a/2,0,3;graphics\menu\trophy\bgs\chiru\042.png",0,0
lsph2 443,":a/2,0,3;graphics\menu\trophy\bgs\chiru\043.png",0,0
lsph2 444,":a/2,0,3;graphics\menu\trophy\bgs\chiru\044.png",0,0
lsph2 445,":a/2,0,3;graphics\menu\trophy\bgs\chiru\045.png",0,0
lsph2 446,":a/2,0,3;graphics\menu\trophy\bgs\chiru\046.png",0,0
~
spbtn backlogdownbtn,backlogdownbtn
spbtn backlogupbtn,backlogupbtn

tree_clear 6

if %CHIRU_MODE != 0 jumpf

if %8700==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8700!=0 tree_seta %Free1,6,"auto","text",trophy_text_00 : tree_set 6,%Free1,"bg","400"
if %8701==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8701!=0 tree_seta %Free1,6,"auto","text",trophy_text_01 : tree_set 6,%Free1,"bg","401"
if %8702==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8702!=0 tree_seta %Free1,6,"auto","text",trophy_text_02 : tree_set 6,%Free1,"bg","402"
if %8703==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8703!=0 tree_seta %Free1,6,"auto","text",trophy_text_03 : tree_set 6,%Free1,"bg","403"
if %8704==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8704!=0 tree_seta %Free1,6,"auto","text",trophy_text_04 : tree_set 6,%Free1,"bg","404"
if %8705==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8705!=0 tree_seta %Free1,6,"auto","text",trophy_text_05 : tree_set 6,%Free1,"bg","405"
if %8706==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8706!=0 tree_seta %Free1,6,"auto","text",trophy_text_06 : tree_set 6,%Free1,"bg","406"
if %8707==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8707!=0 tree_seta %Free1,6,"auto","text",trophy_text_07 : tree_set 6,%Free1,"bg","407"
if %8708==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8708!=0 tree_seta %Free1,6,"auto","text",trophy_text_08 : tree_set 6,%Free1,"bg","408"
if %8709==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8709!=0 tree_seta %Free1,6,"auto","text",trophy_text_09 : tree_set 6,%Free1,"bg","409"
if %8710==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8710!=0 tree_seta %Free1,6,"auto","text",trophy_text_10 : tree_set 6,%Free1,"bg","410"
if %8711==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8711!=0 tree_seta %Free1,6,"auto","text",trophy_text_11 : tree_set 6,%Free1,"bg","411"
if %8712==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8712!=0 tree_seta %Free1,6,"auto","text",trophy_text_12 : tree_set 6,%Free1,"bg","412"
if %8713==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8713!=0 tree_seta %Free1,6,"auto","text",trophy_text_13 : tree_set 6,%Free1,"bg","413"
if %8714==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8714!=0 tree_seta %Free1,6,"auto","text",trophy_text_14 : tree_set 6,%Free1,"bg","414"
if %8715==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8715!=0 tree_seta %Free1,6,"auto","text",trophy_text_15 : tree_set 6,%Free1,"bg","415"
if %8716==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8716!=0 tree_seta %Free1,6,"auto","text",trophy_text_16 : tree_set 6,%Free1,"bg","416"
if %8717==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8717!=0 tree_seta %Free1,6,"auto","text",trophy_text_17 : tree_set 6,%Free1,"bg","417"
if %8718==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8718!=0 tree_seta %Free1,6,"auto","text",trophy_text_18 : tree_set 6,%Free1,"bg","418"
if %8719==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8719!=0 tree_seta %Free1,6,"auto","text",trophy_text_19 : tree_set 6,%Free1,"bg","419"
if %8720==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8720!=0 tree_seta %Free1,6,"auto","text",trophy_text_20 : tree_set 6,%Free1,"bg","420"
if %8721==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8721!=0 tree_seta %Free1,6,"auto","text",trophy_text_21 : tree_set 6,%Free1,"bg","421"
if %8722==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8722!=0 tree_seta %Free1,6,"auto","text",trophy_text_22 : tree_set 6,%Free1,"bg","422"
if %8723==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8723!=0 tree_seta %Free1,6,"auto","text",trophy_text_23 : tree_set 6,%Free1,"bg","423"
if %8724==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8724!=0 tree_seta %Free1,6,"auto","text",trophy_text_24 : tree_set 6,%Free1,"bg","424"
if %8725==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8725!=0 tree_seta %Free1,6,"auto","text",trophy_text_25 : tree_set 6,%Free1,"bg","425"
if %8726==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8726!=0 tree_seta %Free1,6,"auto","text",trophy_text_26 : tree_set 6,%Free1,"bg","426"
if %8727==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8727!=0 tree_seta %Free1,6,"auto","text",trophy_text_27 : tree_set 6,%Free1,"bg","427"
~

if %CHIRU_MODE != 1 jumpf

if %8750==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8750!=0 tree_seta %Free1,6,"auto","text",trophy_text_50 : tree_set 6,%Free1,"bg","400"
if %8751==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8751!=0 tree_seta %Free1,6,"auto","text",trophy_text_51 : tree_set 6,%Free1,"bg","401"
if %8752==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8752!=0 tree_seta %Free1,6,"auto","text",trophy_text_52 : tree_set 6,%Free1,"bg","402"
if %8753==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8753!=0 tree_seta %Free1,6,"auto","text",trophy_text_53 : tree_set 6,%Free1,"bg","403"
if %8754==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8754!=0 tree_seta %Free1,6,"auto","text",trophy_text_54 : tree_set 6,%Free1,"bg","404"
if %8755==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8755!=0 tree_seta %Free1,6,"auto","text",trophy_text_55 : tree_set 6,%Free1,"bg","405"
if %8756==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8756!=0 tree_seta %Free1,6,"auto","text",trophy_text_56 : tree_set 6,%Free1,"bg","406"
if %8757==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8757!=0 tree_seta %Free1,6,"auto","text",trophy_text_57 : tree_set 6,%Free1,"bg","407"
if %8758==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8758!=0 tree_seta %Free1,6,"auto","text",trophy_text_58 : tree_set 6,%Free1,"bg","408"
if %8759==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8759!=0 tree_seta %Free1,6,"auto","text",trophy_text_59 : tree_set 6,%Free1,"bg","409"
if %8760==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8760!=0 tree_seta %Free1,6,"auto","text",trophy_text_60 : tree_set 6,%Free1,"bg","410"
if %8761==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8761!=0 tree_seta %Free1,6,"auto","text",trophy_text_61 : tree_set 6,%Free1,"bg","411"
if %8762==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8762!=0 tree_seta %Free1,6,"auto","text",trophy_text_62 : tree_set 6,%Free1,"bg","412"
if %8763==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8763!=0 tree_seta %Free1,6,"auto","text",trophy_text_63 : tree_set 6,%Free1,"bg","413"
if %8764==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8764!=0 tree_seta %Free1,6,"auto","text",trophy_text_64 : tree_set 6,%Free1,"bg","414"
if %8765==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8765!=0 tree_seta %Free1,6,"auto","text",trophy_text_65 : tree_set 6,%Free1,"bg","415"
if %8766==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8766!=0 tree_seta %Free1,6,"auto","text",trophy_text_66 : tree_set 6,%Free1,"bg","416"
if %8767==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8767!=0 tree_seta %Free1,6,"auto","text",trophy_text_67 : tree_set 6,%Free1,"bg","417"
if %8768==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8768!=0 tree_seta %Free1,6,"auto","text",trophy_text_68 : tree_set 6,%Free1,"bg","418"
if %8769==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8769!=0 tree_seta %Free1,6,"auto","text",trophy_text_69 : tree_set 6,%Free1,"bg","419"
if %8770==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8770!=0 tree_seta %Free1,6,"auto","text",trophy_text_70 : tree_set 6,%Free1,"bg","420"
if %8771==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8771!=0 tree_seta %Free1,6,"auto","text",trophy_text_71 : tree_set 6,%Free1,"bg","421"
if %8772==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8772!=0 tree_seta %Free1,6,"auto","text",trophy_text_72 : tree_set 6,%Free1,"bg","422"
if %8773==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8773!=0 tree_seta %Free1,6,"auto","text",trophy_text_73 : tree_set 6,%Free1,"bg","423"
if %8774==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8774!=0 tree_seta %Free1,6,"auto","text",trophy_text_74 : tree_set 6,%Free1,"bg","424"
if %8775==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8775!=0 tree_seta %Free1,6,"auto","text",trophy_text_75 : tree_set 6,%Free1,"bg","425"
if %8776==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8776!=0 tree_seta %Free1,6,"auto","text",trophy_text_76 : tree_set 6,%Free1,"bg","426"
if %8777==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8777!=0 tree_seta %Free1,6,"auto","text",trophy_text_77 : tree_set 6,%Free1,"bg","427"
if %8778==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8778!=0 tree_seta %Free1,6,"auto","text",trophy_text_78 : tree_set 6,%Free1,"bg","428"
if %8779==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8779!=0 tree_seta %Free1,6,"auto","text",trophy_text_79 : tree_set 6,%Free1,"bg","429"
if %8780==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8780!=0 tree_seta %Free1,6,"auto","text",trophy_text_80 : tree_set 6,%Free1,"bg","430"
if %8781==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8781!=0 tree_seta %Free1,6,"auto","text",trophy_text_81 : tree_set 6,%Free1,"bg","431"
if %8782==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8782!=0 tree_seta %Free1,6,"auto","text",trophy_text_82 : tree_set 6,%Free1,"bg","432"
if %8783==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8783!=0 tree_seta %Free1,6,"auto","text",trophy_text_83 : tree_set 6,%Free1,"bg","433"
if %8784==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8784!=0 tree_seta %Free1,6,"auto","text",trophy_text_84 : tree_set 6,%Free1,"bg","434"
if %8785==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8785!=0 tree_seta %Free1,6,"auto","text",trophy_text_85 : tree_set 6,%Free1,"bg","435"
if %8786==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8786!=0 tree_seta %Free1,6,"auto","text",trophy_text_86 : tree_set 6,%Free1,"bg","436"
if %8787==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8787!=0 tree_seta %Free1,6,"auto","text",trophy_text_87 : tree_set 6,%Free1,"bg","437"
if %8788==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8788!=0 tree_seta %Free1,6,"auto","text",trophy_text_88 : tree_set 6,%Free1,"bg","438"
if %8789==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8789!=0 tree_seta %Free1,6,"auto","text",trophy_text_89 : tree_set 6,%Free1,"bg","439"
if %8790==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8790!=0 tree_seta %Free1,6,"auto","text",trophy_text_90 : tree_set 6,%Free1,"bg","440"
if %8791==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8791!=0 tree_seta %Free1,6,"auto","text",trophy_text_91 : tree_set 6,%Free1,"bg","441"
if %8792==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8792!=0 tree_seta %Free1,6,"auto","text",trophy_text_92 : tree_set 6,%Free1,"bg","442"
if %8793==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8793!=0 tree_seta %Free1,6,"auto","text",trophy_text_93 : tree_set 6,%Free1,"bg","443"
if %8794==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8794!=0 tree_seta %Free1,6,"auto","text",trophy_text_94 : tree_set 6,%Free1,"bg","444"
if %8795==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8795!=0 tree_seta %Free1,6,"auto","text",trophy_text_95 : tree_set 6,%Free1,"bg","445"
if %8796==0 tree_seta %Free1,6,"auto","text",trophy_text_locked
if %8796!=0 tree_seta %Free1,6,"auto","text",trophy_text_96 : tree_set 6,%Free1,"bg","446"
~

scrollable 320,6,0,0,1785,1080
scrollable_cfg firstmargin,320,150
scrollable_cfg lastmargin,320,150
scrollable_cfg elemwidth,320,1751 ;1751 - 2 * 85(textmarginwidth) = 1581 (textwindow width)
scrollable_cfg elemheight,320,205
scrollable_cfg textmargintop,320,30
scrollable_cfg textmarginleft,320,250
scrollable_cfg scrollbar,320,313,255,785
scrollable_cfg elembg,320,317
scrollable_display 320

return

;===========================

*trophy_update

	if %CHIRU_MODE == 1 goto *trophy_update_chiru
	
	;%8700-%8727 - all trophies

	;One teatime / ura ends
	;mov %8711,1
	;mov %8712,1
	;mov %8713,1
	;mov %8714,1
	;mov %8715,1
	;mov %8716,1
	;mov %8717,1
	;mov %8718,1 
	;mov %8721,1 Gold Dream (ep2 inline)
	
	; mov %8719,1 50 hour
	if %savecountTime/3600 >= 50 trophy_open 19
	
	if %UMINEKOEND >= 20 trophy_open 22 : trophy_open 2 : trophy_open 3 ;ep1+tips+chars
	if %UMINEKOEND >= 30 trophy_open 23 : trophy_open 4 : trophy_open 5 ;ep2+tips+chars
	if %UMINEKOEND >= 40 trophy_open 24 : trophy_open 6 : trophy_open 7 ;ep3+tips+chars
	if %UMINEKOEND >= 50 trophy_open 25 : trophy_open 8 : trophy_open 9 ;ep4+tips+chars

	;All Trophies
	if %8701 = 0 jumpf
	if %8702 = 0 jumpf
	if %8703 = 0 jumpf
	if %8704 = 0 jumpf
	if %8705 = 0 jumpf
	if %8706 = 0 jumpf
	if %8707 = 0 jumpf
	if %8708 = 0 jumpf
	if %8709 = 0 jumpf
	if %8710 = 0 jumpf
	if %8711 = 0 jumpf
	if %8712 = 0 jumpf
	if %8713 = 0 jumpf
	if %8714 = 0 jumpf
	if %8715 = 0 jumpf
	if %8716 = 0 jumpf
	if %8717 = 0 jumpf
	if %8718 = 0 jumpf
	if %8719 = 0 jumpf
	if %8720 = 0 jumpf
	if %8721 = 0 jumpf
	if %8722 = 0 jumpf
	if %8723 = 0 jumpf
	if %8724 = 0 jumpf
	if %8725 = 0 jumpf
	if %8726 = 0 jumpf
	if %8727 = 0 jumpf 
		trophy_open 0
	~
	
return

*trophy_update_chiru
	;%8750-%8796 - all trophies

	; 50 hour
	if %savecountTime/3600 >= 50 trophy_open 38

	if %UMINEKOEND >= 60 trophy_open 40 : trophy_open 2 : trophy_open 3 ;ep5+tips+chars
	if %UMINEKOEND >= 70 trophy_open 41 : trophy_open 4 : trophy_open 5 ;ep6+tips+chars
	if %UMINEKOEND >= 80 trophy_open 42 : trophy_open 6 : trophy_open 7 ;ep7+tips+chars
	;This one could only be obtained from the game 
	;if %UMINEKOEND >= 81 trophy_open 43 : trophy_open 8 ;ep8ed1+chars
	if %UMINEKOEND >= 90 trophy_open 44 : trophy_open 8 ;ep8ed2+chars

	if %8751 = 0 jumpf
	if %8752 = 0 jumpf
	if %8753 = 0 jumpf
	if %8754 = 0 jumpf
	if %8755 = 0 jumpf
	if %8756 = 0 jumpf
	if %8757 = 0 jumpf
	if %8758 = 0 jumpf
	if %8759 = 0 jumpf
	if %8760 = 0 jumpf
	if %8761 = 0 jumpf
	if %8762 = 0 jumpf
	if %8763 = 0 jumpf
	if %8764 = 0 jumpf
	if %8765 = 0 jumpf
	if %8766 = 0 jumpf
	if %8767 = 0 jumpf
	if %8768 = 0 jumpf
	if %8769 = 0 jumpf
	if %8770 = 0 jumpf
	if %8771 = 0 jumpf
	if %8772 = 0 jumpf
	if %8773 = 0 jumpf
	if %8774 = 0 jumpf
	if %8775 = 0 jumpf
	if %8776 = 0 jumpf
	if %8777 = 0 jumpf
	if %8778 = 0 jumpf
	if %8779 = 0 jumpf
	if %8780 = 0 jumpf
	if %8781 = 0 jumpf
	if %8782 = 0 jumpf
	if %8783 = 0 jumpf
	if %8784 = 0 jumpf
	if %8785 = 0 jumpf
	if %8786 = 0 jumpf
	if %8787 = 0 jumpf
	if %8788 = 0 jumpf
	if %8789 = 0 jumpf
	if %8790 = 0 jumpf
	if %8791 = 0 jumpf
	if %8792 = 0 jumpf
	if %8793 = 0 jumpf
	if %8794 = 0 jumpf
	if %8795 = 0 jumpf
	if %8796 = 0 jumpf
		trophy_open 0
	~
return

*trophy_update_cg
	if %CHIRU_MODE == 1 goto *trophy_update_cg_chiru

	if %8600 = 0 return
	if %8601 = 0 return
	if %8602 = 0 return
	if %8603 = 0 return
	if %8604 = 0 return
	if %8605 = 0 return
	if %8606 = 0 return
	if %8607 = 0 return
	if %8608 = 0 return
	if %8609 = 0 return
	if %8610 = 0 return
	if %8611 = 0 return
	if %8612 = 0 return
	if %8613 = 0 return
	if %8614 = 0 return
	if %8615 = 0 return
	if %8616 = 0 return
	if %8617 = 0 return
	if %8618 = 0 return
	if %8619 = 0 return
	if %8620 = 0 return
	if %8621 = 0 return
	if %8622 = 0 return
	if %8623 = 0 return
	if %8624 = 0 return
	if %8625 = 0 return
	if %8626 = 0 return
	if %8627 = 0 return
	if %8628 = 0 return
	if %8629 = 0 return
	if %8630 = 0 return
	if %8631 = 0 return
	if %8632 = 0 return
	if %8633 = 0 return
	if %8634 = 0 return
	if %8635 = 0 return
	if %8636 = 0 return
	if %8637 = 0 return
	if %8638 = 0 return
	if %8639 = 0 return
	if %8640 = 0 return
	if %8641 = 0 return
	if %8642 = 0 return
	if %8643 = 0 return
	if %8644 = 0 return
	if %8645 = 0 return
	if %8646 = 0 return
	if %8647 = 0 return
	if %8648 = 0 return
	if %8649 = 0 return
	if %8650 = 0 return
	if %8651 = 0 return
	if %8652 = 0 return
	if %8653 = 0 return
	if %8654 = 0 return
	if %8655 = 0 return
	if %8656 = 0 return
	if %8657 = 0 return
	;last hidden two
	mov %8658,1
	mov %8659,1
	trophy_open 26
return

*trophy_update_cg_chiru
	if %8800 = 0 return
	if %8801 = 0 return
	if %8802 = 0 return
	if %8803 = 0 return
	if %8804 = 0 return
	if %8805 = 0 return
	if %8806 = 0 return
	if %8807 = 0 return
	if %8808 = 0 return
	if %8809 = 0 return
	if %8810 = 0 return
	if %8811 = 0 return
	if %8812 = 0 return
	if %8813 = 0 return
	if %8814 = 0 return
	if %8815 = 0 return
	if %8816 = 0 return
	if %8817 = 0 return
	if %8818 = 0 return
	if %8819 = 0 return
	if %8820 = 0 return
	if %8821 = 0 return
	if %8822 = 0 return
	if %8823 = 0 return
	if %8824 = 0 return
	if %8825 = 0 return
	if %8826 = 0 return
	if %8827 = 0 return
	if %8828 = 0 return
	if %8829 = 0 return
	if %8830 = 0 return
	if %8831 = 0 return
	if %8832 = 0 return
	if %8833 = 0 return
	if %8834 = 0 return
	if %8835 = 0 return
	if %8836 = 0 return
	if %8837 = 0 return
	if %8838 = 0 return
	if %8839 = 0 return
	if %8840 = 0 return
	if %8841 = 0 return
	if %8842 = 0 return
	if %8843 = 0 return
	if %8844 = 0 return
	if %8845 = 0 return
	if %8846 = 0 return
	if %8847 = 0 return
	if %8848 = 0 return
	if %8849 = 0 return
	if %8850 = 0 return
	if %8851 = 0 return
	if %8852 = 0 return
	if %8853 = 0 return
	if %8854 = 0 return
	if %8855 = 0 return
	if %8856 = 0 return
	if %8857 = 0 return
	if %8858 = 0 return
	if %8859 = 0 return
	if %8860 = 0 return
	if %8861 = 0 return
	if %8862 = 0 return
	if %8863 = 0 return
	if %8864 = 0 return
	if %8865 = 0 return
	if %8866 = 0 return
	if %8867 = 0 return
	if %8868 = 0 return
	if %8869 = 0 return
	if %8870 = 0 return
	if %8871 = 0 return
	if %8872 = 0 return
	if %8873 = 0 return
	if %8874 = 0 return
	if %8875 = 0 return
	
	;last hidden two
	mov %8876,1
	mov %8877,1
	trophy_open 45
return

*trophy_update_bgm
	;RONDO tracks
	if %CHIRU_MODE = 1 jumpf
	if %3706 = 0 jumpf
	if %3707 = 0 jumpf
	if %3708 = 0 jumpf
	if %3709 = 0 jumpf
	if %3710 = 0 jumpf
	if %3711 = 0 jumpf
	if %3712 = 0 jumpf
	if %3713 = 0 jumpf
	if %3714 = 0 jumpf
	if %3715 = 0 jumpf
	if %3716 = 0 jumpf
	if %3717 = 0 jumpf
	if %3718 = 0 jumpf
	if %3719 = 0 jumpf
	if %3720 = 0 jumpf
	if %3721 = 0 jumpf
	if %3722 = 0 jumpf
	if %3723 = 0 jumpf
	if %3724 = 0 jumpf
	if %3725 = 0 jumpf
	if %3726 = 0 jumpf
	if %3727 = 0 jumpf
	if %3728 = 0 jumpf
	if %3729 = 0 jumpf
	if %3730 = 0 jumpf
	if %3731 = 0 jumpf
	if %3732 = 0 jumpf
	if %3733 = 0 jumpf
	if %3734 = 0 jumpf
	if %3735 = 0 jumpf
	if %3736 = 0 jumpf
	if %3737 = 0 jumpf
	if %3738 = 0 jumpf
	if %3739 = 0 jumpf
	if %3740 = 0 jumpf
	if %3741 = 0 jumpf
	if %3742 = 0 jumpf
	if %3743 = 0 jumpf
	if %3744 = 0 jumpf
	if %3745 = 0 jumpf
	if %3746 = 0 jumpf
	if %3747 = 0 jumpf
	if %3748 = 0 jumpf
	if %3749 = 0 jumpf
	if %3750 = 0 jumpf
	if %3751 = 0 jumpf
	if %3752 = 0 jumpf
	if %3753 = 0 jumpf
	if %3754 = 0 jumpf
	if %3755 = 0 jumpf
	if %3756 = 0 jumpf
	if %3757 = 0 jumpf
	if %3758 = 0 jumpf
	if %3759 = 0 jumpf
	if %3760 = 0 jumpf
	if %3761 = 0 jumpf
	if %3762 = 0 jumpf
	if %3763 = 0 jumpf
	if %3764 = 0 jumpf
	if %3765 = 0 jumpf
	if %3766 = 0 jumpf
	if %3767 = 0 jumpf
	if %3768 = 0 jumpf
	if %3769 = 0 jumpf
	if %3770 = 0 jumpf
	if %3771 = 0 jumpf
	if %3772 = 0 jumpf
	if %3773 = 0 jumpf
	if %3774 = 0 jumpf
	if %3775 = 0 jumpf
	if %3776 = 0 jumpf
	if %3777 = 0 jumpf
	if %3778 = 0 jumpf
	if %3779 = 0 jumpf
	if %3780 = 0 jumpf
	if %3781 = 0 jumpf
	if %3782 = 0 jumpf
	if %3783 = 0 jumpf
	if %3784 = 0 jumpf
	if %3785 = 0 jumpf
	if %3786 = 0 jumpf
	if %3787 = 0 jumpf
	if %3788 = 0 jumpf
	if %3789 = 0 jumpf
	if %3790 = 0 jumpf
	if %3791 = 0 jumpf
	if %3792 = 0 jumpf
	if %3793 = 0 jumpf
	if %3794 = 0 jumpf
	if %3795 = 0 jumpf
	if %3796 = 0 jumpf
	if %3797 = 0 jumpf
	if %3798 = 0 jumpf
	if %3799 = 0 jumpf
	if %3800 = 0 jumpf
	if %3801 = 0 jumpf
	if %3802 = 0 jumpf
	if %3803 = 0 jumpf
	if %3804 = 0 jumpf
	if %3805 = 0 jumpf
	if %3806 = 0 jumpf
	if %3807 = 0 jumpf
	if %3808 = 0 jumpf
	if %3809 = 0 jumpf
	if %3810 = 0 jumpf
	if %3811 = 0 jumpf
	if %3812 = 0 jumpf
	if %3813 = 0 jumpf
	if %3814 = 0 jumpf
	if %3815 = 0 jumpf
	if %4705 = 0 jumpf
	if %4715 = 0 jumpf
	if %4717 = 0 jumpf
		mov %4716,1 ;system0 (Original)
		trophy_open 27
	~

	if %CHIRU_MODE = 0 jumpf
	if %4716 = 0 jumpf ;All rondo tracks opened
	if %3816 = 0 jumpf
	if %3817 = 0 jumpf
	if %3818 = 0 jumpf
	if %3819 = 0 jumpf
	if %3820 = 0 jumpf
	if %3821 = 0 jumpf
	if %3822 = 0 jumpf
	if %3823 = 0 jumpf
	if %3824 = 0 jumpf
	if %3825 = 0 jumpf
	if %3826 = 0 jumpf
	if %3827 = 0 jumpf
	if %3828 = 0 jumpf
	if %3829 = 0 jumpf
	if %3830 = 0 jumpf
	if %3831 = 0 jumpf
	if %3832 = 0 jumpf
	if %3833 = 0 jumpf
	if %3834 = 0 jumpf
	if %3835 = 0 jumpf
	if %3836 = 0 jumpf
	if %3837 = 0 jumpf
	if %3838 = 0 jumpf
	if %3839 = 0 jumpf
	if %3840 = 0 jumpf
	if %3841 = 0 jumpf
	if %3842 = 0 jumpf
	if %3843 = 0 jumpf
	if %3844 = 0 jumpf
	if %3845 = 0 jumpf
	if %3846 = 0 jumpf
	if %3847 = 0 jumpf
	if %3848 = 0 jumpf
	if %3849 = 0 jumpf
	if %3850 = 0 jumpf
	if %3851 = 0 jumpf
	if %3852 = 0 jumpf
	if %3853 = 0 jumpf
	if %3854 = 0 jumpf
	if %3855 = 0 jumpf
	if %3856 = 0 jumpf
	if %3857 = 0 jumpf
	if %3858 = 0 jumpf
	if %3859 = 0 jumpf
	if %3860 = 0 jumpf
	if %3861 = 0 jumpf
	if %3862 = 0 jumpf
	if %3863 = 0 jumpf
	if %3864 = 0 jumpf
	if %3865 = 0 jumpf
	if %3866 = 0 jumpf
	if %3867 = 0 jumpf
	if %3868 = 0 jumpf
	if %3869 = 0 jumpf
	if %3870 = 0 jumpf
	if %3871 = 0 jumpf
	if %3872 = 0 jumpf
	if %3873 = 0 jumpf
	if %3874 = 0 jumpf
	if %3875 = 0 jumpf
	if %3876 = 0 jumpf
	if %3877 = 0 jumpf
	if %3878 = 0 jumpf
	if %3879 = 0 jumpf
	if %3880 = 0 jumpf
	if %3881 = 0 jumpf
	if %3882 = 0 jumpf
	if %3884 = 0 jumpf
	if %3885 = 0 jumpf
	if %3886 = 0 jumpf
	if %3888 = 0 jumpf
	if %3889 = 0 jumpf
	if %3890 = 0 jumpf
	if %3891 = 0 jumpf
	if %3892 = 0 jumpf
	if %3893 = 0 jumpf
	if %3895 = 0 jumpf
	if %3896 = 0 jumpf
	if %3897 = 0 jumpf
	if %3898 = 0 jumpf
	if %3899 = 0 jumpf
	if %3900 = 0 jumpf
	if %3945 = 0 jumpf
	if %3946 = 0 jumpf
	if %4718 = 0 jumpf
	if %4719 = 0 jumpf
	if %4722 = 0 jumpf
	if %4723 = 0 jumpf
		trophy_open 46
	~
return

*trophy_open
	getparam %trophy_id

	if %CHIRU_MODE = 1 goto *trophy_open_chiru

	if %trophy_id = 0  && %8700 = 1 return
	if %trophy_id = 0  && %8700 = 0 mov %8700,1 : mov $trophy_id,":a;graphics\trophy\TROP000.png" : goto *trophy_show
	if %trophy_id = 1  && %8701 = 1 return
	if %trophy_id = 1  && %8701 = 0 mov %8701,1 : mov $trophy_id,":a;graphics\trophy\TROP001.png" : goto *trophy_show
	if %trophy_id = 2  && %8702 = 1 return
	if %trophy_id = 2  && %8702 = 0 mov %8702,1 : mov $trophy_id,":a;graphics\trophy\TROP002.png" : goto *trophy_show
	if %trophy_id = 3  && %8703 = 1 return
	if %trophy_id = 3  && %8703 = 0 mov %8703,1 : mov $trophy_id,":a;graphics\trophy\TROP003.png" : goto *trophy_show
	if %trophy_id = 4  && %8704 = 1 return
	if %trophy_id = 4  && %8704 = 0 mov %8704,1 : mov $trophy_id,":a;graphics\trophy\TROP004.png" : goto *trophy_show
	if %trophy_id = 5  && %8705 = 1 return
	if %trophy_id = 5  && %8705 = 0 mov %8705,1 : mov $trophy_id,":a;graphics\trophy\TROP005.png" : goto *trophy_show
	if %trophy_id = 6  && %8706 = 1 return
	if %trophy_id = 6  && %8706 = 0 mov %8706,1 : mov $trophy_id,":a;graphics\trophy\TROP006.png" : goto *trophy_show
	if %trophy_id = 7  && %8707 = 1 return
	if %trophy_id = 7  && %8707 = 0 mov %8707,1 : mov $trophy_id,":a;graphics\trophy\TROP007.png" : goto *trophy_show
	if %trophy_id = 8  && %8708 = 1 return
	if %trophy_id = 8  && %8708 = 0 mov %8708,1 : mov $trophy_id,":a;graphics\trophy\TROP008.png" : goto *trophy_show
	if %trophy_id = 9  && %8709 = 1 return
	if %trophy_id = 9  && %8709 = 0 mov %8709,1 : mov $trophy_id,":a;graphics\trophy\TROP009.png" : goto *trophy_show
	if %trophy_id = 10 && %8710 = 1 return
	if %trophy_id = 10 && %8710 = 0 mov %8710,1 : mov $trophy_id,":a;graphics\trophy\TROP010.png" : goto *trophy_show
	if %trophy_id = 11 && %8711 = 1 return
	if %trophy_id = 11 && %8711 = 0 mov %8711,1 : mov $trophy_id,":a;graphics\trophy\TROP011.png" : goto *trophy_show
	if %trophy_id = 12 && %8712 = 1 return
	if %trophy_id = 12 && %8712 = 0 mov %8712,1 : mov $trophy_id,":a;graphics\trophy\TROP012.png" : goto *trophy_show
	if %trophy_id = 13 && %8713 = 1 return
	if %trophy_id = 13 && %8713 = 0 mov %8713,1 : mov $trophy_id,":a;graphics\trophy\TROP013.png" : goto *trophy_show
	if %trophy_id = 14 && %8714 = 1 return
	if %trophy_id = 14 && %8714 = 0 mov %8714,1 : mov $trophy_id,":a;graphics\trophy\TROP014.png" : goto *trophy_show
	if %trophy_id = 15 && %8715 = 1 return
	if %trophy_id = 15 && %8715 = 0 mov %8715,1 : mov $trophy_id,":a;graphics\trophy\TROP015.png" : goto *trophy_show
	if %trophy_id = 16 && %8716 = 1 return
	if %trophy_id = 16 && %8716 = 0 mov %8716,1 : mov $trophy_id,":a;graphics\trophy\TROP016.png" : goto *trophy_show
	if %trophy_id = 17 && %8717 = 1 return
	if %trophy_id = 17 && %8717 = 0 mov %8717,1 : mov $trophy_id,":a;graphics\trophy\TROP017.png" : goto *trophy_show
	if %trophy_id = 18 && %8718 = 1 return
	if %trophy_id = 18 && %8718 = 0 mov %8718,1 : mov $trophy_id,":a;graphics\trophy\TROP018.png" : goto *trophy_show
	if %trophy_id = 19 && %8719 = 1 return
	if %trophy_id = 19 && %8719 = 0 mov %8719,1 : mov $trophy_id,":a;graphics\trophy\TROP019.png" : goto *trophy_show
	if %trophy_id = 20 && %8720 = 1 return
	if %trophy_id = 20 && %8720 = 0 mov %8720,1 : mov $trophy_id,":a;graphics\trophy\TROP020.png" : goto *trophy_show
	if %trophy_id = 21 && %8721 = 1 return
	if %trophy_id = 21 && %8721 = 0 mov %8721,1 : mov $trophy_id,":a;graphics\trophy\TROP021.png" : goto *trophy_show
	if %trophy_id = 22 && %8722 = 1 return
	if %trophy_id = 22 && %8722 = 0 mov %8722,1 : mov $trophy_id,":a;graphics\trophy\TROP022.png" : goto *trophy_show
	if %trophy_id = 23 && %8723 = 1 return
	if %trophy_id = 23 && %8723 = 0 mov %8723,1 : mov $trophy_id,":a;graphics\trophy\TROP023.png" : goto *trophy_show
	if %trophy_id = 24 && %8724 = 1 return
	if %trophy_id = 24 && %8724 = 0 mov %8724,1 : mov $trophy_id,":a;graphics\trophy\TROP024.png" : goto *trophy_show
	if %trophy_id = 25 && %8725 = 1 return
	if %trophy_id = 25 && %8725 = 0 mov %8725,1 : mov $trophy_id,":a;graphics\trophy\TROP025.png" : goto *trophy_show
	if %trophy_id = 26 && %8726 = 1 return
	if %trophy_id = 26 && %8726 = 0 mov %8726,1 : mov $trophy_id,":a;graphics\trophy\TROP026.png" : goto *trophy_show
	if %trophy_id = 27 && %8727 = 1 return
	if %trophy_id = 27 && %8727 = 0 mov %8727,1 : mov $trophy_id,":a;graphics\trophy\TROP027.png" : goto *trophy_show

return

*trophy_open_chiru

	if %trophy_id = 0  && %8750 = 1 return
	if %trophy_id = 0  && %8750 = 0 mov %8750,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP000.png" : goto *trophy_show
	if %trophy_id = 1  && %8751 = 1 return
	if %trophy_id = 1  && %8751 = 0 mov %8751,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP001.png" : goto *trophy_show
	if %trophy_id = 2  && %8752 = 1 return
	if %trophy_id = 2  && %8752 = 0 mov %8752,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP002.png" : goto *trophy_show
	if %trophy_id = 3  && %8753 = 1 return
	if %trophy_id = 3  && %8753 = 0 mov %8753,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP003.png" : goto *trophy_show
	if %trophy_id = 4  && %8754 = 1 return
	if %trophy_id = 4  && %8754 = 0 mov %8754,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP004.png" : goto *trophy_show
	if %trophy_id = 5  && %8755 = 1 return
	if %trophy_id = 5  && %8755 = 0 mov %8755,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP005.png" : goto *trophy_show
	if %trophy_id = 6  && %8756 = 1 return
	if %trophy_id = 6  && %8756 = 0 mov %8756,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP006.png" : goto *trophy_show
	if %trophy_id = 7  && %8757 = 1 return
	if %trophy_id = 7  && %8757 = 0 mov %8757,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP007.png" : goto *trophy_show
	if %trophy_id = 8  && %8758 = 1 return
	if %trophy_id = 8  && %8758 = 0 mov %8758,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP008.png" : goto *trophy_show
	if %trophy_id = 9  && %8759 = 1 return
	if %trophy_id = 9  && %8759 = 0 mov %8759,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP009.png" : goto *trophy_show
	if %trophy_id = 10 && %8760 = 1 return
	if %trophy_id = 10 && %8760 = 0 mov %8760,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP010.png" : goto *trophy_show
	if %trophy_id = 11 && %8761 = 1 return
	if %trophy_id = 11 && %8761 = 0 mov %8761,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP011.png" : goto *trophy_show
	if %trophy_id = 12 && %8762 = 1 return
	if %trophy_id = 12 && %8762 = 0 mov %8762,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP012.png" : goto *trophy_show
	if %trophy_id = 13 && %8763 = 1 return
	if %trophy_id = 13 && %8763 = 0 mov %8763,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP013.png" : goto *trophy_show
	if %trophy_id = 14 && %8764 = 1 return
	if %trophy_id = 14 && %8764 = 0 mov %8764,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP014.png" : goto *trophy_show
	if %trophy_id = 15 && %8765 = 1 return
	if %trophy_id = 15 && %8765 = 0 mov %8765,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP015.png" : goto *trophy_show
	if %trophy_id = 16 && %8766 = 1 return
	if %trophy_id = 16 && %8766 = 0 mov %8766,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP016.png" : goto *trophy_show
	if %trophy_id = 17 && %8767 = 1 return
	if %trophy_id = 17 && %8767 = 0 mov %8767,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP017.png" : goto *trophy_show
	if %trophy_id = 18 && %8768 = 1 return
	if %trophy_id = 18 && %8768 = 0 mov %8768,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP018.png" : goto *trophy_show
	if %trophy_id = 19 && %8769 = 1 return
	if %trophy_id = 19 && %8769 = 0 mov %8769,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP019.png" : goto *trophy_show
	if %trophy_id = 20 && %8770 = 1 return
	if %trophy_id = 20 && %8770 = 0 mov %8770,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP020.png" : goto *trophy_show
	if %trophy_id = 21 && %8771 = 1 return
	if %trophy_id = 21 && %8771 = 0 mov %8771,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP021.png" : goto *trophy_show
	if %trophy_id = 22 && %8772 = 1 return
	if %trophy_id = 22 && %8772 = 0 mov %8772,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP022.png" : goto *trophy_show
	if %trophy_id = 23 && %8773 = 1 return
	if %trophy_id = 23 && %8773 = 0 mov %8773,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP023.png" : goto *trophy_show
	if %trophy_id = 24 && %8774 = 1 return
	if %trophy_id = 24 && %8774 = 0 mov %8774,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP024.png" : goto *trophy_show
	if %trophy_id = 25 && %8775 = 1 return
	if %trophy_id = 25 && %8775 = 0 mov %8775,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP025.png" : goto *trophy_show
	if %trophy_id = 26 && %8776 = 1 return
	if %trophy_id = 26 && %8776 = 0 mov %8776,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP026.png" : goto *trophy_show
	if %trophy_id = 27 && %8777 = 1 return
	if %trophy_id = 27 && %8777 = 0 mov %8777,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP027.png" : goto *trophy_show
	if %trophy_id = 28 && %8778 = 1 return
	if %trophy_id = 28 && %8778 = 0 mov %8778,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP028.png" : goto *trophy_show
	if %trophy_id = 29 && %8779 = 1 return
	if %trophy_id = 29 && %8779 = 0 mov %8779,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP029.png" : goto *trophy_show
	if %trophy_id = 30 && %8780 = 1 return
	if %trophy_id = 30 && %8780 = 0 mov %8780,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP030.png" : goto *trophy_show
	if %trophy_id = 31 && %8781 = 1 return
	if %trophy_id = 31 && %8781 = 0 mov %8781,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP031.png" : goto *trophy_show
	if %trophy_id = 32 && %8782 = 1 return
	if %trophy_id = 32 && %8782 = 0 mov %8782,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP032.png" : goto *trophy_show
	if %trophy_id = 33 && %8783 = 1 return
	if %trophy_id = 33 && %8783 = 0 mov %8783,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP033.png" : goto *trophy_show
	if %trophy_id = 34 && %8784 = 1 return
	if %trophy_id = 34 && %8784 = 0 mov %8784,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP034.png" : goto *trophy_show
	if %trophy_id = 35 && %8785 = 1 return
	if %trophy_id = 35 && %8785 = 0 mov %8785,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP035.png" : goto *trophy_show
	if %trophy_id = 36 && %8786 = 1 return
	if %trophy_id = 36 && %8786 = 0 mov %8786,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP036.png" : goto *trophy_show
	if %trophy_id = 37 && %8787 = 1 return
	if %trophy_id = 37 && %8787 = 0 mov %8787,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP037.png" : goto *trophy_show
	if %trophy_id = 38 && %8788 = 1 return
	if %trophy_id = 38 && %8788 = 0 mov %8788,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP038.png" : goto *trophy_show
	if %trophy_id = 39 && %8789 = 1 return
	if %trophy_id = 39 && %8789 = 0 mov %8789,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP039.png" : goto *trophy_show
	if %trophy_id = 40 && %8790 = 1 return
	if %trophy_id = 40 && %8790 = 0 mov %8790,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP040.png" : goto *trophy_show
	if %trophy_id = 41 && %8791 = 1 return
	if %trophy_id = 41 && %8791 = 0 mov %8791,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP041.png" : goto *trophy_show
	if %trophy_id = 42 && %8792 = 1 return
	if %trophy_id = 42 && %8792 = 0 mov %8792,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP042.png" : goto *trophy_show
	if %trophy_id = 43 && %8793 = 1 return
	if %trophy_id = 43 && %8793 = 0 mov %8793,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP043.png" : goto *trophy_show
	if %trophy_id = 44 && %8794 = 1 return
	if %trophy_id = 44 && %8794 = 0 mov %8794,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP044.png" : goto *trophy_show
	if %trophy_id = 45 && %8795 = 1 return
	if %trophy_id = 45 && %8795 = 0 mov %8795,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP045.png" : goto *trophy_show
	if %trophy_id = 46 && %8796 = 1 return
	if %trophy_id = 46 && %8796 = 0 mov %8796,1 : mov $trophy_id,":a;graphics\trophy_chiru\TROP046.png" : goto *trophy_show

return

*trophy_show
	lsp 4,":c;graphics\colour\black.png",0,0,black_toukaritu
	lsp 3,$trophy_id,840,420
	;A new Trophy is available in the Trophies menu!
	border_pad_push 5
	;FIXME: autoalign...
	lsp 2,trophy_text_new,trophy_text_x,trophy_text_y
	border_pad_pop
	seplay 9,1062,100
	print 23
	wait 1000
	;click

	_csp 2,4
	print 1
return

*trophy_session_create
	timestamp %savecountSess
return

*trophy_session_reset
	timestamp %ts_session
	sub %ts_session,%savecountSess
	add %savecountTime,%ts_session
	timestamp %savecountSess
	mov %ts_session,0
return

*trophy_session_clicks
	if %savecountClick != 30000 inc %savecountClick
	if %savecountClick == 30000 trophy_open savecountTrophy : inc %savecountClick
return

*script_state
jnskip
	; Make it fade-out one day
	dwavestop 0
	dwavestop 1
	dwavestop 2
	dwavestop 43
	dwavestop 44
	dwavestop 45
	dwavestop 46

	vsp TextCC4SpNum,0 : mov %autom_icon,off
	if %skip_icon = off vsp TextCC3SpNum,1 : mov %skip_icon,on
	return
~

jnauto
	if %skip_icon = on vsp TextCC3SpNum,0 : mov %skip_icon,off
	vsp TextCC4SpNum,1 : mov %autom_icon,on
	return
~

if %autom_icon == 1 && %autom_no_cur = 1 && %TextCC12Flag = 0 vsp TextCC1SpNum,1 : print 1
if %autom_icon == 1 && %autom_no_cur = 1 && %TextCC12Flag = 1 vsp TextCC2SpNum,1 : print 1
if %skip_icon = on vsp TextCC3SpNum,0 : mov %skip_icon,off
vsp TextCC4SpNum,0 : mov %autom_icon,off

return

;----------------------
;Debugging section
;----------------------
*debug_str
	getparam $9946
	debug_string $9946
return

*debug_str2
	;$9946 variable to dump, $9947 string with variable name
	getparam $9946,$9947

	mov $9948,"Variable: "
	add $9948,$9947
	add $9948,", value: "
	add $9948,$9946

	debug_string $9948
return

*debug_var
	;$9946 variable to dump, $9947 string with variable name
	getparam %9946,$9947

	mov $9948,"Numeric variable: "
	add $9948,$9947
	add $9948,", value: "
	itoa $9949,%9946
	add $9948,$9949

	debug_string $9948
return

*align_message_common
	getspsize %msg_text,%msg_tmp_w,%msg_tmp_h
	mov %msg_x,1920-%msg_tmp_w
	mov %msg_y,1080-%msg_tmp_h
	if %msg_b1 != 0 getspsize %msg_b1,%msg_tmp_w2,%msg_tmp_h2 : sub %msg_y,%msg_tmp_h2
	div %msg_x,2
	div %msg_y,2
	sub %msg_y,15
	amsp %msg_text,%msg_x,%msg_y
return

*align_message_l
	getparam %msg_text,%msg_b1,%msg_b2
	gosub *align_message_common

	if %msg_b1 == 0 jumpf
		add %msg_y,%msg_tmp_h2-15
		amsp %msg_b1,%msg_x,%msg_y
		add %msg_x,%msg_tmp_w2+15
		amsp %msg_b2,%msg_x,%msg_y
	~

	mov %msg_b1,0
	mov %msg_b2,0
return

*align_message_c
	getparam %msg_text,%msg_b1,%msg_b2
	gosub *align_message_common

	if %msg_b1 == 0 jumpf
		add %msg_y,%msg_tmp_h2-15
		getspsize %msg_b2,%msg_tmp_w,%msg_tmp_h
		mov %msg_x,1920-%msg_tmp_w2-%msg_tmp_w-15
		div %msg_x,2
		amsp %msg_b1,%msg_x,%msg_y
		add %msg_x,%msg_tmp_w2+15
		amsp %msg_b2,%msg_x,%msg_y
	~

	mov %msg_b1,0
	mov %msg_b2,0
return

*align_buttons_l
	getparam %msg_b1,%msg_b2,%msg_b3,%msg_b4,%msg_b5,%msg_b6

	getspsize %msg_b1,%msg_tmp_w,%msg_tmp_h
	mov %msg_x,100
	mov %msg_y,990
	amsp %msg_b1,%msg_x,%msg_y
	
	if %msg_b2 == 0 jumpf
	add %msg_x,%msg_tmp_w+15
	amsp %msg_b2,%msg_x,%msg_y
	getspsize %msg_b2,%msg_tmp_w2,%msg_tmp_h2
	
	add %msg_x,%msg_tmp_w2+15
	amsp %msg_b3,%msg_x,%msg_y
	getspsize %msg_b3,%msg_tmp_w2,%msg_tmp_h2
	
	add %msg_x,%msg_tmp_w2+15
	amsp %msg_b4,%msg_x,%msg_y
	getspsize %msg_b4,%msg_tmp_w2,%msg_tmp_h2
	
	add %msg_x,%msg_tmp_w2+15
	amsp %msg_b5,%msg_x,%msg_y
	getspsize %msg_b5,%msg_tmp_w2,%msg_tmp_h2
	
	add %msg_x,%msg_tmp_w2+15
	amsp %msg_b6,%msg_x,%msg_y
	getspsize %msg_b6,%msg_tmp_w2,%msg_tmp_h2
	~

	mov %msg_b2,0
	mov %msg_b3,0
	mov %msg_b4,0
	mov %msg_b5,0
	mov %msg_b6,0
return

*align_buttons_r
	getparam %msg_b1,%msg_b2,%msg_b3
	
	getspsize %msg_b1,%msg_tmp_w,%msg_tmp_h
	mov %msg_x,1790-%msg_tmp_w
	mov %msg_y,990
	amsp %msg_b1,%msg_x,%msg_y
	
	if %msg_b2 == 0 jumpf
		getspsize %msg_b2,%msg_tmp_w,%msg_tmp_h
		sub %msg_x,%msg_tmp_w+75
		amsp %msg_b2,%msg_x,%msg_y
		
		getspsize %msg_b3,%msg_tmp_w,%msg_tmp_h
		sub %msg_x,%msg_tmp_w+30
		amsp %msg_b3,%msg_x,%msg_y
	~
	
	mov %msg_b2,0
	mov %msg_b3,0
return

;----------------------
;Txtbox
;----------------------
*set_name_window
	jskip_s
		gosub *set_name_window_base
		gosub *set_dynamic_window_base
	~
	mov %cur_wndmode,off
	goto *update_msgwnd_direct

*set_name_window_non
	jskip_s
		gosub *set_name_window_base
		gosub *set_dynamic_window_base
	~
	mov %cur_wndmode,off
	msgwnd_non
return

*set_name_window_base
	textoff ;testfix for https://forum.umineko-project.org/viewtopic.php?f=4&t=6&start=50#p154
	setwindowd_off
	border_padding 0

	change_font 1,1
	setwindow4 160,750,text_main_size,1581,1,text_main_spacing,%textspeed,0,0,0,0,1,":c;graphics\colour\black.png",0,0,120
	setwindow4name 0,0,text_name_size,1581,1,text_name_spacing,0,0,0,0,1
	borderstyle 5,#000000 : shadedistance 0,0
	borderstyle 5,#000000,1 : shadedistance 0,0,#000000,1
	if %msgwnd_type == 3 shadedistance 2,2 : shadedistance 2,2,#000000,1
	gosub *set_window_options ; locale specfic
return

*set_dynamic_window_base
	if %msgwnd_type = 0 setwindowd msgwnd
	if %msgwnd_type = 1 setwindowd msgwnd2
	if %msgwnd_type = 2 setwindowd msgwnd3
	if %msgwnd_type = 3 setwindowd msgwnd4
	setwindowd_dimensions 167,725,1586,306
	setwindowd_padding text_main_pad_t,text_main_pad_r,text_main_pad_b,text_main_pad_l
	setwindowd_name_padding text_name_pad_t,text_name_pad_r,text_name_pad_b,text_name_pad_l
	setwindowd_main_region 240,14,1408,274,77
	setwindowd_non_region 0,235,112,38,60
	setwindowd_name_region 0,11,224,118,60,170,170,74
return

*set_window_simple
	getparam %setwindow_x,%setwindow_y

	;if we passed no params we will use the default ones (0,0 is just senseless)
	if %setwindow_x = 0 mov %setwindow_x,80
	if %setwindow_y = 0 mov %setwindow_y,320
	gosub *set_window_simple_update
	mov %log_sw_x,%setwindow_x
	mov %log_sw_y,%setwindow_y
	jskip_s
		textoff
		setwindowd_off

		mov %setwindow_x,%setwindow_x*2
		setwindow4 %setwindow_x/2,%setwindow_y,text_main_size,1920-%setwindow_x,1,text_main_spacing,%textspeed,0,0,0,0,1,":c;graphics\colour\black.png",0,0,120
		borderstyle 5,#000000 : shadedistance 0,0
		if %msgwnd_type = 3 shadedistance 2,2
		gosub *set_window_options ; locale specfic
	~
	mov %setwindow_x,0
	mov %setwindow_y,0
	mov %cur_wndmode,on
return

*ak
	mov %skip_clicks,on
	ignore_voicedelay on
	nj
	; In rondo all the scenes have no delays, but we only whitelist synced scenes with timers.
	if %CHIRU_MODE == 0 d_setvoicewait 0
return

*nj
	mov %unjumpable,on
return

*set_saving
	getparam %disallow_saving
	if %disallow_saving == off jumpf
		mov %disallow_saving,0
		deletescreenshot
		return
	~
	getscreenshot 309,174
	mov %disallow_saving,1
return

;Chain sprites
*chain_sprites
	mov %Free1,s3_30

	~
		if %Free1 > s0_0 return
		child_image %Free1,%Free1-1
		child_image2 %Free1,%Free1-1
		add %Free1,2
		jumpb

*update_textspeed
	mov %textspeed,%textspeed2
	text_speed %textspeed
return

*apply_msgwnd_settings
	if %cur_wndmode = on return
	gosub *set_name_window_base
	gosub *set_dynamic_window_base
	goto *update_msgwnd_direct

*update_msgwnd
	jskip_s
		if %msgwnd_type = 0 setwindowd msgwnd
		if %msgwnd_type = 1 setwindowd msgwnd2
		if %msgwnd_type = 2 setwindowd msgwnd3
		if %msgwnd_type = 3 setwindowd msgwnd4
	~

*update_msgwnd_direct

if $cur_character = "ama" gosub *msgwnd_ama : jumpf
if $cur_character = "bea" gosub *msgwnd_bea : jumpf
if $cur_character = "ber" gosub *msgwnd_ber : jumpf
if $cur_character = "but" gosub *msgwnd_but : jumpf
if $cur_character = "cla" gosub *msgwnd_cla : jumpf
if $cur_character = "enj" gosub *msgwnd_enj : jumpf
if $cur_character = "ev2" gosub *msgwnd_ev2 : jumpf
if $cur_character = "eva" gosub *msgwnd_eva : jumpf
if $cur_character = "gap" gosub *msgwnd_gap : jumpf
if $cur_character = "gen" gosub *msgwnd_gen : jumpf
if $cur_character = "geo" gosub *msgwnd_geo : jumpf
if $cur_character = "goa" gosub *msgwnd_goa : jumpf
if $cur_character = "go2" gosub *msgwnd_go2 : jumpf
if $cur_character = "goh" gosub *msgwnd_goh : jumpf
if $cur_character = "hid" gosub *msgwnd_hid : jumpf
if $cur_character = "jes" gosub *msgwnd_jes : jumpf
if $cur_character = "kan" gosub *msgwnd_kan : jumpf
if $cur_character = "kas" gosub *msgwnd_kas : jumpf
if $cur_character = "kaw" gosub *msgwnd_kaw : jumpf
if $cur_character = "kin" gosub *msgwnd_kin : jumpf
if $cur_character = "kir" gosub *msgwnd_kir : jumpf
if $cur_character = "ku2" gosub *msgwnd_ku2 : jumpf
if $cur_character = "kum" gosub *msgwnd_kum : jumpf
if $cur_character = "lam" gosub *msgwnd_lam : jumpf
if $cur_character = "mar" gosub *msgwnd_mar : jumpf
if $cur_character = "na2" gosub *msgwnd_na2 : jumpf
if $cur_character = "nan" gosub *msgwnd_nan : jumpf
if $cur_character = "nat" gosub *msgwnd_nat : jumpf
if $cur_character = "oko" gosub *msgwnd_oko : jumpf
if $cur_character = "pro" gosub *msgwnd_pro : jumpf
if $cur_character = "rg1" gosub *msgwnd_rg1 : jumpf
if $cur_character = "rg2" gosub *msgwnd_rg2 : jumpf
if $cur_character = "rg3" gosub *msgwnd_rg3 : jumpf
if $cur_character = "rg4" gosub *msgwnd_rg4 : jumpf
if $cur_character = "rg5" gosub *msgwnd_rg5 : jumpf
if $cur_character = "rg6" gosub *msgwnd_rg6 : jumpf
if $cur_character = "rg7" gosub *msgwnd_rg7 : jumpf
if $cur_character = "ron" gosub *msgwnd_ron : jumpf
if $cur_character = "ros" gosub *msgwnd_ros : jumpf
if $cur_character = "rud" gosub *msgwnd_rud : jumpf
if $cur_character = "s00" gosub *msgwnd_s00 : jumpf
if $cur_character = "s41" gosub *msgwnd_s41 : jumpf
if $cur_character = "s45" gosub *msgwnd_s45 : jumpf
if $cur_character = "sak" gosub *msgwnd_sak : jumpf
if $cur_character = "sha" gosub *msgwnd_sha : jumpf
if $cur_character = "wal" gosub *msgwnd_wal : jumpf
if $cur_character = "eri" gosub *msgwnd_eri : jumpf
if $cur_character = "dla" gosub *msgwnd_dla : jumpf
if $cur_character = "ger" gosub *msgwnd_ger : jumpf
if $cur_character = "cor" gosub *msgwnd_cor : jumpf
if $cur_character = "fea" gosub *msgwnd_fea : jumpf
if $cur_character = "zep" gosub *msgwnd_zep : jumpf
if $cur_character = "fur" gosub *msgwnd_fur : jumpf
if $cur_character = "rio" gosub *msgwnd_rio : jumpf
if $cur_character = "wil" gosub *msgwnd_wil : jumpf
if $cur_character = "cur" gosub *msgwnd_cur : jumpf
if $cur_character = "fe2" gosub *msgwnd_fe2 : jumpf
if $cur_character = "bu3" gosub *msgwnd_bu3 : jumpf
if $cur_character = "be3" gosub *msgwnd_be3 : jumpf
if $cur_character = "be4" gosub *msgwnd_be4 : jumpf
if $cur_character = "en2" gosub *msgwnd_en2 : jumpf
if $cur_character = "en3" gosub *msgwnd_en3 : jumpf
if $cur_character = "non" gosub *msgwnd_non : jumpf
~
;This is needed for window updates
borderstyle 5,#000000 : shadedistance 0,0
borderstyle 5,#000000,1 : shadedistance 0,0,#000000,1
if %msgwnd_type == 3 shadedistance 2,2 : shadedistance 2,2,#000000,1
d_name_refresh

return


*msgwnd_ama
mov $cur_character,"ama"
jnskip_s return ~
if %vv_ama = 0 mov %vv_ama,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_bea
mov $cur_character,"bea"
jnskip_s return ~
if %vv_bea = 0 || %vv_be2 = 0 || %vv_be3 = 0 mov %vv_bea,1 : mov %vv_be2,1 : mov %vv_be3,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_ber
mov $cur_character,"ber"
jnskip_s return ~
if %vv_ber = 0 mov %vv_ber,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_but
mov $cur_character,"but"
jnskip_s return ~
if %vv_but = 0 mov %vv_but,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_cla
mov $cur_character,"cla"
jnskip_s return ~
if %vv_cla = 0 mov %vv_cla,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_enj
mov $cur_character,"enj"
jnskip_s return ~
if %vv_enj = 0 mov %vv_enj,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_ev2
mov $cur_character,"ev2"
jnskip_s return ~
if %vv_ev2 = 0 mov %vv_ev2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_eva
mov $cur_character,"eva"
jnskip_s return ~
if %vv_eva = 0 mov %vv_eva,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_gap
mov $cur_character,"gap"
jnskip_s return ~
if %vv_gap = 0 mov %vv_gap,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_gen
mov $cur_character,"gen"
jnskip_s return ~
if %vv_gen = 0 mov %vv_gen,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_geo
mov $cur_character,"geo"
jnskip_s return ~
if %vv_geo = 0 mov %vv_geo,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_goa
mov $cur_character,"goa"
jnskip_s return ~
if %vv_goa = 0 mov %vv_goa,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_go2
mov $cur_character,"go2"
jnskip_s return ~
if %vv_goa = 0 mov %vv_goa,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_goh
mov $cur_character,"goh"
jnskip_s return ~
if %vv_goh = 0 mov %vv_goh,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_hid
mov $cur_character,"hid"
jnskip_s return ~
if %vv_hid = 0 mov %vv_hid,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_jes
mov $cur_character,"jes"
jnskip_s return ~
if %vv_jes = 0 mov %vv_jes,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_kan
mov $cur_character,"kan"
jnskip_s return ~
if %vv_kan = 0 mov %vv_kan,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_kas
mov $cur_character,"kas"
jnskip_s return ~
if %vv_kas = 0 mov %vv_kas,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_kaw
mov $cur_character,"kaw"
jnskip_s return ~
if %vv_kaw = 0 mov %vv_kaw,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_kin
mov $cur_character,"kin"
jnskip_s return ~
if %vv_kin = 0 || %vv_ki2 = 0 mov %vv_kin,1 : mov %vv_ki2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_kir
mov $cur_character,"kir"
jnskip_s return ~
if %vv_kir = 0 mov %vv_kir,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_ku2
mov $cur_character,"ku2"
jnskip_s return ~
if %vv_ku2 = 0 mov %vv_ku2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_kum
mov $cur_character,"kum"
jnskip_s return ~
if %vv_kum = 0 mov %vv_kum,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_lam
mov $cur_character,"lam"
jnskip_s return ~
if %vv_lam = 0 mov %vv_lam,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_mar
mov $cur_character,"mar"
jnskip_s return ~
if %vv_mar = 0 mov %vv_mar,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_na2
mov $cur_character,"na2"
jnskip_s return ~
if %vv_na2 = 0 mov %vv_na2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_nan
mov $cur_character,"nan"
jnskip_s return ~
if %vv_nan = 0 mov %vv_nan,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_nat
mov $cur_character,"nat"
jnskip_s return ~
if %vv_nat = 0 mov %vv_nat,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_oko
mov $cur_character,"oko"
jnskip_s return ~
if %vv_oko = 0 mov %vv_oko,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_pro
mov $cur_character,"pro"
jnskip_s return ~
if %vv_pro = 0 mov %vv_pro,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg1
mov $cur_character,"rg1"
jnskip_s return ~
if %vv_rg1 = 0 mov %vv_rg1,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg2
mov $cur_character,"rg2"
jnskip_s return ~
if %vv_rg2 = 0 mov %vv_rg2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg3
mov $cur_character,"rg3"
jnskip_s return ~
if %vv_rg3 = 0 mov %vv_rg3,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg4
mov $cur_character,"rg4"
jnskip_s return ~
if %vv_rg4 = 0 mov %vv_rg4,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg5
mov $cur_character,"rg5"
jnskip_s return ~
if %vv_rg5 = 0 mov %vv_rg5,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg6
mov $cur_character,"rg6"
jnskip_s return ~
if %vv_rg6 = 0 mov %vv_rg6,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rg7
mov $cur_character,"rg7"
jnskip_s return ~
if %vv_rg7 = 0 mov %vv_rg7,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_ron
mov $cur_character,"ron"
jnskip_s return ~
if %vv_ron = 0 mov %vv_ron,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_ros
mov $cur_character,"ros"
jnskip_s return ~
if %vv_ros = 0 mov %vv_ros,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rud
mov $cur_character,"rud"
jnskip_s return ~
if %vv_rud = 0 mov %vv_rud,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_s00
mov $cur_character,"s00"
jnskip_s return ~
if %vv_s00 = 0 mov %vv_s00,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_s41
mov $cur_character,"s41"
jnskip_s return ~
if %vv_s41 = 0 mov %vv_s41,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_s45
mov $cur_character,"s45"
jnskip_s return ~
if %vv_s45 = 0 mov %vv_s45,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_sak
mov $cur_character,"sak"
jnskip_s return ~
if %vv_sak = 0 mov %vv_sak,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_sha
mov $cur_character,"sha"
jnskip_s return ~
if %vv_sha = 0 mov %vv_sha,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_wal
mov $cur_character,"wal"
jnskip_s return ~
if %vv_wal = 0 mov %vv_wal,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_eri
mov $cur_character,"eri"
jnskip_s return ~
if %vv_eri = 0 mov %vv_eri,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_dla
mov $cur_character,"dla"
jnskip_s return ~
if %vv_dla = 0 mov %vv_dla,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_ger
mov $cur_character,"ger"
jnskip_s return ~
if %vv_ger = 0 mov %vv_ger,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_cor
mov $cur_character,"cor"
jnskip_s return ~
if %vv_cor = 0 mov %vv_cor,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_fea
mov $cur_character,"fea"
jnskip_s return ~
if %vv_fea = 0 || %vv_fe2 = 0 mov %vv_fea,1 : mov %vv_fe2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_zep
mov $cur_character,"zep"
jnskip_s return ~
if %vv_zep = 0 mov %vv_zep,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_fur
mov $cur_character,"fur"
jnskip_s return ~
if %vv_fur = 0 mov %vv_fur,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_rio
mov $cur_character,"rio"
jnskip_s return ~
if %vv_rio = 0 mov %vv_rio,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_wil
mov $cur_character,"wil"
jnskip_s return ~
if %vv_wil = 0 mov %vv_wil,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_cur
mov $cur_character,"cur"
jnskip_s return ~
if %vv_cur = 0 mov %vv_cur,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_fe2
mov $cur_character,"fe2"
jnskip_s return ~
if %vv_fea = 0 || %vv_fe2 = 0 mov %vv_fea,1 : mov %vv_fe2,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_bu3
mov $cur_character,"bu3"
jnskip_s return ~
if %vv_bu3 = 0 mov %vv_bu3,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_be3
mov $cur_character,"be3"
jnskip_s return ~
if %vv_bea = 0 || %vv_be2 = 0 || %vv_be3 = 0 mov %vv_bea,1 : mov %vv_be2,1 : mov %vv_be3,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_be4
mov $cur_character,"be4"
jnskip_s return ~
if %vv_bea = 0 || %vv_be2 = 0 || %vv_be3 = 0 mov %vv_bea,1 : mov %vv_be2,1 : mov %vv_be3,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_en2
mov $cur_character,"en2"
jnskip_s return ~
if %vv_enj = 0 mov %vv_enj,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_en3
mov $cur_character,"en3"
jnskip_s return ~
if %vv_enj = 0 mov %vv_enj,1
gosub *get_name
if %cur_wndmode == off d_name $tmp5
return

*msgwnd_non
mov $cur_character,"non"
jnskip_s return ~
if %vv_0 = 0 || %vv_99 = 0 mov %vv_0,1 : mov %vv_99,1 : mov %vv_inc,0
if %cur_wndmode == off d_name ""
return

*quick_reload
mov %title_skip,1
;This strange line is now thought unnecessary since we clear log in b_title.
;mov %log_is_generated_to_cvs,0
reset

*read_forced_cfg
	operate_config u_read,$autom_no_cur,"automode_hide_cursor"
	if $autom_no_cur == "true" mov %autom_no_cur,on

	operate_config u_read,$UMINEKOEND,"complete_episode"
	if $UMINEKOEND == "1" mov %UMINEKOEND,20 : mov %UMINEKOEND_FLG,20 : gosub *do_unlock
	if $UMINEKOEND == "2" mov %UMINEKOEND,30 : mov %UMINEKOEND_FLG,30 : gosub *do_unlock
	if $UMINEKOEND == "3" mov %UMINEKOEND,40 : mov %UMINEKOEND_FLG,40 : gosub *do_unlock
	if $UMINEKOEND == "4" mov %UMINEKOEND,50 : mov %UMINEKOEND_FLG,50 : gosub *do_unlock
	if $UMINEKOEND == "5" mov %UMINEKOEND,60 : mov %UMINEKOEND_FLG,60 : gosub *do_unlock
	if $UMINEKOEND == "6" mov %UMINEKOEND,70 : mov %UMINEKOEND_FLG,70 : gosub *do_unlock
	if $UMINEKOEND == "7" mov %UMINEKOEND,80 : mov %UMINEKOEND_FLG,80 : gosub *do_unlock
	if $UMINEKOEND == "8" mov %UMINEKOEND,90 : mov %UMINEKOEND_FLG,90 : gosub *do_unlock

	operate_config u_read,$CHIRU_MODE,"force_game"
	if $CHIRU_MODE == "rondo" && %CHIRU_MODE != 0 goto *switch_game_q
	if $CHIRU_MODE == "chiru" && %CHIRU_MODE != 1 && %UMINEKO_END >= 50 goto *switch_game_q

	operate_config u_read,$firstsetting,"first_launch"
	if $firstsetting == "passed" mov %firstsetting,1
	if $firstsetting == "force" mov %firstsetting,0

	operate_config u_read,$bgm_title_language,"bgm_title_language"
	if $bgm_title_language == "English" mov %bgm_title_language,1
	if $bgm_title_language == "Russian" mov %bgm_title_language,2
	if $bgm_title_language == "Japanese" mov %bgm_title_language,3
	if $bgm_title_language == "Romaji" mov %bgm_title_language,4

	operate_config u_read,$title_skip,"skip_title"
	if $title_skip == "all" mov %title_skip,1
	if $title_skip == "force" mov %title_skip,0

	operate_config u_read,$video_res,"video_resolution"
	if $video_res == "720p" mov %video_res,1
	if $video_res == "1080p" mov %video_res,0

	operate_config u_read,$interface_kb_dual,"control_interface"
	if $interface_kb_dual == "kb" mov %interface_kb_dual,0
	if $interface_kb_dual == "pad" mov %interface_kb_dual,1

	operate_config u_read,$enable_cache,"object_caching"
	if $enable_cache == "true" mov %enable_cache,1
	if $enable_cache == "false" mov %enable_cache,0

	operate_config u_read,$bgm_vol,"bgm_volume"
	if $bgm_vol != "undef" atoi %bgm_vol,$bgm_vol
	if %bgm_vol < 0 || %bgm_vol > 100 mov %bgm_vol,100

	operate_config u_read,$sfx_vol,"effect_volume"
	if $sfx_vol != "undef" atoi %sfx_vol,$sfx_vol
	if %sfx_vol < 0 || %sfx_vol > 100 mov %sfx_vol,100

	operate_config u_read,$dlg_vol,"voice_volume"
	if $dlg_vol != "undef" atoi %dlg_vol,$dlg_vol
	if %dlg_vol < 0 || %dlg_vol > 100 mov %dlg_vol,100

	operate_config u_read,$rumble_strength,"rumble_strength"
	if $rumble_strength != "undef" atoi %rumble_strength,$rumble_strength
	if %rumble_strength < 0 || %rumble_strength > 100 mov %rumble_strength,100

	operate_config u_read,$textspeed,"text_speed"
	if $textspeed != "undef" atoi %textspeed,$textspeed
	if %textspeed < 0 || %textspeed > 10 mov %textspeed,5 
	text_speed %textspeed

	operate_config u_read,$msgwnd_type,"textbox_type"
	if $msgwnd_type == "N" mov %msgwnd_type,2
	if $msgwnd_type == "B" mov %msgwnd_type,1
	if $msgwnd_type == "L" mov %msgwnd_type,0
	if $msgwnd_type == "T" mov %msgwnd_type,3

	operate_config u_read,$animated_lips,"lipsync"
	if $animated_lips == "true" mov %animated_lips,1
	if $animated_lips == "false" mov %animated_lips,0

	operate_config u_read,$bgm_chapter_display,"display_titles"
	if $bgm_chapter_display == "true" mov %bgm_chapter_display,1
	if $bgm_chapter_display == "false" mov %bgm_chapter_display,0

	operate_config u_read,$op_ed_song_subtitles,"subtitles"
	if $op_ed_song_subtitles == "None" mov %op_ed_song_subtitles,1
	if $op_ed_song_subtitles == "English" mov %op_ed_song_subtitles,2
	if $op_ed_song_subtitles == "Romaji" mov %op_ed_song_subtitles,3
	if $op_ed_song_subtitles == "Both" mov %op_ed_song_subtitles,4
	if $op_ed_song_subtitles == "Türkçe" mov %op_ed_song_subtitles,5

    operate_config u_read,$skip_unread,"skip_unread_dialogues"
    if $skip_unread == "false" mov %skip_unread,1 ;off
    if $skip_unread == "true" mov %skip_unread,0 ;on
    if %skip_unread == 1 skip_unread 0
    if %skip_unread == 0 skip_unread 1

	operate_config u_read,$hide_textbox,"wheel_down_hides_textbox"
	if $hide_textbox == "false" mov %hide_textbox,0
	if $hide_textbox == "true" mov %hide_textbox,1

	operate_config u_read,$hide_textbox,"steam_conventions"
	if $hide_textbox == "true" d_condition 0,1 : d_condition 1,1
	if $hide_textbox != "true" d_condition 0,0 : d_condition 0,0

	mov %legacy_op,off
	operate_config u_read,$legacy_op,"legacy_op"
	if $legacy_op == "true" mov %legacy_op,on
	if %legacy_op == on fileexist %legacy_op,"legacy\720p\op.mp4"
	if %legacy_op == on fileexist %legacy_op,"legacy\1080p\op.mp4"
	if %legacy_op == on fileexist %legacy_op,"legacy\bgm\op.ogg"

	mov %sskip_turbo,1
	operate_config u_read,$sskip_turbo,"sskip_turbo"
	if $sskip_turbo == "false" mov %sskip_turbo,0
return

;================================
;first settings
;================================
*first_setting
csp_rst
if localisation == "en" mov %game_language,0 : mov $Free3,"English"
if localisation == "ru" mov %game_language,1 : mov $Free3,"Русская"
if localisation == "pt" mov %game_language,2 : mov $Free3,"Português"
if localisation == "cn" mov %game_language,3 : mov $Free3,"Chinese Simp."
if localisation == "cht" mov %game_language,4 : mov $Free3,"Chinese Trad."
if localisation == "it" mov %game_language,5 : mov $Free3,"Italiano"
if localisation == "tr" mov %game_language,6 : mov $Free3,"Witch Love"

getscriptnum %Free1
for %Free2 = 0 to %Free1-1
	getscriptpath $Free3,%Free2,1
	if localisation == $Free3 mov %Free4,%Free2 ;: debug_var %Free4,"curent language num"
next
getscriptpath $Free3,%Free4,1
mov %Free1,%Free4
dec %Free2

mov %y,300

*first_setting3

gosub *first_settings_game_language
gosub *first_settings_window_size
gosub *first_settings_full_window_auto
gosub *first_settings_interface_kb_dual
gosub *first_settings_ok

if %game_language != 0 jumpf
	lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: Initial Game Configuration }{p:10:——————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:Game language}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:Window size}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:Display mode}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:Interface}",135,%y+300
~

if %game_language != 1 jumpf
	lsp 300,":s;#FFFFFF`{p:10:—————}{p:9:{a:c: Первоначальная настройка игры }{p:10:—————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:Локализация игры}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:Размер окна}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:Режим отображения}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:Управление}",135,%y+300
~

if %game_language != 2 jumpf
	lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: Configuração Inicial do Jogo }{p:10:——————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:Idioma do jogo}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:Tamanho da janela}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:Modo de exibição}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:Interface}",135,%y+300
~

if %game_language != 3 jumpf
	lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: 初始游戏设置 }{p:10:——————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:游戏语言}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:窗口大小}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:显示模式}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:操作界面}",135,%y+300
~

if %game_language != 4 jumpf
	lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: 初始遊戲設定 }{p:10:——————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:遊戲語言}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:視窗大小}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:顯示模式}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:操作介面}",135,%y+300
~

if %game_language != 5 jumpf
	lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: Configurazione Iniziale di Gioco }{p:10:——————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:Lingua di Gioco}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:Dimensione Finestra}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:Schermata}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:Interfaccia}",135,%y+300
~

if %game_language != 6 jumpf
	lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: Oyun Ayarları }{p:10:——————}}",135,%y-100
	lsp 301,":s;#FFFFFF`{p:8:Oyun dili}",135,%y
	lsp 302,":s;#FFFFFF`{p:8:Pencere boyutu}",135,%y+100
	lsp 303,":s;#FFFFFF`{p:8:Pencere modu}",135,%y+200
	lsp 304,":s;#FFFFFF`{p:8:Oynanış}",135,%y+300
~

*first_setting2
;Game language button
	spbtn 268,68
	spbtn 269,69
;end

;Display mode button
	spbtn 279,79
	spbtn 280,80
	spbtn 281,81
;end

;Window size button
	spbtn 297,97
	spbtn 298,98
;end

;Interface kb dual button
	spbtn 270,70
	spbtn 271,71
;end

;Interface kb dual button
	spbtn 272,72
;end
~
btnwait %btnRes

if %BtnRes = -1 jumpb
if %BtnRes = -10 jumpb
if %BtnRes = 0 jumpb



;Game language button
	if %BtnRes != 69 jumpf ;left		
		if %Free1 <= 0 getscriptnum %Free1
		dec %Free1
		goto *first_settings_language2		
	~
	if %BtnRes != 68 jumpf ;right
		if %Free1 >= %Free2 mov %Free1,-1
		inc %Free1		
		goto *first_settings_language2
		
		*first_settings_language2	
			getscriptpath $Free4,%Free1
			getscriptpath $Free3,%Free1,1
			operate_config write,$Free4,"game-script"
			operate_config read,$1,"game-script"
			operate_config save 
		goto *first_setting3
	~
;end

;Display mode button
	if %full_window_auto = 1 jumpf	
		if %BtnRes != 79 jumpf 
			operate_config unset,"fullscreen"
			operate_config write,"noval","window"
			operate_config write,"noval","scale"
			operate_config save
			;menu_window
			mov %full_window_auto,1
			gosub *first_settings_full_window_auto
	~
	if %full_window_auto = 2 jumpf
		if %BtnRes != 80 jumpf
			operate_config unset,"window"
			operate_config write,"noval","fullscreen"
			operate_config write,"noval","scale"
			operate_config save
			;menu_full
			mov %full_window_auto,2
			gosub *first_settings_full_window_auto
	~
	if %full_window_auto = 0 jumpf
		if %BtnRes != 81 jumpf
			operate_config unset,"fullscreen"
			operate_config unset,"window"
			operate_config write,"noval","scale"
			operate_config save
			;lsp 373,set_restarted_apply,0,900
			mov %full_window_auto,0
			gosub *first_settings_full_window_auto
	~
;end

;Interface kb dual button
	if %BtnRes != 70 jumpf
	vsp 100,0
	vsp 371,1
	vsp 372,1
	mov %interface_kb_dual,0 : gosub *first_settings_interface_kb_dual
	~
	if %BtnRes != 71 jumpf
	vsp 371,0
	vsp 372,0
	vsp 100,1
	mov %interface_kb_dual,1 : gosub *first_settings_interface_kb_dual
	~
;end

;Window size button
	if %BtnRes != 97 jumpf
		if $window_size = "1280" mov $window_size,"2560" : mov %video_res,0 : goto *first_settings_window_size2
		if $window_size = "1366" mov $window_size,"1280" : mov %video_res,0 : goto *first_settings_window_size2
		if $window_size = "1440" mov $window_size,"1366" : mov %video_res,1 : goto *first_settings_window_size2
		if $window_size = "1600" mov $window_size,"1440" : mov %video_res,1 : goto *first_settings_window_size2
		if $window_size = "1920" mov $window_size,"1600" : mov %video_res,1 : goto *first_settings_window_size2
		if $window_size = "2560" mov $window_size,"1920" : mov %video_res,0 : goto *first_settings_window_size2
		;For Custom
		mov $window_size,"1920" : mov %video_res,0 : goto *first_settings_window_size2
	~
	if %BtnRes != 98 jumpf
		if $window_size = "2560" mov $window_size,"1280" : mov %video_res,1 : goto *first_settings_window_size2
		if $window_size = "1920" mov $window_size,"2560" : mov %video_res,0 : goto *first_settings_window_size2
		if $window_size = "1600" mov $window_size,"1920" : mov %video_res,0 : goto *first_settings_window_size2
		if $window_size = "1440" mov $window_size,"1600" : mov %video_res,1 : goto *first_settings_window_size2
		if $window_size = "1366" mov $window_size,"1440" : mov %video_res,0 : goto *first_settings_window_size2
		if $window_size = "1280" mov $window_size,"1366" : mov %video_res,1 : goto *first_settings_window_size2
		;For Custom
		mov $window_size,"1920" : mov %video_res,0 : goto *first_settings_window_size2

		*first_settings_window_size2
			operate_config write,$window_size,"window-width"
			operate_config save
			;lsp 373,set_restarted_apply,0,900
			gosub *first_settings_window_size
	~
;end

;Apply
if %BtnRes != 72 jumpf
	goto *first_setting_exit
~
;end

goto *first_setting2
return

*first_settings_game_language
	;debug_string "lang: " + $Free3
	mov %game_language,0 ;if $Free3 == unknown
	if $Free3 == "en" mov $Free3,"English" mov %game_language,0
	if $Free3 == "ru" mov $Free3,"Русская" mov %game_language,1
	if $Free3 == "pt" mov $Free3,"Português" mov %game_language,2
	if $Free3 == "cn" mov $Free3,"Chinese Simp." mov %game_language,3
	if $Free3 == "cht" mov $Free3,"Chinese Trad." mov %game_language,4
	if $Free3 == "it" mov $Free3,"Italiano" mov %game_language,5
	if $Free3 == "tr" mov $Free3,"Witch Love" mov %game_language,6
	lsp 273,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}" + $Free3 + "}",1280,%y

	lsp 269,":a/2,0,3;graphics\menu_en\config\config_left.png",1210,%y
	lsp 268,":a/2,0,3;graphics\menu_en\config\config_right.png",1640,%y
return

*first_settings_full_window_auto
if %game_language != 1 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:Окно}",890,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:Окно}",890,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:Во весь экран}",1093,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:Во весь экран}",1093,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:Авто}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:Авто}",1559,%y+200
~
if %game_language != 0 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:Windowed}",850,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:Windowed}",850,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:Fullscreen}",1213,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:Fullscreen}",1213,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:Auto}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:Auto}",1559,%y+200
~
if %game_language != 2 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:Janela}",995,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:Janela}",995,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:Tela cheia}",1213,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:Tela cheia}",1213,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:Auto}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:Auto}",1559,%y+200
~
if %game_language != 3 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:窗口化}",850,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:窗口化}",850,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:全屏幕}",1213,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:全屏幕}",1213,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:自动}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:自动}",1559,%y+200
~
if %game_language != 4 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:視窗化}",850,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:視窗化}",850,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:全螢幕}",1213,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:全螢幕}",1213,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:自动}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:自动}",1559,%y+200
~
if %game_language != 5 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:In Finestra}",850,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:In Finestra}",850,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:Intera}",1280,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:Intera}",1280,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:Auto}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:Auto}",1559,%y+200
~
if %game_language != 6 jumpf
	notif  %full_window_auto = 1 lsp 279,":s;#C7C7C7#FFFFFF`{p:8:Pencereli}",850,%y+200
	if %full_window_auto = 1 lsp 279,":s;#FFFFFF`{p:8:Pencereli}",850,%y+200
	notif  %full_window_auto = 2 lsp 280,":s;#C7C7C7#FFFFFF`{p:8:Tam Ekran}",1213,%y+200
	if %full_window_auto = 2 lsp 280,":s;#FFFFFF`{p:8:Tam Ekran}",1213,%y+200
	notif  %full_window_auto = 0 lsp 281,":s;#C7C7C7#FFFFFF`{p:8:Otomatik}",1559,%y+200
	if %full_window_auto = 0 lsp 281,":s;#FFFFFF`{p:8:Otomatik}",1559,%y+200
~
return



*first_settings_interface_kb_dual
if %game_language != 1 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:Мышь}",1140,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:Мышь}",1140,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
if %game_language != 0 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:KB+Mouse}",1010,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:KB+Mouse}",1010,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
if %game_language != 2 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:KB+Mouse}",1010,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:KB+Mouse}",1010,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
if %game_language != 3 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:键盘鼠标}",1010,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:键盘鼠标}",1010,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
if %game_language != 4 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:鍵盤滑鼠}",1010,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:鍵盤滑鼠}",1010,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
if %game_language != 5 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:KB+Mouse}",1010,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:KB+Mouse}",1010,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
if %game_language != 6 jumpf
	notif %interface_kb_dual = 0 lsp 270,":s;#C7C7C7#FFFFFF`{p:8:KB+Mouse}",1010,%y+300
	if %interface_kb_dual = 0 lsp 270,":s;#FFFFFF`{p:8:KB+Mouse}",1010,%y+300 : vsp 100,0
	notif %interface_kb_dual = 1 lsp 271,":s;#C7C7C7#FFFFFF`{p:8:DualShock}",1377,%y+300
	if %interface_kb_dual = 1 lsp 271,":s;#FFFFFF`{p:8:DualShock}",1377,%y+300
~
return


*first_settings_window_size
	if $window_size = "1280" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1280x720}",1280,%y+100 : jumpf
	if $window_size = "1366" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1366x768}",1280,%y+100 : jumpf
	if $window_size = "1440" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1440х810}",1280,%y+100 : jumpf
	if $window_size = "1600" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1600x900}",1280,%y+100 : jumpf
	if $window_size = "1920" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}1920x1080}",1280,%y+100 : jumpf
	if $window_size = "2560" lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}2560x1440}",1280,%y+100 : jumpf
	if %game_language = 0 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}Custom}",1280,%y+100
	if %game_language = 1 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}Пользовательский}",1280,%y+100
	if %game_language = 2 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}Personalizada}",1280,%y+100
	if %game_language = 3 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}自定义}",1280,%y+100
	if %game_language = 4 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}自定義}",1280,%y+100
	if %game_language = 5 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}Personalizzata}",1280,%y+100
	if %game_language = 6 lsp 299,":s;#FFFFFF`{p:8:{w:350:}{a:c:}{fit}Özel}",1280,%y+100
	~
	lsp 297,":a/2,0,3;graphics\menu_en\config\config_left.png",1210,%y+112
	lsp 298,":a/2,0,3;graphics\menu_en\config\config_right.png",1640,%y+112
return

*first_settings_ok
if %game_language != 1 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:Применить}",800,%y+500
~
if %game_language != 0 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:Apply}",800,%y+500
~
if %game_language != 2 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:Aplicar}",800,%y+500
~
if %game_language != 3 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:应用}",800,%y+500
~
if %game_language != 4 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:套用}",800,%y+500
~
if %game_language != 5 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:Applica}",800,%y+500
~
if %game_language != 6 jumpf
	lsp 272,":s;#C7C7C7#FFFFFF`{p:8:Onayla}",800,%y+500
~
return

*first_setting_exit
mov %firstsetting,4
operate_config save
relaunch

;================================
;first settings end
;================================

*verify

backup_disable "backgrounds","caches","fonts","graphics","legacy","sound","sprites","video","chiru.file","default.cfg","en.txt","en.file","ru.txt","ru.file"
gosub *backup_disable_lang

operate_config u_read,$Free5,"verify"

if $Free5 == "undef" jumpf
if $Free5 == "quick" jumpf
if $Free5 == "full" goto *full_verify
if $Free5 == "once" operate_config u_unset,"verify" : operate_config save : goto *full_verify
if $Free5 == "none" return
if $Free5 == ""

~

mov %Free2,0
mov $Free2,""

fileexist %Free1,"backgrounds\mvip_1cr.png"
if %Free1==0 mov $Free1,verify_backgrounds : gosub *verify_err
fileexist %Free1,"graphics\system\fade\1920x1080.png"
if %Free1==0 mov $Free1,verify_graphics : gosub *verify_err
fileexist %Free1,"sound\bgm\bgm_final.ogg"
if %Free1==0 mov $Free1,verify_sound : gosub *verify_err
fileexist %Free1,"sprites\bea\1\bea_a11_akuwarai1.png"
if %Free1==0 mov $Free1,verify_sprites : gosub *verify_err
fileexist %Free1,"video\720p\no46.mp4"
if %Free1==0 mov $Free1,verify_video : gosub *verify_err

fileexist %Free1,"graphics\locale\project_logo.png"
if %Free1==0 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"video\sub\both_eng.ass"
	if %Free1==0 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"video\sub\58_both_eng.ass"
	if %Free1==0 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\bgm\Treasure.png"
	if %Free1==0 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\voice\27\50700008.ogg",%Free2
	if %Free1==0 || %Free2!=36912 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\se\umise_072.ogg",%Free2
	if %Free1==0 || %Free2!=60852 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\bgm\umib_063.ogg",%Free2
	if %Free1==0 || %Free2!=14990832 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\bgm\op.ogg",%Free2
	if %Free1==0 || %Free2!=3171336 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\bgm\op.ogg",%Free2
	if %Free1==0 || %Free2!=3171336 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"graphics\locale_en\end_4a.png",%Free2
	if %Free1==0 || %Free2!=24299420 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"sound\voice\01\51500238.ogg",%Free2
	if %Free1==0 || %Free2!=21406 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"game.hash"
	if %Free1==0 mov $Free1,verify_updates : gosub *verify_err : jumpf
	fileexist %Free1,"locale_tr_game.hash"
	if %Free1==0 mov $Free1,verify_updates : gosub *verify_err : jumpf
~

api_compat %Free1,2,2,0
if %Free1==0 mov $Free1,verify_engine : gosub *verify_err

if %Free2==1 lsp 50,":s;#FFFFFF`{p:11:"+$Free2+"}", 150,50 : print 1 : click : end

fileexist %Free1,"locale_tr_game.hash",%Free2
if %Free2!=%last_locale_gamehash goto *full_verify
fileexist %Free1,"game.hash",%Free2
if %Free2!=%last_gamehash goto *full_verify

return

*verify_err

mov %Free2,1

debug_string "Error: "+$Free1
add $Free2,$Free1+"{n}"

return

*verify_chiru

fileexist %Free1,"backgrounds\cha_p1b.png"
if %Free1==0 goto *verify_chiru_err

fileexist %Free1,"sound\bgm\umib_194.ogg"
if %Free1==0 goto *verify_chiru_err

fileexist %Free1,"sprites\ama\1\ama_a14_defo1.png"
if %Free1==0 goto *verify_chiru_err

fileexist %Free1,"chiru.none"
if %Free1!=0 goto *verify_chiru_err

fileexist %Free1,"graphics\locale\text008.png",%Free2
if %Free1==0 || %Free2!=801805 goto *verify_chiru_err

return

*verify_chiru_err

lsp 28,":c;graphics\colour\black.png",0,0,200
print 42

lsp 22,":s;#FFFFFF`{p:8:Looking for all the necessary assets...}",25,180
print 42
wait2 7000

lsp 23,":s;#FFFFFF`{p:8:Verifying chiru files...}",25,260
print 42
wait2 7000

lsp 24,":s;#FFFFFF`{p:8:Creating cache files...}",25,340
print 42
wait2 3000
fede 0,4000

lsp 25,":s;#FFFFFF`{p:8:Files are {f:5:missing}!}",25,420
print 62
wait2 600

lsp 26,":s;#FFFFFF`{p:8:{f:5:Checked and voided!}}",25,500
talsp 28,256
chvol 0,%dlg_vol
print 1
dwave 0,"sound\voice\47\54600055.ogg" 
seplay 1,59,100
waitvoice
lsp 27,":s;#FFFFFF`{p:8:{f:5:{c:FF0000:Checked and voided!}}}",25,580
print 1
dwave 0,"sound\voice\47\54600056.ogg"
seplay 2,59,100
waitvoice
dwave 0,"sound\voice\47\54600057.ogg" 
seplay 3,59,100
waitvoice
dwave 0,"sound\voice\47\64600257.ogg" 
seplay 4,59,100
waitvoice
dwave 0,"sound\voice\47\64600258.ogg" 
seplay 5,59,100
waitvoice
dwave 0,"sound\voice\47\64600259.ogg" 
seplay 2,66,100
seplay 3,73,100
waitvoice
dwave 0,"sound\voice\47\64600260.ogg" 
seplay 1,74,100
seplay 2,72,100
waitvoice
dwave 0,"sound\voice\47\64600261.ogg" 
seplay 1,1006,100
seplay 2,57,100
waitvoice

goto *switch_game_q

*verify_script_date
	timestamp %Free1

	if releasedate + 15552000 > %Free1 return

	; border_pad_push 10
	; lsph t_warning_lsp,":s;#FF0000`{p:1:{o:10:"+verification_ancient+"}}",70,920
	; border_pad_pop
	debug_string "This release may be outdated, assuming final version"
return

*full_verify

border_pad_push 15
set_name_window_non

lsp 300,":s;#FFFFFF`{p:10:——————}{p:9:{a:c: "+verification_title+" }{p:10:——————}}",135,30
lsp 303,":a;>1650,800,#CCCCCC",135,150
lsp 301,":s;#FFFFFF`"+verification_verifying,140,155
lsp 304,":s;#FFFFFF`{p:11:"+verification_legend+"{f:6:{c:FFA500:●}}"+verification_modified+" {f:6:{c:FF0000:●}}"+verification_missing+"}",135,980

border_pad_pop

flush 1

mov $Free1,""
verify_files %Free1,"game.hash",$Free1
if %Free1 == 0 mov $Free2,verification_good : fileexist %Free3,"game.hash",%last_gamehash : goto *full_verify_locale
if %Free1 == 1 mov $Free2,verification_bad
if %Free1 == -1 mov $Free2,verification_nohash
if %Free1 == -2 || %Free1 == -3 mov $Free2,verification_unsupported
if %Free1 == -4 mov $Free2,verification_outdated
mov $Free3,verification_end

goto *full_verify_locale_skip

*full_verify_locale

verify_files %Free1,"locale_tr_game.hash",$Free1
if %Free1 == 0 mov $Free2,verification_good : fileexist %Free3,"locale_tr_game.hash",%last_locale_gamehash
if %Free1 == 1 mov $Free2,verification_bad
if %Free1 == -1 mov $Free2,verification_nohash
if %Free1 == -2 || %Free1 == -3 mov $Free2,verification_unsupported
if %Free1 == -4 mov $Free2,verification_outdated
mov $Free3,verification_end

*full_verify_locale_skip

;mov $Free1,""
;verify_files %Free1,"game.hash",$Free1

_csp 301
lbsp2 301,":s;#FFFFFF`"+verification_verifying+$Free2+$Free1+$Free3,140,155
getspsize2 301,%Free7,%Free8
aspt2 xpos,301,%Free7/2 + 140
aspt2 ypos,301,%Free8/2 + 155
aspt2 scroll_h,301,790
lsph 99,":a/2,0,3;graphics\system\wnd\uoncur.png",1740,155 - 25
lsph 98,":a/2,0,3;graphics\system\wnd\uoffcur.png",1740,900 + 25
scroll_exceeds2 %Free2,301
flush 1

*full_verify_loop

	btndef ""
	transbtn

	if %Free2 = 1 vsp 99,1 : vsp 98,1 : spbtn 99,99 : spbtn 98,98 : flush 1

	btnwait2 %BtnRes

	if %BtnRes=99 spt2 scroll_y,301,-170,166,1 : sptwait2 scroll_y,301 ;button up
	if %BtnRes=98 spt2 scroll_y,301,170,166,1 : sptwait2 scroll_y,301 ;button down
	;if %BtnRes = 0 jumpf
	;if %BtnRes = r_exit_lsp jumpf
	if %BtnRes = -1 jumpf
	if %BtnRes = -10 jumpf

	goto *full_verify_loop

~

_csp 98
_csp 99
_csp 300,304
_csp2 301

return

*load_font_preference
	mov %font_preference,0

	mov $Free1,"hash#"
	operate_config read,$Free2,"font-multiplier"
	add $Free1,$Free2
	operate_config read,$Free2,"font-overrides"
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\default.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font1.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font2.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font3.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font4.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font5.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font6.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font7.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font8.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font9.ttf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\default.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font1.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font2.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font3.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font4.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font5.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font6.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font7.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font8.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2
	fileexist %Free2,"fonts\usr\font9.otf",%Free3
	itoa $Free2,%Free3
	add $Free1,$Free2

	if $Free1 != $font_preference jumpf
	fileexist %Free1,"caches\goa_memory1.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\goa_memory2.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\goa_memory3.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\goa_memory4.png"
	if %Free1 == 0 jumpf
	;Only for chiru
	if %CHIRU_MODE = 0 return
	fileexist %Free1,"caches\kakera_memory1.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory2.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory3.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory4.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory5.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory6.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory7.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory8.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory9.png"
	if %Free1 == 0 jumpf
	fileexist %Free1,"caches\kakera_memory10.png"
	if %Free1 == 0 jumpf
	return
	
	~

#locale_import "caches.txt"

return

*incomplete
set_window_simple 25
csp_rst
bg black,1
lsp 25,work_in_progress,25,100
lsp 26,work_in_progress_ok,25,180
print 1

click
goto *quick_reload

;======================
;CHARS_MENU
;======================
*rmenu_main_new
;========ДЛЯ ТЕСТА================
;mov %scenario_Number,2
;mov %r_side,1
;mov %r_display_side,1
;mov %r_display,2
;mov %r_for_title,0
;gstc 287
;gstg 1
;gstg 2
;gstc 288
;mov %play_scene,30010
;mov %play_scene,40260
;mov %r_display_cha_ma,ma3_bea
;mov ?r[but][condition],1
;mov ?r[hid][condition],2
;gosub *rmenu_main_ep2_scene_150
;mov %r_u_tea_flg,1
;mov %r_ber_flg,1
;==================================

;stopwatch "rmenu_main_new start"

if %r_display = 0 goto *rmenu_main_char
if %r_display = 1 goto *rmenu_main_tips
if %r_display = 2 goto *rmenu_main_tips

*rmenu_main_char
	border_pad_push 5
	textoff
	monocro off

	;in ep3 sometimes we show witch side by default
	if %scenario_Number = 3 && %r_side = 0 gosub *rmenu_play_scene_ep3_decide

*rmenu_main_new_reload
	;basis lsp
	lsp r_black_lsp,":a;graphics\menu\SystemBtn\black_buttons.png",0,0
	lsp r_bg_lsp,":c;graphics\menu\chars\bg_chars.png",0,0
	lsp 100,chars_caption,20,0
	lsp r_txt_lsp,":a;graphics\menu\chars\chars_right.png",900,150
	lsp r_exit_lsp,set_exit,0,0
	lsph 99,":a/2,0,3;graphics\system\wnd\uoncur.png",1740 - 480,155 - 25
	lsph 98,":a/2,0,3;graphics\system\wnd\uoffcur.png",1740 - 480,900 + 25

	align_buttons_r r_exit_lsp

	;jump in menu
	;rondo
	if %scenario_Number = 1 goto *rmenu_main_eps_1
	if %scenario_Number = 2 && %r_side = 0 goto *rmenu_main_eps_2
	if %scenario_Number = 2 && %r_side = 1 goto *rmenu_main_eps_2_2
	if %scenario_Number = 3 && %r_side = 0 goto *rmenu_main_eps_3
	if %scenario_Number = 3 && %r_side = 1 goto *rmenu_main_eps_3_2
	if %scenario_Number = 4 && %r_display_side = 0 goto *rmenu_main_eps_4
	if %scenario_Number = 4 && %r_display_side = 1 goto *rmenu_main_eps_4_2
	if %scenario_Number = 4 && %r_display_side = 2 goto *rmenu_main_eps_4_3
	;chiru
	if %scenario_Number = 5 && %r_display_side = 0 goto *rmenu_main_eps_5
	if %scenario_Number = 5 && %r_display_side = 1 goto *rmenu_main_eps_5_2
	if %scenario_Number = 6 && %r_display_side = 0 goto *rmenu_main_eps_6
	if %scenario_Number = 6 && %r_display_side = 1 goto *rmenu_main_eps_6_2
	if %scenario_Number = 6 && %r_display_side = 2 goto *rmenu_main_eps_6_3
	if %scenario_Number = 7 && %r_display_side = 0 goto *rmenu_main_eps_7
	if %scenario_Number = 7 && %r_display_side = 1 goto *rmenu_main_eps_7_2
	if %scenario_Number = 7 && %r_display_side = 2 goto *rmenu_main_eps_7_3
	if %scenario_Number = 8 && %r_display_side = 0 goto *rmenu_main_eps_8
	if %scenario_Number = 8 && %r_display_side = 1 goto *rmenu_main_eps_8_2
	if %scenario_Number = 8 && %r_display_side = 2 goto *rmenu_main_eps_8_3

	error "We should never return from here"

;=====================
*rmenu_main_eps
;==========EP1===========
*rmenu_main_eps_1
	if %r_u_tea_flg = 0 lsp r_cha_back_lsp,":a;graphics\menu\chars\chars_left_line.png",100,150 : lsp r_hana_lsp,r_hana,1148,180
	if %r_u_tea_flg = 1 lsp r_cha_back_lsp,":a;graphics\menu\chars\chars_left.png",100,150 : lsp r_hana_lsp,r_hana_witch,1148,180

	gosub *bt_ep1_def

	mov %load_for_title,0
	mov ?r[bea][condition],-1
	mov ?r[ber][condition],-1

	for %tmp = 1 to char_max
		if ?r[%tmp][condition] >= ?r[%tmp][condition_end] mov ?r[%tmp][condition],?r[%tmp][condition_end]
	next

	if %r_for_title = 1 && %r_side = 0 gosub *r_for_title_ep1
	if %r_for_title = 1 && %r_side = 1 gosub *r_u_tea_flg_ep1
	if %r_u_tea_flg = 1 gosub *r_u_tea_flg_ep1
	if %r_ber_flg = 1 gosub *r_ber_flg_ep1
	if %r_tea_bea = 1 gosub *r_tea_bea_flg_ep1

	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP2===========
*rmenu_main_eps_2
	;If the back of the tea party episode 2, skip processing *rmenu_main_ep2_2.
	notif %r_for_title = 1 if %play_scene >= 2010 goto *rmenu_main_eps_2_2

	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	lsp r_hana_lsp,r_hana,1148,180

	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0

	gosub *bt_ep2_def
	
	for %tmp = 1 to char_max_ep2
		mov ?r[%tmp][condition],1
	next
	mov ?r[bea][condition],-1
	mov ?r[ber][condition],-1
	mov ?r[lam][condition],-1

	for %tmp = 1 to char_max_ep2
		mov ?r[%tmp][r_ishou],1
	next

	if %r_display_cha == 0 mov %r_display_cha,kin

	gosub *rmenu_play_scene_ep2

	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep2

	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP2_2===========
*rmenu_main_eps_2_2
	;lsp line menu
	if %r_u_tea_flg = 0 lsp r_cha_back_lsp,":a;graphics\menu\chars\chars_left_line_ep2_2.png",100,150
	if %r_u_tea_flg = 1 lsp r_cha_back_lsp,":a;graphics\menu\chars\chars_left.png",100,150
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep2_2_def

	for %tmp = 1 to char_max_ep2 : mov ?r[%tmp][condition],-1 : next
		
	mov %load_for_title,0
	mov %r_side,1
	;mov %r_u_tea_flg,0

	for %tmp = 1 to char_max_ep2_2
		mov ?r[%tmp][condition],1
	next

	for %tmp = 1 to char_max_ep2_2
		mov ?r[%tmp][r_ishou],1
	next

	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma_bea

	if ?r[%r_display_cha][condition]= -1 mov %r_display_cha,0

	if %r_for_title = 1 gosub *r_for_title_0_ep2_2

	gosub *rmenu_play_scene_ep2_2
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP3===========
*rmenu_main_eps_3
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3.png"

	lsp r_hana_lsp,r_hana,1148,180

	gosub *bt_ep3_def

	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0

	for %tmp = 1 to char_max_ep3
		mov ?r[%tmp][condition],1
	next
	mov ?r[bea][condition],-1
	mov ?r[ber][condition],-1
	mov ?r[lam][condition],-1
	mov ?r[enj][condition],-1

	for %tmp = 1 to char_max_ep3
		mov ?r[%tmp][r_ishou],1
	next

	if %r_display_cha == 0 mov %r_display_cha,kin

	gosub *rmenu_play_scene_ep3

	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep3
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP3_2===========
*rmenu_main_eps_3_2
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3_2.png"
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep3_2_def

	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0

	for %tmp = 1 to char_max_ep3_2
		mov ?r[%tmp][condition],-1
	next

	for %tmp = 1 to char_max_ep3_2
		mov ?r[%tmp][r_ishou],1
	next

	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma3_bea

	gosub *rmenu_play_scene_ep3_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep3_2

	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP4===========
*rmenu_main_eps_4
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	lsp r_hana_lsp,r_hana,1148,180
	
	gosub *bt_ep4_def
	
	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0
	mov %r_display_side,0
	mov %mchar_state,0

	for %tmp = 1 to char_max_ep4
		mov ?r[%tmp][r_ishou],1
	next

	for %tmp = 1 to 18 : mov ?r[%tmp][condition],1 : next
	for %tmp = 20 to char_max_ep4 : mov ?r[%tmp][condition],-1 : next

	if %r_display_cha == 0 mov %r_display_cha,kin
	
	gosub *rmenu_play_scene_ep4
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep4
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP4_2===========
*rmenu_main_eps_4_2
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_2.png"
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep4_2_def
	
	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,1

	for %tmp = 1 to char_max_ep4_2
		mov ?r[%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep4_2
		mov ?r[%tmp][condition],-1
	next
	
	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma4_bea
	
	gosub *rmenu_play_scene_ep4_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep4_2
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
	
;==========EP4_3===========
*rmenu_main_eps_4_3
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"
	
	lsp r_hana_lsp,r_hana_ange,1148,180
	
	gosub *bt_ep4_3_def
	
	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0
	mov %r_display_side,2
	
	for %tmp = 1 to char_max_ep4_3
		mov ?r[%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep4_3 : mov ?r[%tmp][condition],-1 : next
	
	if %r_display_cha_enj == 0 mov %r_display_cha_enj,enj_enj
	
	gosub *rmenu_play_scene_ep4_3
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%r_display_cha_enj][condition] <= 0 mov %r_display_cha_enj,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep4_3
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP5===========
*rmenu_main_eps_5
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	lsp r_hana_lsp,r_hana,1148,180
	
	gosub *bt_ep5_def
	
	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0
	mov %r_display_side,0

	for %tmp = 1 to 18
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next
	mov ?r[%scenario_Number][eri][r_ishou],1

	for %tmp = 1 to 18 : mov ?r[%scenario_Number][%tmp][condition],1 : next
	mov ?r[%scenario_Number][eri][condition],-1

	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	
	if %r_display_cha == 0 mov %r_display_cha,kin
	
	gosub *rmenu_play_scene_ep5
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep5
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP5_2===========
*rmenu_main_eps_5_2
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep5_2.png"
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep5_2_def
	
	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,1
	mov %cha_text_page,1

	for %tmp = 1 to ma5_enj
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][condition],-1
	next
	
	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma5_bea
	
	gosub *rmenu_play_scene_ep5_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep5_2
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new

;==========EP6===========
*rmenu_main_eps_6
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"
	
	lsp r_hana_lsp,r_hana,1148,180
	
	gosub *bt_ep6_def
	
	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0
	mov %r_display_side,0

	for %tmp = 1 to 18
		mov ?r[6][%tmp][r_ishou],1
	next
	mov ?r[6][eri][r_ishou],1

	for %tmp = 1 to 18 : mov ?r[6][%tmp][condition],1 : next
	mov ?r[6][eri][condition],-1
	
	if %r_display_cha == 0 mov %r_display_cha,kin
	
	gosub *rmenu_play_scene_ep6
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[6][%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep6
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP6_2===========
*rmenu_main_eps_6_2
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_2.png"
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep6_2_def
	
	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,1
	mov %cha_text_page,1

	for %tmp = 1 to ma5_cor
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][condition],-1
	next
	
	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma5_ber
	
	gosub *rmenu_play_scene_ep6_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0

	if %r_for_title = 1 gosub *r_for_title_0_ep6_2
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP6_3===========
*rmenu_main_eps_6_3
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep6_3.png"
	
	lsp r_hana_lsp,r_hana_ange,1148,180
	
	gosub *bt_ep6_3_def
	
	mov %load_for_title,0
	mov %r_side,2
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,2

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][condition],-1
	next
	
	if %r_display_cha_enj == 0 mov %r_display_cha_enj,ma5_enj
	
	gosub *rmenu_play_scene_ep6_3
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha_enj][condition]= -1 mov %r_display_cha_enj,0

	if %r_for_title = 1 gosub *r_for_title_0_ep6_3
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP7===========
*rmenu_main_eps_7
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep7.png"
	
	lsp r_hana_lsp,r_hana,1148,180
	
	gosub *bt_ep7_def
	
	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0
	mov %r_display_side,0

	for %tmp = 1 to 18
		mov ?r[7][%tmp][r_ishou],1
	next

	for %tmp = 1 to 18 : mov ?r[7][%tmp][condition],1  :next
	mov ?r[7][RIO][condition],-1
	mov ?r[7][bea][condition],-1
	
	if %r_display_cha == 0 mov %r_display_cha,kin
	
	gosub *rmenu_play_scene_ep7
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[7][%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep7
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP7_2===========
*rmenu_main_eps_7_2
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep7_2.png"
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep7_2_def
	
	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,1
	mov %cha_text_page,1

	for %tmp = 1 to ma5_rg_6
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][condition],-1
	next
	
	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma5_bea
	
	gosub *rmenu_play_scene_ep7_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0

	if %r_for_title = 1 gosub *r_for_title_0_ep7_2
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP8===========
*rmenu_main_eps_8
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep3.png"
	
	lsp r_hana_lsp,r_hana,1148,180
	
	gosub *bt_ep8_def
	
	mov %load_for_title,0
	mov %r_side,0
	mov %r_u_tea_flg,0
	mov %r_display_side,0

	for %tmp = 1 to 18
		mov ?r[8][%tmp][r_ishou],1
	next

	for %tmp = 1 to 18 : mov ?r[8][%tmp][condition],1  :next
	mov ?r[8][EN2][condition],-1
	mov ?r[8][bea][condition],-1
	
	if %r_display_cha == 0 mov %r_display_cha,kin
	
	gosub *rmenu_play_scene_ep8
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[8][%r_display_cha][condition]= -1 mov %r_display_cha,0
	
	if %r_for_title = 1 gosub *r_for_title_0_ep8
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP8_2===========
*rmenu_main_eps_8_2
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left.png"
	
	lsp r_hana_lsp,r_hana_witch,1148,180
	
	gosub *bt_ep8_2_def
	
	mov %load_for_title,0
	mov %r_side,1
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,1
	mov %cha_text_page,1

	for %tmp = 1 to ma5_ENJ
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][condition],-1
	next
	
	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma5_lam
	
	gosub *rmenu_play_scene_ep8_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0

	if %r_for_title = 1 gosub *r_for_title_0_ep8_2
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;==========EP8_3===========
*rmenu_main_eps_8_3
	;lsp line menu
	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep5_2.png"
	
	lsp r_hana_lsp,r_hana_ange,1148,180
	
	gosub *bt_ep7_3_def
	
	mov %load_for_title,0
	mov %r_side,2
	mov %r_u_tea_flg,0
	mov %r_s556_flg,0
	mov %r_display_side,2

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][r_ishou],1
	next

	for %tmp = 1 to char_max_ep5_2
		mov ?r[%scenario_Number][%tmp][condition],-1
	next

	if %r_display_cha_ma == 0 mov %r_display_cha_ma,ma5_enj

	gosub *rmenu_play_scene_ep8_2
	
	;lsp line menu
	lsp r_cha_back_lsp,$r_cha_back,100,150
	
	if ?r[%scenario_Number][%r_display_cha_ma][condition]= -1 mov %r_display_cha_ma,0

	if %r_for_title = 1 gosub *r_for_title_0_ep8_3
	
	gosub *rmenu_display_new
goto *rmenu_button_reconfigure_new
;=====================
*r_for_title_ep1
	for %tmp = 1 to char_max
		mov ?r[%tmp][condition],1
	next
	
	mov ?r[bea][itiran_x],200 : mov ?r[bea][itiran_y],340
	mov %r_display_cha,but
return
;=====================
*r_u_tea_flg_ep1
	for %tmp = 1 to char_max
		mov ?r[%tmp][condition],-1
	next
	
	;State set
	mov ?r[bea][condition],1

	;Modification of the display position
	mov ?r[bea][itiran_x],441 : mov ?r[bea][itiran_y],490 ;position Ura_tea_chars
return
;=====================
*r_ber_flg_ep1
	;Display setting of Ber
	mov ?r[ber][condition],1
	mov ?r[bea][itiran_x],353 : mov ?r[bea][itiran_y],490 ;position Ura_tea_chars
	mov ?r[ber][itiran_x],511 : mov ?r[ber][itiran_y],490 ;position Ura_tea_chars
return
;=====================
*r_tea_bea_flg_ep1
	mov ?r[bea][condition],1 : mov ?r[bea][itiran_x],200 : mov ?r[bea][itiran_y],340 ;position tea_chars
return
;=====================
*r_for_title_ep2
	notif %r_for_title = 1 jumpf
	if %r_display > 0 jumpf	
		if %r_display_cha = geo && ?r[geo][condition] = 1 lsp r_change_lsp,r_change,0,0
		if %r_display_cha = sha && ?r[sha][condition] = 1 lsp r_change_lsp,r_change,0,0
		if %r_display_cha = kan && ?r[kan][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return
;=====================
*r_for_title_0_ep2
	for %tmp = 1 to char_max_ep2
		mov ?r[%tmp][condition],1
	next
	
	;Also see Beatrice, Bern, lam is hidden
	mov ?r[ber][condition],-1
	mov ?r[lam][condition],-1
	mov ?r[ber][itiran_x],128 : mov ?r[ber][itiran_y],144
	mov %play_scene,3000
	mov %r_display_cha,but
return
;=====================
*r_for_title_0_ep2_2
	for %tmp = 1 to char_max_ep2_2
		mov ?r[%tmp][condition],1
	next
	mov %r_display_cha,ma_bea
	mov %play_scene,3000

	;amsp r_black_lsp,0,0,0
return
;=====================
*r_for_title_ep3_2
	notif %r_for_title = 1 jumpf
	if %r_display > 0 jumpf
		if %r_display_cha_ma = ma3_ev2 && ?r[ma3_ev2][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return
;=====================
*r_for_title_0_ep3
	for %tmp = 1 to char_max_ep3
		mov ?r[%tmp][condition],1
	next

	mov ?r[ber][condition],-1
	mov ?r[lam][condition],-1
	mov ?r[bea][itiran_x],200 : mov %tmp,52 : add %tmp,r_top_y : mov ?r[bea][itiran_y],340
	mov ?r[enj][itiran_x],720 : mov %tmp,96 : add %tmp,r_top_y : mov ?r[enj][itiran_y],490
	mov ?r[mar][itiran_x],590 : mov %tmp,140 : add %tmp,r_top_y : mov ?r[mar][itiran_y],640

	mov %play_scene,33000
	mov %r_display_cha,enj : mov %mchar_state,2
	mov %r_display,0
return
;=====================
*r_for_title_0_ep3_2
	for %tmp = 1 to char_max_ep3_2
		mov ?r[%tmp][condition],1
	next

	mov %r_display_cha_ma,ma3_enj
	mov %play_scene,33000
	;amsp r_black_lsp,0,0,0
return
;=====================
*r_for_title_ep4_3
	notif %r_for_title = 1 jumpf
		if %r_display > 0 jumpf
			if %r_display_cha_enj = enj_enj && ?r[enj_enj][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return
;=====================
*r_for_title_0_ep4
	for %tmp = 1 to char_max_ep4
		mov ?r[%tmp][condition],1
	next

	mov ?r[ber][condition],-1
	mov ?r[lam][condition],-1
	mov ?r[enj][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	mov %play_scene,43000

	mov %r_display_cha,but
return
;=====================
*r_for_title_0_ep4_2
	for %tmp = 1 to char_max_ep4_2
		mov ?r[%tmp][condition],1
	next

	mov ?r[ma4_s556][condition],2 ;s556 die
	;gosub *bgm_mode_rnd_bg_majo
	;mov $r_bg_path,$tmp
	;lsp r_bg_lsp,$r_bg_path,0,0

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_2.png"

	mov %r_display_cha_ma,ma4_bea
	mov %play_scene,43000
	;amsp r_black_lsp,0,0,0
return
;=====================
*r_for_title_0_ep4_3
	for %tmp = 1 to char_max_ep4_3
		mov ?r[%tmp][condition],1
	next
	;mov ?r[enj_ber][condition],-1

	mov $r_cha_back,":a;graphics\menu\chars\chars_left_line_ep4_3.png"

	mov %r_display_cha_enj,enj_enj
	mov %play_scene,43000
	;amsp r_black_lsp,0,0,0
return
;=====================
*r_for_title_0_ep5
	for %tmp = 1 to 18
		mov ?r[%scenario_Number][%tmp][condition],1
	next

	mov ?r[%scenario_Number][eri][condition],1

	;mov $r_cha_back,":a;graphics\menu\chars\chars_left_line.png"

	mov %play_scene,53000

	if %UMINEKOEND_TIPS_CHA_FLG <= 5 mov %UMINEKOEND_TIPS_CHA_FLG,0
	mov %r_display_cha,but : mov %mchar_state,2
	;mov %r_display,0
return
;=====================
*r_for_title_ep5_2
	notif %r_for_title = 1 jumpf
		;change clothing chars
		if %r_display > 0 jumpf
			if %r_display_cha_ma = ma5_dla && ?r[%scenario_Number][ma5_dla][condition] = 1 lsp r_change_lsp,r_change,0,0
	~	
return
;=====================
*r_for_title_0_ep5_2
	notif %scenario_Number = 5 jumpf
		mov ?r[5][ma5_but][condition],1
		mov ?r[5][ma5_WAL][condition],1
		mov ?r[5][ma5_BEA][condition],1
		mov ?r[5][ma5_LAM][condition],1
		mov ?r[5][ma5_BER][condition],1
		mov ?r[5][ma5_rg][condition],1
		mov ?r[5][ma5_rg_1][condition],1
		mov ?r[5][ma5_rg_2][condition],1
		mov ?r[5][ma5_rg_3][condition],1
		mov ?r[5][ma5_rg_4][condition],1
		mov ?r[5][ma5_rg_5][condition],1
		mov ?r[5][ma5_rg_6][condition],1
		;mov ?r[5][ma5_s][condition],1
		mov ?r[5][ma5_s00][condition],1
		mov ?r[5][ma5_s410][condition],1
		mov ?r[5][ma5_s45][condition],1
		mov ?r[5][ma5_s556][condition],2
		mov ?r[5][ma5_dla][condition],1
		;mov ?r[5][ma5_k][condition],1
		mov ?r[5][ma5_RON][condition],1
		mov ?r[5][ma5_GAP][condition],1
		mov ?r[5][ma5_eri][condition],1
		mov ?r[5][ma5_cor][condition],1
		mov ?r[5][ma5_ger][condition],1
	~
	mov %r_display_cha_ma,ma5_ber : mov %mchar_state,2
	mov %play_scene,53000
	if %UMINEKOEND_TIPS_CHA_FLG <= 6 mov %UMINEKOEND_TIPS_CHA_FLG,0
return
;=====================
*r_for_title_0_ep6
	for %tmp = 1 to 18
		mov ?r[6][%tmp][condition],1
	next

	mov ?r[6][eri][condition],1

	mov %play_scene,53000
	if %UMINEKOEND_TIPS_CHA_FLG <= 6 mov %UMINEKOEND_TIPS_CHA_FLG,0
	mov %r_display_cha,but
	;mov %r_display,0
return
;=====================
*r_for_title_0_ep6_2
	notif %scenario_Number = 6 jumpf
		mov ?r[6][ma5_but][condition],1
		mov ?r[6][ma5_WAL][condition],1
		mov ?r[6][ma5_BEA][condition],1
		mov ?r[6][ma5_BE2][condition],1
		mov ?r[6][ma5_LAM][condition],1
		mov ?r[6][ma5_BER][condition],1
		mov ?r[6][ma5_rg][condition],1
		mov ?r[6][ma5_rg_1][condition],1
		mov ?r[6][ma5_rg_2][condition],1
		mov ?r[6][ma5_rg_3][condition],1
		mov ?r[6][ma5_rg_4][condition],1
		mov ?r[6][ma5_rg_5][condition],1
		mov ?r[6][ma5_rg_6][condition],1
		mov ?r[6][ma5_s00][condition],1
		mov ?r[6][ma5_s410][condition],1
		mov ?r[6][ma5_s45][condition],1
		mov ?r[6][ma5_s556][condition],2
		mov ?r[6][ma5_dla][condition],1
		mov ?r[6][ma5_RON][condition],1
		mov ?r[6][ma5_GAP][condition],1
		mov ?r[6][ma5_eri][condition],1
		mov ?r[6][ma5_cor][condition],1
		mov ?r[6][ma5_ger][condition],1
		mov ?r[6][ma5_GOA][condition],1
		mov ?r[6][ma5_zep][condition],1
		mov ?r[6][ma5_fur][condition],1
	~
	mov %r_display_cha_ma,ma5_ber
	;amsp r_black_lsp,0,0,0

	if %UMINEKOEND_TIPS_CHA_FLG <= 6 mov %UMINEKOEND_TIPS_CHA_FLG,0
return
;=====================
*r_for_title_0_ep6_3
		mov ?r[%scenario_Number][ma5_enj][condition],1
		mov ?r[%scenario_Number][ma5_AMA][condition],1
		mov ?r[%scenario_Number][ma5_FEA][condition],1

	mov %r_display_cha_enj,ma5_enj
	;amsp r_black_lsp,0,0,0

	if %UMINEKOEND_TIPS_CHA_FLG <= 6 mov %UMINEKOEND_TIPS_CHA_FLG,0
return
;=====================
*r_for_title_0_ep7
	for %tmp = 1 to 18
		mov ?r[7][%tmp][condition],1
	next

	mov ?r[7][RIO][condition],1

	mov %play_scene,53000

	if %UMINEKOEND_TIPS_CHA_FLG <= 7 mov %UMINEKOEND_TIPS_CHA_FLG,0
	mov %r_display_cha,but
	mov %r_display,0
return
;=====================
*r_for_title_ep7_2
	notif %r_for_title = 1 jumpf
		;change clothing chars
		if %r_display > 0 jumpf
			;if %r_display_cha_ma = ma5_bea && ?r[%scenario_Number][ma5_bea][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg && ?r[%scenario_Number][ma5_rg][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_1 && ?r[%scenario_Number][ma5_rg_1][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_2 && ?r[%scenario_Number][ma5_rg_2][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_3 && ?r[%scenario_Number][ma5_rg_3][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_4 && ?r[%scenario_Number][ma5_rg_4][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_5 && ?r[%scenario_Number][ma5_rg_5][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_6 && ?r[%scenario_Number][ma5_rg_6][condition] = 1 lsp r_change_lsp,r_change,0,0			
	~	
return
*r_for_title_ep8_2
  notif %r_for_title = 1 jumpf
    ;change clothing chars
    if %r_display > 0 jumpf
      if %r_display_cha_ma = ma5_dla && ?r[%scenario_Number][ma5_dla][condition] = 1 lsp r_change_lsp,r_change,0,0
      if %r_display_cha_ma = ma5_eri && ?r[%scenario_Number][ma5_eri][condition] = 1 lsp r_change_lsp,r_change,0,0
      if %r_display_cha_ma = ma5_en2 && ?r[%scenario_Number][ma5_en2][condition] = 1 lsp r_change_lsp,r_change,0,0
  ~
return
;=====================
*r_for_title_0_ep7_2
	notif %scenario_Number = 7 jumpf
		mov ?r[7][ma5_WAL][condition],1
		mov ?r[7][ma5_BEA][condition],1
		mov ?r[7][ma5_BER][condition],1
		mov ?r[7][ma5_rg][condition],1
		mov ?r[7][ma5_rg_1][condition],1
		mov ?r[7][ma5_rg_2][condition],1
		mov ?r[7][ma5_rg_3][condition],1
		mov ?r[7][ma5_rg_4][condition],1
		mov ?r[7][ma5_rg_5][condition],1
		mov ?r[7][ma5_rg_6][condition],1
		mov ?r[7][ma5_mar][condition],1
		mov ?r[7][ma5_RON][condition],1
		mov ?r[7][ma5_GAP][condition],1
		mov ?r[7][ma5_zep][condition],1
		mov ?r[7][ma5_fur][condition],1
		mov ?r[7][ma5_WIL][condition],1
		mov ?r[7][ma5_CUR][condition],1
	~

	mov %r_display_cha_ma,ma5_ber
	;amsp r_black_lsp,0,0,0

	if %UMINEKOEND_TIPS_CHA_FLG <= 7 mov %UMINEKOEND_TIPS_CHA_FLG,0
return
;=====================
*r_for_title_0_ep7_3
return
;=====================
*r_for_title_0_ep8
	for %tmp = 1 to 18
		mov ?r[8][%tmp][condition],1
	next

	mov ?r[8][EN2][condition],1
	mov ?r[8][bea][condition],1

	mov %play_scene,53000

	if %UMINEKOEND_TIPS_CHA_FLG <= 8 mov %UMINEKOEND_TIPS_CHA_FLG,0
	mov %r_display_cha,but
	mov %r_display,0
return
;=====================
*r_for_title_0_ep8_2
	notif %scenario_Number = 8 jumpf
		mov ?r[8][ma5_WAL][condition],1
		mov ?r[8][ma5_LAM][condition],1
		mov ?r[8][ma5_BER][condition],1
		mov ?r[8][ma5_rg][condition],1
		mov ?r[8][ma5_rg_1][condition],1
		mov ?r[8][ma5_rg_2][condition],1
		mov ?r[8][ma5_rg_3][condition],1
		mov ?r[8][ma5_rg_4][condition],1
		mov ?r[8][ma5_rg_5][condition],1
		mov ?r[8][ma5_rg_6][condition],1
		mov ?r[8][ma5_s00][condition],1
		mov ?r[8][ma5_s410][condition],1
		mov ?r[8][ma5_s45][condition],1
		mov ?r[8][ma5_s556][condition],2
		mov ?r[8][ma5_dla][condition],1
		mov ?r[8][ma5_RON][condition],1
		mov ?r[8][ma5_GAP][condition],1
		mov ?r[8][ma5_eri][condition],1
		mov ?r[8][ma5_cor][condition],1
		mov ?r[8][ma5_ger][condition],1
		mov ?r[8][ma5_GOA][condition],1
		mov ?r[8][ma5_zep][condition],1
		mov ?r[8][ma5_fur][condition],1
		mov ?r[8][ma5_en2][condition],1
		mov ?r[8][ma5_wr][condition],1
		mov ?r[8][ma5_bb][condition],1
		mov ?r[8][ma5_ev2][condition],1
		mov ?r[8][ma5_fea][condition],1
	~

	mov %r_display_cha_ma,ma5_ber
	;amsp r_black_lsp,0,0,0

	if %UMINEKOEND_TIPS_CHA_FLG <= 8 mov %UMINEKOEND_TIPS_CHA_FLG,0
return
;=====================
*r_for_title_0_ep8_3
		mov ?r[%scenario_Number][ma5_enj][condition],1
		mov ?r[%scenario_Number][ma5_AMA][condition],1
		mov ?r[%scenario_Number][ma5_FEA][condition],1

	mov $r_cha_back,":c;bmp\r_click\cha_btn\cha_back23.bmp"

	mov %r_display_cha_ma,ma5_enj
	;amsp r_black_lsp,0,0,0

	if %UMINEKOEND_TIPS_CHA_FLG <= 8 mov %UMINEKOEND_TIPS_CHA_FLG,0
return
;=====================

;=====================
*rmenu_display_new
	;textoff
	;btndef ""
	
	if %r_side_change = 3 lsp 2,":c;graphics\colour\black.png",0,0 : print 1
	
	;rondo
	if %scenario_Number = 1 gosub *rmenu_sai_display_n_ep1 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 2 && %r_side = 0 gosub *rmenu_sai_display_n_ep2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 2 && %r_side = 1 gosub *rmenu_sai_display_n_ep2_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_change_lsp
	if %scenario_Number = 3 && %r_side = 0 gosub *rmenu_sai_display_n_ep3 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 3 && %r_side = 1 gosub *rmenu_sai_display_n_ep3_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_change_lsp
	if %scenario_Number = 4 && %r_display_side = 0 gosub *rmenu_sai_n_display_ep4 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 4 && %r_display_side = 1 gosub *rmenu_sai_n_display_ep4_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 4 && %r_display_side = 2 gosub *rmenu_sai_n_display_ep4_3 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_change_lsp
	;chiru
	if %scenario_Number = 5 && %r_display_side = 0 gosub *rmenu_sai_n_display_ep5 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 5 && %r_display_side = 1 gosub *rmenu_sai_n_display_ep5_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 6 && %r_display_side = 0 gosub *rmenu_sai_n_display_ep6 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 6 && %r_display_side = 1 gosub *rmenu_sai_n_display_ep6_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 6 && %r_display_side = 2 gosub *rmenu_sai_n_display_ep6_3 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 7 && %r_display_side = 0 gosub *rmenu_sai_n_display_ep7 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 7 && %r_display_side = 1 gosub *rmenu_sai_n_display_ep7_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 8 && %r_display_side = 0 gosub *rmenu_sai_n_display_ep8 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 8 && %r_display_side = 1 gosub *rmenu_sai_n_display_ep8_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 8 && %r_display_side = 2 gosub *rmenu_sai_n_display_ep8_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	
	;From the display format, Tsukaiwakeru tips, lists or character.
	if %r_display = 0 gosub *r_cha_button_new

	if %r_side_change = 3 _csp 2 : print 10,100 : mov %r_side_change,0 : print 1 : return

	;Automatically matching the selected character at the end, the tips
	if %r_display = 0 gosub *r_cha_display

	if %r_side_change = 1 print 10,500 : mov %r_side_change,0 : return
	if %r_side_change = 2 print 99,3000,"breakup.dll/urB" : mov %r_side_change,0 : return
	lsp 2,":c;graphics\colour\black.png",0,0 : print 10,500 : _csp 2 : print 10,100 ; menu entrance

return
;============================
*rmenu_sai_display_n_ep1
	;If the title screen, put a live button
	notif %r_for_title = 1 jumpf
		;Switching condition of the character has been selected by
		if %r_u_tea_flg = 1 lsp r_people_lsp,r_people,0,0
		if %r_u_tea_flg = 0 lsp r_people_lsp,r_people_select,0,0
		if %r_u_tea_flg = 0 lsp r_witches_lsp,r_witches,0,0
		if %r_u_tea_flg = 1 lsp r_witches_lsp,r_witches_select,0,0
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~
return
	
*rmenu_sai_display_n_ep2
	notif %r_for_title = 1 jumpf
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
		~
		
	if %r_u_tea_flg = 1 mov %r_display,0
	
	notif %r_for_title = 1 jumpf
		;Switching condition of the character has been selected by
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~
	notif %r_u_tea_flg  = 1 jumpf
		;Switching condition of the character has been selected by
		mov %tmp10,%tmp1 : sub %tmp10,256
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,64
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,64
	~
return

*rmenu_sai_display_n_ep2_2
	notif %r_for_title = 1 jumpf
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
	~
	
	if %r_u_tea_flg = 1 mov %r_display,0
return

*rmenu_sai_display_n_ep3
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
	~
	
	if %r_u_tea_flg =1 mov %r_display,0
	
	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,64
		lsp r_resu_lsp,r_resu,%tmp,%tmp10
	~
return

*rmenu_sai_display_n_ep3_2
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
	~

	if %r_u_tea_flg =1 mov %r_display,0
return

*rmenu_sai_n_display_ep4
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
		lsp r_ange_lsp,r_ange,0,0
	~
	
	notif %play_scene = 40000 jumpf
		_csp r_witches_lsp
		_csp r_ange_lsp
	~
	
	notif %play_scene = 40001 jumpf
		_csp r_ange_lsp
	~
	
	notif %play_scene = 40005 jumpf
		_csp r_ange_lsp
	~
	
	if %r_u_tea_flg =1 mov %r_display,0
	
	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
return

*rmenu_sai_n_display_ep4_2
	notif %r_display = 0 jumpf
	if %play_scene = 40450 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
		lsp r_ange_lsp,r_ange,0,0
	~
	
	notif %play_scene = 40001 jumpf
		_csp r_ange_lsp
	~
	
	notif %play_scene = 40005 jumpf
		_csp r_ange_lsp
	~
	
	if %r_u_tea_flg =1 mov %r_display,0

	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~
return

*rmenu_sai_n_display_ep4_3
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches,0,0
		lsp r_ange_lsp,r_ange_select,0,0
	~
	
	if %r_u_tea_flg =1 mov %r_display,0
	
	notif %r_for_title = 1 jumpf
		if %r_display > 0 jumpf
		if %r_display_cha_enj = enj_enj && ?r[enj_enj][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return

*rmenu_sai_n_display_ep5
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
	~
	
	if %r_u_tea_flg =1 mov %r_display,0

	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
return

*rmenu_sai_n_display_ep5_2
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
	~
	if %r_u_tea_flg =1 mov %r_display,0
	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
	notif %r_for_title = 1 jumpf
		;change clothing chars 
		if %r_display > 0 jumpf
			if %r_display_cha_ma = ma5_dla && ?r[%scenario_Number][ma5_dla][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return

*rmenu_sai_n_display_ep6
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
		lsp r_ange_lsp,r_ange,0,0
	~
	
	notif %play_scene = 60000 jumpf
		_csp r_ange_lsp
	~
	
	if %r_u_tea_flg =1 mov %r_display,0

	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
return

*rmenu_sai_n_display_ep6_2
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
		lsp r_ange_lsp,r_ange,0,0
	~
	notif %play_scene = 60000 jumpf
		_csp r_ange_lsp
	~
	if %r_u_tea_flg =1 mov %r_display,0
	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
	notif %r_for_title = 1 jumpf
		;change clothing chars 
		if %r_display > 0 jumpf
			if %r_display_cha_ma = ma5_dla && ?r[%scenario_Number][ma5_dla][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return

*rmenu_sai_n_display_ep6_3
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches,0,0
		lsp r_ange_lsp,r_ange_select,0,0
	~
	
	notif %r_for_title = 1 jumpf
		;change clothing chars 
		if %r_display > 0 jumpf
			if %r_display_cha_enj = ma5_dla && ?r[%scenario_Number][ma5_dla][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
	
	if %r_u_tea_flg =1 mov %r_display,0
return

*rmenu_sai_n_display_ep7
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
	~
	
	if %r_u_tea_flg =1 mov %r_display,0

	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
return

*rmenu_sai_n_display_ep7_2
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
	~
	
	notif %play_scene = 70000 jumpf
		_csp r_people_lsp
		_csp r_witches_lsp
	~
	notif %play_scene = 70010 jumpf
		_csp r_people_lsp
		_csp r_witches_lsp
	~
	notif %play_scene = 70011 jumpf
		_csp r_people_lsp
		_csp r_witches_lsp
	~
	
	if %r_u_tea_flg =1 mov %r_display,0
	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
	notif %r_for_title = 1 jumpf
		;change clothing chars 
		if %r_display > 0 jumpf
			;if %r_display_cha_ma = ma5_bea && ?r[%scenario_Number][ma5_bea][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg && ?r[%scenario_Number][ma5_rg][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_1 && ?r[%scenario_Number][ma5_rg_1][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_2 && ?r[%scenario_Number][ma5_rg_2][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_3 && ?r[%scenario_Number][ma5_rg_3][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_4 && ?r[%scenario_Number][ma5_rg_4][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_5 && ?r[%scenario_Number][ma5_rg_5][condition] = 1 lsp r_change_lsp,r_change,0,0
			if %r_display_cha_ma = ma5_rg_6 && ?r[%scenario_Number][ma5_rg_6][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return

*rmenu_sai_n_display_ep8
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people_select,0,0
		lsp r_witches_lsp,r_witches,0,0
	~
	
	notif %play_scene = 80010 && %play_scene = 80011 && %play_scene = 80020 && %play_scene = 80110 jumpf
		_csp r_people_lsp
		_csp r_witches_lsp
	~
	
	notif %play_scene >= 80301 || %play_scene <= 80321 jumpf
		_csp r_people_lsp
		_csp r_witches_lsp
	~
	
	if %r_u_tea_flg =1 mov %r_display,0

	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg  = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
return

*rmenu_sai_n_display_ep8_2
	notif %r_display = 0 jumpf
		lsp r_people_lsp,r_people,0,0
		lsp r_witches_lsp,r_witches_select,0,0
	~
	if %r_u_tea_flg = 1 mov %r_display,0
	notif %r_for_title = 1 jumpf
		lsp r_exec_lsp,r_exec,0,0
		lsp r_resu_lsp,r_resu,0,0
	~

	notif %r_u_tea_flg = 1 jumpf
		mov %tmp10,%tmp1 : sub %tmp10,128
		lsp r_exec_lsp,r_exec,%tmp,%tmp10 : add %tmp10,32
		lsp r_resu_lsp,r_resu,%tmp,%tmp10 ;: add %tmp1,32
	~
	notif %r_for_title = 1 jumpf
		;change clothing chars 
		if %r_display > 0 jumpf
			if %r_display_cha_ma = ma5_dla && ?r[%scenario_Number][ma5_dla][condition] = 1 lsp r_change_lsp,r_change,0,0
	~
return


;============================
*rmenu_button_reconfigure_new

	_csp r_change_lsp

	;change clotch lsp
	if %scenario_Number = 2 && %r_side = 0 gosub *r_for_title_ep2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 3 && %r_side = 1 gosub *r_for_title_ep3_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_change_lsp
	if %scenario_Number = 4 && %r_display_side = 2 gosub *r_for_title_ep4_3 : align_buttons_l r_people_lsp,r_witches_lsp,r_ange_lsp,r_change_lsp
	if %scenario_Number = 5 && %r_display_side = 1 gosub *r_for_title_ep5_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 7 && %r_display_side = 1 gosub *r_for_title_ep7_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp
	if %scenario_Number = 8 && %r_display_side = 1 gosub *r_for_title_ep8_2 : align_buttons_l r_people_lsp,r_witches_lsp,r_exec_lsp,r_resu_lsp,r_change_lsp

	btndef ""
	
	spbtn r_exec_lsp,r_exec_lsp
	spbtn r_resu_lsp,r_resu_lsp
	spbtn r_exit_lsp,r_exit_lsp
	spbtn r_change_lsp,r_change_lsp
	;spbtn r_witches_lsp,r_witches_lsp
	;spbtn r_people_lsp,r_people_lsp
	;spbtn r_ange_lsp,r_ange_lsp
	if %r_display_arrow > 0 spbtn 99,99 ;up
	if %r_display_arrow > 0 spbtn 98,98 ;down
	
	if %scenario_Number = 1 && %r_u_tea_flg = 1 spbtn r_people_lsp,r_people_lsp
	if %scenario_Number = 1 && %r_u_tea_flg = 0 spbtn r_witches_lsp,r_witches_lsp
	if %scenario_Number = 2 && %r_side = 1 spbtn r_people_lsp,r_people_lsp
	if %scenario_Number = 2 && %r_side = 0 spbtn r_witches_lsp,r_witches_lsp
	if %r_display_side = 0 spbtn r_witches_lsp,r_witches_lsp spbtn r_ange_lsp,r_ange_lsp
	if %r_display_side = 1 spbtn r_people_lsp,r_people_lsp spbtn r_ange_lsp,r_ange_lsp
	if %r_display_side = 2 spbtn r_people_lsp,r_people_lsp spbtn r_witches_lsp,r_witches_lsp
	
	
	;rondo
	if %scenario_Number = 1 goto *rmenu_button_reconfigure_ep1
	if %scenario_Number = 2 && %r_side = 0 goto *rmenu_button_reconfigure_ep2
	if %scenario_Number = 2 && %r_side = 1 goto *rmenu_button_reconfigure_ep2_2
	if %scenario_Number = 3 && %r_side = 0 goto *rmenu_button_reconfigure_ep3
	if %scenario_Number = 3 && %r_side = 1 goto *rmenu_button_reconfigure_ep3_2
	if %scenario_Number = 4 && %r_display_side = 0 goto *rmenu_button_reconfigure_ep4
	if %scenario_Number = 4 && %r_display_side = 1 goto *rmenu_button_reconfigure_ep4_2
	if %scenario_Number = 4 && %r_display_side = 2 goto *rmenu_button_reconfigure_ep4_3
	;chiru
	if %scenario_Number = 5 && %r_display_side = 0 goto *rmenu_button_reconfigure_ep5_ep8
	if %scenario_Number = 5 && %r_display_side = 1 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	if %scenario_Number = 6 && %r_display_side = 0 goto *rmenu_button_reconfigure_ep5_ep8
	if %scenario_Number = 6 && %r_display_side = 1 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	if %scenario_Number = 6 && %r_display_side = 2 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	if %scenario_Number = 7 && %r_display_side = 0 goto *rmenu_button_reconfigure_ep5_ep8
	if %scenario_Number = 7 && %r_display_side = 1 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	if %scenario_Number = 7 && %r_display_side = 2 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	if %scenario_Number = 8 && %r_display_side = 0 goto *rmenu_button_reconfigure_ep5_ep8
	if %scenario_Number = 8 && %r_display_side = 1 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	if %scenario_Number = 8 && %r_display_side = 2 goto *rmenu_button_reconfigure_ep5_2_ep8_2
	
	
	*rmenu_button_reconfigure_ep1
		mov %tmp,kin_btn_lsp : add %tmp,char_max
		
		mov %tmp3,1
		for %tmp2 = kin_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep2
		mov %tmp,kin_btn_lsp : add %tmp,char_max_ep2
		
		mov %tmp3,1
		for %tmp2 = kin_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep2_2
		mov %tmp,ma_bea_btn_lsp : add %tmp,char_max_ep2_2
		
		mov %tmp3,1
		for %tmp2 = ma_bea_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep3
		mov %tmp,kin_btn_lsp : add %tmp,char_max_ep3
		
		mov %tmp3,1
		for %tmp2 = kin_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep3_2
		mov %tmp,ma_bea_btn_lsp : add %tmp,char_max_ep3_2
		
		mov %tmp3,1
		for %tmp2 = ma_bea_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep4
		mov %tmp,kin_btn_lsp : add %tmp,char_max_ep4
		
		mov %tmp3,1
		for %tmp2 = kin_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep4_2
		mov %tmp,ma4_lam_btn_lsp : add %tmp,char_max_ep4_2
	
		mov %tmp3,1
		for %tmp2 = ma4_lam_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep4_3
		mov %tmp,enj_eva_btn_lsp : add %tmp,char_max_ep4_3
	
		mov %tmp3,1
		for %tmp2 = enj_eva_btn_lsp to %tmp
			if ?r[%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep5_ep8
		if %scenario_Number = 5	mov %tmp,kin_btn_lsp : add %tmp,char_max_ep5
		if %scenario_Number = 6	mov %tmp,kin_btn_lsp : add %tmp,char_max_ep6
		if %scenario_Number = 7	mov %tmp,kin_btn_lsp : add %tmp,char_max_ep6
		if %scenario_Number = 8	mov %tmp,kin_btn_lsp : add %tmp,char_max_ep6
		;mov %tmp,kin_btn_lsp : add %tmp,char_max_ep5
	
		mov %tmp3,1
		for %tmp2 = kin_btn_lsp to %tmp
			if ?r[%scenario_Number][%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
			inc %tmp3
		next
		
		if ?r[%scenario_Number][eri][condition] >= 1 spbtn eri_btn_lsp,eri_btn_lsp
		if ?r[%scenario_Number][rio][condition] >= 1 spbtn rio_btn_lsp,rio_btn_lsp
		if ?r[%scenario_Number][EN2][condition] >= 1 spbtn EN2_btn_lsp,EN2_btn_lsp
		if ?r[%scenario_Number][si][condition] >= 1 spbtn si_btn_lsp,si_btn_lsp
		if ?r[%scenario_Number][bea][condition] >= 1 spbtn bea_btn_lsp,bea_btn_lsp
	goto *rmenu_custom_btlp_new
	
	*rmenu_button_reconfigure_ep5_2_ep8_2
		mov %tmp,ma5_lam_btn_lsp : add %tmp,char_max_ep5_2
		
		mov %tmp3,1
		mov %Free1,ma5_lam
		for %tmp2 = ma5_lam_btn_lsp to %tmp
			if ?r[%scenario_Number][%tmp3][condition] >= 1 spbtn %tmp2,%free1
			inc %tmp3 : inc %free1
		next
	goto *rmenu_custom_btlp_new

*rmenu_custom_btlp_new
	;stopwatch "rmenu_custom_btlp_new"
	btnwait2 %BtnRes

	;убираем потерю ракурса от персонажа при нажатии в любое пустое место. Если нужно, то добавляем перед goto строчку mov %r_display_cha,0
	if %BtnRes = 0 goto *rmenu_button_reconfigure_new
	if %BtnRes = r_exit_lsp goto *rmenu_go_out
	if %BtnRes = -1 goto *rmenu_go_out
	if %BtnRes = -10 goto *rmenu_go_out
	if %BtnRes=99 spt scroll_y,%r_display_arrow,-70,166,1 : sptwait scroll_y,%r_display_arrow	;button up
	if %BtnRes=98 spt scroll_y,%r_display_arrow,70,166,1 : sptwait scroll_y,%r_display_arrow	;button down
	
	;rondo
	if %scenario_Number = 1 goto *rmenu_custom_btlp_ep1
	if %scenario_Number = 2 && %r_side = 0 goto *rmenu_custom_btlp_ep2
	if %scenario_Number = 2 && %r_side = 1 goto *rmenu_custom_btlp_ep2_2
	if %scenario_Number = 3 && %r_side = 0 goto *rmenu_custom_btlp_ep3
	if %scenario_Number = 3 && %r_side = 1 goto *rmenu_custom_btlp_ep3_2
	if %scenario_Number = 4 && %r_display_side = 0 goto *rmenu_custom_btlp_ep4
	if %scenario_Number = 4 && %r_display_side = 1 goto *rmenu_custom_btlp_ep4_2
	if %scenario_Number = 4 && %r_display_side = 2 goto *rmenu_custom_btlp_ep4_3
	;chiru
	if %scenario_Number = 5 && %r_display_side = 0 goto *rmenu_custom_btlp_ep5
	if %scenario_Number = 5 && %r_display_side = 1 goto *rmenu_custom_btlp_ep5_2
	if %scenario_Number = 6 && %r_display_side = 0 goto *rmenu_custom_btlp_ep6
	if %scenario_Number = 6 && %r_display_side = 1 goto *rmenu_custom_btlp_ep6_2
	if %scenario_Number = 6 && %r_display_side = 2 goto *rmenu_custom_btlp_ep6_3
	if %scenario_Number = 7 && %r_display_side = 0 goto *rmenu_custom_btlp_ep7
	if %scenario_Number = 7 && %r_display_side = 1 goto *rmenu_custom_btlp_ep7_2
	if %scenario_Number = 8 && %r_display_side = 0 goto *rmenu_custom_btlp_ep8
	if %scenario_Number = 8 && %r_display_side = 1 goto *rmenu_custom_btlp_ep8_2
	
	
	*rmenu_custom_btlp_ep1
		gosub *btlp_ep2
		;If the character icon is pressed, you jump to each character
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0      
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0      
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0   
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0   
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0     
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0      
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0      
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0       
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0     
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0     
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0 
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0    
		if %BtnRes = ber_btn_lsp notif %r_display_cha = ber : mov %r_display_cha,ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0 
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep2
		gosub *btlp_ep2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = ber_btn_lsp notif %r_display_cha = ber : mov %r_display_cha,ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = lam_btn_lsp notif %r_display_cha = lam : mov %r_display_cha,lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep2_2
		gosub *btlp_ep2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma_kin_btn_lsp notif %r_display_cha = ma_kin : mov %r_display_cha,ma_kin : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_but_btn_lsp notif %r_display_cha = ma_but : mov %r_display_cha,ma_but : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_mar_btn_lsp notif %r_display_cha = ma_mar : mov %r_display_cha,ma_mar : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_gen_btn_lsp notif %r_display_cha = ma_gen : mov %r_display_cha,ma_gen : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_sha_btn_lsp notif %r_display_cha = ma_sha : mov %r_display_cha,ma_sha : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_kan_btn_lsp notif %r_display_cha = ma_kan : mov %r_display_cha,ma_kan : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_bea_btn_lsp notif %r_display_cha = ma_bea : mov %r_display_cha,ma_bea : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_ber_btn_lsp notif %r_display_cha = ma_ber : mov %r_display_cha,ma_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_lam_btn_lsp notif %r_display_cha = ma_lam : mov %r_display_cha,ma_lam : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_btn_lsp notif %r_display_cha = ma_rg : mov %r_display_cha,ma_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_1_btn_lsp notif %r_display_cha = ma_rg_1 : mov %r_display_cha,ma_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_2_btn_lsp notif %r_display_cha = ma_rg_2 : mov %r_display_cha,ma_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_3_btn_lsp notif %r_display_cha = ma_rg_3 : mov %r_display_cha,ma_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_4_btn_lsp notif %r_display_cha = ma_rg_4 : mov %r_display_cha,ma_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_5_btn_lsp notif %r_display_cha = ma_rg_5 : mov %r_display_cha,ma_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma_rg_6_btn_lsp notif %r_display_cha = ma_rg_6 : mov %r_display_cha,ma_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep3
		gosub *btlp_ep2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ber_btn_lsp notif %r_display_cha = ber : mov %r_display_cha,ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = lam_btn_lsp notif %r_display_cha = lam : mov %r_display_cha,lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = enj_btn_lsp notif %r_display_cha = enj : mov %r_display_cha,enj : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end

	*rmenu_custom_btlp_ep3_2
		gosub *btlp_ep2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma3_bea_btn_lsp notif r_display_cha_ma = ma3_bea : mov %r_display_cha_ma,ma3_bea : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_ber_btn_lsp notif r_display_cha_ma = ma3_ber : mov %r_display_cha_ma,ma3_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_lam_btn_lsp notif r_display_cha_ma = ma3_lam : mov %r_display_cha_ma,ma3_lam : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_btn_lsp notif r_display_cha_ma = ma3_rg : mov %r_display_cha_ma,ma3_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_1_btn_lsp notif r_display_cha_ma = ma3_rg_1 : mov %r_display_cha_ma,ma3_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_2_btn_lsp notif r_display_cha_ma = ma3_rg_2 : mov %r_display_cha_ma,ma3_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_3_btn_lsp notif r_display_cha_ma = ma3_rg_3 : mov %r_display_cha_ma,ma3_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_4_btn_lsp notif r_display_cha_ma = ma3_rg_4 : mov %r_display_cha_ma,ma3_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_5_btn_lsp notif r_display_cha_ma = ma3_rg_5 : mov %r_display_cha_ma,ma3_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_rg_6_btn_lsp notif r_display_cha_ma = ma3_rg_6 : mov %r_display_cha_ma,ma3_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_goa_btn_lsp notif r_display_cha_ma = ma3_goa : mov %r_display_cha_ma,ma3_goa : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_wal_btn_lsp notif r_display_cha_ma = ma3_wal : mov %r_display_cha_ma,ma3_wal : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_ron_btn_lsp notif r_display_cha_ma = ma3_ron : mov %r_display_cha_ma,ma3_ron : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_ev2_btn_lsp notif r_display_cha_ma = ma3_ev2 : mov %r_display_cha_ma,ma3_ev2 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_enj_btn_lsp notif r_display_cha_ma = ma3_enj : mov %r_display_cha_ma,ma3_enj : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_s_1_btn_lsp notif r_display_cha_ma = ma3_s_1 : mov %r_display_cha_ma,ma3_s_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = ma3_s_2_btn_lsp notif r_display_cha_ma = ma3_s_2 : mov %r_display_cha_ma,ma3_s_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep4
		gosub *btlp_ep2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ber_btn_lsp notif %r_display_cha = ber : mov %r_display_cha,ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = lam_btn_lsp notif %r_display_cha = lam : mov %r_display_cha,lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = enj_btn_lsp notif %r_display_cha = enj : mov %r_display_cha,enj : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep4_2
		gosub *btlp_eps_change_stor
		gosub *btlp_ep4_2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma4_lam_btn_lsp notif %r_display_cha_ma = ma4_lam : mov %r_display_cha_ma,ma4_lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_ber_btn_lsp notif %r_display_cha_ma = ma4_ber : mov %r_display_cha_ma,ma4_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_bea_btn_lsp notif %r_display_cha_ma = ma4_bea : mov %r_display_cha_ma,ma4_bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma4_mar_btn_lsp notif %r_display_cha_ma = ma4_mar : mov %r_display_cha_ma,ma4_mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma4_enj_btn_lsp notif %r_display_cha_ma = ma4_enj : mov %r_display_cha_ma,ma4_enj : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_kin_btn_lsp notif %r_display_cha_ma = ma4_kin : mov %r_display_cha_ma,ma4_kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_sak_btn_lsp notif %r_display_cha_ma = ma4_sak : mov %r_display_cha_ma,ma4_sak : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma4_wal_btn_lsp notif %r_display_cha_ma = ma4_wal : mov %r_display_cha_ma,ma4_wal : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_ron_btn_lsp notif %r_display_cha_ma = ma4_ron : mov %r_display_cha_ma,ma4_ron : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_gap_btn_lsp notif %r_display_cha_ma = ma4_gap : mov %r_display_cha_ma,ma4_gap : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_s00_btn_lsp notif %r_display_cha_ma = ma4_s00 : mov %r_display_cha_ma,ma4_s00 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_s410_btn_lsp notif %r_display_cha_ma = ma4_s410 : mov %r_display_cha_ma,ma4_s410 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_s45_btn_lsp notif %r_display_cha_ma = ma4_s45 : mov %r_display_cha_ma,ma4_s45 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_s556_btn_lsp notif %r_display_cha_ma = ma4_s556 : mov %r_display_cha_ma,ma4_s556 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma4_rg_btn_lsp notif %r_display_cha_ma = ma4_rg : mov %r_display_cha_ma,ma4_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_rg_1_btn_lsp notif %r_display_cha_ma = ma4_rg_1 : mov %r_display_cha_ma,ma4_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_rg_2_btn_lsp notif %r_display_cha_ma = ma4_rg_2 : mov %r_display_cha_ma,ma4_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_rg_3_btn_lsp notif %r_display_cha_ma = ma4_rg_3 : mov %r_display_cha_ma,ma4_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_rg_4_btn_lsp notif %r_display_cha_ma = ma4_rg_4 : mov %r_display_cha_ma,ma4_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_rg_5_btn_lsp notif %r_display_cha_ma = ma4_rg_5 : mov %r_display_cha_ma,ma4_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_rg_6_btn_lsp notif %r_display_cha_ma = ma4_rg_6 : mov %r_display_cha_ma,ma4_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma4_goa_btn_lsp notif %r_display_cha_ma = ma4_goa : mov %r_display_cha_ma,ma4_goa : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep4_3
		gosub *btlp_eps_change_stor
		gosub *btlp_ep4_3
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = enj_eva_btn_lsp notif %r_display_cha_enj = enj_eva : mov %r_display_cha_enj,enj_eva : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_oko_btn_lsp notif %r_display_cha_enj = enj_oko : mov %r_display_cha_enj,enj_oko : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_kas_btn_lsp notif %r_display_cha_enj = enj_kas : mov %r_display_cha_enj,enj_kas : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_enj_btn_lsp notif %r_display_cha_enj = enj_enj : mov %r_display_cha_enj,enj_enj : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_ama_btn_lsp notif %r_display_cha_enj = enj_ama : mov %r_display_cha_enj,enj_ama : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_sak_btn_lsp notif %r_display_cha_enj = enj_sak : mov %r_display_cha_enj,enj_sak : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_mar_btn_lsp notif %r_display_cha_enj = enj_mar : mov %r_display_cha_enj,enj_mar : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_btn_lsp notif %r_display_cha_enj = enj_rg : mov %r_display_cha_enj,enj_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_1_btn_lsp notif %r_display_cha_enj = enj_rg_1 : mov %r_display_cha_enj,enj_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_2_btn_lsp notif %r_display_cha_enj = enj_rg_2 : mov %r_display_cha_enj,enj_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_3_btn_lsp notif %r_display_cha_enj = enj_rg_3 : mov %r_display_cha_enj,enj_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_4_btn_lsp notif %r_display_cha_enj = enj_rg_4 : mov %r_display_cha_enj,enj_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_5_btn_lsp notif %r_display_cha_enj = enj_rg_5 : mov %r_display_cha_enj,enj_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_rg_6_btn_lsp notif %r_display_cha_enj = enj_rg_6 : mov %r_display_cha_enj,enj_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_pro_btn_lsp notif %r_display_cha_enj = enj_pro : mov %r_display_cha_enj,enj_pro : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_mas_btn_lsp notif %r_display_cha_enj = enj_mas : mov %r_display_cha_enj,enj_mas : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_sab_btn_lsp notif %r_display_cha_enj = enj_sab : mov %r_display_cha_enj,enj_sab : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_kwa_btn_lsp notif %r_display_cha_enj = enj_kwa : mov %r_display_cha_enj,enj_kwa : gosub *r_cha_display : seplay 9,1001,100 : print 1
		if %BtnRes = enj_ber_btn_lsp notif %r_display_cha_enj = enj_ber : mov %r_display_cha_enj,enj_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep5
		gosub *btlp_ep5
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = eri_btn_lsp notif %r_display_cha = eri : mov %r_display_cha,eri : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = rio_btn_lsp notif %r_display_cha = rio : mov %r_display_cha,rio : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = EN2_btn_lsp notif %r_display_cha = en2 : mov %r_display_cha,EN2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = si_btn_lsp notif %r_display_cha = si : mov %r_display_cha,si : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep5_2
		gosub *btlp_ep5_2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma5_lam notif %r_display_cha_ma = ma5_lam : mov %r_display_cha_ma,ma5_lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ber notif %r_display_cha_ma = ma5_ber : mov %r_display_cha_ma,ma5_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_bea notif %r_display_cha_ma = ma5_bea : mov %r_display_cha_ma,ma5_bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_mar notif %r_display_cha_ma = ma5_mar : mov %r_display_cha_ma,ma5_mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_enj notif %r_display_cha_ma = ma5_enj : mov %r_display_cha_ma,ma5_enj : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_kin notif %r_display_cha_ma = ma5_kin : mov %r_display_cha_ma,ma5_kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_sak notif %r_display_cha_ma = ma5_sak : mov %r_display_cha_ma,ma5_sak : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_wal notif %r_display_cha_ma = ma5_wal : mov %r_display_cha_ma,ma5_wal : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ron notif %r_display_cha_ma = ma5_ron : mov %r_display_cha_ma,ma5_ron : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_gap notif %r_display_cha_ma = ma5_gap : mov %r_display_cha_ma,ma5_gap : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s00 notif %r_display_cha_ma = ma5_s00 : mov %r_display_cha_ma,ma5_s00 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s410 notif %r_display_cha_ma = ma5_s410 : mov %r_display_cha_ma,ma5_s410 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s45 notif %r_display_cha_ma = ma5_s45 : mov %r_display_cha_ma,ma5_s45 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s556 notif %r_display_cha_ma = ma5_s556 : mov %r_display_cha_ma,ma5_s556 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_rg notif %r_display_cha_ma = ma5_rg : mov %r_display_cha_ma,ma5_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_1 notif %r_display_cha_ma = ma5_rg_1 : mov %r_display_cha_ma,ma5_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_2 notif %r_display_cha_ma = ma5_rg_2 : mov %r_display_cha_ma,ma5_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_3 notif %r_display_cha_ma = ma5_rg_3 : mov %r_display_cha_ma,ma5_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_4 notif %r_display_cha_ma = ma5_rg_4 : mov %r_display_cha_ma,ma5_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_5 notif %r_display_cha_ma = ma5_rg_5 : mov %r_display_cha_ma,ma5_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_6 notif %r_display_cha_ma = ma5_rg_6 : mov %r_display_cha_ma,ma5_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_goa notif %r_display_cha_ma = ma5_goa : mov %r_display_cha_ma,ma5_goa : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_be2 notif %r_display_cha_ma = ma5_be2 : mov %r_display_cha_ma,ma5_be2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_eri notif %r_display_cha_ma = ma5_eri : mov %r_display_cha_ma,ma5_eri : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_but notif %r_display_cha_ma = ma5_but : mov %r_display_cha_ma,ma5_but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_dla notif %r_display_cha_ma = ma5_dla : mov %r_display_cha_ma,ma5_dla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ger notif %r_display_cha_ma = ma5_ger : mov %r_display_cha_ma,ma5_ger : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_cor notif %r_display_cha_ma = ma5_cor : mov %r_display_cha_ma,ma5_cor : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ZEP notif %r_display_cha_ma = ma5_ZEP : mov %r_display_cha_ma,ma5_ZEP : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_FUR notif %r_display_cha_ma = ma5_FUR : mov %r_display_cha_ma,ma5_FUR : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_AMA notif %r_display_cha_ma = ma5_AMA : mov %r_display_cha_ma,ma5_AMA : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_FEA notif %r_display_cha_ma = ma5_FEA : mov %r_display_cha_ma,ma5_FEA : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_WIL notif %r_display_cha_ma = ma5_WIL : mov %r_display_cha_ma,ma5_WIL : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_CUR notif %r_display_cha_ma = ma5_CUR : mov %r_display_cha_ma,ma5_CUR : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_EN2 notif %r_display_cha_ma = ma5_EN2 : mov %r_display_cha_ma,ma5_EN2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_bb notif %r_display_cha_ma = ma5_bb : mov %r_display_cha_ma,ma5_bb : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_wr notif %r_display_cha_ma = ma5_wr : mov %r_display_cha_ma,ma5_wr : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_ev2 notif %r_display_cha_ma = ma5_ev2 : mov %r_display_cha_ma,ma5_ev2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
	goto *rmenu_button_reconfigure_end
		
	*rmenu_custom_btlp_ep6
		gosub *btlp_ep5
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,1
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = eri_btn_lsp notif %r_display_cha = eri : mov %r_display_cha,eri : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = rio_btn_lsp notif %r_display_cha = rio : mov %r_display_cha,rio : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = EN2_btn_lsp notif %r_display_cha = en2 : mov %r_display_cha,EN2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = si_btn_lsp notif %r_display_cha = si : mov %r_display_cha,si : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep6_2
		gosub *btlp_ep5_2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma5_lam notif %r_display_cha_ma = ma5_lam : mov %r_display_cha_ma,ma5_lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ber notif %r_display_cha_ma = ma5_ber : mov %r_display_cha_ma,ma5_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_bea notif %r_display_cha_ma = ma5_bea : mov %r_display_cha_ma,ma5_bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_wal notif %r_display_cha_ma = ma5_wal : mov %r_display_cha_ma,ma5_wal : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ron notif %r_display_cha_ma = ma5_ron : mov %r_display_cha_ma,ma5_ron : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_gap notif %r_display_cha_ma = ma5_gap : mov %r_display_cha_ma,ma5_gap : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s00 notif %r_display_cha_ma = ma5_s00 : mov %r_display_cha_ma,ma5_s00 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s410 notif %r_display_cha_ma = ma5_s410 : mov %r_display_cha_ma,ma5_s410 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s45 notif %r_display_cha_ma = ma5_s45 : mov %r_display_cha_ma,ma5_s45 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s556 notif %r_display_cha_ma = ma5_s556 : mov %r_display_cha_ma,ma5_s556 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_rg notif %r_display_cha_ma = ma5_rg : mov %r_display_cha_ma,ma5_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_1 notif %r_display_cha_ma = ma5_rg_1 : mov %r_display_cha_ma,ma5_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_2 notif %r_display_cha_ma = ma5_rg_2 : mov %r_display_cha_ma,ma5_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_3 notif %r_display_cha_ma = ma5_rg_3 : mov %r_display_cha_ma,ma5_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_4 notif %r_display_cha_ma = ma5_rg_4 : mov %r_display_cha_ma,ma5_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_5 notif %r_display_cha_ma = ma5_rg_5 : mov %r_display_cha_ma,ma5_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_6 notif %r_display_cha_ma = ma5_rg_6 : mov %r_display_cha_ma,ma5_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_goa notif %r_display_cha_ma = ma5_goa : mov %r_display_cha_ma,ma5_goa : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_be2 notif %r_display_cha_ma = ma5_be2 : mov %r_display_cha_ma,ma5_be2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_eri notif %r_display_cha_ma = ma5_eri : mov %r_display_cha_ma,ma5_eri : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_but notif %r_display_cha_ma = ma5_but : mov %r_display_cha_ma,ma5_but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_dla notif %r_display_cha_ma = ma5_dla : mov %r_display_cha_ma,ma5_dla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ger notif %r_display_cha_ma = ma5_ger : mov %r_display_cha_ma,ma5_ger : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_cor notif %r_display_cha_ma = ma5_cor : mov %r_display_cha_ma,ma5_cor : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ZEP notif %r_display_cha_ma = ma5_ZEP : mov %r_display_cha_ma,ma5_ZEP : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_FUR notif %r_display_cha_ma = ma5_FUR : mov %r_display_cha_ma,ma5_FUR : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep6_3
		gosub *btlp_ep5_3
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma5_enj notif %r_display_cha_enj = ma5_enj : mov %r_display_cha_enj,ma5_enj : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_AMA notif %r_display_cha_enj = ma5_AMA : mov %r_display_cha_enj,ma5_AMA : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_FEA notif %r_display_cha_enj = ma5_FEA : mov %r_display_cha_enj,ma5_FEA : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
	goto *rmenu_button_reconfigure_end
		
	*rmenu_custom_btlp_ep7
		gosub *btlp_ep5
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = rio_btn_lsp notif %r_display_cha = rio : mov %r_display_cha,rio : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep7_2
		gosub *btlp_ep5_2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma5_ber notif %r_display_cha_ma = ma5_ber : mov %r_display_cha_ma,ma5_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_bea notif %r_display_cha_ma = ma5_bea : mov %r_display_cha_ma,ma5_bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_mar notif %r_display_cha_ma = ma5_mar : mov %r_display_cha_ma,ma5_mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_wal notif %r_display_cha_ma = ma5_wal : mov %r_display_cha_ma,ma5_wal : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ron notif %r_display_cha_ma = ma5_ron : mov %r_display_cha_ma,ma5_ron : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_gap notif %r_display_cha_ma = ma5_gap : mov %r_display_cha_ma,ma5_gap : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s00 notif %r_display_cha_ma = ma5_s00 : mov %r_display_cha_ma,ma5_s00 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s410 notif %r_display_cha_ma = ma5_s410 : mov %r_display_cha_ma,ma5_s410 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s45 notif %r_display_cha_ma = ma5_s45 : mov %r_display_cha_ma,ma5_s45 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s556 notif %r_display_cha_ma = ma5_s556 : mov %r_display_cha_ma,ma5_s556 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_rg notif %r_display_cha_ma = ma5_rg : mov %r_display_cha_ma,ma5_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_1 notif %r_display_cha_ma = ma5_rg_1 : mov %r_display_cha_ma,ma5_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_2 notif %r_display_cha_ma = ma5_rg_2 : mov %r_display_cha_ma,ma5_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_3 notif %r_display_cha_ma = ma5_rg_3 : mov %r_display_cha_ma,ma5_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_4 notif %r_display_cha_ma = ma5_rg_4 : mov %r_display_cha_ma,ma5_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_5 notif %r_display_cha_ma = ma5_rg_5 : mov %r_display_cha_ma,ma5_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_6 notif %r_display_cha_ma = ma5_rg_6 : mov %r_display_cha_ma,ma5_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_goa notif %r_display_cha_ma = ma5_goa : mov %r_display_cha_ma,ma5_goa : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_cor notif %r_display_cha_ma = ma5_cor : mov %r_display_cha_ma,ma5_cor : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ZEP notif %r_display_cha_ma = ma5_ZEP : mov %r_display_cha_ma,ma5_ZEP : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_FUR notif %r_display_cha_ma = ma5_FUR : mov %r_display_cha_ma,ma5_FUR : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_WIL notif %r_display_cha_ma = ma5_WIL : mov %r_display_cha_ma,ma5_WIL : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_CUR notif %r_display_cha_ma = ma5_CUR : mov %r_display_cha_ma,ma5_CUR : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep8
		gosub *btlp_ep5
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = kin_btn_lsp notif %r_display_cha = kin : mov %r_display_cha,kin : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = hid_btn_lsp notif %r_display_cha = hid : mov %r_display_cha,hid : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = eva_btn_lsp notif %r_display_cha = eva : mov %r_display_cha,eva : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = rud_btn_lsp notif %r_display_cha = rud : mov %r_display_cha,rud : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kir_btn_lsp notif %r_display_cha = kir : mov %r_display_cha,kir : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = EN2_btn_lsp notif %r_display_cha = en2 : mov %r_display_cha,EN2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ros_btn_lsp notif %r_display_cha = ros : mov %r_display_cha,ros : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = gen_btn_lsp notif %r_display_cha = gen : mov %r_display_cha,gen : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
	
	*rmenu_custom_btlp_ep8_2
		gosub *btlp_ep5_2
		if %BtnRes = r_witches_lsp || %BtnRes = r_people_lsp || %BtnRes = r_ange_lsp goto *rmenu_main_new_reload
		if %BtnRes = ma5_lam notif %r_display_cha_ma = ma5_lam : mov %r_display_cha_ma,ma5_lam : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ber notif %r_display_cha_ma = ma5_ber : mov %r_display_cha_ma,ma5_ber : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_wr notif %r_display_cha_ma = ma5_wr : mov %r_display_cha_ma,ma5_wr : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_FEA notif %r_display_cha_ma = ma5_FEA : mov %r_display_cha_ma,ma5_FEA : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_bb notif %r_display_cha_ma = ma5_bb : mov %r_display_cha_ma,ma5_bb : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_EN2 notif %r_display_cha_ma = ma5_EN2 : mov %r_display_cha_ma,ma5_EN2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_eri notif %r_display_cha_ma = ma5_eri : mov %r_display_cha_ma,ma5_eri : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ev2 notif %r_display_cha_ma = ma5_ev2 : mov %r_display_cha_ma,ma5_ev2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_wal notif %r_display_cha_ma = ma5_wal : mov %r_display_cha_ma,ma5_wal : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ron notif %r_display_cha_ma = ma5_ron : mov %r_display_cha_ma,ma5_ron : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_gap notif %r_display_cha_ma = ma5_gap : mov %r_display_cha_ma,ma5_gap : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_dla notif %r_display_cha_ma = ma5_dla : mov %r_display_cha_ma,ma5_dla : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_ger notif %r_display_cha_ma = ma5_ger : mov %r_display_cha_ma,ma5_ger : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_cor notif %r_display_cha_ma = ma5_cor : mov %r_display_cha_ma,ma5_cor : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg notif %r_display_cha_ma = ma5_rg : mov %r_display_cha_ma,ma5_rg : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_1 notif %r_display_cha_ma = ma5_rg_1 : mov %r_display_cha_ma,ma5_rg_1 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_2 notif %r_display_cha_ma = ma5_rg_2 : mov %r_display_cha_ma,ma5_rg_2 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_3 notif %r_display_cha_ma = ma5_rg_3 : mov %r_display_cha_ma,ma5_rg_3 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_4 notif %r_display_cha_ma = ma5_rg_4 : mov %r_display_cha_ma,ma5_rg_4 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_5 notif %r_display_cha_ma = ma5_rg_5 : mov %r_display_cha_ma,ma5_rg_5 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_rg_6 notif %r_display_cha_ma = ma5_rg_6 : mov %r_display_cha_ma,ma5_rg_6 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s00 notif %r_display_cha_ma = ma5_s00 : mov %r_display_cha_ma,ma5_s00 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s410 notif %r_display_cha_ma = ma5_s410 : mov %r_display_cha_ma,ma5_s410 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s45 notif %r_display_cha_ma = ma5_s45 : mov %r_display_cha_ma,ma5_s45 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_s556 notif %r_display_cha_ma = ma5_s556 : mov %r_display_cha_ma,ma5_s556 : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,0
		if %BtnRes = ma5_ZEP notif %r_display_cha_ma = ma5_ZEP : mov %r_display_cha_ma,ma5_ZEP : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_FUR notif %r_display_cha_ma = ma5_FUR : mov %r_display_cha_ma,ma5_FUR : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = ma5_goa notif %r_display_cha_ma = ma5_goa : mov %r_display_cha_ma,ma5_goa : gosub *r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *rmenu_button_reconfigure_end
		
*rmenu_button_reconfigure_end
	
	goto *rmenu_button_reconfigure_new


*rmenu_go_out
	border_pad_pop
	gosub *menu_rain_unpause
	goto *r_exit
return

;=====================
*r_cha_button_new
	if %scenario_Number = 1 goto *r_cha_button_ep1
	if %scenario_Number = 2 && %r_side = 0 goto *r_cha_button_ep2
	if %scenario_Number = 2 && %r_side = 1 goto *r_cha_button_ep2_2
	if %scenario_Number = 3 && %r_side = 0 goto *r_cha_button_ep3
	if %scenario_Number = 3 && %r_side = 1 goto *r_cha_button_ep3_2
	if %scenario_Number = 4 && %r_display_side = 0 goto *r_cha_button_ep4
	if %scenario_Number = 4 && %r_display_side = 1 goto *r_cha_button_ep4_2
	if %scenario_Number = 4 && %r_display_side = 2 goto *r_cha_button_ep4_3
	if %scenario_Number = 5 && %r_display_side = 0 goto *r_cha_button_ep5
	if %scenario_Number = 5 && %r_display_side = 1 goto *r_cha_button_ep5_2
	if %scenario_Number = 6 && %r_display_side = 0 goto *r_cha_button_ep5
	if %scenario_Number = 6 && %r_display_side = 1 goto *r_cha_button_ep5_2
	if %scenario_Number = 6 && %r_display_side = 2 goto *r_cha_button_ep6_3
	if %scenario_Number = 7 && %r_display_side = 0 goto *r_cha_button_ep5
	if %scenario_Number = 7 && %r_display_side = 1 goto *r_cha_button_ep5_2
	if %scenario_Number = 8 && %r_display_side = 0 goto *r_cha_button_ep5
	if %scenario_Number = 8 && %r_display_side = 1 goto *r_cha_button_ep5_2
	if %scenario_Number = 8 && %r_display_side = 2 goto *r_cha_button_ep8_3
	
goto *r_cha_button_end

;----EP1----
*r_cha_button_ep1

	if %UMINEKOEND_TIPS_CHA_FLG <= 1 mov %UMINEKOEND_TIPS_CHA_FLG,0

	;(Changing the display by a condition) of the character display icon
	mov %tmp,kin_btn_lsp
	for %tmp2 = 1 to char_max
		if ?r[%tmp2][condition] = -1 jumpf ;Condition is completely hidden -1
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next
	
	;If no flag is set, do not show the character
	if %r_for_title = 0 && %r_u_tea_flg = 0 if %r_tea_bea = 0 _csp bea_btn_lsp : _csp ber_btn_lsp
	if %r_u_tea_flg = 0 _csp ber_btn_lsp

goto *r_cha_button_end
;----EP2----
*r_cha_button_ep2

	if %UMINEKOEND_TIPS_CHA_FLG <= 2 mov %UMINEKOEND_TIPS_CHA_FLG,0

	mov %tmp,kin_btn_lsp
	for %tmp2 = 1 to char_max_ep2
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
			
			if %tmp2 = sha && ?r[%tmp2][condition] = 1 && ?r[%tmp2][r_ishou] = 2 lsp sha_btn_lsp,":c/1,0,3;graphics\chars\chars_sha1.png",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
			if %tmp2 = geo && ?r[%tmp2][condition] = 1 && ?r[%tmp2][r_ishou] = 2 lsp geo_btn_lsp,":c/1,0,3;graphics\chars\chars_geo1.png",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
			if %tmp2 = kan && ?r[%tmp2][condition] = 1 && ?r[%tmp2][r_ishou] = 2 lsp kan_btn_lsp,":c/1,0,3;graphics\chars\chars_kan1.png",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end
;----EP2_2----
*r_cha_button_ep2_2

	mov %tmp,ma_bea_btn_lsp
	for %tmp2 = 1 to char_max_ep2_2
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end
;----EP3----
*r_cha_button_ep3

	if %UMINEKOEND_TIPS_CHA_FLG <= 3 mov %UMINEKOEND_TIPS_CHA_FLG,0

	mov %tmp,kin_btn_lsp
	for %tmp2 = 1 to char_max_ep3
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end
;----EP3_2----
*r_cha_button_ep3_2

	mov %tmp,ma_bea_btn_lsp
	for %tmp2 = 1 to char_max_ep3_2
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]

			if %tmp2 = ma3_ev2 && ?r[%tmp2][condition] = 1 && ?r[%tmp2][r_ishou] = 2 lsp ma3_ev2_btn_lsp,":c/2,0,3;bmp\r_click\cha_btn\ep3_2\ev2_l2.bmp",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end
;----EP4----
*r_cha_button_ep4

	if %UMINEKOEND_TIPS_CHA_FLG <= 4 mov %UMINEKOEND_TIPS_CHA_FLG,0

	mov %tmp,kin_btn_lsp
	for %tmp2 = 1 to char_max_ep4
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
			
			if %tmp2 = enj && ?r[%tmp2][condition] = 1 && ?r[%tmp2][r_ishou] = 2 lsp enj_btn_lsp,":c/1,0,3;graphics\chars\chars_enj0.png",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end
;----EP4_2----
*r_cha_button_ep4_2
	
	mov %tmp,ma4_lam_btn_lsp
	for %tmp2 = 1 to char_max_ep4_2
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end
;----EP4_3----
*r_cha_button_ep4_3

	mov %tmp,enj_eva_btn_lsp
	for %tmp2 = 1 to char_max_ep4_3
		if ?r[%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%tmp2][?r[%tmp2][condition]],?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]

			if %tmp2 = enj_enj && ?r[%tmp2][r_ishou] = 2 : lsp enj_enj_btn_lsp,":c/1,0,3;graphics\chars\chars_enj1.png",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
			if %tmp2 = enj_enj && ?r[%tmp2][r_ishou] = 1 : lsp enj_enj_btn_lsp,":c/1,0,3;graphics\chars\chars_enj0.png",?r[%tmp2][itiran_x],?r[%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end

;----EP5----
*r_cha_button_ep5

	mov %tmp,kin_btn_lsp
	for %tmp2 = 1 to 18
		if ?r[%scenario_Number][%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%scenario_Number][%tmp2][?r[%scenario_Number][%tmp2][condition]],?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
		~
		inc %tmp
	next
	
	if ?r[%scenario_Number][eri][condition] <= 0 jumpf
		lsp eri_btn_lsp,$?r[%scenario_Number][eri][?r[%scenario_Number][eri][condition]],?r[%scenario_Number][eri][itiran_x],?r[%scenario_Number][eri][itiran_y]
	~
	if ?r[%scenario_Number][rio][condition] <= 0 jumpf
		lsp rio_btn_lsp,$?r[%scenario_Number][rio][?r[%scenario_Number][rio][condition]],?r[%scenario_Number][rio][itiran_x],?r[%scenario_Number][rio][itiran_y]
	~
	if ?r[%scenario_Number][EN2][condition] <= 0 jumpf
		lsp EN2_btn_lsp,$?r[%scenario_Number][EN2][?r[%scenario_Number][EN2][condition]],?r[%scenario_Number][EN2][itiran_x],?r[%scenario_Number][EN2][itiran_y]
	~
	;if ?r[%scenario_Number][si][condition] <= 0 jumpf
	;	lsp si_btn_lsp,$?r[%scenario_Number][si][?r[%scenario_Number][si][condition]],?r[%scenario_Number][si][itiran_x],?r[%scenario_Number][si][itiran_y]
	;~
	if ?r[%scenario_Number][bea][condition] <= 0 jumpf
		lsp bea_btn_lsp,$?r[%scenario_Number][bea][?r[%scenario_Number][bea][condition]],?r[%scenario_Number][bea][itiran_x],?r[%scenario_Number][bea][itiran_y]
	~
	
goto *r_cha_button_end

;----EP5_2----
*r_cha_button_ep5_2
	
	mov %tmp,ma5_lam_btn_lsp
	for %tmp2 = 1 to char_max_ep5_2
		if ?r[%scenario_Number][%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%scenario_Number][%tmp2][?r[%scenario_Number][%tmp2][condition]],?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
		
			if %tmp2 = ma5_dla && ?r[%scenario_Number][%tmp2][condition] = 1 && ?r[%scenario_Number][%tmp2][r_ishou] = 2 lsp ma5_dla_btn_lsp,":c/1,0,3;graphics\chars\chiru\chars_dla1_s.png",?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
		~
		inc %tmp
	next
	
goto *r_cha_button_end

;----EP6_3----
*r_cha_button_ep6_3
	mov %tmp,ma5_lam_btn_lsp
	for %tmp2 = 1 to char_max_ep5_2
		if ?r[%scenario_Number][%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%scenario_Number][%tmp2][?r[%scenario_Number][%tmp2][condition]],?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end

;----EP8_3----
*r_cha_button_ep8_3
	mov %tmp,ma5_lam_btn_lsp
	for %tmp2 = 1 to char_max_ep5_2
		if ?r[%scenario_Number][%tmp2][condition] = -1 jumpf
			lsp %tmp,$?r[%scenario_Number][%tmp2][?r[%scenario_Number][%tmp2][condition]],?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
		~
		inc %tmp
	next

goto *r_cha_button_end

;end *r_cha_button
*r_cha_button_end
	
	;Display the character you are currently viewing
	gosub *r_cha_display

return

;=====================
*rmenu_play_scene_ep2
	if %play_scene = 10 gosub *rmenu_main_ep2_scene_10
	if %play_scene = 20 gosub *rmenu_main_ep2_scene_20
	if %play_scene = 30 gosub *rmenu_main_ep2_scene_30
	if %play_scene = 31 gosub *rmenu_main_ep2_scene_31
	if %play_scene = 40 gosub *rmenu_main_ep2_scene_40
	if %play_scene = 41 gosub *rmenu_main_ep2_scene_41
	if %play_scene = 42 gosub *rmenu_main_ep2_scene_42
	if %play_scene = 45 gosub *rmenu_main_ep2_scene_45
	if %play_scene = 50 gosub *rmenu_main_ep2_scene_50
	if %play_scene = 51 gosub *rmenu_main_ep2_scene_51
	if %play_scene = 52 gosub *rmenu_main_ep2_scene_52
	if %play_scene = 60 gosub *rmenu_main_ep2_scene_60
	if %play_scene = 70 gosub *rmenu_main_ep2_scene_70
	if %play_scene = 71 gosub *rmenu_main_ep2_scene_71
	if %play_scene = 80 gosub *rmenu_main_ep2_scene_80
	if %play_scene = 90 gosub *rmenu_main_ep2_scene_90
	if %play_scene = 100 gosub *rmenu_main_ep2_scene_100
	if %play_scene = 101 gosub *rmenu_main_ep2_scene_101
	if %play_scene = 102 gosub *rmenu_main_ep2_scene_102
	if %play_scene = 110 gosub *rmenu_main_ep2_scene_110
	if %play_scene = 120 gosub *rmenu_main_ep2_scene_120
	if %play_scene = 130 gosub *rmenu_main_ep2_scene_130
	if %play_scene = 140 gosub *rmenu_main_ep2_scene_140
	if %play_scene = 150 gosub *rmenu_main_ep2_scene_150
	if %play_scene = 160 gosub *rmenu_main_ep2_scene_160
	if %play_scene = 170 gosub *rmenu_main_ep2_scene_170
	if %play_scene = 180 gosub *rmenu_main_ep2_scene_180
	;Tea party from here
	if %play_scene = 1010 gosub *rmenu_main_ep2_scene_1010
	if %play_scene = 1020 gosub *rmenu_main_ep2_scene_1020
return

*rmenu_play_scene_ep2_2
	if %play_scene = 2010 gosub *rmenu_main_ep2_scene_2010
	if %play_scene = 2020 gosub *rmenu_main_ep2_scene_2020
return

*rmenu_play_scene_ep3_decide
	if %r_for_title = 1 return

	if %play_scene = 30020 mov %r_side,1 : return
	if %play_scene = 30021 mov %r_side,1 : return
	if %play_scene = 30022 mov %r_side,1 : return
	if %play_scene = 30035 mov %r_side,1 : return
	if %play_scene = 30050 mov %r_side,1 : return
	if %play_scene = 30051 mov %r_side,1 : return
	if %play_scene = 30070 mov %r_side,1 : return
	if %play_scene = 30071 mov %r_side,1 : return
	if %play_scene = 30110 mov %r_side,1 : return
	if %play_scene = 30120 mov %r_side,1 : return
	if %play_scene = 30130 mov %r_side,1 : return
	if %play_scene = 30140 mov %r_side,1 : return
	if %play_scene = 30150 mov %r_side,1 : return
	if %play_scene = 30170 mov %r_side,1 : return
	if %play_scene = 30181 mov %r_side,1 : return
	if %play_scene = 30190 mov %r_side,1 : return
	if %play_scene = 30210 mov %r_side,1 : return
	if %play_scene = 30260 mov %r_side,1 : return

	if %play_scene = 31010 mov %r_side,1 : return
	if %play_scene = 31011 mov %r_side,1 : return
	if %play_scene = 31020 mov %r_side,1 : return

	if %play_scene = 32030 mov %r_side,1 : return
	if %play_scene = 32040 mov %r_side,1 : return

return

*rmenu_play_scene_ep3
	if %play_scene = 30010 gosub *rmenu_main_ep3_scene_30010
	if %play_scene = 30020 gosub *rmenu_main_ep3_scene_30020
	if %play_scene = 30021 gosub *rmenu_main_ep3_scene_30021
	if %play_scene = 30022 gosub *rmenu_main_ep3_scene_30022
	if %play_scene = 30030 gosub *rmenu_main_ep3_scene_30030
	if %play_scene = 30031 gosub *rmenu_main_ep3_scene_30031
	if %play_scene = 30032 gosub *rmenu_main_ep3_scene_30032
	if %play_scene = 30035 gosub *rmenu_main_ep3_scene_30035
	if %play_scene = 30040 gosub *rmenu_main_ep3_scene_30040
	if %play_scene = 30045 gosub *rmenu_main_ep3_scene_30045
	if %play_scene = 30050 gosub *rmenu_main_ep3_scene_30050
	if %play_scene = 30051 gosub *rmenu_main_ep3_scene_30051
	if %play_scene = 30060 gosub *rmenu_main_ep3_scene_30060
	if %play_scene = 30061 gosub *rmenu_main_ep3_scene_30061
	if %play_scene = 30070 gosub *rmenu_main_ep3_scene_30070
	if %play_scene = 30071 gosub *rmenu_main_ep3_scene_30071
	if %play_scene = 30080 gosub *rmenu_main_ep3_scene_30080
	if %play_scene = 30090 gosub *rmenu_main_ep3_scene_30090
	if %play_scene = 30100 gosub *rmenu_main_ep3_scene_30100
	if %play_scene = 30101 gosub *rmenu_main_ep3_scene_30101
	if %play_scene = 30110 gosub *rmenu_main_ep3_scene_30110
	if %play_scene = 30120 gosub *rmenu_main_ep3_scene_30120
	if %play_scene = 30130 gosub *rmenu_main_ep3_scene_30130
	if %play_scene = 30140 gosub *rmenu_main_ep3_scene_30140
	if %play_scene = 30150 gosub *rmenu_main_ep3_scene_30150
	if %play_scene = 30160 gosub *rmenu_main_ep3_scene_30160
	if %play_scene = 30170 gosub *rmenu_main_ep3_scene_30170
	if %play_scene = 30180 gosub *rmenu_main_ep3_scene_30180
	if %play_scene = 30181 gosub *rmenu_main_ep3_scene_30181
	if %play_scene = 30190 gosub *rmenu_main_ep3_scene_30190
	if %play_scene = 30200 gosub *rmenu_main_ep3_scene_30200
	if %play_scene = 30210 gosub *rmenu_main_ep3_scene_30210
	if %play_scene = 30220 gosub *rmenu_main_ep3_scene_30220
	if %play_scene = 30230 gosub *rmenu_main_ep3_scene_30230
	if %play_scene = 30240 gosub *rmenu_main_ep3_scene_30240
	if %play_scene = 30250 gosub *rmenu_main_ep3_scene_30250
	if %play_scene = 30260 gosub *rmenu_main_ep3_scene_30260
	if %play_scene = 30270 gosub *rmenu_main_ep3_scene_30270
	if %play_scene = 30280 gosub *rmenu_main_ep3_scene_30280
	if %play_scene = 30281 gosub *rmenu_main_ep3_scene_30281
	if %play_scene = 30282 gosub *rmenu_main_ep3_scene_30282
	if %play_scene = 30283 gosub *rmenu_main_ep3_scene_30283

	if %play_scene = 30290 gosub *rmenu_main_ep3_scene_30290
	if %play_scene = 30300 gosub *rmenu_main_ep3_scene_30300

	if %play_scene = 31010 gosub *rmenu_main_ep3_scene_31010
	if %play_scene = 31011 gosub *rmenu_main_ep3_scene_31011
	if %play_scene = 31020 gosub *rmenu_main_ep3_scene_31020
	if %play_scene = 31030 gosub *rmenu_main_ep3_scene_31030

	if %play_scene = 32010 gosub *rmenu_main_ep3_scene_32010
	if %play_scene = 32020 gosub *rmenu_main_ep3_scene_32020
	if %play_scene = 32030 gosub *rmenu_main_ep3_scene_32030
	if %play_scene = 32040 gosub *rmenu_main_ep3_scene_32040

	notif %play_scene >= 32020 mov ?r[enj][condition],-1
return

*rmenu_play_scene_ep3_2
	if %play_scene = 30010 gosub *rmenu_main_ep3_2_scene_30010
	if %play_scene = 30020 gosub *rmenu_main_ep3_2_scene_30020
	if %play_scene = 30021 gosub *rmenu_main_ep3_2_scene_30021
	if %play_scene = 30022 gosub *rmenu_main_ep3_2_scene_30022
	if %play_scene = 30030 gosub *rmenu_main_ep3_2_scene_30030
	if %play_scene = 30031 gosub *rmenu_main_ep3_2_scene_30031
	if %play_scene = 30032 gosub *rmenu_main_ep3_2_scene_30032
	if %play_scene = 30035 gosub *rmenu_main_ep3_2_scene_30035
	if %play_scene = 30040 gosub *rmenu_main_ep3_2_scene_30040
	if %play_scene = 30050 gosub *rmenu_main_ep3_2_scene_30050
	if %play_scene = 30051 gosub *rmenu_main_ep3_2_scene_30051
	if %play_scene = 30060 gosub *rmenu_main_ep3_2_scene_30060
	if %play_scene = 30061 gosub *rmenu_main_ep3_2_scene_30061	
	if %play_scene = 30070 gosub *rmenu_main_ep3_2_scene_30070
	if %play_scene = 30071 gosub *rmenu_main_ep3_2_scene_30071
	if %play_scene = 30080 gosub *rmenu_main_ep3_2_scene_30080
	if %play_scene = 30090 gosub *rmenu_main_ep3_2_scene_30090
	if %play_scene = 30100 gosub *rmenu_main_ep3_2_scene_30100
	if %play_scene = 30101 gosub *rmenu_main_ep3_2_scene_30101
	if %play_scene = 30110 gosub *rmenu_main_ep3_2_scene_30110
	if %play_scene = 30120 gosub *rmenu_main_ep3_2_scene_30120
	if %play_scene = 30130 gosub *rmenu_main_ep3_2_scene_30130
	if %play_scene = 30140 gosub *rmenu_main_ep3_2_scene_30140
	if %play_scene = 30150 gosub *rmenu_main_ep3_2_scene_30150
	if %play_scene = 30160 gosub *rmenu_main_ep3_2_scene_30160
	if %play_scene = 30170 gosub *rmenu_main_ep3_2_scene_30170
	if %play_scene = 30180 gosub *rmenu_main_ep3_2_scene_30180
	if %play_scene = 30181 gosub *rmenu_main_ep3_2_scene_30181
	if %play_scene = 30190 gosub *rmenu_main_ep3_2_scene_30190
	if %play_scene = 30200 gosub *rmenu_main_ep3_2_scene_30200
	if %play_scene = 30210 gosub *rmenu_main_ep3_2_scene_30210
	if %play_scene = 30220 gosub *rmenu_main_ep3_2_scene_30220
	if %play_scene = 30230 gosub *rmenu_main_ep3_2_scene_30230
	if %play_scene = 30240 gosub *rmenu_main_ep3_2_scene_30240
	if %play_scene = 30250 gosub *rmenu_main_ep3_2_scene_30250
	if %play_scene = 30260 gosub *rmenu_main_ep3_2_scene_30260
	if %play_scene = 30270 gosub *rmenu_main_ep3_2_scene_30270
	if %play_scene = 30280 gosub *rmenu_main_ep3_2_scene_30280
	if %play_scene = 30281 gosub *rmenu_main_ep3_2_scene_30281
	if %play_scene = 30282 gosub *rmenu_main_ep3_2_scene_30282
	if %play_scene = 30283 gosub *rmenu_main_ep3_2_scene_30283
	if %play_scene = 30290 gosub *rmenu_main_ep3_2_scene_30290
	if %play_scene = 30300 gosub *rmenu_main_ep3_2_scene_30300

	if %play_scene = 31010 gosub *rmenu_main_ep3_2_scene_31010
	if %play_scene = 31011 gosub *rmenu_main_ep3_2_scene_31011
	if %play_scene = 31020 gosub *rmenu_main_ep3_2_scene_31020
	if %play_scene = 31030 gosub *rmenu_main_ep3_2_scene_31030

	if %play_scene = 32010 gosub *rmenu_main_ep3_2_scene_32010
	if %play_scene = 32020 gosub *rmenu_main_ep3_2_scene_32020
	if %play_scene = 32030 gosub *rmenu_main_ep3_2_scene_32030
	if %play_scene = 32040 gosub *rmenu_main_ep3_2_scene_32040

	notif %play_scene >= 32040 mov ?r[enj][condition],-1
return

*rmenu_play_scene_ep4
	if %r_for_title = 1 jumpf
		if %play_scene >= 40190 && %play_scene <= 40300 gosub *rmenu_main_ep4_scene_40190
		if %play_scene = 40260 gosub *rmenu_main_ep4_scene_40260
		if %play_scene >= 40270 && %play_scene <= 40330 gosub *rmenu_main_ep4_scene_40270
		if %play_scene = 40335 gosub *rmenu_main_ep4_scene_40260
		if %play_scene = 40340 gosub *rmenu_main_ep4_scene_40260
		if %play_scene = 40350 gosub *rmenu_main_ep4_scene_40350
		if %play_scene = 40360 gosub *rmenu_main_ep4_scene_40360
		if %play_scene = 40370 gosub *rmenu_main_ep4_scene_40370
		if %play_scene = 40380 gosub *rmenu_main_ep4_scene_40380
		if %play_scene = 40390 gosub *rmenu_main_ep4_scene_40390
		if %play_scene = 40400 gosub *rmenu_main_ep4_scene_40400
		if %play_scene = 40410 gosub *rmenu_main_ep4_scene_40410
		if %play_scene = 40420 gosub *rmenu_main_ep4_scene_40420
		if %play_scene = 40430 gosub *rmenu_main_ep4_scene_40430
		if %play_scene = 40440 gosub *rmenu_main_ep4_scene_40440
		if %play_scene = 40450 gosub *rmenu_main_ep4_scene_40450
	~
return

*rmenu_play_scene_ep4_2
	if %r_for_title = 1 jumpf
		if %play_scene = 40001 gosub *rmenu_main_ep4_2_scene_40001
		if %play_scene = 40005 gosub *rmenu_main_ep4_2_scene_40005
		if %play_scene < 40090 && %play_scene >= 40010 gosub *rmenu_main_ep4_2_scene_40005
		if %play_scene = 40090 gosub *rmenu_main_ep4_2_scene_40090
		if %play_scene = 40100 gosub *rmenu_main_ep4_2_scene_40100
		if %play_scene >= 40110 && %play_scene <= 40140 gosub *rmenu_main_ep4_2_scene_40110
		if %play_scene = 40150 gosub *rmenu_main_ep4_2_scene_40150
		if %play_scene = 40160 gosub *rmenu_main_ep4_2_scene_40160
		if %play_scene = 40170 gosub *rmenu_main_ep4_2_scene_40170
		if %play_scene = 40175 gosub *rmenu_main_ep4_2_scene_40170
		if %play_scene = 40180 gosub *rmenu_main_ep4_2_scene_40180
		if %play_scene = 40190 gosub *rmenu_main_ep4_2_scene_40180
		if %play_scene = 40200 gosub *rmenu_main_ep4_2_scene_40200
		if %play_scene = 40210 gosub *rmenu_main_ep4_2_scene_40210
		if %play_scene >= 40220 && %play_scene <= 40270 gosub *rmenu_main_ep4_2_scene_40220
		if %play_scene = 40280 gosub *rmenu_main_ep4_2_scene_40280
		if %play_scene = 40290 gosub *rmenu_main_ep4_2_scene_40280
		if %play_scene = 40300 gosub *rmenu_main_ep4_2_scene_40300
		if %play_scene = 40310 gosub *rmenu_main_ep4_2_scene_40310
		if %play_scene = 40320 gosub *rmenu_main_ep4_2_scene_40320
		if %play_scene >= 40330 && %play_scene <= 40440 gosub *rmenu_main_ep4_2_scene_40330
		if %play_scene >= 40450 gosub *rmenu_main_ep4_2_scene_40450
	~
return

*rmenu_play_scene_ep4_3
	if %r_for_title = 1 jumpf
		if %play_scene = 40000 gosub *rmenu_main_ep4_3_scene_40000
		if %play_scene > 40000 && %play_scene < 40010 gosub *rmenu_main_ep4_2_scene_40000
		if %play_scene = 40010 gosub *rmenu_main_ep4_3_scene_40010
		if %play_scene = 40020 gosub *rmenu_main_ep4_3_scene_40020
		if %play_scene = 40030 gosub *rmenu_main_ep4_3_scene_40030
		if %play_scene = 40040 gosub *rmenu_main_ep4_3_scene_40040
		if %play_scene = 40050 gosub *rmenu_main_ep4_3_scene_40050
		if %play_scene = 40060 gosub *rmenu_main_ep4_3_scene_40060
		if %play_scene = 40070 gosub *rmenu_main_ep4_3_scene_40070
		if %play_scene >= 40080 && %play_scene <= 40110 gosub *rmenu_main_ep4_3_scene_40080
		if %play_scene = 40120 gosub *rmenu_main_ep4_3_scene_40120
		if %play_scene = 40130 gosub *rmenu_main_ep4_3_scene_40130
		if %play_scene >= 40140 && %play_scene <= 40170 gosub *rmenu_main_ep4_3_scene_40140
		if %play_scene >= 40175 && %play_scene <= 40220 gosub *rmenu_main_ep4_3_scene_40175
		if %play_scene = 40230 gosub *rmenu_main_ep4_3_scene_40230
		if %play_scene = 40240 gosub *rmenu_main_ep4_3_scene_40240
		if %play_scene >= 40250 && %play_scene <= 40280 gosub *rmenu_main_ep4_3_scene_40250
		if %play_scene = 40290 gosub *rmenu_main_ep4_3_scene_40290
		if %play_scene >= 40300 && %play_scene <= 40500 gosub *rmenu_main_ep4_3_scene_40250
	~
return

*rmenu_play_scene_ep5
	if %r_for_title = 1 jumpf
		if %play_scene = 50000 gosub *rmenu_main_ep5_scene_50000
		if %play_scene = 50005 gosub *rmenu_main_ep5_scene_50005
		if %play_scene = 50010 gosub *rmenu_main_ep5_scene_50010
		if %play_scene = 50015 gosub *rmenu_main_ep5_scene_50015
		if %play_scene = 50020 gosub *rmenu_main_ep5_scene_50020
		if %play_scene = 50030 gosub *rmenu_main_ep5_scene_50030
		if %play_scene = 50031 gosub *rmenu_main_ep5_scene_50031
		if %play_scene = 50032 gosub *rmenu_main_ep5_scene_50032
		if %play_scene = 50035 gosub *rmenu_main_ep5_scene_50035
		if %play_scene = 50036 gosub *rmenu_main_ep5_scene_50036
		if %play_scene = 50040 gosub *rmenu_main_ep5_scene_50040
		if %play_scene = 50050 gosub *rmenu_main_ep5_scene_50050
		if %play_scene = 50055 gosub *rmenu_main_ep5_scene_50055
		if %play_scene = 50056 gosub *rmenu_main_ep5_scene_50056

		if %play_scene = 50100 gosub *rmenu_main_ep5_scene_50100
		if %play_scene = 50110 gosub *rmenu_main_ep5_scene_50110
	~
return

*rmenu_play_scene_ep5_2
	if %r_for_title = 1 jumpf
		if %play_scene = 50000 gosub *rmenu_main_ep5_2_scene_50000
		if %play_scene = 50005 gosub *rmenu_main_ep5_2_scene_50005
		if %play_scene = 50010 gosub *rmenu_main_ep5_2_scene_50010
		if %play_scene = 50015 gosub *rmenu_main_ep5_2_scene_50015
		if %play_scene = 50020 gosub *rmenu_main_ep5_2_scene_50020
		if %play_scene = 50030 gosub *rmenu_main_ep5_2_scene_50030
		if %play_scene = 50031 gosub *rmenu_main_ep5_2_scene_50031
		if %play_scene = 50032 gosub *rmenu_main_ep5_2_scene_50032
		if %play_scene = 50035 gosub *rmenu_main_ep5_2_scene_50035
		if %play_scene = 50036 gosub *rmenu_main_ep5_2_scene_50036
		if %play_scene = 50040 gosub *rmenu_main_ep5_2_scene_50040
		if %play_scene = 50050 gosub *rmenu_main_ep5_2_scene_50050
		if %play_scene = 50055 gosub *rmenu_main_ep5_2_scene_50055
		if %play_scene = 50056 gosub *rmenu_main_ep5_2_scene_50056
		if %play_scene = 50100 gosub *rmenu_main_ep5_2_scene_50100
		if %play_scene = 50110 gosub *rmenu_main_ep5_2_scene_50110
~
return

*rmenu_play_scene_ep6
if %r_for_title = 1 jumpf
	if %play_scene = 60000 gosub *rmenu_main_ep6_scene_60000
	if %play_scene = 60010 gosub *rmenu_main_ep6_scene_60010
	if %play_scene = 60011 gosub *rmenu_main_ep6_scene_60011
	if %play_scene = 60012 gosub *rmenu_main_ep6_scene_60012
	if %play_scene = 60013 gosub *rmenu_main_ep6_scene_60013
	if %play_scene = 60020 gosub *rmenu_main_ep6_scene_60020
	if %play_scene = 60030 gosub *rmenu_main_ep6_scene_60030
	if %play_scene = 60031 gosub *rmenu_main_ep6_scene_60031
	if %play_scene = 60040 gosub *rmenu_main_ep6_scene_60040
	if %play_scene = 60050 gosub *rmenu_main_ep6_scene_60050
	if %play_scene = 60060 gosub *rmenu_main_ep6_scene_60060
	if %play_scene = 60070 gosub *rmenu_main_ep6_scene_60070
	if %play_scene = 60071 gosub *rmenu_main_ep6_scene_60071
	if %play_scene = 60080 gosub *rmenu_main_ep6_scene_60080
	if %play_scene = 60090 gosub *rmenu_main_ep6_scene_60090
	if %play_scene = 60100 gosub *rmenu_main_ep6_scene_60100
~
return

*rmenu_play_scene_ep6_2
if %r_for_title = 1 jumpf
	if %play_scene = 60000 gosub *rmenu_main_ep6_2_scene_60000
	if %play_scene = 60010 gosub *rmenu_main_ep6_2_scene_60010
	if %play_scene = 60011 gosub *rmenu_main_ep6_2_scene_60011
	if %play_scene = 60012 gosub *rmenu_main_ep6_2_scene_60012
	if %play_scene = 60013 gosub *rmenu_main_ep6_2_scene_60013
	if %play_scene = 60020 gosub *rmenu_main_ep6_2_scene_60020
	if %play_scene = 60030 gosub *rmenu_main_ep6_2_scene_60030
	if %play_scene = 60031 gosub *rmenu_main_ep6_2_scene_60031
	if %play_scene = 60040 gosub *rmenu_main_ep6_2_scene_60040
	if %play_scene = 60050 gosub *rmenu_main_ep6_2_scene_60050
	if %play_scene = 60060 gosub *rmenu_main_ep6_2_scene_60060
	if %play_scene = 60070 gosub *rmenu_main_ep6_2_scene_60070
	if %play_scene = 60071 gosub *rmenu_main_ep6_2_scene_60071
	if %play_scene = 60080 gosub *rmenu_main_ep6_2_scene_60080
	if %play_scene = 60090 gosub *rmenu_main_ep6_2_scene_60090
	if %play_scene = 60100 gosub *rmenu_main_ep6_2_scene_60100
~
return

*rmenu_play_scene_ep6_3
if %r_for_title = 1 jumpf
	if %play_scene = 60000 gosub *rmenu_main_ep6_3_scene_60000
	if %play_scene = 60000 gosub *rmenu_main_ep6_3_scene_60000
	if %play_scene = 60010 gosub *rmenu_main_ep6_3_scene_60010
	if %play_scene = 60011 gosub *rmenu_main_ep6_3_scene_60011
	if %play_scene = 60012 gosub *rmenu_main_ep6_3_scene_60012
	if %play_scene = 60013 gosub *rmenu_main_ep6_3_scene_60013
	if %play_scene = 60020 gosub *rmenu_main_ep6_3_scene_60020
	if %play_scene = 60030 gosub *rmenu_main_ep6_3_scene_60030
	if %play_scene = 60031 gosub *rmenu_main_ep6_3_scene_60031
	if %play_scene = 60040 gosub *rmenu_main_ep6_3_scene_60040
	if %play_scene = 60050 gosub *rmenu_main_ep6_3_scene_60050
	if %play_scene = 60060 gosub *rmenu_main_ep6_3_scene_60060
	if %play_scene = 60070 gosub *rmenu_main_ep6_3_scene_60070
	if %play_scene = 60071 gosub *rmenu_main_ep6_3_scene_60071
	if %play_scene = 60080 gosub *rmenu_main_ep6_3_scene_60080
	if %play_scene = 60090 gosub *rmenu_main_ep6_3_scene_60090
	if %play_scene = 60100 gosub *rmenu_main_ep6_3_scene_60100
~
return

*rmenu_play_scene_ep7
if %r_for_title = 1 jumpf
	if %play_scene = 70000 gosub *rmenu_main_ep7_scene_70000
	if %play_scene = 70010 gosub *rmenu_main_ep7_scene_70010
	if %play_scene = 70011 gosub *rmenu_main_ep7_scene_70011
	if %play_scene = 70020 gosub *rmenu_main_ep7_scene_70020
	if %play_scene = 70030 gosub *rmenu_main_ep7_scene_70030
	if %play_scene = 70040 gosub *rmenu_main_ep7_scene_70040
	if %play_scene = 70100 gosub *rmenu_main_ep7_scene_70100
~
return

*rmenu_play_scene_ep7_2
if %r_for_title = 1 jumpf
	if %play_scene = 70000 gosub *rmenu_main_ep7_2_scene_70000
	if %play_scene = 70010 gosub *rmenu_main_ep7_2_scene_70010
	if %play_scene = 70011 gosub *rmenu_main_ep7_2_scene_70011
	if %play_scene = 70020 gosub *rmenu_main_ep7_2_scene_70020
	if %play_scene = 70030 gosub *rmenu_main_ep7_2_scene_70030
	if %play_scene = 70040 gosub *rmenu_main_ep7_2_scene_70040
	if %play_scene = 70100 gosub *rmenu_main_ep7_2_scene_70100
~
return

*rmenu_play_scene_ep8
if %r_for_title = 1 jumpf
	if %play_scene = 80000 gosub *rmenu_main_ep8_scene_80000
	if %play_scene = 80010 gosub *rmenu_main_ep8_scene_80010
	if %play_scene = 80011 gosub *rmenu_main_ep8_scene_80011
	if %play_scene = 80020 gosub *rmenu_main_ep8_scene_80020
	if %play_scene = 80030 gosub *rmenu_main_ep8_scene_80030
	if %play_scene = 80040 gosub *rmenu_main_ep8_scene_80040
	if %play_scene = 80050 gosub *rmenu_main_ep8_scene_80050
	if %play_scene = 80060 gosub *rmenu_main_ep8_scene_80060
	if %play_scene = 80070 gosub *rmenu_main_ep8_scene_80070
	if %play_scene = 80080 gosub *rmenu_main_ep8_scene_80080
	if %play_scene = 80090 gosub *rmenu_main_ep8_scene_80090
	if %play_scene = 80100 gosub *rmenu_main_ep8_scene_80100
	if %play_scene = 80110 gosub *rmenu_main_ep8_scene_80110
	if %play_scene = 80120 gosub *rmenu_main_ep8_scene_80120
	if %play_scene = 80130 gosub *rmenu_main_ep8_scene_80130
	if %play_scene = 80140 gosub *rmenu_main_ep8_scene_80140
	if %play_scene = 80150 gosub *rmenu_main_ep8_scene_80150
	if %play_scene >= 80301 && %play_scene <= 80321 gosub *rmenu_main_ep8_scene_80110
~
return

*rmenu_play_scene_ep8_2
if %r_for_title = 1 jumpf
	if %play_scene = 80000 gosub *rmenu_main_ep8_2_scene_80000
	if %play_scene = 80010 gosub *rmenu_main_ep8_2_scene_80010
	if %play_scene = 80011 gosub *rmenu_main_ep8_2_scene_80011
	if %play_scene = 80020 gosub *rmenu_main_ep8_2_scene_80020
	if %play_scene = 80030 gosub *rmenu_main_ep8_2_scene_80030
	if %play_scene = 80040 gosub *rmenu_main_ep8_2_scene_80040
	if %play_scene = 80050 gosub *rmenu_main_ep8_2_scene_80050
	if %play_scene = 80060 gosub *rmenu_main_ep8_2_scene_80060
	if %play_scene = 80070 gosub *rmenu_main_ep8_2_scene_80070
	if %play_scene = 80080 gosub *rmenu_main_ep8_2_scene_80080
	if %play_scene = 80090 gosub *rmenu_main_ep8_2_scene_80090
	if %play_scene = 80100 gosub *rmenu_main_ep8_2_scene_80100
	if %play_scene = 80110 gosub *rmenu_main_ep8_2_scene_80110
	if %play_scene = 80120 gosub *rmenu_main_ep8_2_scene_80120
	if %play_scene = 80130 gosub *rmenu_main_ep8_2_scene_80130
	if %play_scene = 80140 gosub *rmenu_main_ep8_2_scene_80140
	if %play_scene = 80150 gosub *rmenu_main_ep8_2_scene_80150
	if %play_scene >= 80301 && %play_scene <= 80321 gosub *rmenu_main_ep8_2_scene_80110
~
return

*rmenu_play_scene_ep8_3
if %r_for_title = 1 jumpf
	if %play_scene = 80000 gosub *rmenu_main_ep8_3_scene_80000
	if %play_scene = 80010 gosub *rmenu_main_ep8_3_scene_80010
	if %play_scene = 80011 gosub *rmenu_main_ep8_3_scene_80011
	if %play_scene = 80020 gosub *rmenu_main_ep8_3_scene_80020
	if %play_scene = 80030 gosub *rmenu_main_ep8_3_scene_80030
	if %play_scene = 80040 gosub *rmenu_main_ep8_3_scene_80040
	if %play_scene = 80100 gosub *rmenu_main_ep8_3_scene_80100
	~
return

*btlp_ep2
	notif %BtnRes = r_exec_lsp jumpf

		;Предотвращает лишнее нажатие кнопки убить
		if %mchar_state=1 && ?r[%r_display_cha][condition] = 3 return
		if %mchar_state=0 && ?r[%r_display_cha][condition] = 2 return
		if %mchar_state=2 && ?r[%r_display_cha][condition] = 1 return
		
		
		
		if %r_display_cha = 0 goto *rmenu_custom_btlp_50_ep2
		if ?r[%r_display_cha][condition] >= ?r[%r_display_cha][condition_end]  goto *rmenu_custom_btlp_50_ep2
		if ?r[%r_display_cha][condition] <= 0 goto *rmenu_custom_btlp_50_ep2
			mov %tmp,?r[%r_display_cha][condition] : inc %tmp : mov ?r[%r_display_cha][condition],%tmp
			seplay 9,1100,100
		*rmenu_custom_btlp_50_ep2
		notif %r_display_cha = 0 goto *rmenu_custom_btlp_100_ep2
		if %scenario_Number = 1 mov %Free1,char_max
		if %scenario_Number = 2 mov %Free1,char_max_ep2
		if %scenario_Number = 3 mov %Free1,char_max_ep3
		if %scenario_Number = 4 mov %Free1,char_max_ep4
			for %tmp = 1 to %Free1
				if ?r[%tmp][condition] >= ?r[%tmp][condition_end]  goto *rmenu_custom_btlp_90_ep2
				if ?r[%tmp][condition] <= 0 goto *rmenu_custom_btlp_90_ep2
					mov %tmp2,?r[%tmp][condition] : inc %tmp2 : mov ?r[%tmp][condition],%tmp2
				*rmenu_custom_btlp_90_ep2
			next
			seplay 9,1100,100
		*rmenu_custom_btlp_100_ep2

		gosub *r_cha_button_new
		print 1
	~
	
	notif %BtnRes = r_resu_lsp jumpf
		if ?r[%r_display_cha][condition] = 1 return
		if %r_display_cha = 0 goto *rmenu_custom_btlp_150_ep2
		if ?r[%r_display_cha][condition] <= 1 goto *rmenu_custom_btlp_200_ep2
			mov %tmp,?r[%r_display_cha][condition] : dec %tmp : mov ?r[%r_display_cha][condition],%tmp
			seplay 9,1021,100
		*rmenu_custom_btlp_150_ep2
		
		notif %r_display_cha = 0 goto *rmenu_custom_btlp_200_ep2
		if %scenario_Number = 1 mov %Free1,char_max
		if %scenario_Number = 2 mov %Free1,char_max_ep2
		if %scenario_Number = 3 mov %Free1,char_max_ep3
		if %scenario_Number = 4 mov %Free1,char_max_ep4
			for %tmp = 1 to %Free1
				if ?r[%tmp][condition] <= 1 goto *rmenu_custom_btlp_190_ep2
					mov %tmp2,?r[%tmp][condition] : dec %tmp2 : mov ?r[%tmp][condition],%tmp2
				*rmenu_custom_btlp_190_ep2
			next
			seplay 9,1023,100
		*rmenu_custom_btlp_200_ep2

		gosub *r_cha_button_new
		print 22
	~
	
*btlp_eps_change_stor
	notif %BtnRes = r_witches_lsp jumpf
		if %scenario_Number = 1 mov %r_u_tea_flg,1
		if %scenario_Number = 1 mov %r_ber_flg,1
		if %scenario_Number = 1 mov %r_display_cha,bea
		if %scenario_Number = 2 mov %r_display_cha,bea
		mov %r_side,1
		mov %r_display_side,1
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %r_side_change,3
		gosub *r_image_cleanup
		mov %cha_text_page,1
	~
	
	notif %BtnRes = r_ange_lsp jumpf
		if %scenario_Number = 4 mov %r_display_cha,enj_enj
		mov %r_side,2
		mov %r_display_side,2
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %r_side_change,3
		gosub *r_image_cleanup
		mov %cha_text_page,1
	~
	
	notif %BtnRes = r_people_lsp jumpf
		if %scenario_Number = 1 mov %r_u_tea_flg,0
		if %scenario_Number = 1 mov %r_ber_flg,0
		if %scenario_Number = 1 mov %r_display_cha,kin
		if %scenario_Number = 2 mov %r_display_cha,bea
		mov %r_side,0
		mov %r_display_side,0
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %r_side_change,3
		gosub *r_image_cleanup
		mov %cha_text_page,1
	~

	notif %BtnRes = r_change_lsp jumpf
		if %scenario_Number = 2 mov ?r[%r_display_cha][condition],1
	
		if %scenario_Number = 3 mov ?r[%r_display_cha_ma][condition],1
		if %scenario_Number = 4 mov ?r[%r_display_cha_enj][condition],1
	
		if %scenario_Number = 2 && ?r[%r_display_cha][r_ishou] = 1 mov ?r[%r_display_cha][r_ishou],2 : goto *r_change_lsp_100
		if %scenario_Number = 2 && ?r[%r_display_cha][r_ishou] = 2 mov ?r[%r_display_cha][r_ishou],1 : goto *r_change_lsp_100
		
		if %scenario_Number = 3 && ?r[%r_display_cha_ma][r_ishou] = 1 mov ?r[%r_display_cha_ma][r_ishou],2 : goto *r_change_lsp_100
		if %scenario_Number = 3 && ?r[%r_display_cha_ma][r_ishou] = 2 mov ?r[%r_display_cha_ma][r_ishou],1 : goto *r_change_lsp_100
		
		if %scenario_Number = 4 && ?r[%r_display_cha_enj][r_ishou] = 1 mov ?r[%r_display_cha_enj][r_ishou],2 : goto *r_change_lsp_100
		if %scenario_Number = 4 && ?r[%r_display_cha_enj][r_ishou] = 2 mov ?r[%r_display_cha_enj][r_ishou],1 : goto *r_change_lsp_100
		
		*r_change_lsp_100

		gosub *r_cha_display
		seplay 9,1001,100
		print 1
	~
return
	
*btlp_ep4_2
	notif %BtnRes = r_exec_lsp jumpf

		;Предотвращает лишнее нажатие кнопки убить
		if %mchar_state=1 && ?r[%r_display_cha_ma][condition] = 3 return
		if %mchar_state=0 && ?r[%r_display_cha_ma][condition] = 2 return
		if %mchar_state=2 && ?r[%r_display_cha_ma][condition] = 1 return
		
		if %r_display_cha_ma = 0 goto *rmenu_custom_btlp_50_ep4_2
		if ?r[%r_display_cha_ma][condition] >= ?r[%r_display_cha_ma][condition_end]  goto *rmenu_custom_btlp_50_ep4_2
		if ?r[%r_display_cha_ma][condition] <= 0 goto *rmenu_custom_btlp_50_ep4_2
			mov %tmp,?r[%r_display_cha_ma][condition] : inc %tmp : mov ?r[%r_display_cha_ma][condition],%tmp
			seplay 9,1100,100
		*rmenu_custom_btlp_50_ep4_2
		
		notif %r_display_cha_ma = 0 goto *rmenu_custom_btlp_100_ep4_2
			for %tmp = 1 to char_max_ep4_2
				if ?r[%tmp][condition] >= ?r[%tmp][condition_end]  goto *rmenu_custom_btlp_90_ep4_2
				if ?r[%tmp][condition] <= 0 goto *rmenu_custom_btlp_90_ep4_2
					mov %tmp2,?r[%tmp][condition] : inc %tmp2 : mov ?r[%tmp][condition],%tmp2
				*rmenu_custom_btlp_90_ep4_2
			next
			seplay 9,1100,100
		*rmenu_custom_btlp_100_ep4_2

		gosub *r_cha_button_new
		print 1
	~

	notif %BtnRes = r_resu_lsp jumpf
		
		if ?r[%r_display_cha_ma][condition] = 1 return
		
		if %r_display_cha_ma = 0 goto *rmenu_custom_btlp_150_ep4_2
		if ?r[%r_display_cha_ma][condition] <= 1 goto *rmenu_custom_btlp_200_ep4_2
			mov %tmp,?r[%r_display_cha_ma][condition] : dec %tmp : mov ?r[%r_display_cha_ma][condition],%tmp
			seplay 9,1021,100
		*rmenu_custom_btlp_150_ep4_2
		
		notif %r_display_cha_ma = 0 goto *rmenu_custom_btlp_200_ep4_2
			for %tmp = 1 to char_max_ep4_2
				if ?r[%tmp][condition] <= 1 goto *rmenu_custom_btlp_190_ep4_2
					mov %tmp2,?r[%tmp][condition] : dec %tmp2 : mov ?r[%tmp][condition],%tmp2
				*rmenu_custom_btlp_190_ep4_2
			next
			seplay 9,1023,100
			
		*rmenu_custom_btlp_200_ep4_2

		gosub *r_cha_button_new
		print 22
	~
return
	
*btlp_ep4_3
	notif %BtnRes = r_exec_lsp jumpf
		if %mchar_state=1 && ?r[%r_display_cha_enj][condition] = 3 return
		if %mchar_state=0 && ?r[%r_display_cha_enj][condition] = 2 return
		if %mchar_state=2 && ?r[%r_display_cha_enj][condition] = 1 return

		if %r_display_cha_enj = 0 goto *rmenu_custom_btlp_50_ep4_3
		if ?r[%r_display_cha_enj][condition] >= ?r[%r_display_cha_enj][condition_end]  goto *rmenu_custom_btlp_50_ep4_3
		if ?r[%r_display_cha_enj][condition] <= 0 goto *rmenu_custom_btlp_50_ep4_3
			mov %tmp,?r[%r_display_cha_enj][condition] : inc %tmp : mov ?r[%r_display_cha_enj][condition],%tmp
			seplay 9,1100,100
		*rmenu_custom_btlp_50_ep4_3
		
		notif %r_display_cha_enj = 0 goto *rmenu_custom_btlp_100_ep4_3
			for %tmp = 1 to char_max_ep4_2
				if ?r[%tmp][condition] >= ?r[%tmp][condition_end]  goto *rmenu_custom_btlp_90_ep4_3
				if ?r[%tmp][condition] <= 0 goto *rmenu_custom_btlp_90_ep4_3
					mov %tmp2,?r[%tmp][condition] : inc %tmp2 : mov ?r[%tmp][condition],%tmp2
				*rmenu_custom_btlp_90_ep4_3
			next
			seplay 9,1100,100
		*rmenu_custom_btlp_100_ep4_3

		gosub *r_cha_button_new
		print 1
	~

	notif %BtnRes = r_resu_lsp jumpf
	
		if ?r[%r_display_cha_enj][condition] = 1 return
		
		if %r_display_cha_enj = 0 goto *rmenu_custom_btlp_150_ep4_3
		if ?r[%r_display_cha_enj][condition] <= 1 goto *rmenu_custom_btlp_200_ep4_3
			mov %tmp,?r[%r_display_cha_enj][condition] : dec %tmp : mov ?r[%r_display_cha_enj][condition],%tmp
			seplay 9,1021,100
		*rmenu_custom_btlp_150_ep4_3
		
		notif %r_display_cha_enj = 0 goto *rmenu_custom_btlp_200_ep4_3
			for %tmp = 1 to char_max_ep4_3
				if ?r[%tmp][condition] <= 1 goto *rmenu_custom_btlp_190_ep4_3
					mov %tmp2,?r[%tmp][condition] : dec %tmp2 : mov ?r[%tmp][condition],%tmp2
				*rmenu_custom_btlp_190_ep4_3
			next
			seplay 9,1023,100
		*rmenu_custom_btlp_200_ep4_3

		gosub *r_cha_button_new
		print 22
	~
return
	
*btlp_ep5
	notif %BtnRes = r_exec_lsp jumpf
	
		;Предотвращает лишнее нажатие кнопки убить
		if %mchar_state=1 && ?r[%scenario_Number][%r_display_cha][condition] = 3 return
		if %mchar_state=0 && ?r[%scenario_Number][%r_display_cha][condition] = 2 return
		if %mchar_state=2 && ?r[%scenario_Number][%r_display_cha][condition] = 1 return
	
		if %r_display_cha = 0 goto *rmenu_custom_btlp_50_ep5
		if ?r[%scenario_Number][%r_display_cha][condition] >= ?r[%scenario_Number][%r_display_cha][condition_end]  goto *rmenu_custom_btlp_50_ep5
		if ?r[%scenario_Number][%r_display_cha][condition] <= 0 goto *rmenu_custom_btlp_50_ep5
			mov %tmp,?r[%scenario_Number][%r_display_cha][condition] : inc %tmp : mov ?r[%scenario_Number][%r_display_cha][condition],%tmp
			seplay 9,1100,100
		*rmenu_custom_btlp_50_ep5
		
		notif %r_display_cha = 0 goto *rmenu_custom_btlp_100_ep5
			for %tmp = 1 to char_max_ep5
				if ?r[%scenario_Number][%tmp][condition] >= ?r[%scenario_Number][%tmp][condition_end]  goto *rmenu_custom_btlp_90_ep5
				if ?r[%scenario_Number][%tmp][condition] <= 0 goto *rmenu_custom_btlp_90_ep5
					mov %tmp2,?r[%scenario_Number][%tmp][condition] : inc %tmp2 : mov ?r[%scenario_Number][%tmp][condition],%tmp2
				*rmenu_custom_btlp_90_ep5
			next
			seplay 9,1100,100
		*rmenu_custom_btlp_100_ep5

		gosub *r_cha_button_new
		print 1
	~

	notif %BtnRes = r_resu_lsp jumpf
	
	    if ?r[%scenario_Number][%r_display_cha][condition] = 1 return
		
		if %r_display_cha = 0 goto *rmenu_custom_btlp_150_ep5
		
		if ?r[%scenario_Number][%r_display_cha][condition] <= 1 goto *rmenu_custom_btlp_200_ep5
			mov %tmp,?r[%scenario_Number][%r_display_cha][condition] : dec %tmp : mov ?r[%scenario_Number][%r_display_cha][condition],%tmp
			seplay 9,1021,100
		*rmenu_custom_btlp_150_ep5
		
		notif %r_display_cha = 0 goto *rmenu_custom_btlp_200_ep5
			for %tmp = 1 to char_max_ep5
				if ?r[%scenario_Number][%tmp][condition] <= 1 goto *rmenu_custom_btlp_190_ep5
					mov %tmp2,?r[%scenario_Number][%tmp][condition] : dec %tmp2 : mov ?r[%scenario_Number][%tmp][condition],%tmp2
				*rmenu_custom_btlp_190_ep5
			next
			seplay 9,1023,100
		*rmenu_custom_btlp_200_ep5

		gosub *r_cha_button_new
		print 22
	~

	notif %BtnRes = r_witches_lsp jumpf
		;mov %r_display_cha,ma4_bea
		;mov %r_side,1
		mov %r_display_side,1
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %cha_text_page,1
		mov %r_side_change,3
		gosub *r_image_cleanup
	~

	notif %BtnRes = r_ange_lsp jumpf
		;mov %r_display_cha,enj_enj
		;mov %r_side,0
		mov %r_display_side,2
		mov %r_display,0
			lsp 2,":c;graphics\colour\black.png",0,0
			seplay 9,1010,100
			print 10,500
			mov %cha_text_page,1
			mov %r_side_change,3
		;if %play_scene >= 40010 mov %r_side_change,1 : gosub *r_image_cleanup : goto *rmenu_main_ep5_3
		;if %play_scene < 40010 mov %r_side_change,2 : gosub *r_image_cleanup : goto *rmenu_main_ep5
		gosub *r_image_cleanup
	~

	notif %BtnRes = r_change_lsp jumpf
	
		mov ?r[%scenario_Number][%r_display_cha][condition],1

		if ?r[%scenario_Number][%r_display_cha][r_ishou] = 1 mov ?r[%scenario_Number][%r_display_cha][r_ishou],2 : goto *r_change_lsp_ep5_100
		if ?r[%scenario_Number][%r_display_cha][r_ishou] = 2 mov ?r[%scenario_Number][%r_display_cha][r_ishou],1 : goto *r_change_lsp_ep5_100
		*r_change_lsp_ep5_100

		gosub *r_cha_display
		seplay 9,1001,100
		print 1
	~

return

*btlp_ep5_2
	notif %BtnRes = r_exec_lsp jumpf
	
		;Предотвращает лишнее нажатие кнопки убить
		if %mchar_state=1 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 3 return
		if %mchar_state=0 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 2 return
		if %mchar_state=2 && ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 return
		
		if %r_display_cha_ma = ma5_s45 && %r_s_hyouji = 4 mov %r_s556_flg,1 : seplay 9,1100 : goto *rmenu_custom_btlp_100_ep5_2
		
		if %r_display_cha_ma = 0 goto *rmenu_custom_btlp_50_ep5_2
		if ?r[%scenario_Number][%r_display_cha_ma][condition] >= ?r[%scenario_Number][%r_display_cha_ma][condition_end]  goto *rmenu_custom_btlp_50_ep5_2
		if ?r[%scenario_Number][%r_display_cha_ma][condition] <= 0 goto *rmenu_custom_btlp_50_ep5_2
			mov %tmp,?r[%scenario_Number][%r_display_cha_ma][condition] : inc %tmp : mov ?r[%scenario_Number][%r_display_cha_ma][condition],%tmp
			seplay 9,1100,100
		*rmenu_custom_btlp_50_ep5_2
		
		notif %r_display_cha_ma = 0 goto *rmenu_custom_btlp_100_ep5_2
			for %tmp = 1 to char_max_ep5_2
				if ?r[%scenario_Number][%tmp][condition] >= ?r[%scenario_Number][%tmp][condition_end]  goto *rmenu_custom_btlp_90_ep5_2
				if ?r[%scenario_Number][%tmp][condition] <= 0 goto *rmenu_custom_btlp_90_ep5_2
					mov %tmp2,?r[%scenario_Number][%tmp][condition] : inc %tmp2 : mov ?r[%scenario_Number][%tmp][condition],%tmp2
				*rmenu_custom_btlp_90_ep5_2
			next
			seplay 9,1100,100
		*rmenu_custom_btlp_100_ep5_2

		gosub *r_cha_button_new
		print 1
	~

	notif %BtnRes = r_resu_lsp jumpf
	
	    if ?r[%scenario_Number][%r_display_cha_ma][condition] = 1 return
		
		if %r_display_cha_ma = ma5_s45 && %r_s_hyouji = 4 mov %r_s556_flg,2 : seplay 9,1021 : goto *rmenu_custom_btlp_200_ep5_2
		if %r_display_cha_ma = ma5_s45 goto *rmenu_button_reconfigure_ep5_2_ep8_2
		
		
		if %r_display_cha_ma = 0 goto *rmenu_custom_btlp_150_ep5_2
		
		if ?r[%scenario_Number][%r_display_cha_ma][condition] <= 1 goto *rmenu_custom_btlp_200_ep5_2
			mov %tmp,?r[%scenario_Number][%r_display_cha_ma][condition] : dec %tmp : mov ?r[%scenario_Number][%r_display_cha_ma][condition],%tmp
			seplay 9,1021,100
		*rmenu_custom_btlp_150_ep5_2
		
		notif %r_display_cha_ma = 0 goto *rmenu_custom_btlp_200_ep5_2
			for %tmp = 1 to char_max_ep5_2
				if ?r[%scenario_Number][%tmp][condition] <= 1 goto *rmenu_custom_btlp_190_ep5_2
					mov %tmp2,?r[%scenario_Number][%tmp][condition] : dec %tmp2 : mov ?r[%scenario_Number][%tmp][condition],%tmp2
				*rmenu_custom_btlp_190_ep5_2
			next
			seplay 9,1023,100
		*rmenu_custom_btlp_200_ep5_2

		gosub *r_cha_button_new
		print 22
	~

	notif %BtnRes = r_people_lsp jumpf
		;mov %r_display_cha,but
		;mov %r_side,0
		mov %r_display_side,0
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %cha_text_page,1
		mov %r_side_change,3
		gosub *r_image_cleanup
	~
	
	notif %BtnRes = r_ange_lsp jumpf
		mov %r_display_cha,enj_enj
		;mov %r_side,0
		mov %r_display_side,2
		mov %r_display,0
			lsp 2,":c;graphics\colour\black.png",0,0
			seplay 9,1010,100
			print 10,500
			mov %cha_text_page,1
			mov %r_side_change,3
		;if %play_scene >= 40010 mov %r_side_change,1 : gosub *r_image_cleanup : goto *rmenu_main_ep4_3
		;if %play_scene < 40010 mov %r_side_change,2 : gosub *r_image_cleanup : goto *rmenu_main_ep4
		gosub *r_image_cleanup
	~
	
	notif %BtnRes = r_witches_lsp jumpf
		;mov %r_display_cha,ma4_bea
		;mov %r_side,1
		mov %r_display_side,1
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %cha_text_page,1
		mov %r_side_change,3
		gosub *r_image_cleanup
	~
	
	notif %BtnRes = r_change_lsp jumpf
		;if %scenario_Number = 5 && %r_display_side = 1 goto *change_cloth_ep5_2
		;if %scenario_Number = 7 && %r_display_side = 1 goto *change_cloth_ep5_2
		mov ?r[%scenario_Number][%r_display_cha_ma][condition],1

		if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 1 mov ?r[%scenario_Number][%r_display_cha_ma][r_ishou],2 : goto *r_change_lsp_100_ep5_2
		if ?r[%scenario_Number][%r_display_cha_ma][r_ishou] = 2 mov ?r[%scenario_Number][%r_display_cha_ma][r_ishou],1 : goto *r_change_lsp_100_ep5_2

		*r_change_lsp_100_ep5_2
		gosub *r_cha_display
		seplay 9,1001,100
		print 1
	~
		
return

*btlp_ep5_3
	notif %BtnRes = r_exec_lsp jumpf
	
		;Предотвращает лишнее нажатие кнопки убить
		if %mchar_state=1 && ?r[%scenario_Number][%r_display_cha_enj][condition] = 3 return
		if %mchar_state=0 && ?r[%scenario_Number][%r_display_cha_enj][condition] = 2 return
		if %mchar_state=2 && ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 return
		
		if %r_display_cha_enj = ma5_s45 && %r_s_hyouji = 4 mov %r_s556_flg,1 : seplay 9,1100 : goto *rmenu_custom_btlp_100_ep5_3
		
		if %r_display_cha_enj = 0 goto *rmenu_custom_btlp_50_ep5_3
		if ?r[%scenario_Number][%r_display_cha_enj][condition] >= ?r[%scenario_Number][%r_display_cha_enj][condition_end]  goto *rmenu_custom_btlp_50_ep5_3
		if ?r[%scenario_Number][%r_display_cha_enj][condition] <= 0 goto *rmenu_custom_btlp_50_ep5_3
			mov %tmp,?r[%scenario_Number][%r_display_cha_enj][condition] : inc %tmp : mov ?r[%scenario_Number][%r_display_cha_enj][condition],%tmp
			seplay 9,1100,100
		*rmenu_custom_btlp_50_ep5_3
		
		notif %r_display_cha_enj = 0 goto *rmenu_custom_btlp_100_ep5_3
			for %tmp = 1 to char_max_ep5_2
				if ?r[%scenario_Number][%tmp][condition] >= ?r[%scenario_Number][%tmp][condition_end]  goto *rmenu_custom_btlp_90_ep5_3
				if ?r[%scenario_Number][%tmp][condition] <= 0 goto *rmenu_custom_btlp_90_ep5_3
					mov %tmp2,?r[%scenario_Number][%tmp][condition] : inc %tmp2 : mov ?r[%scenario_Number][%tmp][condition],%tmp2
				*rmenu_custom_btlp_90_ep5_3
			next
			seplay 9,1100,100
		*rmenu_custom_btlp_100_ep5_3

		gosub *r_cha_button_new
		print 1
	~

	notif %BtnRes = r_resu_lsp jumpf
	
	    if ?r[%scenario_Number][%r_display_cha_enj][condition] = 1 return
		
		if %r_display_cha_enj = ma5_s45 && %r_s_hyouji = 4 mov %r_s556_flg,2 : seplay 9,1021 : goto *rmenu_custom_btlp_200_ep5_3
		if %r_display_cha_enj = ma5_s45 goto *rmenu_button_reconfigure_ep5_3_ep8_2
		
		
		if %r_display_cha_enj = 0 goto *rmenu_custom_btlp_150_ep5_3
		
		if ?r[%scenario_Number][%r_display_cha_enj][condition] <= 1 goto *rmenu_custom_btlp_200_ep5_3
			mov %tmp,?r[%scenario_Number][%r_display_cha_enj][condition] : dec %tmp : mov ?r[%scenario_Number][%r_display_cha_enj][condition],%tmp
			seplay 9,1021,100
		*rmenu_custom_btlp_150_ep5_3
		
		notif %r_display_cha_enj = 0 goto *rmenu_custom_btlp_200_ep5_3
			for %tmp = 1 to char_max_ep5_2
				if ?r[%scenario_Number][%tmp][condition] <= 1 goto *rmenu_custom_btlp_190_ep5_3
					mov %tmp2,?r[%scenario_Number][%tmp][condition] : dec %tmp2 : mov ?r[%scenario_Number][%tmp][condition],%tmp2
				*rmenu_custom_btlp_190_ep5_3
			next
			seplay 9,1023,100
		*rmenu_custom_btlp_200_ep5_3

		gosub *r_cha_button_new
		print 22
	~

	notif %BtnRes = r_people_lsp jumpf
		;mov %r_display_cha,but
		;mov %r_side,0
		mov %r_display_side,0
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %cha_text_page,1
		mov %r_side_change,3
		gosub *r_image_cleanup
	~
	
	notif %BtnRes = r_ange_lsp jumpf
		mov %r_display_cha,enj_enj
		;mov %r_side,0
		mov %r_display_side,2
		mov %r_display,0
			lsp 2,":c;graphics\colour\black.png",0,0
			seplay 9,1010,100
			print 10,500
			mov %cha_text_page,1
			mov %r_side_change,3
		;if %play_scene >= 40010 mov %r_side_change,1 : gosub *r_image_cleanup : goto *rmenu_main_ep4_3
		;if %play_scene < 40010 mov %r_side_change,2 : gosub *r_image_cleanup : goto *rmenu_main_ep4
		gosub *r_image_cleanup
	~
	
	notif %BtnRes = r_witches_lsp jumpf
		;mov %r_display_cha,ma4_bea
		;mov %r_side,1
		mov %r_display_side,1
		mov %r_display,0
		lsp 2,":c;graphics\colour\black.png",0,0
		seplay 9,1010,100
		print 10,500
		mov %cha_text_page,1
		mov %r_side_change,3
		gosub *r_image_cleanup
	~
	
	notif %BtnRes = r_change_lsp jumpf
		;if %scenario_Number = 5 && %r_display_side = 1 goto *change_cloth_ep5_3
		;if %scenario_Number = 7 && %r_display_side = 1 goto *change_cloth_ep5_3
		mov ?r[%scenario_Number][%r_display_cha_enj][condition],1

		if ?r[%scenario_Number][%r_display_cha_enj][r_ishou] = 1 mov ?r[%scenario_Number][%r_display_cha_enj][r_ishou],2 : goto *r_change_lsp_100_ep5_3
		if ?r[%scenario_Number][%r_display_cha_enj][r_ishou] = 2 mov ?r[%scenario_Number][%r_display_cha_enj][r_ishou],1 : goto *r_change_lsp_100_ep5_3

		*r_change_lsp_100_ep5_3
		gosub *r_cha_display
		seplay 9,1001,100
		print 1
	~
		
return

;======================
;TIPS_MENU
;======================
*rmenu_main_tips
	border_pad_push 5
	textoff
	monocro off
	
*rmenu_main_tips_reload
	; request a fade in effect on entrance and tips <-> grim switch.
	mov %r_side_change,1

	lsp r_black_lsp,":a;graphics\menu\SystemBtn\black_buttons.png",0,0
	lsp r_bg_lsp,":c;graphics\menu\tips\bg_tips.png",0,0
	if %r_display = 1 lsp 100,tips_caption,20,0
	if %r_display = 2 lsp 100,grim_caption,20,0
	lsp r_exit_lsp,set_exit,0,0
	lsp r_cha_back_lsp,":a;graphics\menu\chars\chars_left.png",100,150
	lsp r_txt_lsp,":a;graphics\menu\tips\tips_right.png",900,150
	lsp 97,set_ctrl,100,990

	lsph 99,":a/2,0,3;graphics\system\wnd\uoncur.png",1740,155
	lsph 98,":a/2,0,3;graphics\system\wnd\uoffcur.png",1740,900
	
	align_buttons_r r_exit_lsp
	
	if %scenario_Number = 1 goto *rmenu_main_tips_eps_1
	if %scenario_Number = 2 goto *rmenu_main_tips_eps_2
	if %scenario_Number = 3 goto *rmenu_main_tips_eps_3
	if %scenario_Number = 4 goto *rmenu_main_tips_eps_4

	if %scenario_Number = 5 goto *rmenu_main_tips_eps_5
	if %scenario_Number = 6 goto *rmenu_main_tips_eps_6
	if %scenario_Number = 7 goto *rmenu_main_tips_eps_7
	if %scenario_Number = 8 goto *rmenu_main_tips_eps_8

return

*rmenu_main_tips_eps_1
	notif %r_for_title = 1 jumpf
		for %tmp = 1 to 10
			mov ?tips[%tmp][tips_flg],1
		next
		
		for %tmp = 1 to 14
			mov ?grim[%tmp][grim_flg],1
		next
	~
	
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_2
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep2_n
	
		for %tmp = 1 to 10
			mov ?tips[%tmp][tips_flg],1
		next
		for %tmp = 1 to 14
			mov ?grim[%tmp][grim_flg],1
		next
		
*rmenu_main__tips_100_ep2_n
	gosub *rmenu_play_scene_ep2
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_3
	mov %tmp2,%grim_scene
	sub %tmp2,300
	if %tmp2 > 12 mov %tmp2,12
	add %tmp2,1

	for %tmp = 1 to %tmp2 : mov ?grim[%tmp][grim_flg],1 : next
	
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep3_n
	
	for %tmp = 1 to 10
		mov ?tips[%tmp][tips_flg],1
	next
	for %tmp = 1 to 14
		mov ?grim[%tmp][grim_flg],1
	next
		
*rmenu_main__tips_100_ep3_n
	gosub *rmenu_play_scene_ep3
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_4
	for %tmp = 1 to 10 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov %tmp2,%grim_scene
	sub %tmp2,400
	if %tmp2 > 11 mov %tmp2,11
	;this add is for grim tip 0, there is no such thing in ep4!!!
	;add %tmp2,1

	for %tmp = 1 to %tmp2 : mov ?grim[%tmp][grim_flg],1 : next
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep4_n

	for %tmp = 1 to 10
		mov ?tips[%tmp][tips_flg],1
	next
	for %tmp = 1 to 14
		mov ?grim[%tmp][grim_flg],1
	next
	
*rmenu_main__tips_100_ep4_n
	gosub *rmenu_play_scene_ep4
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_5
	for %tmp = 1 to 4 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov %tmp2,%grim_scene
	sub %tmp2,500
	if %tmp2 > 5 mov %tmp2,5

	for %tmp = 1 to %tmp2 : mov ?grim[%tmp][grim_flg],1 : next
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep5_n

	for %tmp = 1 to 4
		mov ?tips[%tmp][tips_flg],1
	next
	for %tmp = 1 to 14
		mov ?grim[%tmp][grim_flg],1
	next
	
*rmenu_main__tips_100_ep5_n
	gosub *rmenu_play_scene_ep5
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_6
	for %tmp = 1 to 2 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov %tmp2,%grim_scene
	sub %tmp2,600
	if %tmp2 > 2 mov %tmp2,2

	for %tmp = 1 to %tmp2 : mov ?grim[%tmp][grim_flg],1 : next
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep6_n

	for %tmp = 1 to 2
		mov ?tips[%tmp][tips_flg],1
	next
	for %tmp = 1 to 14
		mov ?grim[%tmp][grim_flg],1
	next
	
*rmenu_main__tips_100_ep6_n
	gosub *rmenu_play_scene_ep6
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_7
	for %tmp = 1 to 1 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next

	mov %tmp2,%grim_scene
	sub %tmp2,700
	if %tmp2 > 4 mov %tmp2,4 ;fixme by actual grimoire num

	for %tmp = 1 to %tmp2 : mov ?grim[%tmp][grim_flg],1 : next
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep7_n

	for %tmp = 1 to 1
		mov ?tips[%tmp][tips_flg],1
	next
	for %tmp = 1 to 14
		mov ?grim[%tmp][grim_flg],1
	next
	
*rmenu_main__tips_100_ep7_n
	gosub *rmenu_play_scene_ep7
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*rmenu_main_tips_eps_8
	for %tmp = 1 to 3 : mov ?tips[%tmp][tips_flg],0 : next
	for %tmp = 1 to 14 : mov ?grim[%tmp][grim_flg],0 : next
	
	mov %tmp2,%grim_scene
	sub %tmp2,800
	if %tmp2 > 4 mov %tmp2,4 ;fixme by actual grimoire num

	for %tmp = 1 to %tmp2 : mov ?grim[%tmp][grim_flg],1 : next
	notif %r_for_title = 1 goto *rmenu_main__tips_100_ep8_n

	for %tmp = 1 to 3
		mov ?tips[%tmp][tips_flg],1
	next
	for %tmp = 1 to 14
		mov ?grim[%tmp][grim_flg],1
	next
	
*rmenu_main__tips_100_ep8_n
	gosub *rmenu_play_scene_ep8
	gosub *rmenu_sai_display_tips_new
	goto *rmenu_button_reconfigure_tips_new
return

*r_tips_display_new
	if %UMINEKOEND_TIPS_FLG <= 1 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 2 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 3 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 4 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 5 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 6 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 7 mov %UMINEKOEND_TIPS_FLG,0
	if %UMINEKOEND_TIPS_FLG <= 8 mov %UMINEKOEND_TIPS_FLG,0

	if %r_side_change = 1 lsp 2,":c;graphics\colour\black.png",0,0 : print 10,500

	notif %r_display_tips = 0 jumpf
		mov $r_txt_path,":a;graphics\menu\tips\tips_right.png"
		lsp r_txt_lsp,$r_txt_path,900,150
		if %r_side_change = 1 _csp 2 : print 10,100 : mov %r_side_change,0
		return
	~
	mov %r_display,1

	;If you selected the tip and there is no flag, put 0 to skip to none selected.
	if ?tips[%r_display_tips][tips_flg] != 0 jumpf
		mov %r_display_tips,0
		if %r_side_change = 1 _csp 2 : print 10,100 : mov %r_side_change,0
		return
	~

	mov %tmp,r_top_y : add %tmp,820

	;Inscription of portrait
	if %scenario_Number != 1 jumpf ;ep1
	notif %r_display_tips = 1 goto *tips_1
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_1_1_1
	*tips_1

	notif %r_display_tips = 2 goto *tips_2
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_1_2_1
	*tips_2

	notif %r_display_tips = 3 goto *tips_3
		cell tips3_lsp,1
		mov $r_tips_txt_path,tips_1_3_1
	*tips_3

	notif %r_display_tips = 4 goto *tips_4
		cell tips4_lsp,1
		mov $r_tips_txt_path,tips_1_4_1
	*tips_4

	notif %r_display_tips = 5 goto *tips_5
		cell tips5_lsp,1
		mov $r_tips_txt_path,tips_1_5_1
	*tips_5

	notif %r_display_tips = 6 goto *tips_6
		cell tips6_lsp,1
		mov $r_tips_txt_path,tips_1_6_1
	*tips_6

	notif %r_display_tips = 7 goto *tips_7
		cell tips7_lsp,1
		mov $r_tips_txt_path,tips_1_7_1
	*tips_7
	~
	if %scenario_Number != 2 jumpf ;ep2
	notif %r_display_tips = 1 goto *tips_ep2_1
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_2_1_1
	*tips_ep2_1

	notif %r_display_tips = 2 goto *tips_ep2_2
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_2_2_1
	*tips_ep2_2

	notif %r_display_tips = 3 goto *tips_ep2_3
		cell tips3_lsp,1
		mov $r_tips_txt_path,tips_2_3_1
	*tips_ep2_3

	notif %r_display_tips = 4 goto *tips_ep2_4
		cell tips4_lsp,1
		mov $r_tips_txt_path,tips_2_4_1
	*tips_ep2_4

	notif %r_display_tips = 5 goto *tips_ep2_5
		cell tips5_lsp,1
		mov $r_tips_txt_path,tips_2_5_1
	*tips_ep2_5

	notif %r_display_tips = 6 goto *tips_ep2_6
		cell tips6_lsp,1
		mov $r_tips_txt_path,tips_2_6_1
	*tips_ep2_6

	notif %r_display_tips = 7 goto *tips_ep2_7
		cell tips7_lsp,1
		mov $r_tips_txt_path,tips_2_7_1
	*tips_ep2_7
	~

	if %scenario_Number != 3 jumpf ;ep3
	notif %r_display_tips = 1 goto *tips_ep3_1
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_3_1_1
	*tips_ep3_1

	notif %r_display_tips = 2 goto *tips_ep3_2
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_3_2_1
	*tips_ep3_2

	notif %r_display_tips = 3 goto *tips_ep3_3
		cell tips3_lsp,1
		mov $r_tips_txt_path,tips_3_3_1
	*tips_ep3_3

	notif %r_display_tips = 4 goto *tips_ep3_4
		cell tips4_lsp,1
		mov $r_tips_txt_path,tips_3_4_1
	*tips_ep3_4

	notif %r_display_tips = 5 goto *tips_ep3_5
		cell tips5_lsp,1
		mov $r_tips_txt_path,tips_3_5_1
	*tips_ep3_5

	notif %r_display_tips = 6 goto *tips_ep3_6
		cell tips6_lsp,1
		mov $r_tips_txt_path,tips_3_6_1
	*tips_ep3_6
	~
	
	if %scenario_Number != 4 jumpf ;ep4
	notif %r_display_tips = 1 goto *tips_ep4_1
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_4_1_1
	*tips_ep4_1

	notif %r_display_tips = 2 goto *tips_ep4_2
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_4_2_1
	*tips_ep4_2

	notif %r_display_tips = 3 goto *tips_ep4_3
		cell tips3_lsp,1
		mov $r_tips_txt_path,tips_4_3_1
	*tips_ep4_3

	notif %r_display_tips = 4 goto *tips_ep4_4
		cell tips4_lsp,1
		mov $r_tips_txt_path,tips_4_4_1
	*tips_ep4_4

	notif %r_display_tips = 5 goto *tips_ep4_5
		cell tips5_lsp,1
		mov $r_tips_txt_path,tips_4_5_1
	*tips_ep4_5

	notif %r_display_tips = 6 goto *tips_ep4_6
		cell tips6_lsp,1
		mov $r_tips_txt_path,tips_4_6_1
	*tips_ep4_6

	notif %r_display_tips = 7 goto *tips_ep4_7
		cell tips7_lsp,1
		mov $r_tips_txt_path,tips_4_7_1
	*tips_ep4_7
	~
	
	if %scenario_Number != 5 jumpf ;ep5
	;notif %scenario_Number = 5 goto *tips_ep6_side1
	notif %r_display_tips = 1 goto *tips_ep5_1
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_5_1_1
	*tips_ep5_1

	notif %r_display_tips = 2 goto *tips_ep5_2
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_5_2_1
	*tips_ep5_2

	notif %r_display_tips = 3 goto *tips_ep5_3
		cell tips3_lsp,1
		mov $r_tips_txt_path,tips_5_3_1
	*tips_ep5_3

	notif %r_display_tips = 4 goto *tips_ep5_4
		cell tips4_lsp,1
		mov $r_tips_txt_path,tips_5_4_1
	*tips_ep5_4
	~
	
	if %scenario_Number != 6 jumpf ;ep6
	;notif %scenario_Number = 6 goto *tips_ep6_side1_4
	notif %r_display_tips = 1 goto *tips_ep6_side1_2
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_6_1_1
	*tips_ep6_side1_2

	notif %r_display_tips = 2 goto *tips_ep6_side1_3
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_6_2_1
	*tips_ep6_side1_3
	~
	
	if %scenario_Number != 7 jumpf ;ep7
	;notif %scenario_Number = 7 goto *tips_ep8_side1
	notif %r_display_tips = 1 goto *tips_ep8_side1
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_7_1_1
	~
	
	if %scenario_Number != 8 jumpf ;ep8
	;notif %scenario_Number = 8 goto *tips_ep8_side1_end
	notif %r_display_tips = 1 goto *tips_ep8_side1_2
		cell tips1_lsp,1
		mov $r_tips_txt_path,tips_8_1_1
	*tips_ep8_side1_2
	
	notif %r_display_tips = 2 goto *tips_ep8_side1_3
		cell tips2_lsp,1
		mov $r_tips_txt_path,tips_8_2_1
	*tips_ep8_side1_3
	
	notif %r_display_tips = 3 goto *tips_ep8_side1_4
		cell tips3_lsp,1
		mov $r_tips_txt_path,tips_8_3_1
	*tips_ep8_side1_4
	~
	
	lsp r_tips_txt_lsp,$r_tips_txt_path,930,170
	aspt scroll_h,r_tips_txt_lsp,728
	vsp 99,0 : vsp 98,0 : mov %r_display_arrow,0 ;disable the arrows
	scroll_exceeds %r_display_arrow,r_tips_txt_lsp
	if %r_display_arrow = 1 vsp 99,1 : vsp 98,1 : mov %r_display_arrow,r_tips_txt_lsp
	if %r_side_change = 1 _csp 2 : print 10,100 : mov %r_side_change,0 : return
	seplay 9,1010,100
	print 1
return

*r_grim_display_new
	if %r_side_change = 1 lsp 2,":c;graphics\colour\black.png",0,0 : print 10,500
	notif %r_display_grim = 0 jumpf
		mov $r_txt_path,":a;graphics\menu\tips\tips_right.png"
		lsp r_txt_lsp,$r_txt_path,900,150
		if %r_side_change = 1 _csp 2 : print 10,100 : mov %r_side_change,0
		return
	~
	mov %r_display,2

	;If you selected the tip and there is no flag, put 0 to skip to none selected.
	if ?grim[%r_display_grim][grim_flg] != 0 jumpf
		mov %r_display_grim,0
		if %r_side_change = 1 _csp 2 : print 10,100 : mov %r_side_change,0
		return
	~

	if %scenario_Number != 1 jumpf ;ep1
	notif %r_display_grim = 1 goto *grim_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_1_1_1
	*grim_1

	notif %r_display_grim = 2 goto *grim_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_1_2_1
	*grim_2

	notif %r_display_grim = 3 goto *grim_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_1_3_1
	*grim_3

	notif %r_display_grim = 4 goto *grim_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_1_4_1
	*grim_4

	notif %r_display_grim = 5 goto *grim_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_1_5_1
	*grim_5

	notif %r_display_grim = 6 goto *grim_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_1_6_1
	*grim_6

	notif %r_display_grim = 7 goto *grim_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_1_7_1
	*grim_7

	notif %r_display_grim = 8 goto *grim_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_1_8_1
	*grim_8

	notif %r_display_grim = 9 goto *grim_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_1_9_1
	*grim_9

	notif %r_display_grim = 10 goto *grim_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_1_10_1
	*grim_10
	~
	
	if %scenario_Number != 2 jumpf ;ep2
	notif %r_display_grim = 1 goto *grim_ep2_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_2_1_1
	*grim_ep2_1

	notif %r_display_grim = 2 goto *grim_ep2_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_2_2_1
	*grim_ep2_2

	notif %r_display_grim = 3 goto *grim_ep2_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_2_3_1
	*grim_ep2_3

	notif %r_display_grim = 4 goto *grim_ep2_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_2_4_1
	*grim_ep2_4
	
	notif %r_display_grim = 5 goto *grim_ep2_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_2_5_1
	*grim_ep2_5

	notif %r_display_grim = 6 goto *grim_ep2_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_2_6_1
	*grim_ep2_6

	notif %r_display_grim = 7 goto *grim_ep2_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_2_7_1
	*grim_ep2_7

	notif %r_display_grim = 8 goto *grim_ep2_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_2_8_1
	*grim_ep2_8
	notif %r_display_grim = 9 goto *grim_ep2_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_2_9_1
	*grim_ep2_9

	notif %r_display_grim = 10 goto *grim_ep2_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_2_10_1
	*grim_ep2_10	
	~
	
	if %scenario_Number != 3 jumpf ;ep3
		notif %r_display_grim = 1 goto *grim_ep3_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_3_1_1
	*grim_ep3_1

	notif %r_display_grim = 2 goto *grim_ep3_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_3_2_1
	*grim_ep3_2

	notif %r_display_grim = 3 goto *grim_ep3_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_3_3_1
	*grim_ep3_3

	notif %r_display_grim = 4 goto *grim_ep3_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_3_4_1
	*grim_ep3_4

	notif %r_display_grim = 5 goto *grim_ep3_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_3_5_1
	*grim_ep3_5
	
	notif %r_display_grim = 6 goto *grim_ep3_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_3_6_1
	*grim_ep3_6
	
	notif %r_display_grim = 7 goto *grim_ep3_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_3_7_1
	*grim_ep3_7
	
	notif %r_display_grim = 8 goto *grim_ep3_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_3_8_1
	*grim_ep3_8
	
	notif %r_display_grim = 9 goto *grim_ep3_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_3_9_1
	*grim_ep3_9
	
	notif %r_display_grim = 10 goto *grim_ep3_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_3_10_1
	*grim_ep3_10
	~
	
	if %scenario_Number != 4 jumpf ;ep4
		notif %r_display_grim = 1 goto *grim_ep4_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_4_1_1
		
	*grim_ep4_1
	notif %r_display_grim = 2 goto *grim_ep4_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_4_2_1
	*grim_ep4_2
	notif %r_display_grim = 3 goto *grim_ep4_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_4_3_1
	*grim_ep4_3
	notif %r_display_grim = 4 goto *grim_ep4_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_4_4_1
	*grim_ep4_4
	notif %r_display_grim = 5 goto *grim_ep4_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_4_5_1
	*grim_ep4_5
	notif %r_display_grim = 6 goto *grim_ep4_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_4_6_1
	*grim_ep4_6
	notif %r_display_grim = 7 goto *grim_ep4_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_4_7_1
	*grim_ep4_7
	notif %r_display_grim = 8 goto *grim_ep4_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_4_8_1
	*grim_ep4_8
	notif %r_display_grim = 9 goto *grim_ep4_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_4_9_1
	*grim_ep4_9
	notif %r_display_grim = 10 goto *grim_ep4_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_4_10_1
	*grim_ep4_10
	~
	
	if %scenario_Number != 5 jumpf ;ep5
		notif %r_display_grim = 1 goto *grim_ep5_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_5_1_1
	*grim_ep5_1
	notif %r_display_grim = 2 goto *grim_ep5_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_5_2_1
	*grim_ep5_2
	notif %r_display_grim = 3 goto *grim_ep5_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_5_3_1
	*grim_ep5_3
	notif %r_display_grim = 4 goto *grim_ep5_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_5_4_1
	*grim_ep5_4
	notif %r_display_grim = 5 goto *grim_ep5_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_5_5_1
	*grim_ep5_5
	notif %r_display_grim = 6 goto *grim_ep5_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_5_6_1
	*grim_ep5_6
	notif %r_display_grim = 7 goto *grim_ep5_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_5_7_1
	*grim_ep5_7
	notif %r_display_grim = 8 goto *grim_ep5_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_5_8_1
	*grim_ep5_8	
	notif %r_display_grim = 9 goto *grim_ep5_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_5_9_1
	*grim_ep5_9	
	notif %r_display_grim = 10 goto *grim_ep5_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_5_10_1
	*grim_ep5_10	
	~
	
	if %scenario_Number != 6 jumpf ;ep6
		notif %r_display_grim = 1 goto *grim_ep6_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_6_1_1
	*grim_ep6_1
	notif %r_display_grim = 2 goto *grim_ep6_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_6_2_1
	*grim_ep6_2
	notif %r_display_grim = 3 goto *grim_ep6_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_6_3_1
	*grim_ep6_3	
	notif %r_display_grim = 4 goto *grim_ep6_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_6_4_1
	*grim_ep6_4	
	notif %r_display_grim = 5 goto *grim_ep6_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_6_5_1
	*grim_ep6_5	
	notif %r_display_grim = 6 goto *grim_ep6_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_6_6_1
	*grim_ep6_6	
	notif %r_display_grim = 7 goto *grim_ep6_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_6_7_1
	*grim_ep6_7
	notif %r_display_grim = 8 goto *grim_ep6_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_6_8_1
	*grim_ep6_8	
	notif %r_display_grim = 9 goto *grim_ep6_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_6_9_1
	*grim_ep6_9	
	notif %r_display_grim = 10 goto *grim_ep6_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_6_10_1
	*grim_ep6_10	
	~
	
	if %scenario_Number != 7 jumpf ;ep7
		notif %r_display_grim = 1 goto *grim_ep7_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_7_1_1
	*grim_ep7_1
	notif %r_display_grim = 2 goto *grim_ep7_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_7_2_1
	*grim_ep7_2
	notif %r_display_grim = 3 goto *grim_ep7_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_7_3_1
	*grim_ep7_3	
	notif %r_display_grim = 4 goto *grim_ep7_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_7_4_1
	*grim_ep7_4	
	notif %r_display_grim = 5 goto *grim_ep7_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_7_5_1
	*grim_ep7_5	
	notif %r_display_grim = 6 goto *grim_ep7_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_7_6_1
	*grim_ep7_6	
	notif %r_display_grim = 7 goto *grim_ep7_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_7_7_1
	*grim_ep7_7	
	notif %r_display_grim = 8 goto *grim_ep7_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_7_8_1
	*grim_ep7_8	
	notif %r_display_grim = 9 goto *grim_ep7_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_7_9_1
	*grim_ep7_9	
	notif %r_display_grim = 10 goto *grim_ep7_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_7_10_1
	*grim_ep7_10	
	~
	
	if %scenario_Number != 8 jumpf ;ep8
		notif %r_display_grim = 1 goto *grim_ep8_1
		cell grim1_lsp,1
		mov $r_grim_txt_path,grim_8_1_1
	*grim_ep8_1
	notif %r_display_grim = 2 goto *grim_ep8_2
		cell grim2_lsp,1
		mov $r_grim_txt_path,grim_8_2_1
	*grim_ep8_2
	notif %r_display_grim = 3 goto *grim_ep8_3
		cell grim3_lsp,1
		mov $r_grim_txt_path,grim_8_3_1
	*grim_ep8_3	
	notif %r_display_grim = 4 goto *grim_ep8_4
		cell grim4_lsp,1
		mov $r_grim_txt_path,grim_8_4_1
	*grim_ep8_4	
	notif %r_display_grim = 5 goto *grim_ep8_5
		cell grim5_lsp,1
		mov $r_grim_txt_path,grim_8_5_1
	*grim_ep8_5	
	notif %r_display_grim = 6 goto *grim_ep8_6
		cell grim6_lsp,1
		mov $r_grim_txt_path,grim_8_6_1
	*grim_ep8_6	
	notif %r_display_grim = 7 goto *grim_ep8_7
		cell grim7_lsp,1
		mov $r_grim_txt_path,grim_8_7_1
	*grim_ep8_7	
	notif %r_display_grim = 8 goto *grim_ep8_8
		cell grim8_lsp,1
		mov $r_grim_txt_path,grim_8_8_1
	*grim_ep8_8	
	notif %r_display_grim = 9 goto *grim_ep8_9
		cell grim9_lsp,1
		mov $r_grim_txt_path,grim_8_9_1
	*grim_ep8_9	
	notif %r_display_grim = 10 goto *grim_ep8_10
		cell grim10_lsp,1
		mov $r_grim_txt_path,grim_8_10_1
	*grim_ep8_10	
	~
	
	vsp 99,0 : vsp 98,0 : mov %r_display_arrow,0 ;disable the arrows
	lsp r_grim_txt_lsp,$r_grim_txt_path,930,170
	aspt scroll_h,r_grim_txt_lsp,728
	scroll_exceeds %r_display_arrow,r_grim_txt_lsp
	if %r_display_arrow = 1 vsp 99,1 : vsp 98,1 : mov %r_display_arrow,r_grim_txt_lsp
	if %r_side_change = 1 _csp 2 : print 10,100 : mov %r_side_change,0 : return
	seplay 9,1010,100
	print 1
return

*r_tips_button_new
	_csp grim1_lsp,grim14_lsp
	_csp r_grim_txt_lsp
	_csp r_tips_txt_lsp
	
	mov %tmp,142 : 	mov %tmp1,170
	
	if %scenario_Number != 1 jumpf ;ep1
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_1_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_1_2,%tmp,%tmp1 : add %tmp1,64
		if ?tips[3][tips_flg] = 1 lsp tips3_lsp,r_tips_1_3,%tmp,%tmp1 : add %tmp1,64
		if ?tips[4][tips_flg] = 1 lsp tips4_lsp,r_tips_1_4,%tmp,%tmp1 : add %tmp1,64
		if ?tips[5][tips_flg] = 1 lsp tips5_lsp,r_tips_1_5,%tmp,%tmp1 : add %tmp1,64
		if ?tips[6][tips_flg] = 1 lsp tips6_lsp,r_tips_1_6,%tmp,%tmp1 : add %tmp1,64
		if ?tips[7][tips_flg] = 1 lsp tips7_lsp,r_tips_1_7,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 2 jumpf ;ep2
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_2_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_2_2,%tmp,%tmp1 : add %tmp1,64
		if ?tips[3][tips_flg] = 1 lsp tips3_lsp,r_tips_2_3,%tmp,%tmp1 : add %tmp1,64
		if ?tips[4][tips_flg] = 1 lsp tips4_lsp,r_tips_2_4,%tmp,%tmp1 : add %tmp1,64
		if ?tips[5][tips_flg] = 1 lsp tips5_lsp,r_tips_2_5,%tmp,%tmp1 : add %tmp1,64
		if ?tips[6][tips_flg] = 1 lsp tips6_lsp,r_tips_2_6,%tmp,%tmp1 : add %tmp1,64
		if ?tips[7][tips_flg] = 1 lsp tips7_lsp,r_tips_2_7,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 3 jumpf ;ep3
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_3_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_3_2,%tmp,%tmp1 : add %tmp1,64
		if ?tips[3][tips_flg] = 1 lsp tips3_lsp,r_tips_3_3,%tmp,%tmp1 : add %tmp1,64
		if ?tips[4][tips_flg] = 1 lsp tips4_lsp,r_tips_3_4,%tmp,%tmp1 : add %tmp1,64
		if ?tips[5][tips_flg] = 1 lsp tips5_lsp,r_tips_3_5,%tmp,%tmp1 : add %tmp1,64
		if ?tips[6][tips_flg] = 1 lsp tips6_lsp,r_tips_3_6,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 4 jumpf ;ep4
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_4_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_4_2,%tmp,%tmp1 : add %tmp1,64
		if ?tips[3][tips_flg] = 1 lsp tips3_lsp,r_tips_4_3,%tmp,%tmp1 : add %tmp1,64
		if ?tips[4][tips_flg] = 1 lsp tips4_lsp,r_tips_4_4,%tmp,%tmp1 : add %tmp1,64
		if ?tips[5][tips_flg] = 1 lsp tips5_lsp,r_tips_4_5,%tmp,%tmp1 : add %tmp1,64
		if ?tips[6][tips_flg] = 1 lsp tips6_lsp,r_tips_4_6,%tmp,%tmp1 : add %tmp1,64
		if ?tips[7][tips_flg] = 1 lsp tips7_lsp,r_tips_4_7,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 5 jumpf ;e5
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_5_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_5_2,%tmp,%tmp1 : add %tmp1,64
		if ?tips[3][tips_flg] = 1 lsp tips3_lsp,r_tips_5_3,%tmp,%tmp1 : add %tmp1,64
		if ?tips[4][tips_flg] = 1 lsp tips4_lsp,r_tips_5_4,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 6 jumpf ;ep6
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_6_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_6_2,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 7 jumpf ;ep7
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_7_1,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 8 jumpf ;ep8
		if ?tips[1][tips_flg] = 1 lsp tips1_lsp,r_tips_8_1,%tmp,%tmp1 : add %tmp1,64
		if ?tips[2][tips_flg] = 1 lsp tips2_lsp,r_tips_8_2,%tmp,%tmp1 : add %tmp1,64
		if ?tips[3][tips_flg] = 1 lsp tips3_lsp,r_tips_8_3,%tmp,%tmp1 : add %tmp1,64
	~
return

*r_grim_button_new
	if localisation != "cn" && localisation != "cht" jumpf
		for %tmp = 1 to 14
			mov ?grim[%tmp][grim_flg],1
		next
	~
	_csp tips1_lsp,tips7_lsp
	_csp r_tips_txt_lsp
	_csp r_grim_txt_lsp

	mov %tmp,142 : 	mov %tmp1,170
	
	if %scenario_Number != 1 jumpf ;ep1
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim1_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim1_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim1_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim1_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim1_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim1_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim1_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim1_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim1_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim1_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 2 jumpf ;ep2
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim2_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim2_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim2_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim2_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim2_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim2_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim2_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim2_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim2_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim2_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 3 jumpf ;ep3
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim3_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim3_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim3_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim3_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim3_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim3_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim3_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim3_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim3_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim3_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 4 jumpf ;ep4
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim4_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim4_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim4_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim4_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim4_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim4_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim4_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim4_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim4_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim4_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 5 jumpf ;ep5
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim5_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim5_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim5_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim5_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim5_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim5_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim5_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim5_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim5_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim5_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 6 jumpf ;ep6
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim6_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim6_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim6_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim6_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim6_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim6_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim6_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim6_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim6_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim6_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 7 jumpf ;ep7
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim7_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim7_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim7_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim7_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim7_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim7_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim7_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim7_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim7_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim7_10,%tmp,%tmp1 : add %tmp1,64
	~
	
	if %scenario_Number != 8 jumpf ;ep8
		if ?grim[1][grim_flg] = 1 lsp grim1_lsp,r_grim8_1,%tmp,%tmp1 : add %tmp1,64
		if ?grim[2][grim_flg] = 1 lsp grim2_lsp,r_grim8_2,%tmp,%tmp1 : add %tmp1,64
		if ?grim[3][grim_flg] = 1 lsp grim3_lsp,r_grim8_3,%tmp,%tmp1 : add %tmp1,64
		if ?grim[4][grim_flg] = 1 lsp grim4_lsp,r_grim8_4,%tmp,%tmp1 : add %tmp1,64
		if ?grim[5][grim_flg] = 1 lsp grim5_lsp,r_grim8_5,%tmp,%tmp1 : add %tmp1,64
		if ?grim[6][grim_flg] = 1 lsp grim6_lsp,r_grim8_6,%tmp,%tmp1 : add %tmp1,64
		if ?grim[7][grim_flg] = 1 lsp grim7_lsp,r_grim8_7,%tmp,%tmp1 : add %tmp1,64
		if ?grim[8][grim_flg] = 1 lsp grim8_lsp,r_grim8_8,%tmp,%tmp1 : add %tmp1,64
		if ?grim[9][grim_flg] = 1 lsp grim9_lsp,r_grim8_9,%tmp,%tmp1 : add %tmp1,64
		if ?grim[10][grim_flg] = 1 lsp grim10_lsp,r_grim8_10,%tmp,%tmp1 : add %tmp1,64
	~
return

*rmenu_sai_display_tips_new
	textoff
	btndef ""
	
	if %r_display = 1 && %scenario_Number != 8 _csp r_tips_lsp : lsp r_grim_lsp,r_grim,480,850 : getspsize r_grim_lsp,%Free1,%Free2 : div %Free1,-4 : msp r_grim_lsp,%Free1,0
	if %r_display = 2 && %scenario_Number != 8 _csp r_grim_lsp : lsp r_tips_lsp,r_tips,480,850 : getspsize r_tips_lsp,%Free1,%Free2 : div %Free1,-4 : msp r_tips_lsp,%Free1,0

	if %r_display = 1 gosub *r_tips_button_new
	if %r_display = 2 gosub *r_grim_button_new

	if %r_display = 1 gosub *r_tips_display_new
	if %r_display = 2 gosub *r_grim_display_new
	
print 1
return

*rmenu_button_reconfigure_tips_new
	btndef ""
	
	spbtn r_tips_lsp,r_tips_lsp
	spbtn r_grim_lsp,r_grim_lsp
	spbtn r_exit_lsp,r_exit_lsp
	if %r_display_arrow > 0 spbtn 99,99 ;up
	if %r_display_arrow > 0 spbtn 98,98 ;down
	spbtn 97,97

	if ?tips[1][tips_flg] = 1 notif %r_display_tips = 1 spbtn tips1_lsp,tips1_lsp
	if ?tips[2][tips_flg] = 1 notif %r_display_tips = 2 spbtn tips2_lsp,tips2_lsp
	if ?tips[3][tips_flg] = 1 notif %r_display_tips = 3 spbtn tips3_lsp,tips3_lsp
	if ?tips[4][tips_flg] = 1 notif %r_display_tips = 4 spbtn tips4_lsp,tips4_lsp
	if ?tips[5][tips_flg] = 1 notif %r_display_tips = 5 spbtn tips5_lsp,tips5_lsp
	if ?tips[6][tips_flg] = 1 notif %r_display_tips = 6 spbtn tips6_lsp,tips6_lsp
	if ?tips[7][tips_flg] = 1 notif %r_display_tips = 7 spbtn tips7_lsp,tips7_lsp
	
	if ?grim[1][grim_flg] = 1 notif %r_display_grim = 1 spbtn grim1_lsp,grim1_lsp
	if ?grim[2][grim_flg] = 1 notif %r_display_grim = 2 spbtn grim2_lsp,grim2_lsp
	if ?grim[3][grim_flg] = 1 notif %r_display_grim = 3 spbtn grim3_lsp,grim3_lsp
	if ?grim[4][grim_flg] = 1 notif %r_display_grim = 4 spbtn grim4_lsp,grim4_lsp
	if ?grim[5][grim_flg] = 1 notif %r_display_grim = 5 spbtn grim5_lsp,grim5_lsp
	if ?grim[6][grim_flg] = 1 notif %r_display_grim = 6 spbtn grim6_lsp,grim6_lsp
	if ?grim[7][grim_flg] = 1 notif %r_display_grim = 7 spbtn grim7_lsp,grim7_lsp
	if ?grim[8][grim_flg] = 1 notif %r_display_grim = 8 spbtn grim8_lsp,grim8_lsp
	if ?grim[9][grim_flg] = 1 notif %r_display_grim = 9 spbtn grim9_lsp,grim9_lsp
	if ?grim[10][grim_flg] = 1 notif %r_display_grim = 10 spbtn grim10_lsp,grim10_lsp
	if ?grim[11][grim_flg] = 1 notif %r_display_grim = 11 spbtn grim11_lsp,grim11_lsp
	if ?grim[12][grim_flg] = 1 notif %r_display_grim = 12 spbtn grim12_lsp,grim12_lsp
	if ?grim[13][grim_flg] = 1 notif %r_display_grim = 13 spbtn grim13_lsp,grim13_lsp
	
*rmenu_custom_btlp_tips_new
	;stopwatch "rmenu_custom_btlp_tips_new"
	btnwait2 %BtnRes
	if %BtnRes = r_tips_lsp mov %r_display,1 : seplay 9,1010,100 : goto *rmenu_main_tips_reload
	if %BtnRes = r_grim_lsp mov %r_display,2 : seplay 9,1010,100 : goto *rmenu_main_tips_reload

	if %BtnRes=99 spt scroll_y,%r_display_arrow,-70,166,1 : sptwait scroll_y,%r_display_arrow	;button up
	if %BtnRes=98 spt scroll_y,%r_display_arrow,70,166,1 : sptwait scroll_y,%r_display_arrow	;button down
	
	if %BtnRes = 97 gosub *tips_hint
	if %BtnRes = r_exit_lsp goto *rmenu_go_out
	if %BtnRes = -1 goto *rmenu_go_out
	if %BtnRes = -10 goto *rmenu_go_out

	notif %BtnRes = tips1_lsp jumpf
		mov %r_display_tips,1
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = tips2_lsp jumpf
		mov %r_display_tips,2
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = tips3_lsp jumpf
		mov %r_display_tips,3
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = tips4_lsp jumpf
		mov %r_display_tips,4
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = tips5_lsp jumpf
		mov %r_display_tips,5
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = tips6_lsp jumpf
		mov %r_display_tips,6
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = tips7_lsp jumpf
		mov %r_display_tips,7
		gosub *r_tips_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	
	notif %BtnRes = grim1_lsp jumpf
		mov %r_display_grim,1
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim2_lsp jumpf
		mov %r_display_grim,2
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim3_lsp jumpf
		mov %r_display_grim,3
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim4_lsp jumpf
		mov %r_display_grim,4
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim5_lsp jumpf
		mov %r_display_grim,5
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim6_lsp jumpf
		mov %r_display_grim,6
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim7_lsp jumpf
		mov %r_display_grim,7
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim8_lsp jumpf
		mov %r_display_grim,8
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim9_lsp jumpf
		mov %r_display_grim,9
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim10_lsp jumpf
		mov %r_display_grim,10
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim11_lsp jumpf
		mov %r_display_grim,11
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim12_lsp jumpf
		mov %r_display_grim,12
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	notif %BtnRes = grim13_lsp jumpf
		mov %r_display_grim,13
		gosub *r_grim_display_new
		goto *rmenu_button_reconfigure_tips_new
	~
	
	goto *rmenu_button_reconfigure_tips_new
return

*tips_hint
	lsp 4,":c;graphics\colour\black.png",0,0,220
	print 23
	lsp 2,tips_hint_text,0,0
	align_message_l 2
	seplay 9,1062,100
	print 23
	wait 7000
	_csp 2
	_csp 4
return

; cake/quiz/quiz2/murder_story should deal with "loading resources and setting up initial visual display".
; get_response_cake etc. should deal with btnwait.
*cake
	jnskip_s
		return
	~
	; https://youtu.be/yi918VV9Ngg?t=9m36s
	; 0. Disable rmenu!
	; 1. Display cake_cake.png descending down the screen.
	; 2. When the movement ends, display text "Choose a slice of cake", horizontally centered to the cake image itself (visually > numerically),
	;    with the height of the capital glyphs about 50% of the distance between the bottom edge of the bottom of the cake and the rim of the plate below it,
	;    and vertically center the text there.
	;    Colors and styling should match the video if possible. (They currently do not.)
	; 3. Highlight the piece immediately to the left of bottom center (i.e. the piece corresponding to cake_cake01.png).
	; 4. The highlighted piece should glow softly (using an overlaid cake_cakeNN.png with varying opacity?) at a rate of about 1.75 seconds per cycle.
	; 5. The highlighted piece should change on mouseover.
	; 6. The highlighted piece should change with left/right/up/down arrow keys or pad.
	; The direction logic should be opposite to the button order, so that pressing "right" with the bottom button highlighted moves you right.
	; ===========================================
	lsp 216,":a;graphics\menu\cake\cake_cake.png",360,-1080
	lsph 201,":a;graphics\menu\cake\cake_cake01.png",744,336
	lsph 202,":a;graphics\menu\cake\cake_cake02.png",600,336
	lsph 203,":a;graphics\menu\cake\cake_cake03.png",520,320
	lsph 204,":a;graphics\menu\cake\cake_cake04.png",504,272
	lsph 205,":a;graphics\menu\cake\cake_cake05.png",536,176
	lsph 206,":a;graphics\menu\cake\cake_cake06.png",616,80
	lsph 207,":a;graphics\menu\cake\cake_cake07.png",728,32
	lsph 208,":a;graphics\menu\cake\cake_cake08.png",856,16
	lsph 209,":a;graphics\menu\cake\cake_cake09.png",936,32
	lsph 210,":a;graphics\menu\cake\cake_cake10.png",936,96
	lsph 211,":a;graphics\menu\cake\cake_cake11.png",952,176
	lsph 212,":a;graphics\menu\cake\cake_cake12.png",936,288
	lsph 213,":a;graphics\menu\cake\cake_cake13.png",936,320
	lsph 214,":a;graphics\menu\cake\cake_cake14.png",936,336
	lsph 215,":a;graphics\menu\cake\cake_cake15.png",936,336
	for %Free1 = 201 to 215
		; Soft glow
		aspt alpha,%Free1,40
		aspt alpha,%Free1,100,1750,5
	next
	flush 1
	; --- 0 ---
	; Automatic, I think
	; --- 1 ---
	aspt ypos,216,0,1500,1
	sptwait ypos,216


	; --- 2 ---
	set_window_simple 1,1
	border_pad_push 25
	lsp 199,":s;#6E2C0A`{a:c:{p:8:{bordercolor:D5C4B3:"+ep8_choose_cake+"}}}`",-14,894
	lsp 200,":s;#FF5555`{a:c:{p:8:{bordercolor:FF5555:{borderwidth:40:"+ep8_choose_cake+"}}}}`",-14,894
	spt blur,200,3000
	; Wanted to apply alpha to 200 as well, but it doesn't seem to work?
	border_pad_pop
	flush2 10,167

	
	btndef ""
	transbtn
	exbtn_d "C201-215"
	exbtn 201,1,"P201"
	exbtn 202,2,"P202"
	exbtn 203,3,"P203"
	exbtn 204,4,"P204"
	exbtn 205,5,"P205"
	exbtn 206,6,"P206"
	exbtn 207,7,"P207"
	exbtn 208,8,"P208"
	exbtn 209,9,"P209"
	exbtn 210,10,"P210"
	exbtn 211,11,"P211"
	exbtn 212,12,"P212"
	exbtn 213,13,"P213"
	exbtn 214,14,"P214"
	exbtn 215,15,"P215"
return

*quiz
	jnskip_s
		return
	~
	
	; LSP setup
	for %Free1 = 1 to %quiz_answer_count
		itoa $Free1,%Free1
		mov %Free2,220+(%Free1*65)
		lsp 10+%Free1,quiz_letter+$Free1+".png",110,%Free2
	next
	if %eva_button_enabled!=1 jumpf
		mov %Free2,%quiz_answer_count+1
		mov %Free2,%Free2*65
		mov %Free2,220+%Free2
		lsp 11+%quiz_answer_count,quiz_ask_auntie_eva,50,%Free2
	~

	; Button setup
	btndef ""
	transbtn
	for %Free1 = 1 to %quiz_answer_count
		spbtn 10+%Free1,10+%Free1
	next
	if %eva_button_enabled==1 spbtn 11+%quiz_answer_count,11+%quiz_answer_count

	gosub *coin_count_to_image_filename

	lbg s0_29,"quiz_m"
	lsp s0_28,$Free1,267,921
	spt2 ypos,s0_29,10,2000,5
	spt ypos,s0_28,10,2000,5
return

*quiz2
	jnskip_s
		return
	~

	; Do nothing, as we can navigate.
return

*get_response_quiz2
	jnskip_s
		accept_choice %chosen_ending
		return
	~

	lsp s0_26,quiz2_back,-960,0
	lsp s0_29,quiz2_front
	flush 22

*quiz2_front
	btndef quiz2_front_2
	transbtn
	btn 612,293,836,584,157,293,836   ;Left
	btn 613,1044,836,584,157,1044,836   ;Right

*quiz2_loop
	btnwait2 %BtnRes
	if %BtnRes = -2  mov %tmp1,-3 : goto *quiz2_left_right
	if %BtnRes = -3  mov %tmp1,-2 : goto *quiz2_left_right
	if %BtnRes = 612 mov %tmp1,-3 : goto *quiz2_left_right
	if %BtnRes = 613 mov %tmp1,-2 : goto *quiz2_left_right
	goto *quiz2_loop

*quiz2_left_right
	btndef ""
	flush 1
	if %tmp1 != -3 jumpf
		spt xpos,s0_26,960,500
		spt xpos,s0_29,960,500
		mov %tmp,-960
		aspt alpha,s0_29,0,500
		sptwait alpha,s0_29
		wait 50
		lsp 201,":a;graphics\menu\quiz2\quiz2_left.png",490,0
	~
	if %tmp1 != -2 jumpf
		spt xpos,s0_26,-960,500
		spt xpos,s0_29,-960,500
		mov %tmp,960
		aspt alpha,s0_29,0,500
		sptwait alpha,s0_29
		wait 50
		lsp 202,":a;graphics\menu\quiz2\quiz2_right.png",503,0
	~
	_csp 612
	_csp 613
	aspt alpha,201,0
	aspt alpha,202,0
	flush 1
	wait 100
	aspt alpha,201,40,450
	aspt alpha,202,40,450
	sptwait alpha,201
	sptwait alpha,202

	btndef ""
	spbtn 201,201
	spbtn 202,202

	aspt alpha,201,100,1750,5
	aspt alpha,202,100,1750,5


*quiz2_left_right_loop
	btnwait2 %BtnRes
	if %BtnRes = -1 goto *quiz2_left_right_back
	if %BtnRes = -10 goto *quiz2_left_right_back
	if %BtnRes = %tmp1 goto *quiz2_left_right_back
	if %BtnRes = 201 mov %chosen_ending,1 : set_choice %chosen_ending : csp_rst : return
	if %BtnRes = 202 mov %chosen_ending,2 : set_choice %chosen_ending : csp_rst : return
	goto *quiz2_left_right_loop

*quiz2_left_right_back
	aspt alpha,201,0,250
	aspt alpha,202,0,250
	sptwait alpha,201
	sptwait alpha,202
	_csp 201,202
	flush 1
	spt xpos,s0_26,%tmp,500
	spt xpos,s0_29,%tmp,500
	aspt alpha,s0_29,255,500
	sptwait alpha,s0_29
	goto *quiz2_front

*murder_story
	; TODO
	; 1. 
	jnskip_s
		return
	~
	;https://youtu.be/BM50oVOO9pw?t=3251
	; Load resources.
	; 1. Bern sprite.
	; ber_a21_akuwarai2
	; 2. Text LSPs.
	; Re-read story
	; Display rules
	; Check purple statements (by person)
	; Check purple statements (by chapter)
	; Hints
	; Identify culprit(s)
	; 3. Twilight thumbnails
	; 4.
	; `* The definition of 'culprit' is 'one who murders'.`
	; `* It is possible for a culprit to lie.`
	; `* It is possible for a culprit to lie even before committing murder.`
	; `* Characters who are not culprits only speak the truth.`
	; `* Characters who are not culprits may not cooperate with a culprit.`\
	; `* A culprit must carry out all murders directly, by their own hands.`
	; `* A culprit must not die.`
	; `* A culprit must be among the characters appearing in the story.`
	; `* Purple statements are as absolute as red truths.`
	; `  However, the culprit alone may lie with purple statements.`\
	
	;mov %bern_game_mode,1 ;for test
	
	lsp s0_9,":a;sprites\ber\1\ber_a21_akuwarai2.png",150-1920,265

	border_pad_push 5
	lsp 201,ep8_9_menu_1,1100+1920,360
	lsp 202,ep8_9_menu_2,1100+1920,440
	lsp 203,ep8_9_menu_3,1100+1920,520
	lsp 204,ep8_9_menu_4,1100+1920,600
	lsp 205,ep8_9_menu_5,1100+1920,680
	lsp 206,ep8_9_menu_6,1100+1920,760
	border_pad_pop
	for %Free1 = 201 to 206
		spt xpos,%Free1,-1920,500,1
	next
	spt xpos,s0_9,1920,500
	flush 1
	wait 500
	;cell 201,1	

	*murder_story_loop
		btndef ""
		
		for %Free1 = 1 to 6
			exbtn 200+%Free1,%Free1
		next
return

; These functions are executed by logskip and varset. They should only contain variable increments.
*show_coin_counter
	getparam %Free1
	show_coin_counter_real
return
*show_coin_counter2
	getparam %Free1
	add %total_coin_count,1
	show_coin_counter2_real
return
*show_coin_counter3
	getparam %Free1
	add %total_coin_count,2
	show_coin_counter3_real
return

; These functions are ignored by logskip and varset.
*show_coin_counter_real
; Disable skip and automode.
if %skip_icon = on vsp TextCC3SpNum,0 : mov %skip_icon,off
vsp TextCC4SpNum,0 : mov %autom_icon,off

lsp s0_29,qw,-703,-12
gosub *coin_count_to_image_filename
lsp2 s0_28,$Free1,-615,-35
return
*show_coin_counter2_real
mov %Free2,1
mov $Free2,"m1"
gosub *show_coin_counter23_real
return
*show_coin_counter3_real
mov %Free2,2
mov $Free2,"m2"
gosub *show_coin_counter23_real
return

*show_coin_counter23_real
; TODO: Tidy this function?
textoff
waits 167
; No idea what slots might be used, so clear all the ones the SNR requests??
csp_slot s0_4
csp_slot s0_8
csp_slot s0_9
csp_slot s0_10
csp_slot s0_25
csp_slot s0_24
csp_slot s0_23
csp_slot s0_12
csp_slot s0_13
csp_slot s0_14
csp_slot s0_15
csp_slot s0_16
csp_slot s0_4
csp_slot s0_27
lbg s0_3,"white"
flush 2
textoff
waits 167
csp_slot s0_3
lbg s0_3,"black"
csp_slot s0_4
csp_slot s0_29
lsp2 s0_29,qw,0,-200
set_hotspot s0_29,"225.5","181"
sub %total_coin_count,%Free2
gosub *coin_count_to_image_filename
csp_slot s0_28
lsp2 s0_28,$Free1,88,-223
set_hotspot s0_28,"57.5","90"
flush 2
wait 2000
seplay 1,1,71
csp_slot s0_27
lbg s0_27,$Free2
add %total_coin_count,%Free2
gosub *coin_count_to_image_filename
csp_slot s0_28
lsp2 s0_28,$Free1,88,-223
set_hotspot s0_28,"57.5","90"
flush 2
wait 3333
csp_slot s0_27
csp_slot s0_28
csp_slot s0_29
if $Free2 != "m2" jumpf
if %total_coin_count != 17 jumpf
if %eva_hint_counter != 0 jumpf
trophy_open 28
~
textoff
waits 167
csp_slot s0_3
lbg s0_3,"black"
flush 2
wait 1000
return

*coin_count_to_image_filename
	if %total_coin_count == 0 mov $Free1,q00 : return
	if %total_coin_count == 1 mov $Free1,q01 : return
	if %total_coin_count == 2 mov $Free1,q02 : return
	if %total_coin_count == 3 mov $Free1,q03 : return
	if %total_coin_count == 4 mov $Free1,q04 : return
	if %total_coin_count == 5 mov $Free1,q05 : return
	if %total_coin_count == 6 mov $Free1,q06 : return
	if %total_coin_count == 7 mov $Free1,q07 : return
	if %total_coin_count == 8 mov $Free1,q08 : return
	if %total_coin_count == 9 mov $Free1,q09 : return
	if %total_coin_count == 10 mov $Free1,q10 : return
	if %total_coin_count == 11 mov $Free1,q11 : return
	if %total_coin_count == 12 mov $Free1,q12 : return
	if %total_coin_count == 13 mov $Free1,q13 : return
	if %total_coin_count == 14 mov $Free1,q14 : return
	if %total_coin_count == 15 mov $Free1,q15 : return
	if %total_coin_count == 16 mov $Free1,q16 : return
	if %total_coin_count == 17 mov $Free1,q17 : return
	if %total_coin_count == 18 mov $Free1,q18 : return
	if %total_coin_count == 19 mov $Free1,q19 : return
	if %total_coin_count == 20 mov $Free1,q20 : return
return

*get_response_cake
	jnskip_s
		gosub *accept_set_choice
		return
	~
	*cake_loop
	~
	btnwait2 %BtnRes
	if %BtnRes = 0 jumpb
	if %BtnRes = -1 jumpb
	; ===========================================
	for %get_response_value = 199 to 216
		_csp %get_response_value
	next

	; TODO: Improve cake disappearance (use a better effect number?)
	flush 1

	; Cake choice is actually irrelevant. Just return zero.
	mov %get_response_value,0
	gosub *accept_set_choice
return

*get_response_quiz
	jnskip_s
		gosub *accept_set_choice
		return
	~

	; accept_choice should probably go in "quiz" in fact,
	; so that we can be kicked out of superskip before making the decision to skip quiz display,
	; but that involves a lot of changes that would be nicer to avoid...

	; Button loop
	~
	btnwait2 %BtnRes
	mov %get_response_value,%BtnRes-11
	if %get_response_value < 0 jumpb
	if %get_response_value > %quiz_answer_count jumpb ; > is correct -- includes possible eva button

	; Clear sprites
	_csp 11,11+%quiz_answer_count
	csp_slot s0_29
	csp_slot s0_28

	gosub *accept_set_choice
	; Main game handles flushing, I think...
return

*get_response_murder_story
	jnskip_s
		gosub *accept_set_choice
		return
	~
	
	~
	btnwait2 %BtnRes
	
	if %BtnRes = 1 gosub *murder_story_display_select_item : goto *murder_story_story
	if %BtnRes = 2 gosub *murder_story_display_select_item : goto *murder_story_rules
	if %BtnRes = 3 gosub *murder_story_display_select_item : goto *murder_story_person
	if %BtnRes = 4 gosub *murder_story_display_select_item : goto *murder_story_chapter
	if %BtnRes = 5 gosub *murder_story_display_select_item : goto *murder_story_hints
	if %BtnRes = 6 gosub *murder_story_display_select_item : goto *murder_story_answer
	jumpb
return
*murder_story_display_select_item
	if %BtnRes != 1 aspt alpha,201,0,500,1
	if %BtnRes != 2 aspt alpha,202,0,500,1
	if %BtnRes != 3 aspt alpha,203,0,500,1
	if %BtnRes != 4 aspt alpha,204,0,500,1
	if %BtnRes != 5 aspt alpha,205,0,500,1
	if %BtnRes != 6 aspt alpha,206,0,500,1
	
	if %BtnRes != 6 jumpf
		lsp s0_9,":a;sprites\ber\1\ber_a21_akuwarai1.png",150,265
		flush 1
		sptwait alpha,205
		goto *murder_story_display_select_item_6
	~
	
	sptwait alpha,206
	spt xpos,s0_9,-1920,500
	*murder_story_display_select_item_6
	aspt alpha,200+%BtnRes,0,500,1
	_csp 201,206
	_csp s0_9
return
*murder_story_story
	btndef ":a;graphics\locale\murderer\murderer_thumb_all.png"
	lsp2 612,murderer_thumb_1,383,367,58,58
	lsp2 613,murderer_thumb_2,960,367,58,58
	lsp2 614,murderer_thumb_4,1535,367,58,58
	lsp2 615,murderer_thumb_56,383,715,58,58
	lsp2 616,murderer_thumb_7,960,715,58,58
	lsp2 617,murderer_thumb_8,1535,715,58,58
	
	transbtn
	btn 612,105,210,557,314,105,210 	;1
	btn 613,682,210,557,314,682,210 	;2
	btn 614,1257,210,557,314,1257,210 	;3
	btn 615,105,558,557,314,105,558 	;4
	btn 616,682,558,557,314,682,558 	;5
	btn 617,1257,558,557,314,1257,558 	;6

	for %Free1 = 612 to 617
		spt2 xpos,%Free1,1920
	next
	print 1

	for %Free1 = 612 to 617
		spt2 xpos,%Free1,-1920,300
	next
	wait 300
	print 1
	*murder_story_story_loop
	~
	btnwait2 %BtnRes
	
	if %BtnRes = 0 jumpb
	if %BtnRes = -1 goto *murder_story_story_end
	if %BtnRes = -10 goto *murder_story_story_end
	if %BtnRes = 612 lsp2 611,murderer_thumb_1,383,367,58,58 : goto *murder_story_story_start_dai
	if %BtnRes = 613 lsp2 611,murderer_thumb_2,960,367,58,58 : goto *murder_story_story_start_dai
	if %BtnRes = 614 lsp2 611,murderer_thumb_4,1535,367,58,58 : goto *murder_story_story_start_dai
	if %BtnRes = 615 lsp2 611,murderer_thumb_56,383,715,58,58 : goto *murder_story_story_start_dai
	if %BtnRes = 616 lsp2 611,murderer_thumb_7,960,715,58,58 : goto *murder_story_story_start_dai
	if %BtnRes = 617 lsp2 611,murderer_thumb_8,1535,715,58,58 : goto *murder_story_story_start_dai
	goto *murder_story_story_loop
return
*murder_story_story_start_dai
	print 1
	aspt2 scalex,611,200,350
	aspt2 scaley,611,200,350
	aspt2 xpos,611,960,350
	aspt2 ypos,611,540,350
	sptwait2 scaley,611
	if %BtnRes = 612 mov %get_response_value,0 : jumpf
	if %BtnRes = 613 mov %get_response_value,1 : jumpf
	if %BtnRes = 614 mov %get_response_value,2 : jumpf
	if %BtnRes = 615 mov %get_response_value,3 : jumpf
	if %BtnRes = 616 mov %get_response_value,4 : jumpf
	if %BtnRes = 617 mov %get_response_value,5 : jumpf
	~
	gosub *accept_set_choice
	flush 1
	csp_rst
return

*murder_story_story_end
	for %Free1 = 612 to 617
		spt2 xpos,%Free1,1920,300
	next
	wait 300
	print 1
	
	;csp_rst
	for %Free1 = 612 to 617
		_csp2,%Free1
	next
	
	murder_story 
	goto *get_response_murder_story

*murder_story_rules
	
	lsp 202,":a;graphics\menu\murder\murder_story_rules.png",162+1920,150
	border_pad_push 5
	lsp 201,ep8_9_rules,200+1920,180
	border_pad_pop
	print 1
	spt xpos,202,-1920,300
	spt xpos,201,-1920,300
	btndef ""
	*murder_story_rules_loop
	~
	btnwait2 %BtnRes
	if %BtnRes = 0 jumpb
	if %BtnRes = -1 spt xpos,202,1920,300 : spt xpos,201,1920,300 : sptwait xpos,202 : _csp 201,202 : murder_story : goto *get_response_murder_story
	if %BtnRes = -10 spt xpos,202,1920,300 : spt xpos,201,1920,300 : sptwait xpos,202 : _csp 201,202 : murder_story : goto *get_response_murder_story
	goto *murder_story_rules_loop
	
return
*murder_story_person
;for test
;========TEST================
;mov %scenario_Number,8
;==================================

	lsp r_txt_lsp,":a;graphics\menu\chars\chars_right.png",900+1920,150
	lsph 99,":a/2,0,3;graphics\system\wnd\uoncur.png",1740 - 480,155 - 25
	lsph 98,":a/2,0,3;graphics\system\wnd\uoffcur.png",1740 - 480,900 + 25
	mov $r_cha_back,":a;graphics\menu\murder\murder_story_person_left_bg.png"
	lsp r_hana_lsp,r_hana,1148+1920,180

	gosub *bt_ep8_def
		mov $?r[8][eva][2],":c/1,0,3;graphics\chars\chars_eva_d.png"
		mov $?r[8][hid][2],":c/1,0,3;graphics\chars\chars_hid_d.png"
		mov $?r[8][rud][2],":c/1,0,3;graphics\chars\chars_rud_d.png"
		mov $?r[8][kir][2],":c/1,0,3;graphics\chars\chars_kir_d.png"
		mov $?r[8][ros][2],":c/1,0,3;graphics\chars\chars_ros_d.png"
		mov $?r[8][gen][2],":c/1,0,3;graphics\chars\chars_gen_d.png"
		
	for %tmp = 1 to 18
		mov ?r[8][%tmp][r_ishou],1
	next
		
	for %tmp = 1 to 18 : mov ?r[8][%tmp][condition],1  :next
	
		mov %r_display_cha,kla
		mov ?r[8][KIN][condition],-1
		mov ?r[8][KLA][condition],1
		mov ?r[8][NAT][condition],1
		mov ?r[8][JES][condition],1
		mov ?r[8][EVA][condition],2
		mov ?r[8][HID][condition],2
		mov ?r[8][GEO][condition],1
		mov ?r[8][RUD][condition],2
		mov ?r[8][KIR][condition],2
		mov ?r[8][BUT][condition],1
		mov ?r[8][ROS][condition],2
		mov ?r[8][MAR][condition],1
		mov ?r[8][SHA][condition],1
		mov ?r[8][KAN][condition],1
		mov ?r[8][GEN][condition],2
		mov ?r[8][GOH][condition],1
		mov ?r[8][KUM][condition],1
		mov ?r[8][NAN][condition],1	
		mov ?r[8][EN2][condition],-1
		mov ?r[8][bea][condition],-1
	
	lsp r_cha_back_lsp,$r_cha_back,100+1920,150
		
		mov %tmp,kin_btn_lsp
		for %tmp2 = 1 to 18
			if ?r[%scenario_Number][%tmp2][condition] = -1 jumpf
				lsp %tmp,$?r[%scenario_Number][%tmp2][?r[%scenario_Number][%tmp2][condition]],?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
				spt xpos,%tmp,1920
			~
			inc %tmp
		next
	
		gosub *murder_story_person_r_cha_display
		spt xpos,r_cha_txt_lsp,1920
		
	spt xpos,r_txt_lsp,-1920,300
	spt xpos,r_hana_lsp,-1920,300
	spt xpos,r_cha_back_lsp,-1920,300
	mov %tmp,kin_btn_lsp
	for %Free1 = 1 to 18 ;167 to 184
		spt xpos,%tmp,-1920,300
		inc %tmp
	next
	spt xpos,r_cha_txt_lsp,-1920,300
	;sptwait xpos,r_txt_lsp
	flush 1
	wait 300	
	*murder_story_person_loop
		btndef ""
			if %r_display_arrow > 0 spbtn 99,99 ;up
			if %r_display_arrow > 0 spbtn 98,98 ;down
			
			if %scenario_Number = 8	mov %tmp,kin_btn_lsp : add %tmp,char_max_ep6
			mov %tmp3,1
			for %tmp2 = kin_btn_lsp to %tmp
				if ?r[%scenario_Number][%tmp3][condition] >= 1 spbtn %tmp2,%tmp2
				inc %tmp3
			next
		
		~
		btnwait2 %BtnRes
		if %BtnRes = 0 jumpb
		if %BtnRes = -1 goto *murder_story_person_end
		if %BtnRes = -10 goto *murder_story_person_end

		if %BtnRes=99 spt scroll_y,%r_display_arrow,-70,166,1 : sptwait scroll_y,%r_display_arrow	;button up
		if %BtnRes=98 spt scroll_y,%r_display_arrow,70,166,1 : sptwait scroll_y,%r_display_arrow	;button down
		
		gosub *btlp_ep5
		if %BtnRes = kla_btn_lsp notif %r_display_cha = kla : mov %r_display_cha,kla : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nat_btn_lsp notif %r_display_cha = nat : mov %r_display_cha,nat : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = jes_btn_lsp notif %r_display_cha = jes : mov %r_display_cha,jes : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = geo_btn_lsp notif %r_display_cha = geo : mov %r_display_cha,geo : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = but_btn_lsp notif %r_display_cha = but : mov %r_display_cha,but : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = mar_btn_lsp notif %r_display_cha = mar : mov %r_display_cha,mar : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = nan_btn_lsp notif %r_display_cha = nan : mov %r_display_cha,nan : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kum_btn_lsp notif %r_display_cha = kum : mov %r_display_cha,kum : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = goh_btn_lsp notif %r_display_cha = goh : mov %r_display_cha,goh : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = sha_btn_lsp notif %r_display_cha = sha : mov %r_display_cha,sha : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = kan_btn_lsp notif %r_display_cha = kan : mov %r_display_cha,kan : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
		if %BtnRes = bea_btn_lsp notif %r_display_cha = bea : mov %r_display_cha,bea : gosub *murder_story_person_r_cha_display : seplay 9,1001,100 : print 1 : mov %mchar_state,2
	goto *murder_story_person_loop
	
return
*murder_story_person_r_cha_display
	mov %r_display,0

	if %r_display_cha = kla : gosub *r_cha_kla_bernquiz
	if %r_display_cha = nat : gosub *r_cha_nat_bernquiz
	if %r_display_cha = jes : gosub *r_cha_jes_bernquiz
	if %r_display_cha = geo : gosub *r_cha_geo_bernquiz
	if %r_display_cha = but : gosub *r_cha_but_bernquiz
	if %r_display_cha = mar : gosub *r_cha_mar_bernquiz
	if %r_display_cha = nan : gosub *r_cha_nan_bernquiz
	if %r_display_cha = kum : gosub *r_cha_kum_bernquiz
	if %r_display_cha = goh : gosub *r_cha_goh_bernquiz
	if %r_display_cha = sha : gosub *r_cha_sha_bernquiz
	if %r_display_cha = kan : gosub *r_cha_kan_bernquiz

	gosub *r_cha_display_right_left
return
*murder_story_person_end
	
	spt xpos,r_txt_lsp,1920,300
	spt xpos,98,1920,300
	spt xpos,99,1920,300
	spt xpos,r_cha_back_lsp,1920,300
	spt xpos,r_hana_lsp,1920,300
	spt xpos,cha_lsp,1920,300
	spt xpos,r_cha_txt_lsp,1920,300
	mov %tmp,kin_btn_lsp
	for %Free1 = 1 to 18 ;167 to 184
		spt xpos,%tmp,1920,300
		inc %tmp
	next
	sptwait xpos,r_txt_lsp
	flush 1

	_csp -1

	murder_story
	goto *get_response_murder_story


*murder_story_chapter
	border_pad_push 5
	mov %r_display_tips,1
	mov %r_display_grim,1 ; used as a page here
	
	lsp r_cha_back_lsp,":a;graphics\menu\chars\chars_left.png",100+1920,150
	lsp r_txt_lsp,":a;graphics\menu\tips\tips_right.png",900+1920,150
	lsph 99,":a/2,0,3;graphics\system\wnd\uoncur.png",1740,155
	lsph 98,":a/2,0,3;graphics\system\wnd\uoffcur.png",1740,900

	mov %tmp,142+1920 : mov %tmp1,170

	gosub *murder_story_button_reload

	print 1
	
	spt xpos,r_cha_back_lsp,-1920,300
	spt xpos,r_txt_lsp,-1920,300
	spt xpos,97,-1920,300
	spt xpos,96,-1920,300
	for %Free1 = tips1_lsp to tips23_lsp
		spt xpos,%Free1,-1920,300
	next
	;aspt xpos,r_tips_txt_lsp,930,300
	sptwait xpos,r_cha_back_lsp
	flush 1
		
	gosub *murder_story_chapter_display
	
	*murder_story_chapter_reconfigure
		btndef ""
		if %r_display_arrow > 0 spbtn 99,99 ;up
		if %r_display_arrow > 0 spbtn 98,98 ;down
		
		notif %r_display_tips = 1 spbtn tips1_lsp,tips1_lsp
		notif %r_display_tips = 2 spbtn tips2_lsp,tips2_lsp
		notif %r_display_tips = 3 spbtn tips3_lsp,tips3_lsp
		notif %r_display_tips = 4 spbtn tips4_lsp,tips4_lsp
		notif %r_display_tips = 5 spbtn tips5_lsp,tips5_lsp
		notif %r_display_tips = 6 spbtn tips6_lsp,tips6_lsp
		notif %r_display_tips = 7 spbtn tips7_lsp,tips7_lsp

		notif %r_display_grim = 1 spbtn tips11_lsp,tips11_lsp
		notif %r_display_grim = 2 spbtn tips12_lsp,tips12_lsp
		notif %r_display_grim = 3 spbtn tips13_lsp,tips13_lsp
		notif %r_display_grim = 4 spbtn tips14_lsp,tips14_lsp
		notif %r_display_grim = 5 spbtn tips15_lsp,tips15_lsp
		notif %r_display_grim = 6 spbtn tips16_lsp,tips16_lsp

	*murder_story_chapter_loop
		~
		btnwait2 %BtnRes
		if %BtnRes = 0 jumpb
		if %BtnRes = -1 goto *murder_story_chapter_end
		if %BtnRes = -10 goto *murder_story_chapter_end

		if %BtnRes=99 spt scroll_y,%r_display_arrow,-70,166,1 : sptwait scroll_y,%r_display_arrow	;button up
		if %BtnRes=98 spt scroll_y,%r_display_arrow,70,166,1 : sptwait scroll_y,%r_display_arrow	;button down
		
		mov %tmp2,1
		for %tmp = tips1_lsp to tips7_lsp
			notif %BtnRes = %tmp jumpf
				mov %r_display_tips,%tmp2
				gosub *murder_story_chapter_display
				break
			~
			inc %tmp2
		next

		mov %tmp2,1
		for %tmp = tips11_lsp to tips16_lsp
			notif %BtnRes = %tmp jumpf
				mov %r_display_grim,%tmp2
				mov %r_display_tips,1
				mov %tmp,142 : mov %tmp1,170
				gosub *murder_story_button_reload
				gosub *murder_story_chapter_display
				print 1
				break
			~
			inc %tmp2
		next

	goto *murder_story_chapter_reconfigure
return
*murder_story_chapter_end
	border_pad_pop
	
	spt xpos,r_cha_back_lsp,1920,300
	spt xpos,r_txt_lsp,1920,300
	spt xpos,97,1920,300
	spt xpos,96,1920,300
	for %Free1 = tips1_lsp to tips23_lsp
		spt xpos,%Free1,1920,300
	next
	spt xpos,r_tips_txt_lsp,1920,300
	spt xpos,99,1920,300
	spt xpos,98,1920,300
	sptwait xpos,r_cha_back_lsp
	flush 1
	
	_csp -1
	
	murder_story 
	goto *get_response_murder_story

*murder_story_button_reload
	_csp tips1_lsp,tips7_lsp

	if %r_display_grim != 1 jumpf
		lsp tips9_lsp,ep8_9_page_1 ,%tmp,%tmp1 : add %tmp1,40
		lsp tips10_lsp,":s;#FFFFFF#FFFFFF`{w:645:}{p:13:{m:-5:—————————————}}",%tmp,%tmp1 : add %tmp1,54

		lsp tips1_lsp,ep8_9_page_1_1,%tmp,%tmp1 : add %tmp1,64
		lsp tips2_lsp,ep8_9_page_1_2,%tmp,%tmp1 : add %tmp1,64
		lsp tips3_lsp,ep8_9_page_1_3,%tmp,%tmp1 : add %tmp1,64
		lsp tips4_lsp,ep8_9_page_1_4,%tmp,%tmp1 : add %tmp1,64
		lsp tips5_lsp,ep8_9_page_1_5,%tmp,%tmp1 : add %tmp1,64
	~

	if %r_display_grim != 2 jumpf
		lsp tips9_lsp,ep8_9_page_2 ,%tmp,%tmp1 : add %tmp1,40
		lsp tips10_lsp,":s;#FFFFFF#FFFFFF`{w:645:}{p:13:{m:-5:—————————————}}",%tmp,%tmp1 : add %tmp1,54

		lsp tips1_lsp,ep8_9_page_2_1,%tmp,%tmp1 : add %tmp1,64
		lsp tips2_lsp,ep8_9_page_2_2,%tmp,%tmp1 : add %tmp1,64
		lsp tips3_lsp,ep8_9_page_2_3,%tmp,%tmp1 : add %tmp1,64
		lsp tips4_lsp,ep8_9_page_2_4,%tmp,%tmp1 : add %tmp1,64
		lsp tips5_lsp,ep8_9_page_2_5,%tmp,%tmp1 : add %tmp1,64
		lsp tips6_lsp,ep8_9_page_2_6,%tmp,%tmp1 : add %tmp1,64
		lsp tips7_lsp,ep8_9_page_2_7,%tmp,%tmp1 : add %tmp1,64
	~

	if %r_display_grim != 3 jumpf
		lsp tips9_lsp,ep8_9_page_3 ,%tmp,%tmp1 : add %tmp1,40
		lsp tips10_lsp,":s;#FFFFFF#FFFFFF`{w:645:}{p:13:{m:-5:—————————————}}",%tmp,%tmp1 : add %tmp1,54

		lsp tips1_lsp,ep8_9_page_3_1,%tmp,%tmp1 : add %tmp1,64
		lsp tips2_lsp,ep8_9_page_3_2,%tmp,%tmp1 : add %tmp1,64
		lsp tips3_lsp,ep8_9_page_3_3,%tmp,%tmp1 : add %tmp1,64
		lsp tips4_lsp,ep8_9_page_3_4,%tmp,%tmp1 : add %tmp1,64
	~

	if %r_display_grim != 4 jumpf
		lsp tips9_lsp,ep8_9_page_4 ,%tmp,%tmp1 : add %tmp1,40
		lsp tips10_lsp,":s;#FFFFFF#FFFFFF`{w:645:}{p:13:{m:-5:—————————————}}",%tmp,%tmp1 : add %tmp1,54

		lsp tips1_lsp,ep8_9_page_4_1,%tmp,%tmp1 : add %tmp1,64
		lsp tips2_lsp,ep8_9_page_4_2,%tmp,%tmp1 : add %tmp1,64
		lsp tips3_lsp,ep8_9_page_4_3,%tmp,%tmp1 : add %tmp1,64
	~

	if %r_display_grim != 5 jumpf
		lsp tips9_lsp,ep8_9_page_5 ,%tmp,%tmp1 : add %tmp1,40
		lsp tips10_lsp,":s;#FFFFFF#FFFFFF`{w:645:}{p:13:{m:-5:—————————————}}",%tmp,%tmp1 : add %tmp1,54

		lsp tips1_lsp,ep8_9_page_5_1,%tmp,%tmp1 : add %tmp1,64
		lsp tips2_lsp,ep8_9_page_5_2,%tmp,%tmp1 : add %tmp1,64
	~

	if %r_display_grim != 6 jumpf
		lsp tips9_lsp,ep8_9_page_6 ,%tmp,%tmp1 : add %tmp1,40
		lsp tips10_lsp,":s;#FFFFFF#FFFFFF`{w:645:}{p:13:{m:-5:—————————————}}",%tmp,%tmp1 : add %tmp1,54

		lsp tips1_lsp,ep8_9_page_6_1,%tmp,%tmp1 : add %tmp1,64
		lsp tips2_lsp,ep8_9_page_6_2,%tmp,%tmp1 : add %tmp1,64
	~

	mov %tmp1,855
	lsp tips11_lsp,":s;#C7C7C7#FFFFFF`{p:13:I}",%tmp,%tmp1 : getspsize tips11_lsp,%tmp2,%tmp3 : add %tmp,%tmp2+30
	lsp tips12_lsp,":s;#C7C7C7#FFFFFF`{p:13:II}",%tmp,%tmp1 : getspsize tips12_lsp,%tmp2,%tmp3 : add %tmp,%tmp2+30
	lsp tips13_lsp,":s;#C7C7C7#FFFFFF`{p:13:IV}",%tmp,%tmp1 : getspsize tips13_lsp,%tmp2,%tmp3 : add %tmp,%tmp2+30
	lsp tips14_lsp,":s;#C7C7C7#FFFFFF`{p:13:V+VI}",%tmp,%tmp1 : getspsize tips14_lsp,%tmp2,%tmp3 : add %tmp,%tmp2+30
	lsp tips15_lsp,":s;#C7C7C7#FFFFFF`{p:13:VII}",%tmp,%tmp1 : getspsize tips15_lsp,%tmp2,%tmp3 : add %tmp,%tmp2+30
	lsp tips16_lsp,":s;#C7C7C7#FFFFFF`{p:13:VIII}",%tmp,%tmp1 : getspsize tips16_lsp,%tmp2,%tmp3 : add %tmp,%tmp2+30
return

*murder_story_chapter_display		
	mov %tmp,r_top_y : add %tmp,820

	if %r_display_grim != 1 jumpf
		cell tips11_lsp,1
		if %r_display_tips = 1 cell tips1_lsp,1 : mov $r_tips_txt_path,ep8_9_page_1_1_t : jumpf
		if %r_display_tips = 2 cell tips2_lsp,1 : mov $r_tips_txt_path,ep8_9_page_1_2_t : jumpf
		if %r_display_tips = 3 cell tips3_lsp,1 : mov $r_tips_txt_path,ep8_9_page_1_3_t : jumpf
		if %r_display_tips = 4 cell tips4_lsp,1 : mov $r_tips_txt_path,ep8_9_page_1_4_t : jumpf
		if %r_display_tips = 5 cell tips5_lsp,1 : mov $r_tips_txt_path,ep8_9_page_1_5_t : jumpf
	~
	if %r_display_grim != 2 jumpf
		cell tips12_lsp,1
		if %r_display_tips = 1 cell tips1_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_1_t : jumpf
		if %r_display_tips = 2 cell tips2_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_2_t : jumpf
		if %r_display_tips = 3 cell tips3_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_3_t : jumpf
		if %r_display_tips = 4 cell tips4_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_4_t : jumpf
		if %r_display_tips = 5 cell tips5_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_5_t : jumpf
		if %r_display_tips = 6 cell tips6_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_6_t : jumpf
		if %r_display_tips = 7 cell tips7_lsp,1 : mov $r_tips_txt_path,ep8_9_page_2_7_t : jumpf
	~
	if %r_display_grim != 3 jumpf
		cell tips13_lsp,1
		if %r_display_tips = 1 cell tips1_lsp,1 : mov $r_tips_txt_path,ep8_9_page_3_1_t : jumpf
		if %r_display_tips = 2 cell tips2_lsp,1 : mov $r_tips_txt_path,ep8_9_page_3_2_t : jumpf
		if %r_display_tips = 3 cell tips3_lsp,1 : mov $r_tips_txt_path,ep8_9_page_3_3_t : jumpf
		if %r_display_tips = 4 cell tips4_lsp,1 : mov $r_tips_txt_path,ep8_9_page_3_4_t : jumpf
	~
	if %r_display_grim != 4 jumpf
		cell tips14_lsp,1
		if %r_display_tips = 1 cell tips1_lsp,1 : mov $r_tips_txt_path,ep8_9_page_4_1_t : jumpf
		if %r_display_tips = 2 cell tips2_lsp,1 : mov $r_tips_txt_path,ep8_9_page_4_2_t : jumpf
		if %r_display_tips = 3 cell tips3_lsp,1 : mov $r_tips_txt_path,ep8_9_page_4_3_t : jumpf
	~
	if %r_display_grim != 5 jumpf
		cell tips15_lsp,1
		if %r_display_tips = 1 cell tips1_lsp,1 : mov $r_tips_txt_path,ep8_9_page_5_1_t : jumpf
		if %r_display_tips = 2 cell tips2_lsp,1 : mov $r_tips_txt_path,ep8_9_page_5_2_t : jumpf
	~
	if %r_display_grim != 6 jumpf
		cell tips16_lsp,1
		if %r_display_tips = 1 cell tips1_lsp,1 : mov $r_tips_txt_path,ep8_9_page_6_1_t : jumpf
		if %r_display_tips = 2 cell tips2_lsp,1 : mov $r_tips_txt_path,ep8_9_page_6_2_t : jumpf
	~

	lsp r_tips_txt_lsp,$r_tips_txt_path,930,170
	aspt scroll_h,r_tips_txt_lsp,728
	vsp 99,0 : vsp 98,0 : mov %r_display_arrow,0 ;disable the arrows
	scroll_exceeds %r_display_arrow,r_tips_txt_lsp
	if %r_display_arrow = 1 vsp 99,1 : vsp 98,1 : mov %r_display_arrow,r_tips_txt_lsp
	seplay 9,1010,100
	print 1
return


*murder_story_hints
	;mov %play_scene,80320 ;TEST
	lsp 222,":a;graphics\menu\murder\murder_story_rules.png",166+1920,150
	lsp 221,":a;graphics\menu\logview\bar.png",1632+1920,242
	lsp 220,":a;graphics\menu\logview\sel.png",1632+1920,255
	lsp 219,":a/2,0,3;graphics\system\wnd\uoncur.png",1627+1920,210
	lsp 218,":a/2,0,3;graphics\system\wnd\uoffcur.png",1627+1920,839

	tree_clear 7
  if %bern_hints_taken = 0 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown ;change 0 to 80110
  if %bern_hints_taken >= 1 tree_seta %Free1,7,"auto","text",ep8_9_hint_1
  if %bern_hints_taken = 1 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 2 tree_seta %Free1,7,"auto","text",ep8_9_hint_2
  if %bern_hints_taken = 2 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 3 tree_seta %Free1,7,"auto","text",ep8_9_hint_3 
  if %bern_hints_taken = 3 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 4 tree_seta %Free1,7,"auto","text",ep8_9_hint_4 
  if %bern_hints_taken = 4 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 5 tree_seta %Free1,7,"auto","text",ep8_9_hint_5 
  if %bern_hints_taken = 5 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 6 tree_seta %Free1,7,"auto","text",ep8_9_hint_6 
  if %bern_hints_taken = 6 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 7 tree_seta %Free1,7,"auto","text",ep8_9_hint_7 
  if %bern_hints_taken = 7 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 8 tree_seta %Free1,7,"auto","text",ep8_9_hint_8 
  if %bern_hints_taken = 8 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 9 tree_seta %Free1,7,"auto","text",ep8_9_hint_9 
  if %bern_hints_taken = 9 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 10 tree_seta %Free1,7,"auto","text",ep8_9_hint_10
  if %bern_hints_taken = 10 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 11 tree_seta %Free1,7,"auto","text",ep8_9_hint_11
  if %bern_hints_taken = 11 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 12 tree_seta %Free1,7,"auto","text",ep8_9_hint_12
  if %bern_hints_taken = 12 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 13 tree_seta %Free1,7,"auto","text",ep8_9_hint_13
  if %bern_hints_taken = 13 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 14 tree_seta %Free1,7,"auto","text",ep8_9_hint_14
  if %bern_hints_taken = 14 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 15 tree_seta %Free1,7,"auto","text",ep8_9_hint_15
  if %bern_hints_taken = 15 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 16 tree_seta %Free1,7,"auto","text",ep8_9_hint_16
  if %bern_hints_taken = 16 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 17 tree_seta %Free1,7,"auto","text",ep8_9_hint_17
  if %bern_hints_taken = 17 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 18 tree_seta %Free1,7,"auto","text",ep8_9_hint_18
  if %bern_hints_taken = 18 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 19 tree_seta %Free1,7,"auto","text",ep8_9_hint_19
  if %bern_hints_taken = 19 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 20 tree_seta %Free1,7,"auto","text",ep8_9_hint_20
  if %bern_hints_taken = 20 tree_seta %Free1,7,"auto","text",ep8_9_hint_unknown
  if %bern_hints_taken >= 21 tree_seta %Free1,7,"auto","text",ep8_9_hint_21

	scrollable 95,7,200+1920,180,1500,730
	scrollable_cfg elemheight,95,60
	scrollable_cfg elemwidth,95,1500
	scrollable_cfg textmarginwidth,95,10
	scrollable_cfg textmargintop,95,10
	scrollable_cfg scrollbar,95,220,255,785
	scrollable_cfg tightfit,95,2 ;top only
	scrollable_cfg hovertext,95,#FFFFFF,1
	scrollable_cfg normaltext,95,#999999,0
	scrollable_display 95
	snaplog 95
	print 1
	spt xpos,218,-1920,300
	spt xpos,219,-1920,300
	spt xpos,220,-1920,300
	spt xpos,221,-1920,300
	spt xpos,222,-1920,300
	spt xpos,95,-1920,300
	sptwait xpos,95
	print 1
	
	btndef ""
	*murder_story_hints_loop

	spbtn 219,219
	spbtn 218,218
	btnwait2 %BtnRes
	if %BtnRes = -1  goto *murder_story_hints_end
	if %BtnRes = -10 goto *murder_story_hints_end
	if %BtnRes = -81 goto *murder_story_hints_end
	if %BtnRes = 219 scrollable_scroll 95,-1 ;button up
	if %BtnRes = 218 scrollable_scroll 95,1  ;button down
	if %BtnRes = -80 scrollable_get_hovered_elem %Free1,95 : mov %get_response_value,6+%Free1 : gosub *accept_set_choice : csp_rst : flush 1 : return

	goto *murder_story_hints_loop
	
return
*murder_story_hints_end
	spt xpos,218,1920,300
	spt xpos,219,1920,300
	spt xpos,220,1920,300
	spt xpos,221,1920,300
	spt xpos,222,1920,300
	spt xpos,95,1920,300
	sptwait xpos,95
	flush 1
	_csp -1
	murder_story 
	goto *get_response_murder_story

*murder_story_answer

;mov %scenario_Number,8 ;TEST

	mov %tmp4,0
	mov %tmp10,2400

	for %tmp11 = 1 to char_max_ep6
		for %tmp12 = 0 to 6
			mov ?r[8][%tmp11][%tmp12],%tmp10 : inc %tmp10
		next
	next
	mov $?r[8][kla][1],":c/1,0,3;graphics\chars\chars_kla0_s.png"
	mov $?r[8][nat][1],":c/1,0,3;graphics\chars\chars_nat0_s.png"
	mov $?r[8][jes][1],":c/1,0,3;graphics\chars\chars_jes0_s.png"
	mov $?r[8][eva][1],":c/1,0,3;graphics\chars\chars_eva0_s.png"
	mov $?r[8][hid][1],":c/1,0,3;graphics\chars\chars_hid0_s.png"
	mov $?r[8][geo][1],":c/1,0,3;graphics\chars\chars_geo0_s.png"
	mov $?r[8][rud][1],":c/1,0,3;graphics\chars\chars_rud0_s.png"
	mov $?r[8][kir][1],":c/1,0,3;graphics\chars\chars_kir0_s.png"
	mov $?r[8][but][1],":c/1,0,3;graphics\chars\chars_but0_s.png"
	mov $?r[8][ros][1],":c/1,0,3;graphics\chars\chars_ros0_s.png"
	mov $?r[8][mar][1],":c/1,0,3;graphics\chars\chars_mar0_s.png"
	mov $?r[8][nan][1],":c/1,0,3;graphics\chars\chars_nan0_s.png"
	mov $?r[8][gen][1],":c/1,0,3;graphics\chars\chars_gen0_s.png"
	mov $?r[8][kum][1],":c/1,0,3;graphics\chars\chars_kum0_s.png"
	mov $?r[8][goh][1],":c/1,0,3;graphics\chars\chars_goh0_s.png"
	mov $?r[8][sha][1],":c/1,0,3;graphics\chars\chars_sha0_s.png"
	mov $?r[8][kan][1],":c/1,0,3;graphics\chars\chars_kan0_s.png"
	
	mov ?r[8][kla][itiran_x],416 : mov ?r[8][kla][itiran_y],223
	mov ?r[8][nat][itiran_x],534 : mov ?r[8][nat][itiran_y],223
	mov ?r[8][jes][itiran_x],652 : mov ?r[8][jes][itiran_y],223	
	mov ?r[8][eva][itiran_x],416 : mov ?r[8][eva][itiran_y],362
	mov ?r[8][hid][itiran_x],534 : mov ?r[8][hid][itiran_y],362
	mov ?r[8][geo][itiran_x],652 : mov ?r[8][geo][itiran_y],362	
	mov ?r[8][rud][itiran_x],416 : mov ?r[8][rud][itiran_y],501
	mov ?r[8][kir][itiran_x],534 : mov ?r[8][kir][itiran_y],501
	mov ?r[8][but][itiran_x],652 : mov ?r[8][but][itiran_y],501	
	mov ?r[8][nan][itiran_x],298 : mov ?r[8][nan][itiran_y],640
	mov ?r[8][ros][itiran_x],416 : mov ?r[8][ros][itiran_y],640
	mov ?r[8][mar][itiran_x],652 : mov ?r[8][mar][itiran_y],640	
	mov ?r[8][gen][itiran_x],298 : mov ?r[8][gen][itiran_y],779
	mov ?r[8][sha][itiran_x],416 : mov ?r[8][sha][itiran_y],779
	mov ?r[8][kan][itiran_x],534 : mov ?r[8][kan][itiran_y],779
	mov ?r[8][goh][itiran_x],652 : mov ?r[8][goh][itiran_y],779
	mov ?r[8][kum][itiran_x],770 : mov ?r[8][kum][itiran_y],779

	
	for %tmp = 1 to 18
		mov ?r[8][%tmp][r_ishou],1
	next
	for %tmp = 1 to 18 : mov ?r[8][%tmp][condition],1  :next
	mov ?r[8][KIN][condition],-1
	mov ?r[8][KLA][condition],1
	mov ?r[8][NAT][condition],1
	mov ?r[8][JES][condition],1
	mov ?r[8][EVA][condition],1
	mov ?r[8][HID][condition],1
	mov ?r[8][GEO][condition],1
	mov ?r[8][RUD][condition],1
	mov ?r[8][KIR][condition],1
	mov ?r[8][BUT][condition],1
	mov ?r[8][ROS][condition],1
	mov ?r[8][MAR][condition],1
	mov ?r[8][SHA][condition],1
	mov ?r[8][KAN][condition],1
	mov ?r[8][GEN][condition],1
	mov ?r[8][GOH][condition],1
	mov ?r[8][KUM][condition],1
	mov ?r[8][NAN][condition],1	
	mov ?r[8][EN2][condition],-1
	mov ?r[8][bea][condition],-1
	
	lsp r_cha_back_lsp,":a;graphics\menu\murder\murder_story_answer_left_bg.png",200,150
	getspsize r_cha_back_lsp,%Free1,%Free2
	border_pad_push 5
	lsp 201,ep8_9_criminal,%Free1/2+200,criminal_header_y		;犯人を選択してください
	lsp 202,ep8_9_criminal_2,%Free1/2+200,criminal_button_y	;犯人特定
	border_pad_pop
	getspsize 201,%Free1,%Free2 : spt xpos,201,-%Free1/2
	getspsize 202,%Free1,%Free2 : spt xpos,202,-%Free1/2
	
	mov %tmp,kin_btn_lsp
		for %tmp2 = 1 to 18
			if ?r[%scenario_Number][%tmp2][condition] = -1 jumpf
				lsp %tmp,$?r[%scenario_Number][%tmp2][?r[%scenario_Number][%tmp2][condition]],?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
				;lsph %tmp-50,":a;graphics\chars\chars_select.png",?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]
			~
			inc %tmp
		next
		
	lsp 200,":a;sprites\but\1\but_b11_majime3.png",1030,5
	lbg s0_4,"different_space_1a"
	flush 42
		
	btndef ""
	spbtn 202,202
	if %scenario_Number = 8	mov %tmp,kin_btn_lsp : add %tmp,char_max_ep6
			mov %tmp3,1
			for %tmp2 = kin_btn_lsp to %tmp
				if ?r[%scenario_Number][%tmp3][condition] >= 1 spbtn %tmp2,%tmp2				
				inc %tmp3
			next
	*murder_story_answer_loop
	~
	btnwait2 %BtnRes
	if %BtnRes = 0 jumpb
	if %BtnRes = -1 goto *murder_story_answer_end
	if %BtnRes = -10 goto *murder_story_answer_end
	;if %BtnRes = 100 gosub *murder_story_answer_deselect
	mov %tmp,kin_btn_lsp
	for %tmp2 = 1 to 18
		if %BtnRes = %tmp-50 gosub *murder_story_answer_deselect
		if %BtnRes = %tmp gosub *murder_story_answer_select
		inc %tmp
	next
	
	if %BtnRes = 202 goto *murder_story_answer_reply
	
	goto *murder_story_answer_loop
	;answer rud(2 ^ 8)+kir(2 ^ 9)+but(2 ^ 10)=1792
return
*murder_story_answer_reply
	mov $Free1,":a;sprites\but\1\but_b25_futeki3.png"
	lsp 200,$Free1,935,10
	flush 1
	if %tmp4 = 1792 mov %get_response_value,27 : jumpf
	wait 1000
	mov $Free1,":a;sprites\but\1\but_b25_komaru1.png"
	lsp 200,$Free1,935,10
	seplay 1,37,71
	flush 1
	if %bern_hints_taken = 0 mov %get_response_value,6 : jumpf
	if %bern_hints_taken = 1 mov %get_response_value,7 : jumpf
	if %bern_hints_taken = 2 mov %get_response_value,8 : jumpf
	if %bern_hints_taken = 3 mov %get_response_value,9 : jumpf
	if %bern_hints_taken = 4 mov %get_response_value,10 : jumpf
	if %bern_hints_taken = 5 mov %get_response_value,11 : jumpf
	if %bern_hints_taken = 6 mov %get_response_value,12 : jumpf
	if %bern_hints_taken = 7 mov %get_response_value,13 : jumpf
	if %bern_hints_taken = 8 mov %get_response_value,14 : jumpf
	if %bern_hints_taken = 9 mov %get_response_value,15 : jumpf
	if %bern_hints_taken = 10 mov %get_response_value,16 : jumpf
	if %bern_hints_taken = 11 mov %get_response_value,17 : jumpf
	if %bern_hints_taken = 12 mov %get_response_value,18 : jumpf
	if %bern_hints_taken = 13 mov %get_response_value,19 : jumpf
	if %bern_hints_taken = 14 mov %get_response_value,20 : jumpf
	if %bern_hints_taken = 15 mov %get_response_value,21 : jumpf
	if %bern_hints_taken = 16 mov %get_response_value,22 : jumpf
	if %bern_hints_taken = 17 mov %get_response_value,23 : jumpf
	if %bern_hints_taken = 18 mov %get_response_value,24 : jumpf
	if %bern_hints_taken = 19 mov %get_response_value,25 : jumpf
	if %bern_hints_taken = 20 mov %get_response_value,26 : jumpf
	; Previously unhandled case? What happens if you view all the hints and still get it wrong? I think the last hint should play again even though you already saw it.
	if %bern_hints_taken = 21 mov %get_response_value,26 : jumpf
	~
	gosub *accept_set_choice
	csp_rst
	
	if %get_response_value != 27 jumpf
	lbg s0_4,"different_space_1a"
	lsp s0_8,$Free1,935,10
	~
return

*murder_story_answer_select
	mov %tmp,kin_btn_lsp
	mov %Free1,2
		for %tmp2 = 1 to 18
			if %BtnRes != %tmp jumpf
				lsp %tmp-50,":a;graphics\chars\chars_select.png",?r[%scenario_Number][%tmp2][itiran_x],?r[%scenario_Number][%tmp2][itiran_y]				
				;debug_var %tmp,"selecting value"
				add %tmp4,%Free1
				;debug_var %tmp4,"current value"
				spbtn %tmp-50,%tmp-50 ;117,117
			~
			inc %tmp
			mul %Free1,2 ;Free1 = 2 ^ (%tmp2) (next iteration)
		next
	mov %Free1,0
return
*murder_story_answer_deselect
	mov %tmp,kin_btn_lsp
	mov %Free1,2
		for %tmp2 = 1 to 18
			if %BtnRes != %tmp-50 jumpf			
				_csp %tmp-50
				;debug_var %tmp,"deselecting value"
				sub %tmp4,%Free1
				;debug_var %tmp4,"current value"
			~
			inc %tmp
			mul %Free1,2 ;Free1 = 2 ^ (%tmp2) (next iteration)
		next
	mov %Free1,0
return

*murder_story_answer_end
	csp_slot s0_4
	_csp -1
	murder_story 
	goto *get_response_murder_story

*accept_set_choice
	jnskip_s
		; Retrieve the choice previously selected by the user and store it in get_response_value (since we superskipped past the quiz/cake/etc. command that would ordinarily have set it).
		accept_choice %get_response_value
	~
	jskip_s
		; Set the choice to the response value returned from the prior quiz/cake/etc. command.
		set_choice %get_response_value
	~
return

*all_presents_discarded
	getparam %Free1

	add %Free1,presents_discarded_0
	mov %%Free1,1

	for %Free1 = presents_discarded_0 to presents_discarded_17
		if %%Free1 == 0 break
		if %Free1 == presents_discarded_17 trophy_open 29
	next
return

#locale_import "code.txt"
